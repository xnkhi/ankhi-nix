import{d as fe,t as k,i as s,c as b,s as h,a as v,b as C,o as xe,e as g,f as l,S,F as Ot,g as O,h as Et,j as u,M as Ut,E as Dt,C as Mt,k as Ft,l as Wt,m as Nt,R as Ve,n as Je,B as jt,p as Qe,q as V,r as He,u as q,v as Ht,$ as X,w as zt,x as qe,y as Me,z as W,A as p,D as ee,G as Ie,H as Ze,I as pe,P as Fe,J as We,K as et,L as tt,N as Te,O as _e,Q as Re,T as ze,U as P,V as Gt,W as Kt,X as Vt,Y as nt,Z as qt,_ as Xt,a0 as z,a1 as F,a2 as Yt,a3 as Jt,a4 as de,a5 as Qt,a6 as Zt,a7 as Ce,a8 as rt,a9 as it,aa as lt,ab as pt,ac as at,ad as M,ae as ot,af as ct,ag as en,ah as Xe,ai as tn,aj as Ne,ak as nn,al as rn,am as ln,an as Pe,ao as Be,ap as an,aq as on,ar as cn,as as sn,at as un,au as dn,av as st,aw as ke,ax as ut,ay as dt,az as gt,aA as he,aB as gn,aC as vt,aD as $t,aE as vn,aF as $n,aG as bn,aH as fn}from"./context-menu-Dl5HivVs.js";const _n=k('<svg width=0 height=0><clipPath clipPathUnits=objectBoundingBox><path d="M 0, 0.5 C 0, 0.03 0.03, 0 0.5, 0 S 1, 0.03 1, 0.5 0.97, 1 0.5, 1 0, 0.97 0, 0.5">'),hn=k("<a>");function bt(e){return(()=>{const t=_n(),n=t.firstChild;return b(()=>h(n,"id",e.id)),t})()}function R(){return CSS.supports("-webkit-touch-callout","none")}async function mn(e){try{const t=await O.tabs.query({active:!0});O.tabs.create({url:e,index:t[0].index+1})}catch{O.tabs.create({url:e})}}function K(e){return(()=>{const t=hn();return t.$$click=n=>{n.preventDefault(),mn(e.href)},s(t,()=>e.children),b(n=>{const r=e.href,i=e.title,o=e.title,c=e.class;return r!==n._v$&&h(t,"href",n._v$=r),i!==n._v$2&&h(t,"title",n._v$2=i),o!==n._v$3&&h(t,"aria-label",n._v$3=o),c!==n._v$4&&v(t,n._v$4=c),n},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})()}const kn=/<a.*?href="([^"]+)".*?>([^<]+)<\/a>/;function ft(e){const[t,n]=C([]);return xe(()=>{let r=g(e.messageName,e.substitutions);const i=5;let o=0;for(;r&&(o++,!(o>i));){const c=r.match(kn);if(!c){n(_=>[..._,r]);break}const[a,d,f]=c;n(_=>[..._,r.slice(0,c.index),[d,f]]),r=r.slice((c.index??0)+a.length)}}),l(Ot,{get each(){return t()},children:r=>l(S,{when:typeof r!="string",fallback:r,get children(){return l(K,{get href(){return r[0]},get children(){return r[1]}})}})})}fe(["click"]);const yn=k("<div><h1></h1><p></p><p></p><p><span> ");function Sn(){return(()=>{const e=yn(),t=e.firstChild,n=t.nextSibling,r=n.nextSibling,i=r.nextSibling,o=i.firstChild,c=o.firstChild;return s(e,l(Et,{get class(){return u.bigIcon}}),t),s(t,()=>g("unsupportedWebsiteHeader")),s(n,()=>g("unsupportedWebsiteDesc")),s(r,()=>g("unsupportedWebsiteUpdateNote")),s(o,()=>g("unsupportedWebsiteDesc2"),c),s(i,l(K,{href:"https://cloud.google.com/docs/chrome-enterprise/policies/?policy=ExtensionSettings",get children(){return g("learnMoreLabel")}}),null),b(()=>v(e,u.alertPopup)),e})()}const wn=k("<div><h1></h1><details><summary></summary><p></p><p>");function _t(){return(()=>{const e=wn(),t=e.firstChild,n=t.nextSibling,r=n.firstChild,i=r.nextSibling,o=i.nextSibling;return s(e,l(Ut,{get class(){return u.bigIcon}}),t),s(t,()=>g("getStartedHeader")),s(r,l(Dt,{get class(){return u.expandVector}}),null),s(r,()=>g("getStartedSubheader"),null),s(i,()=>g("getStartedSiteChanged")),s(o,l(ft,{messageName:"getStartedSubmitIssue"})),b(c=>{const a=u.alertPopup,d=u.alreadyPlaying;return a!==c._v$&&v(e,c._v$=a),d!==c._v$2&&v(n,c._v$2=d),c},{_v$:void 0,_v$2:void 0}),e})()}class An extends Mt{async loadSongInfo(t){const n=await this.getRegexEditStorage();if(n)for(let r=n.length-1;r>=0;r--)Ft(n[r],t)&&Wt(n[r],t)}async saveRegexEdit(t){t.search={...t.search},t.replace={...t.replace};const n=await this.getRegexEditStorage();if(n===null){await this.saveRegexEditToStorage([t]);return}const r=[...n,t];await this.saveRegexEditToStorage(r)}async deleteRegexEdit(t){const n=await this.getRegexEditStorage();n!==null&&(n.splice(t,1),await this.saveRegexEditToStorage(n))}}class xn extends An{regexEditStorage=this.getStorage();init(){this._init(Nt(Ve))}async getRegexEditStorage(){return this.regexEditStorage.get()}async saveRegexEditToStorage(t){return await this.regexEditStorage.set(t)}getStorage(){return Je(Ve)}}const In=new xn;class Tn{storage=Je(jt);isReady;constructor(){this.isReady=this.init()}async setupDefaultBlocklist(){let t=await this.storage.getLocking();t||(t={}),await this.storage.setLocking(t)}async init(){return await this.setupDefaultBlocklist(),!0}async addToBlocklist(t,n){if(!n)return;await this.isReady;const r=await this.storage.getLocking(),i=n.getArtist(),o=n.getTrack();if(!r||!i||!o){this.storage.unlock();return}switch(r[i]||(r[i]={tracks:{},albums:{}}),t){case"artist":{r[i].disabled=!0;break}case"album":{const c=n.getAlbum(),a=n.getAlbumArtist()||i;if(!c){this.storage.unlock();return}r[a]||(r[a]={tracks:{},albums:{}}),r[a].albums[c]=!0;break}case"track":{r[i].tracks[o]=!0;break}}await this.storage.setLocking(r)}async removeFromBlocklist(t,n){if(!n)return;const r=n.getArtist(),i=n.getTrack();if(!r||!i)return;const o=await this.storage.getLocking();if(!o){this.storage.unlock();return}switch(t){case"artist":{delete o[r]?.disabled;break}case"album":{const c=n.getAlbumArtist()||r,a=n.getAlbum();if(!a)return;delete o[c]?.albums[a];break}case"track":{delete o[r]?.tracks[i];break}}await this.storage.setLocking(o)}async getBlockedTypes(t){const n={artist:!1,album:!1,track:!1};if(!t)return n;await this.isReady;const r=await this.storage.get(),i=t.getArtist(),o=t.getTrack();if(!r||!i||!r[i]||!o)return n;r[i].disabled&&(n.artist=!0),r[i].tracks[o]&&(n.track=!0);const c=t.getAlbumArtist()||i,a=t.getAlbum();return!a||!r[c]?.albums[a]||(n.album=!0),n}async hasBlockedTag(t){const n=await this.getBlockedTypes(t);return n.artist||n.album||n.track}}const Rn=k("<div><h1></h1><p>");function Cn(){return(()=>{const e=Rn(),t=e.firstChild,n=t.nextSibling;return s(e,l(Qe,{get class(){return u.bigIcon}}),t),s(t,()=>g("disabledSiteHeader")),s(n,()=>g("disabledSiteDesc")),s(e,l(K,{get href(){return O.runtime.getURL("src/ui/options/index.html?p=connectors")},get class(){return`${q.button} ${q.centered}`},get children(){return[l(He,{}),V(()=>g("disabledSiteButton"))]}}),null),b(()=>v(e,u.alertPopup)),e})()}const Pn=k("<div><h1></h1><p>");function Bn(){return(()=>{const e=Pn(),t=e.firstChild,n=t.nextSibling;return s(e,l(Ht,{get class(){return u.bigIcon}}),t),s(t,()=>g("serviceErrorHeader")),s(n,l(ft,{messageName:"serviceErrorDesc"})),s(e,l(K,{get href(){return O.runtime.getURL("src/ui/options/index.html?p=accounts")},get class(){return`${q.button} ${q.centered}`},get children(){return[l(He,{}),V(()=>g("disabledSiteButton"))]}}),null),b(()=>v(e,u.alertPopup)),e})()}const Ln=k('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 512 512"width=512 height=512><path d="M225.8 367.1l-18.8-51s-30.5 34-76.2 34c-40.5 0-69.2-35.2-69.2-91.5 0-72.1 36.4-97.9 72.1-97.9 66.5 0 74.8 53.3 100.9 134.9 18.8 56.9 54 102.6 155.4 102.6 72.7 0 122-22.3 122-80.9 0-72.9-62.7-80.6-115-92.1-25.8-5.9-33.4-16.4-33.4-34 0-19.9 15.8-31.7 41.6-31.7 28.2 0 43.4 10.6 45.7 35.8l58.6-7c-4.7-52.8-41.1-74.5-100.9-74.5-52.8 0-104.4 19.9-104.4 83.9 0 39.9 19.4 65.1 68 76.8 44.9 10.6 79.8 13.8 79.8 45.7 0 21.7-21.1 30.5-61 30.5-59.2 0-83.9-31.1-97.9-73.9-32-96.8-43.6-163-161.3-163C45.7 113.8 0 168.3 0 261c0 89.1 45.7 137.2 127.9 137.2 66.2 0 97.9-31.1 97.9-31.1z">'),On=()=>Ln(),je=Symbol("store-raw"),Z=Symbol("store-node"),H=Symbol("store-has"),ht=Symbol("store-self");function mt(e){let t=e[X];if(!t&&(Object.defineProperty(e,X,{value:t=new Proxy(e,Dn)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,o=n.length;i<o;i++){const c=n[i];r[c].get&&Object.defineProperty(e,c,{enumerable:r[c].enumerable,get:r[c].get.bind(t)})}}return t}function ye(e){let t;return e!=null&&typeof e=="object"&&(e[X]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function ge(e,t=new Set){let n,r,i,o;if(n=e!=null&&e[je])return n;if(!ye(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let c=0,a=e.length;c<a;c++)i=e[c],(r=ge(i,t))!==i&&(e[c]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const c=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let d=0,f=c.length;d<f;d++)o=c[d],!a[o].get&&(i=e[o],(r=ge(i,t))!==i&&(e[o]=r))}return e}function Se(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function ve(e,t,n){if(e[t])return e[t];const[r,i]=C(n,{equals:!1,internal:!0});return r.$=i,e[t]=r}function En(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===X||t===Z||(delete n.value,delete n.writable,n.get=()=>e[X][t]),n}function kt(e){Me()&&ve(Se(e,Z),ht)()}function Un(e){return kt(e),Reflect.ownKeys(e)}const Dn={get(e,t,n){if(t===je)return e;if(t===X)return n;if(t===qe)return kt(e),n;const r=Se(e,Z),i=r[t];let o=i?i():e[t];if(t===Z||t===H||t==="__proto__")return o;if(!i){const c=Object.getOwnPropertyDescriptor(e,t);Me()&&(typeof o!="function"||e.hasOwnProperty(t))&&!(c&&c.get)&&(o=ve(r,t,o)())}return ye(o)?mt(o):o},has(e,t){return t===je||t===X||t===qe||t===Z||t===H||t==="__proto__"?!0:(Me()&&ve(Se(e,H),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Un,getOwnPropertyDescriptor:En};function we(e,t,n,r=!1){if(!r&&e[t]===n)return;const i=e[t],o=e.length;n===void 0?(delete e[t],e[H]&&e[H][t]&&i!==void 0&&e[H][t].$()):(e[t]=n,e[H]&&e[H][t]&&i===void 0&&e[H][t].$());let c=Se(e,Z),a;if((a=ve(c,t,i))&&a.$(()=>n),Array.isArray(e)&&e.length!==o){for(let d=e.length;d<o;d++)(a=c[d])&&a.$();(a=ve(c,"length",o))&&a.$(e.length)}(a=c[ht])&&a.$()}function yt(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const i=n[r];we(e,i,t[i])}}function Mn(e,t){if(typeof t=="function"&&(t=t(e)),t=ge(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const i=t[n];e[n]!==i&&we(e,n,i)}we(e,"length",r)}else yt(e,t)}function ue(e,t,n=[]){let r,i=e;if(t.length>1){r=t.shift();const c=typeof r,a=Array.isArray(e);if(Array.isArray(r)){for(let d=0;d<r.length;d++)ue(e,[r[d]].concat(t),n);return}else if(a&&c==="function"){for(let d=0;d<e.length;d++)r(e[d],d)&&ue(e,[d].concat(t),n);return}else if(a&&c==="object"){const{from:d=0,to:f=e.length-1,by:_=1}=r;for(let m=d;m<=f;m+=_)ue(e,[m].concat(t),n);return}else if(t.length>1){ue(e[r],t,[r].concat(n));return}i=e[r],n=[r].concat(n)}let o=t[0];typeof o=="function"&&(o=o(i,n),o===i)||r===void 0&&o==null||(o=ge(o),r===void 0||ye(i)&&ye(o)&&!Array.isArray(o)?yt(i,o):we(e,r,o))}function Le(...[e,t]){const n=ge(e||{}),r=Array.isArray(n),i=mt(n);function o(...c){zt(()=>{r&&c.length===1?Mn(n,c[0]):ue(n,c)})}return[i,o]}const Fn=k("<div><span></span><span></span><span></span><span>"),St=k("<div>"),Wn=k("<div role=group><span>"),Oe=k("<span>"),wt=k("<button>"),Nn=k("<fieldset><legend>"),jn=k("<div role=group>"),Ge=k("<label>"),Hn=k("<div><input type=text>"),zn=k("<input type=text>"),Gn=k("<div><button>"),Kn=k("<output>"),Vn=k("<div><div><button>"),qn=k("<label><input type=checkbox>"),[Ae,Xn]=Le({track:null,artist:null,album:null,albumArtist:null}),[At,Yn]=Le({track:null,artist:null,album:null,albumArtist:null}),[Jn,Ye]=Le({track:"",artist:"",album:"",albumArtist:""}),[$e,Qn]=Le({isRegexDisabled:!0,isCaseInsensitive:!0,isGlobal:!1}),be=new Tn;function Zn(e){const t=W(()=>e.clonedSong),[n]=p(()=>be.getBlockedTypes(t())),[r,i]=C(0),[o,c]=C();return ee(()=>{o()?.style.setProperty("--max-cell-width",`${r()}px`)}),(()=>{const a=St();return Ie(c,a),a.$$keydown=d=>{d.key==="Enter"&&!d.isComposing&&Ke(e.tab)},s(a,l(S,{get when(){return R()},get children(){return l(xt,{})}}),null),s(a,l(S,{get when(){return!R()},get children(){const d=Fn(),f=d.firstChild,_=f.nextSibling,m=_.nextSibling,w=m.nextSibling;return s(_,()=>g("infoSearchLabel")),s(m,()=>g("infoReplaceLabel")),s(w,()=>g("infoPreviewLabel")),b(x=>{const E=u.entryWrapper,A=u.searchLabel,U=u.replaceLabel,I=u.previewLabel;return E!==x._v$&&v(d,x._v$=E),A!==x._v$2&&v(_,x._v$2=A),U!==x._v$3&&v(m,x._v$3=U),I!==x._v$4&&v(w,x._v$4=I),x},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),d}}),null),s(a,l(me,{blockedTypes:n,get tabId(){return e.tab()?.tabId},setMaxCellWidth:i,get clonedSong(){return e.clonedSong},type:"track",UnblockIcon:()=>l(pe,{}),BlockIcon:()=>l(Ze,{})}),null),s(a,l(me,{blockedTypes:n,get tabId(){return e.tab()?.tabId},setMaxCellWidth:i,get clonedSong(){return e.clonedSong},type:"artist",UnblockIcon:()=>l(We,{}),BlockIcon:()=>l(Fe,{})}),null),s(a,l(me,{blockedTypes:n,get tabId(){return e.tab()?.tabId},setMaxCellWidth:i,get clonedSong(){return e.clonedSong},type:"album",UnblockIcon:()=>l(tt,{}),BlockIcon:()=>l(et,{})}),null),s(a,l(me,{blockedTypes:n,get tabId(){return e.tab()?.tabId},setMaxCellWidth:i,get clonedSong(){return e.clonedSong},type:"albumArtist",UnblockIcon:()=>l(We,{}),BlockIcon:()=>l(Fe,{})}),null),s(a,l(ir,{blockedTypes:n,get tab(){return e.tab},get clonedSong(){return e.clonedSong}}),null),b(()=>v(a,u.regexContainer)),a})()}function xt(){return(()=>{const e=Wn(),t=e.firstChild;return s(t,()=>g("optionsOptions")),s(e,l(De,{i18nTitle:"infoUseRegex",icon:Gt,isInverted:!0,flag:"isRegexDisabled"}),null),s(e,l(De,{i18nTitle:"infoMatchCase",icon:Kt,isInverted:!0,flag:"isCaseInsensitive"}),null),s(e,l(De,{i18nTitle:"infoMatchWholeTag",icon:Vt,isInverted:!0,flag:"isGlobal"}),null),b(n=>{const r=u.regexFlagsWrapper,i=g("optionsOptions");return r!==n._v$5&&v(e,n._v$5=r),i!==n._v$6&&h(e,"aria-label",n._v$6=i),n},{_v$5:void 0,_v$6:void 0}),e})()}function me(e){xe(()=>{Ye({[e.type]:nt(e.clonedSong,e.type)})}),ee(()=>{Ye(()=>qt({search:Ae,replace:At,...ze($e)},Xt(e.clonedSong)))});const[t,n]=C();return ee(()=>{const r=t()?.clientWidth??0;e.setMaxCellWidth(i=>Math.max(i,r))}),l(er,{get blockedTypes(){return e.blockedTypes},get tabId(){return e.tabId},get clonedSong(){return e.clonedSong},get UnblockIcon(){return e.UnblockIcon},get BlockIcon(){return e.BlockIcon},get type(){return e.type},get children(){return[l(S,{get when(){return!R()},get children(){const r=Oe();return Ie(n,r),s(r,()=>g(`info${z(e.type)}Label`)),b(()=>v(r,u.entryLabel)),r}}),l(tr,{get type(){return e.type},get clonedSong(){return e.clonedSong}}),l(nr,{get type(){return e.type}}),l(rr,{get type(){return e.type}})]}})}function pn(e){const t=W(()=>e.type==="albumArtist"?"artist":e.type);return l(S,{get when(){return e.blockedTypes()},children:n=>(()=>{const r=wt();return r.$$click=()=>{const i=e.tabId;n()[t()]?be.removeFromBlocklist(t(),e.clonedSong).then(()=>P(i??-1,{type:"reprocessSong",payload:void 0})):be.addToBlocklist(t(),e.clonedSong).then(()=>P(i??-1,{type:"reprocessSong",payload:void 0}))},s(r,l(S,{get when(){return n()[t()]},get fallback(){return[l(e.BlockIcon,{}),V(()=>g(`infoBlock${z(t())}`))]},get children(){return[l(e.UnblockIcon,{}),V(()=>g(`infoUnblock${z(t())}`))]}})),b(i=>{const o=q.button,c=g(n()[t()]?`infoUnblock${z(t())}`:`infoBlock${z(t())}`);return o!==i._v$7&&v(r,i._v$7=o),c!==i._v$8&&h(r,"title",i._v$8=c),i},{_v$7:void 0,_v$8:void 0}),r})()})}function er(e){return l(S,{get when(){return R()},get fallback(){return(()=>{const t=jn();return s(t,()=>e.children),b(n=>{const r=u.entryWrapper,i=g(`info${z(e.type)}Label`);return r!==n._v$11&&v(t,n._v$11=r),i!==n._v$12&&h(t,"aria-label",n._v$12=i),n},{_v$11:void 0,_v$12:void 0}),t})()},get children(){const t=Nn(),n=t.firstChild;return s(n,()=>g(`info${z(e.type)}Label`)),s(t,()=>e.children,null),s(t,l(pn,{get blockedTypes(){return e.blockedTypes},get tabId(){return e.tabId},get clonedSong(){return e.clonedSong},get UnblockIcon(){return e.UnblockIcon},get BlockIcon(){return e.BlockIcon},get type(){return e.type}}),null),b(r=>{const i=u.entryWrapper,o=u.entryWrapperLegend;return i!==r._v$9&&v(t,r._v$9=i),o!==r._v$10&&v(n,r._v$10=o),r},{_v$9:void 0,_v$10:void 0}),t}})}function tr(e){return(()=>{const t=Hn(),n=t.firstChild;return s(t,l(S,{get when(){return R()},get children(){const r=Ge();return s(r,()=>g("infoSearchLabel")),b(i=>{const o=`${e.type}SearchInput`,c=u.iosSearchLabel;return o!==i._v$13&&h(r,"for",i._v$13=o),c!==i._v$14&&v(r,i._v$14=c),i},{_v$13:void 0,_v$14:void 0}),r}}),n),n.$$input=r=>Xn({[e.type]:r.currentTarget.value||null}),s(t,l(de,{get fallback(){return l(Jt,{get class(){return`${u.regexFieldItem} ${u.regexFailure}`}})},get children(){return[l(F,{get when(){return!Ae[e.type]},get children(){return[]}}),l(F,{get when(){return Yt(Ae[e.type],nt(e.clonedSong,e.type),ze($e))},get children(){return l(_e,{get class(){return`${u.regexFieldItem} ${u.regexSuccess}`}})}})]}}),null),b(r=>{const i=u.regexFieldWrapper,o=`${e.type}SearchInput`,c=u.regexFieldInput,a=g("infoSearchLabel");return i!==r._v$15&&v(t,r._v$15=i),o!==r._v$16&&h(n,"id",r._v$16=o),c!==r._v$17&&v(n,r._v$17=c),a!==r._v$18&&h(n,"title",r._v$18=a),r},{_v$15:void 0,_v$16:void 0,_v$17:void 0,_v$18:void 0}),t})()}function nr(e){const[t,n]=C(!1),[r,i]=C("");return ee(()=>{Yn({[e.type]:t()?"":r()||null})}),(()=>{const o=Gn(),c=o.firstChild;return s(o,l(de,{get children(){return[l(F,{get when(){return t()},get children(){const a=Oe();return s(a,()=>g("infoDeleteLabel")),a}}),l(F,{get when(){return!t()},get children(){return[l(S,{get when(){return R()},get children(){const a=Ge();return s(a,()=>g("infoReplaceLabel")),b(d=>{const f=`${e.type}ReplaceInput`,_=u.iosReplaceLabel;return f!==d._v$19&&h(a,"for",d._v$19=f),_!==d._v$20&&v(a,d._v$20=_),d},{_v$19:void 0,_v$20:void 0}),a}}),(()=>{const a=zn();return a.$$input=d=>i(d.currentTarget.value),b(d=>{const f=`${e.type}ReplaceInput`,_=u.regexFieldInput,m=g("infoReplaceLabel");return f!==d._v$21&&h(a,"id",d._v$21=f),_!==d._v$22&&v(a,d._v$22=_),m!==d._v$23&&h(a,"title",d._v$23=m),d},{_v$21:void 0,_v$22:void 0,_v$23:void 0}),a})()]}})]}}),c),c.$$click=()=>n(a=>!a),s(c,l(S,{get when(){return t()},get fallback(){return l(Zt,{})},get children(){return l(Qt,{})}})),b(a=>{const d=u.regexFieldWrapper,f=`${u.regexFieldItem} ${u.button}`,_=t()?g("infoReplaceLabel"):g("infoDeleteLabel");return d!==a._v$24&&v(o,a._v$24=d),f!==a._v$25&&v(c,a._v$25=f),_!==a._v$26&&h(c,"title",a._v$26=_),a},{_v$24:void 0,_v$25:void 0,_v$26:void 0}),o})()}function rr(e){return[l(S,{get when(){return R()},get children(){const t=Ge();return s(t,()=>g("infoPreviewLabel")),b(n=>{const r=`${e.type}PreviewOutput`,i=u.iosPreviewLabel;return r!==n._v$27&&h(t,"for",n._v$27=r),i!==n._v$28&&v(t,n._v$28=i),n},{_v$27:void 0,_v$28:void 0}),t}}),(()=>{const t=Kn();return s(t,()=>Jn[e.type]),b(n=>{const r=`${e.type}PreviewOutput`,i=g("infoPreviewLabel");return r!==n._v$29&&h(t,"id",n._v$29=r),i!==n._v$30&&h(t,"title",n._v$30=i),n},{_v$29:void 0,_v$30:void 0}),t})()]}function ir(e){return(()=>{const t=St();return s(t,l(S,{get when(){return e.clonedSong?.flags.isCorrectedByUser},get children(){const n=Oe();return s(n,()=>g("infoEditedWarning")),b(()=>v(n,u.editWarning)),n}}),null),s(t,l(S,{get when(){return!R()},get children(){return[l(xt,{}),(()=>{const n=Vn(),r=n.firstChild,i=r.firstChild;return i.$$click=()=>void Ke(e.tab),s(i,l(_e,{})),s(r,l(S,{get when(){return e.blockedTypes()},children:o=>[l(Ue,{get isBlocked(){return o().artist},type:"artist",get tabId(){return e.tab()?.tabId},get clonedSong(){return e.clonedSong},UnblockIcon:()=>l(We,{}),BlockIcon:()=>l(Fe,{})}),l(S,{get when(){return e.clonedSong?.getAlbum()},get children(){return l(Ue,{get isBlocked(){return o().album},type:"album",get tabId(){return e.tab()?.tabId},get clonedSong(){return e.clonedSong},UnblockIcon:()=>l(tt,{}),BlockIcon:()=>l(et,{})})}}),l(Ue,{get isBlocked(){return o().track},type:"track",get tabId(){return e.tab()?.tabId},get clonedSong(){return e.clonedSong},UnblockIcon:()=>l(pe,{}),BlockIcon:()=>l(Ze,{})})]}),null),b(o=>{const c=u.regexFooterButtons,a=u.controlButtons,d=u.controlButton,f=g("infoSubmitTitle");return c!==o._v$31&&v(n,o._v$31=c),a!==o._v$32&&v(r,o._v$32=a),d!==o._v$33&&v(i,o._v$33=d),f!==o._v$34&&h(i,"title",o._v$34=f),o},{_v$31:void 0,_v$32:void 0,_v$33:void 0,_v$34:void 0}),n})()]}}),null),b(()=>v(t,u.regexFooter)),t})()}function Ue(e){return(()=>{const t=wt();return t.$$click=()=>{const n=e.tabId;e.isBlocked?be.removeFromBlocklist(e.type,e.clonedSong).then(()=>P(n??-1,{type:"reprocessSong",payload:void 0})):be.addToBlocklist(e.type,e.clonedSong).then(()=>P(n??-1,{type:"reprocessSong",payload:void 0}))},s(t,l(S,{get when(){return e.isBlocked},get fallback(){return l(e.BlockIcon,{})},get children(){return l(e.UnblockIcon,{})}})),b(n=>{const r=u.controlButton,i=g(e.isBlocked?`infoUnblock${z(e.type)}`:`infoBlock${z(e.type)}`);return r!==n._v$35&&v(t,n._v$35=r),i!==n._v$36&&h(t,"title",n._v$36=i),n},{_v$35:void 0,_v$36:void 0}),t})()}function lr(e){const[t]=p(Te),n=W(()=>{const r=[{namei18n:"infoSubmitTitleShort",icon:_e,action:()=>void Ke(e.tab)}];if(!t.loading){const i=t();i&&r.push(i)}return r});return l(Re,{get items(){return n()}})}async function Ke(e){await In.saveRegexEdit({search:Ae,replace:At,...ze($e)}),P(e()?.tabId??-1,{type:"reprocessSong",payload:void 0})}function De(e){return(()=>{const t=qn(),n=t.firstChild;return n.addEventListener("change",()=>Qn(r=>({[e.flag]:!r[e.flag]}))),s(t,l(e.icon,{}),null),s(t,l(S,{get when(){return R()},get children(){const r=Oe();return s(r,()=>g(e.i18nTitle)),b(()=>v(r,u.regexToggleLabel)),r}}),null),b(r=>{const i=g(e.i18nTitle),o=u.regexToggleWrapper,c=u.regexToggleInput;return i!==r._v$37&&h(t,"title",r._v$37=i),o!==r._v$38&&v(t,r._v$38=o),c!==r._v$39&&v(n,r._v$39=c),r},{_v$37:void 0,_v$38:void 0,_v$39:void 0}),b(()=>n.checked=e.isInverted?!$e[e.flag]:$e[e.flag]),t})()}fe(["keydown","click","input"]);const ar=k("<div><img>"),or=k("<div><button></button><button></button><button>"),cr=k("<div><input type=text><input type=text><input type=text><input type=text>"),sr=k("<div>");function It(e){const t=W(()=>{const A=e.tab();if(!A)return;const U=A.song;if(U)return new Ce(U,A.tabId)}),[n,r]=C(""),[i,o]=C(""),[c,a]=C(""),[d,f]=C(""),[_,m]=C(!1);let w;function x(){!w||w.scrollWidth<10||(document.body.style.width=`${w.scrollWidth}px`)}const E=new ResizeObserver(x);return xe(()=>{if(r(t().getTrack()??""),o(t().getArtist()??""),a(t().getAlbum()??""),f(t().getAlbumArtist()??""),P(e.tab()?.tabId??-1,{type:"setEditState",payload:!0}),!w)return;w.scrollWidth>10&&(document.body.style.width=`${w.scrollWidth}px`),E.observe(w);const A=setInterval(()=>{P(e.tab()?.tabId??-1,{type:"setEditState",payload:!0})},1e3);return()=>{clearInterval(A)}}),rt(()=>{P(e.tab()?.tabId??-1,{type:"setEditState",payload:!1}),E.disconnect(),document.body.style.width="auto"}),[l(S,{get when(){return R()},get children(){return l(de,{get children(){return[l(F,{get when(){return _()},get children(){return l(lr,{get tab(){return e.tab}})}}),l(F,{get when(){return!_()},get children(){return l(ur,{get tab(){return e.tab},get clonedSong(){return t()},setIsRegex:m,track:n,artist:i,album:c,albumArtist:d})}})]}})}}),(()=>{const A=sr(),U=w;return typeof U=="function"?Ie(U,A):w=A,s(A,l(de,{get children(){return[l(F,{get when(){return _()},get children(){return l(Zn,{get clonedSong(){return t()},get tab(){return e.tab}})}}),l(F,{get when(){return!_()},get children(){return[l(K,{get class(){return u.coverArtWrapper},get href(){return t()?.getTrackArt()??O.runtime.getURL("img/cover_art_default.png")},get title(){return g("infoOpenAlbumArt")},get children(){return[(()=>{const I=ar(),B=I.firstChild;return b(T=>{const N=u.coverArtBackground,j=`url(${t()?.getTrackArt()??O.runtime.getURL("img/cover_art_default.png")})`,$=u.coverArt,L=t()?.getTrackArt()??O.runtime.getURL("img/cover_art_default.png");return N!==T._v$&&v(I,T._v$=N),j!==T._v$2&&((T._v$2=j)!=null?I.style.setProperty("background-image",j):I.style.removeProperty("background-image")),$!==T._v$3&&v(B,T._v$3=$),L!==T._v$4&&h(B,"src",T._v$4=L),T},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),I})(),l(bt,{id:"coverArtClip"})]}}),(()=>{const I=cr(),B=I.firstChild,T=B.nextSibling,N=T.nextSibling,j=N.nextSibling;return I.$$keydown=$=>{$.key==="Enter"&&!$.isComposing&&J(e.tab,t(),{artist:i(),track:n(),album:c()||null,albumArtist:d()||null})},B.$$input=$=>{r($.currentTarget.value)},T.$$input=$=>{o($.currentTarget.value)},N.$$input=$=>{a($.currentTarget.value)},j.$$input=$=>{f($.currentTarget.value)},s(I,l(S,{get when(){return!R()},get children(){const $=or(),L=$.firstChild,D=L.nextSibling,G=D.nextSibling;return L.$$click=()=>{J(e.tab,t(),{artist:i(),track:n(),album:c()||null,albumArtist:d()||null})},s(L,l(_e,{})),D.$$keydown=y=>{y.key==="Enter"&&(y.stopImmediatePropagation(),J(e.tab,t(),{artist:n(),track:i(),album:c()||null,albumArtist:d()||null}))},D.$$click=()=>{J(e.tab,t(),{artist:n(),track:i(),album:c()||null,albumArtist:d()||null})},s(D,l(it,{})),G.$$keydown=y=>{y.key==="Enter"&&(y.stopImmediatePropagation(),m(!0))},G.$$click=()=>m(!0),s(G,l(lt,{})),b(y=>{const te=u.controlButtons,ne=u.controlButton,re=!n()||!i(),ie=!n()||!i()?g("infoSubmitUnableTitle"):g("infoSubmitTitle"),le=u.controlButton,ae=!n()||!i(),oe=!n()||!i()?g("infoSwapUnableTitle"):g("infoSwapTitle"),ce=u.controlButton,se=g("infoRegexTitle");return te!==y._v$5&&v($,y._v$5=te),ne!==y._v$6&&v(L,y._v$6=ne),re!==y._v$7&&(L.disabled=y._v$7=re),ie!==y._v$8&&h(L,"title",y._v$8=ie),le!==y._v$9&&v(D,y._v$9=le),ae!==y._v$10&&(D.disabled=y._v$10=ae),oe!==y._v$11&&h(D,"title",y._v$11=oe),ce!==y._v$12&&v(G,y._v$12=ce),se!==y._v$13&&h(G,"title",y._v$13=se),y},{_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0,_v$11:void 0,_v$12:void 0,_v$13:void 0}),$}}),null),b($=>{const L=u.songDetails,D=u.editField,G=g("infoTrackPlaceholder"),y=g("infoTrackPlaceholder"),te=u.editField,ne=g("infoArtistPlaceholder"),re=g("infoArtistPlaceholder"),ie=u.editField,le=g("infoAlbumPlaceholder"),ae=g("infoAlbumPlaceholder"),oe=u.editField,ce=g("infoAlbumArtistPlaceholder"),se=g("infoAlbumArtistPlaceholder");return L!==$._v$14&&v(I,$._v$14=L),D!==$._v$15&&v(B,$._v$15=D),G!==$._v$16&&h(B,"title",$._v$16=G),y!==$._v$17&&h(B,"placeholder",$._v$17=y),te!==$._v$18&&v(T,$._v$18=te),ne!==$._v$19&&h(T,"title",$._v$19=ne),re!==$._v$20&&h(T,"placeholder",$._v$20=re),ie!==$._v$21&&v(N,$._v$21=ie),le!==$._v$22&&h(N,"title",$._v$22=le),ae!==$._v$23&&h(N,"placeholder",$._v$23=ae),oe!==$._v$24&&v(j,$._v$24=oe),ce!==$._v$25&&h(j,"title",$._v$25=ce),se!==$._v$26&&h(j,"placeholder",$._v$26=se),$},{_v$14:void 0,_v$15:void 0,_v$16:void 0,_v$17:void 0,_v$18:void 0,_v$19:void 0,_v$20:void 0,_v$21:void 0,_v$22:void 0,_v$23:void 0,_v$24:void 0,_v$25:void 0,_v$26:void 0}),b(()=>B.value=t()?.getTrack()??""),b(()=>T.value=t()?.getArtist()??""),b(()=>N.value=t()?.getAlbum()??""),b(()=>j.value=t()?.getAlbumArtist()??""),I})()]}})]}})),b(()=>v(A,u.nowPlayingPopup)),A})()]}function ur(e){const[t]=p(Te),n=W(()=>{const r=[{namei18n:!e.track()||!e.artist()?"infoSubmitUnableTitleShort":"infoSubmitTitleShort",icon:_e,action:()=>void J(e.tab,e.clonedSong,{artist:e.artist(),track:e.track(),album:e.album()||null,albumArtist:e.albumArtist()||null})},{namei18n:!e.track()||!e.artist()?"infoSwapUnableTitleShort":"infoSwapTitleShort",icon:it,action:()=>void J(e.tab,e.clonedSong,{artist:e.track(),track:e.artist(),album:e.album()||null,albumArtist:e.albumArtist()||null})},{namei18n:"infoRegexTitleShort",icon:lt,action:()=>e.setIsRegex(!0)}];if(!t.loading){const i=t();i&&r.push(i)}return r});return l(Re,{get items(){return n()}})}async function J(e,t,n){t&&(await pt.saveSongInfo(t,n),P(e()?.tabId??-1,{type:"reprocessSong",payload:void 0}))}fe(["keydown","input","click"]);const dr=k("<div><img>"),Tt=k("<div>"),Rt=k("<button>"),gr=k("<div><span>"),vr=k("<div><button></button><button></button><button><span></span><span>");function Y(e){const[t,n]=C(!1),r=W(()=>{const a=e.tab();if(!a)return null;const d=a.song;return d?new Ce(d,a.tabId):null});let i;function o(){!i||i.scrollWidth<10||(document.body.style.width=`${i.scrollWidth}px`)}const c=new ResizeObserver(o);return xe(()=>{i&&c.observe(i)}),rt(()=>{c.disconnect(),document.body.style.width="auto"}),ee(()=>{if(t())c.disconnect();else{if(!i)return;c.disconnect(),c.observe(i),i.scrollWidth>10&&(document.body.style.width=`${i.scrollWidth}px`)}}),l(de,{get fallback(){return l(_t,{})},get children(){return[l(F,{get when(){return t()},get children(){return l(It,{get tab(){return e.tab}})}}),l(F,{get when(){return r()},get children(){return[l(S,{get when(){return R()},get children(){return l($r,{song:r,get tab(){return e.tab},setIsEditing:n})}}),(()=>{const a=Tt(),d=i;return typeof d=="function"?Ie(d,a):i=a,s(a,l(Q,{get class(){return u.coverArtWrapper},get href(){return r()?.getTrackArt()??O.runtime.getURL("img/cover_art_default.png")},get title(){return g("infoOpenAlbumArt")},get children(){return[(()=>{const f=dr(),_=f.firstChild;return b(m=>{const w=u.coverArtBackground,x=`url(${r()?.getTrackArt()??O.runtime.getURL("img/cover_art_default.png")})`,E=u.coverArt,A=r()?.getTrackArt()??O.runtime.getURL("img/cover_art_default.png");return w!==m._v$&&v(f,m._v$=w),x!==m._v$2&&((m._v$2=x)!=null?f.style.setProperty("background-image",x):f.style.removeProperty("background-image")),E!==m._v$3&&v(_,m._v$3=E),A!==m._v$4&&h(_,"src",m._v$4=A),m},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),f})(),l(bt,{id:"coverArtClip"})]}}),null),s(a,l(br,{song:r,get tab(){return e.tab},setIsEditing:n}),null),b(()=>v(a,u.nowPlayingPopup)),a})()]}})]}})}function $r(e){const[t]=p(Te),n=W(()=>{const r=[{namei18n:e.tab()?.permanentMode===M?"infoEditTitleShort":"infoEditUnableTitleShort",icon:at,action:()=>e.setIsEditing(!0)}];if(e.song()?.flags.isCorrectedByUser&&r.push({namei18n:e.tab()?.permanentMode===M?"infoRevertTitleShort":"infoRevertUnableTitleShort",icon:ot,action:()=>Bt(e.tab)}),r.push({namei18n:Ct(e.tab,!0),icon:ct,action:()=>Pt(e.tab)}),!t.loading){const i=t();i&&r.push(i)}return r});return l(Re,{get items(){return n()}})}function br(e){return(()=>{const t=Tt();return s(t,l(_r,{get song(){return e.song}}),null),s(t,l(S,{get when(){return R()},get children(){return l(fr,{get song(){return e.song},get tab(){return e.tab}})}}),null),s(t,l(hr,{get song(){return e.song}}),null),s(t,l(S,{get when(){return!R()},get children(){return l(mr,{get song(){return e.song},get tab(){return e.tab},get setIsEditing(){return e.setIsEditing}})}}),null),b(()=>v(t,u.songDetails)),t})()}function fr(e){return(()=>{const t=Rt();return t.$$click=()=>Lt(e.tab,e.song),s(t,l(Ne,{})),b(n=>{const r=`${u.iosLoveButton}${e.song()?.metadata.userloved?` ${u.active}`:""}`,i=e.song()?.metadata.userloved?g("infoUnlove"):g("infoLove");return r!==n._v$5&&v(t,n._v$5=r),i!==n._v$6&&h(t,"title",n._v$6=i),n},{_v$5:void 0,_v$6:void 0}),t})()}function _r(e){return[l(Q,{get class(){return u.bold},get href(){return en(e.song()?.getArtist(),e.song()?.getTrack())},get title(){return g("infoViewTrackPage",e.song()?.getTrack()??"")},get children(){return e.song()?.getTrack()}}),l(Q,{get href(){return Xe(e.song()?.getArtist())},get title(){return g("infoViewArtistPage",e.song()?.getArtist()??"")},get children(){return e.song()?.getArtist()}}),l(Q,{get href(){return tn(e.song()?.getAlbumArtist()||e.song()?.getArtist(),e.song()?.getAlbum())},get title(){return g("infoViewAlbumPage",e.song()?.getAlbum()??"")},get children(){return e.song()?.getAlbum()}}),l(Q,{get href(){return Xe(e.song()?.getAlbumArtist())},get title(){return g("infoViewArtistPage",e.song()?.getAlbumArtist()??"")},get children(){return e.song()?.getAlbumArtist()}})]}function hr(e){const[t,n]=C();return nn.getScrobblerByLabel("Last.fm")?.getSession().then(n),(()=>{const r=gr(),i=r.firstChild;return s(r,l(Q,{get class(){return`${u.playCount} ${u.label}`},get href(){return rn(t()?.sessionName,e.song()?.getArtist(),e.song()?.getTrack())},get title(){return g("infoYourScrobbles",(e.song()?.metadata.userPlayCount||0).toString())},get children(){return[l(On,{}),V(()=>e.song()?.metadata.userPlayCount||0)]}}),i),s(i,()=>e.song()?.connector.label),b(o=>{const c=u.playDetails,a=u.label;return c!==o._v$7&&v(r,o._v$7=c),a!==o._v$8&&v(i,o._v$8=a),o},{_v$7:void 0,_v$8:void 0}),r})()}function mr(e){return(()=>{const t=vr(),n=t.firstChild,r=n.nextSibling,i=r.nextSibling,o=i.firstChild,c=o.nextSibling;return n.$$click=()=>e.setIsEditing(!0),s(n,l(at,{})),s(t,l(S,{get when(){return e.song()?.flags.isCorrectedByUser},get children(){const a=Rt();return a.$$click=()=>Bt(e.tab),s(a,l(ot,{})),b(d=>{const f=u.controlButton,_=e.tab()?.permanentMode!==M,m=e.tab()?.permanentMode===M?g("infoRevertTitle"):g("infoRevertUnableTitle");return f!==d._v$9&&v(a,d._v$9=f),_!==d._v$10&&(a.disabled=d._v$10=_),m!==d._v$11&&h(a,"title",d._v$11=m),d},{_v$9:void 0,_v$10:void 0,_v$11:void 0}),a}}),r),r.$$click=()=>Pt(e.tab),s(r,l(ct,{})),i.$$click=()=>Lt(e.tab,e.song),s(o,l(Ne,{})),s(c,l(S,{get when(){return e.song()?.metadata.userloved},get fallback(){return l(Ne,{})},get children(){return l(ln,{})}})),b(a=>{const d=u.controlButtons,f=u.controlButton,_=e.tab()?.permanentMode!==M,m=e.tab()?.permanentMode===M?g("infoEditTitle"):g("infoEditUnableTitle"),w=`${u.controlButton}${e.tab()?.permanentMode!==Pe?` ${u.hiddenDisabled}`:""}${e.tab()?.permanentMode===Be?` ${u.active}`:""}`,x=e.tab()?.permanentMode!==M,E=g(Ct(e.tab,!1)),A=`${u.controlButton}${e.song()?.metadata.userloved?` ${u.active}`:""}`,U=e.song()?.metadata.userloved?g("infoUnlove"):g("infoLove"),I=u.nonHover,B=u.hover;return d!==a._v$12&&v(t,a._v$12=d),f!==a._v$13&&v(n,a._v$13=f),_!==a._v$14&&(n.disabled=a._v$14=_),m!==a._v$15&&h(n,"title",a._v$15=m),w!==a._v$16&&v(r,a._v$16=w),x!==a._v$17&&(r.disabled=a._v$17=x),E!==a._v$18&&h(r,"title",a._v$18=E),A!==a._v$19&&v(i,a._v$19=A),U!==a._v$20&&h(i,"title",a._v$20=U),I!==a._v$21&&v(o,a._v$21=I),B!==a._v$22&&v(c,a._v$22=B),a},{_v$12:void 0,_v$13:void 0,_v$14:void 0,_v$15:void 0,_v$16:void 0,_v$17:void 0,_v$18:void 0,_v$19:void 0,_v$20:void 0,_v$21:void 0,_v$22:void 0}),t})()}function Q(e){return l(K,{get class(){return`${e.class} ${u.notRedAnchor}`},get href(){return e.href},get title(){return e.title},get children(){return e.children}})}function Ct(e,t){let n="infoSkipUnableTitle";switch(e()?.permanentMode){case M:n="infoSkipTitle";break;case Be:n="infoSkippedTitle";break;case Pe:n="infoSkipUnableTitle";break}return t?`${n}Short`:n}function Pt(e){P(e()?.tabId||-1,{type:"skipCurrentSong",payload:void 0})}function Bt(e){P(e()?.tabId??-1,{type:"resetData",payload:void 0})}function Lt(e,t){P(e()?.tabId??-1,{type:"toggleLove",payload:{isLoved:!t()?.metadata.userloved,shouldShowNotification:!1}})}fe(["click"]);const kr=k("<div><h1></h1><p></p><p></p><p></p><button>");function yr(e){const[t,n]=C(!1),r=W(()=>{const i=e.tab();if(!i)return null;const o=i.song;return o?new Ce(o,i.tabId):null});return l(S,{get when(){return!t()},get children(){const i=kr(),o=i.firstChild,c=o.nextSibling,a=c.nextSibling,d=a.nextSibling,f=d.nextSibling;return s(i,l(Qe,{get class(){return u.bigIcon}}),o),s(o,()=>g("disallowedHeader")),s(c,()=>g("disallowedDesc1",[r()?.getArtist()??"???",r()?.getTrack()??"???"])),s(a,()=>g(`disallowedDesc${r()?.parsed.scrobblingDisallowedReason}`)),s(d,()=>g("disallowedDesc3")),f.$$click=()=>{n(!0),P(e.tab()?.tabId??-1,{type:"forceScrobbleSong",payload:void 0})},s(f,l(an,{}),null),s(f,()=>g("disallowedButton"),null),b(_=>{const m=u.widePopup,w=`${q.button} ${q.centered}`;return m!==_._v$&&v(i,_._v$=m),w!==_._v$2&&v(f,_._v$2=w),_},{_v$:void 0,_v$2:void 0}),i}})}fe(["click"]);const Sr=k("<div><h1></h1><p>");function wr(e){const t=W(()=>{const n=e.tab()?.song;if(n)return new Ce(n,-1)});return(()=>{const n=Sr(),r=n.firstChild,i=r.nextSibling;return s(n,l(on,{get class(){return u.bigIcon}}),r),s(r,()=>g("ignoredHeader")),s(i,()=>g("ignoredDesc",[t()?.getArtist()??"????",t()?.getTrack()??"????"])),s(n,l(K,{href:"https://support.last.fm/t/track-filter-list-unknown-scrobbles/776",get title(){return g("ignoredDescReadMore")},get children(){return g("ignoredDescReadMore")}}),null),b(()=>v(n,u.alertPopup)),n})()}const Ar=[vt,$t,ke],xr=[M,Be,st,Pe,ke,ut,dt,gt];function Ir(){const[e,t]=p(un),[n,{refetch:r}]=p(Te);ee(()=>{e(),r()});const i=W(()=>{if(!n.loading){const c=n();if(c)return[c]}return[]});dn(fn({type:"currentTab",fn:c=>{t.mutate(c)}}));const o={[bn]:()=>l(_t,{}),[vt]:()=>l(Cn,{}),[$t]:()=>l(Bn,{}),[M]:()=>l(Y,{tab:e}),[st]:()=>l(Y,{tab:e}),[Be]:()=>l(Y,{tab:e}),[Pe]:()=>l(Y,{tab:e}),[dt]:()=>l(Y,{tab:e}),[gt]:()=>l(Y,{tab:e}),[$n]:()=>l(yr,{tab:e}),[ut]:()=>l(It,{tab:e}),[he]:()=>l(Sn,{}),[vn]:()=>l(wr,{tab:e}),[ke]:()=>[]};return[l(S,{get when(){return V(()=>!xr.includes(e()?.mode??he))()&&R()},get children(){return l(Re,{get items(){return i()}})}}),l(gn,{get component(){return o[e.loading?ke:e()?.mode??he]}}),l(S,{get when(){return V(()=>!Ar.includes(e()?.mode??he))()&&!R()},get children(){return l(K,{get href(){return O.runtime.getURL("src/ui/options/index.html")},get class(){return u.settingsIcon},get title(){return g("disabledSiteButton")},get children(){return l(He,{})}})}})]}const Tr=document.body,Ee=document.createElement("div");Ee.id="root";Ee.classList.add(u.root);Tr.appendChild(Ee);cn(Ir,Ee);sn();
