var WK=Object.create;var{getPrototypeOf:AK,defineProperty:jY,getOwnPropertyNames:V4,getOwnPropertyDescriptor:HK}=Object,W4=Object.prototype.hasOwnProperty;var SJ=(Z,J,Y)=>{Y=Z!=null?WK(AK(Z)):{};let $=J||!Z||!Z.__esModule?jY(Y,"default",{value:Z,enumerable:!0}):Y;for(let Q of V4(Z))if(!W4.call($,Q))jY($,Q,{get:()=>Z[Q],enumerable:!0});return $},K4=new WeakMap,OK=(Z)=>{var J=K4.get(Z),Y;if(J)return J;if(J=jY({},"__esModule",{value:!0}),Z&&typeof Z==="object"||typeof Z==="function")V4(Z).map(($)=>!W4.call(J,$)&&jY(J,$,{get:()=>Z[$],enumerable:!(Y=HK(Z,$))||Y.enumerable}));return K4.set(Z,J),J},D=(Z,J)=>()=>(J||Z((J={exports:{}}).exports,J),J.exports);var UK=(Z,J)=>{for(var Y in J)jY(Z,Y,{get:J[Y],enumerable:!0,configurable:!0,set:($)=>J[Y]=()=>$})};var N4=D((RO,k6)=>{var H4=require("child_process").exec,O4=require("child_process").execSync,lY=require("fs"),A4=require("path"),U4=lY.access,L4=lY.accessSync,DJ=lY.constants||lY,_6=process.platform=="win32",LK=function(Z,J){U4(Z,DJ.F_OK,function(Y){J(!Y)})},NK=function(Z){try{return L4(Z,DJ.F_OK),!1}catch(J){return!0}},EK=function(Z,J){U4(Z,DJ.F_OK|DJ.X_OK,function(Y){J(null,!Y)})},wK=function(Z){try{return L4(Z,DJ.F_OK|DJ.X_OK),!0}catch(J){return!1}},FK=function(Z,J,Y){LK(Z,function($){if(!$){var Q=H4("command -v "+J+" 2>/dev/null && { echo >&1 "+J+"; exit 0; }",function(z,G,B){Y(null,!!G)});return}EK(Z,Y)})},PK=function(Z,J,Y){if(!/^(?!(?:.*\s|.*\.|\W+)$)(?:[a-zA-Z]:)?(?:(?:[^<>:"\|\?\*\n])+(?:\/\/|\/|\\\\|\\)?)+$/m.test(Z)){Y(null,!1);return}var $=H4("where "+J,function(Q){if(Q!==null)Y(null,!1);else Y(null,!0)})},MK=function(Z,J){if(NK(Z))try{var Y=O4("command -v "+J+" 2>/dev/null && { echo >&1 "+J+"; exit 0; }");return!!Y}catch($){return!1}return wK(Z)},IK=function(Z,J,Y){if(!/^(?!(?:.*\s|.*\.|\W+)$)(?:[a-zA-Z]:)?(?:(?:[^<>:"\|\?\*\n])+(?:\/\/|\/|\\\\|\\)?)+$/m.test(Z))return!1;try{var $=O4("where "+J,{stdio:[]});return!!$}catch(Q){return!1}},f6=function(Z){if(/[^A-Za-z0-9_\/:=-]/.test(Z))Z="'"+Z.replace(/'/g,"'\\''")+"'",Z=Z.replace(/^(?:'')+/g,"").replace(/\\'''/g,"\\'");return Z};if(_6)f6=function(Z){var J=/[\\]/.test(Z);if(J){var Y='"'+A4.dirname(Z)+'"',$='"'+A4.basename(Z)+'"';return Y+":"+$}return'"'+Z+'"'};k6.exports=function Z(J,Y){var $=f6(J);if(!Y&&typeof Promise<"u")return new Promise(function(Q,z){Z(J,function(G,B){if(B)Q(J);else z(G)})});if(_6)PK(J,$,Y);else FK(J,$,Y)};k6.exports.sync=function(Z){var J=f6(Z);if(_6)return IK(Z,J);else return MK(Z,J)}});var w4=D((hO,E4)=>{E4.exports=N4()});var rZ=D((i0)=>{Object.defineProperty(i0,"__esModule",{value:!0});i0.asPromise=i0.thenable=i0.typedArray=i0.stringArray=i0.array=i0.func=i0.error=i0.number=i0.string=i0.boolean=void 0;function TK(Z){return Z===!0||Z===!1}i0.boolean=TK;function F4(Z){return typeof Z==="string"||Z instanceof String}i0.string=F4;function qK(Z){return typeof Z==="number"||Z instanceof Number}i0.number=qK;function CK(Z){return Z instanceof Error}i0.error=CK;function P4(Z){return typeof Z==="function"}i0.func=P4;function M4(Z){return Array.isArray(Z)}i0.array=M4;function SK(Z){return M4(Z)&&Z.every((J)=>F4(J))}i0.stringArray=SK;function DK(Z,J){return Array.isArray(Z)&&Z.every(J)}i0.typedArray=DK;function I4(Z){return Z&&P4(Z.then)}i0.thenable=I4;function bK(Z){if(Z instanceof Promise)return Z;else if(I4(Z))return new Promise((J,Y)=>{Z.then(($)=>J($),($)=>Y($))});else return Promise.resolve(Z)}i0.asPromise=bK});var bJ=D((AZ)=>{Object.defineProperty(AZ,"__esModule",{value:!0});AZ.stringArray=AZ.array=AZ.func=AZ.error=AZ.number=AZ.string=AZ.boolean=void 0;function yK(Z){return Z===!0||Z===!1}AZ.boolean=yK;function T4(Z){return typeof Z==="string"||Z instanceof String}AZ.string=T4;function RK(Z){return typeof Z==="number"||Z instanceof Number}AZ.number=RK;function hK(Z){return Z instanceof Error}AZ.error=hK;function xK(Z){return typeof Z==="function"}AZ.func=xK;function q4(Z){return Array.isArray(Z)}AZ.array=q4;function _K(Z){return q4(Z)&&Z.every((J)=>T4(J))}AZ.stringArray=_K});var d6=D((s)=>{Object.defineProperty(s,"__esModule",{value:!0});s.Message=s.NotificationType9=s.NotificationType8=s.NotificationType7=s.NotificationType6=s.NotificationType5=s.NotificationType4=s.NotificationType3=s.NotificationType2=s.NotificationType1=s.NotificationType0=s.NotificationType=s.RequestType9=s.RequestType8=s.RequestType7=s.RequestType6=s.RequestType5=s.RequestType4=s.RequestType3=s.RequestType2=s.RequestType1=s.RequestType=s.RequestType0=s.AbstractMessageSignature=s.ParameterStructures=s.ResponseError=s.ErrorCodes=void 0;var WJ=bJ(),v6;(function(Z){Z.ParseError=-32700,Z.InvalidRequest=-32600,Z.MethodNotFound=-32601,Z.InvalidParams=-32602,Z.InternalError=-32603,Z.jsonrpcReservedErrorRangeStart=-32099,Z.serverErrorStart=-32099,Z.MessageWriteError=-32099,Z.MessageReadError=-32098,Z.PendingResponseRejected=-32097,Z.ConnectionInactive=-32096,Z.ServerNotInitialized=-32002,Z.UnknownErrorCode=-32001,Z.jsonrpcReservedErrorRangeEnd=-32000,Z.serverErrorEnd=-32000})(v6||(s.ErrorCodes=v6={}));class g6 extends Error{constructor(Z,J,Y){super(J);this.code=WJ.number(Z)?Z:v6.UnknownErrorCode,this.data=Y,Object.setPrototypeOf(this,g6.prototype)}toJson(){let Z={code:this.code,message:this.message};if(this.data!==void 0)Z.data=this.data;return Z}}s.ResponseError=g6;class HZ{constructor(Z){this.kind=Z}static is(Z){return Z===HZ.auto||Z===HZ.byName||Z===HZ.byPosition}toString(){return this.kind}}s.ParameterStructures=HZ;HZ.auto=new HZ("auto");HZ.byPosition=new HZ("byPosition");HZ.byName=new HZ("byName");class k0{constructor(Z,J){this.method=Z,this.numberOfParams=J}get parameterStructures(){return HZ.auto}}s.AbstractMessageSignature=k0;class S4 extends k0{constructor(Z){super(Z,0)}}s.RequestType0=S4;class D4 extends k0{constructor(Z,J=HZ.auto){super(Z,1);this._parameterStructures=J}get parameterStructures(){return this._parameterStructures}}s.RequestType=D4;class b4 extends k0{constructor(Z,J=HZ.auto){super(Z,1);this._parameterStructures=J}get parameterStructures(){return this._parameterStructures}}s.RequestType1=b4;class y4 extends k0{constructor(Z){super(Z,2)}}s.RequestType2=y4;class R4 extends k0{constructor(Z){super(Z,3)}}s.RequestType3=R4;class h4 extends k0{constructor(Z){super(Z,4)}}s.RequestType4=h4;class x4 extends k0{constructor(Z){super(Z,5)}}s.RequestType5=x4;class _4 extends k0{constructor(Z){super(Z,6)}}s.RequestType6=_4;class f4 extends k0{constructor(Z){super(Z,7)}}s.RequestType7=f4;class k4 extends k0{constructor(Z){super(Z,8)}}s.RequestType8=k4;class v4 extends k0{constructor(Z){super(Z,9)}}s.RequestType9=v4;class g4 extends k0{constructor(Z,J=HZ.auto){super(Z,1);this._parameterStructures=J}get parameterStructures(){return this._parameterStructures}}s.NotificationType=g4;class d4 extends k0{constructor(Z){super(Z,0)}}s.NotificationType0=d4;class p4 extends k0{constructor(Z,J=HZ.auto){super(Z,1);this._parameterStructures=J}get parameterStructures(){return this._parameterStructures}}s.NotificationType1=p4;class m4 extends k0{constructor(Z){super(Z,2)}}s.NotificationType2=m4;class u4 extends k0{constructor(Z){super(Z,3)}}s.NotificationType3=u4;class l4 extends k0{constructor(Z){super(Z,4)}}s.NotificationType4=l4;class c4 extends k0{constructor(Z){super(Z,5)}}s.NotificationType5=c4;class i4 extends k0{constructor(Z){super(Z,6)}}s.NotificationType6=i4;class n4 extends k0{constructor(Z){super(Z,7)}}s.NotificationType7=n4;class a4 extends k0{constructor(Z){super(Z,8)}}s.NotificationType8=a4;class s4 extends k0{constructor(Z){super(Z,9)}}s.NotificationType9=s4;var C4;(function(Z){function J(Q){let z=Q;return z&&WJ.string(z.method)&&(WJ.string(z.id)||WJ.number(z.id))}Z.isRequest=J;function Y(Q){let z=Q;return z&&WJ.string(z.method)&&Q.id===void 0}Z.isNotification=Y;function $(Q){let z=Q;return z&&(z.result!==void 0||!!z.error)&&(WJ.string(z.id)||WJ.number(z.id)||z.id===null)}Z.isResponse=$})(C4||(s.Message=C4={}))});var m6=D((r9)=>{var r4;Object.defineProperty(r9,"__esModule",{value:!0});r9.LRUCache=r9.LinkedMap=r9.Touch=void 0;var OZ;(function(Z){Z.None=0,Z.First=1,Z.AsOld=Z.First,Z.Last=2,Z.AsNew=Z.Last})(OZ||(r9.Touch=OZ={}));class p6{constructor(){this[r4]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(Z){return this._map.has(Z)}get(Z,J=OZ.None){let Y=this._map.get(Z);if(!Y)return;if(J!==OZ.None)this.touch(Y,J);return Y.value}set(Z,J,Y=OZ.None){let $=this._map.get(Z);if($){if($.value=J,Y!==OZ.None)this.touch($,Y)}else{switch($={key:Z,value:J,next:void 0,previous:void 0},Y){case OZ.None:this.addItemLast($);break;case OZ.First:this.addItemFirst($);break;case OZ.Last:this.addItemLast($);break;default:this.addItemLast($);break}this._map.set(Z,$),this._size++}return this}delete(Z){return!!this.remove(Z)}remove(Z){let J=this._map.get(Z);if(!J)return;return this._map.delete(Z),this.removeItem(J),this._size--,J.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw Error("Invalid list");let Z=this._head;return this._map.delete(Z.key),this.removeItem(Z),this._size--,Z.value}forEach(Z,J){let Y=this._state,$=this._head;while($){if(J)Z.bind(J)($.value,$.key,this);else Z($.value,$.key,this);if(this._state!==Y)throw Error("LinkedMap got modified during iteration.");$=$.next}}keys(){let Z=this._state,J=this._head,Y={[Symbol.iterator]:()=>{return Y},next:()=>{if(this._state!==Z)throw Error("LinkedMap got modified during iteration.");if(J){let $={value:J.key,done:!1};return J=J.next,$}else return{value:void 0,done:!0}}};return Y}values(){let Z=this._state,J=this._head,Y={[Symbol.iterator]:()=>{return Y},next:()=>{if(this._state!==Z)throw Error("LinkedMap got modified during iteration.");if(J){let $={value:J.value,done:!1};return J=J.next,$}else return{value:void 0,done:!0}}};return Y}entries(){let Z=this._state,J=this._head,Y={[Symbol.iterator]:()=>{return Y},next:()=>{if(this._state!==Z)throw Error("LinkedMap got modified during iteration.");if(J){let $={value:[J.key,J.value],done:!1};return J=J.next,$}else return{value:void 0,done:!0}}};return Y}[(r4=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(Z){if(Z>=this.size)return;if(Z===0){this.clear();return}let J=this._head,Y=this.size;while(J&&Y>Z)this._map.delete(J.key),J=J.next,Y--;if(this._head=J,this._size=Y,J)J.previous=void 0;this._state++}addItemFirst(Z){if(!this._head&&!this._tail)this._tail=Z;else if(!this._head)throw Error("Invalid list");else Z.next=this._head,this._head.previous=Z;this._head=Z,this._state++}addItemLast(Z){if(!this._head&&!this._tail)this._head=Z;else if(!this._tail)throw Error("Invalid list");else Z.previous=this._tail,this._tail.next=Z;this._tail=Z,this._state++}removeItem(Z){if(Z===this._head&&Z===this._tail)this._head=void 0,this._tail=void 0;else if(Z===this._head){if(!Z.next)throw Error("Invalid list");Z.next.previous=void 0,this._head=Z.next}else if(Z===this._tail){if(!Z.previous)throw Error("Invalid list");Z.previous.next=void 0,this._tail=Z.previous}else{let{next:J,previous:Y}=Z;if(!J||!Y)throw Error("Invalid list");J.previous=Y,Y.next=J}Z.next=void 0,Z.previous=void 0,this._state++}touch(Z,J){if(!this._head||!this._tail)throw Error("Invalid list");if(J!==OZ.First&&J!==OZ.Last)return;if(J===OZ.First){if(Z===this._head)return;let{next:Y,previous:$}=Z;if(Z===this._tail)$.next=void 0,this._tail=$;else Y.previous=$,$.next=Y;Z.previous=void 0,Z.next=this._head,this._head.previous=Z,this._head=Z,this._state++}else if(J===OZ.Last){if(Z===this._tail)return;let{next:Y,previous:$}=Z;if(Z===this._head)Y.previous=void 0,this._head=Y;else Y.previous=$,$.next=Y;Z.next=void 0,Z.previous=this._tail,this._tail.next=Z,this._tail=Z,this._state++}}toJSON(){let Z=[];return this.forEach((J,Y)=>{Z.push([Y,J])}),Z}fromJSON(Z){this.clear();for(let[J,Y]of Z)this.set(J,Y)}}r9.LinkedMap=p6;class o4 extends p6{constructor(Z,J=1){super();this._limit=Z,this._ratio=Math.min(Math.max(0,J),1)}get limit(){return this._limit}set limit(Z){this._limit=Z,this.checkTrim()}get ratio(){return this._ratio}set ratio(Z){this._ratio=Math.min(Math.max(0,Z),1),this.checkTrim()}get(Z,J=OZ.AsNew){return super.get(Z,J)}peek(Z){return super.get(Z,OZ.None)}set(Z,J){return super.set(Z,J,OZ.Last),this.checkTrim(),this}checkTrim(){if(this.size>this._limit)this.trimOld(Math.round(this._limit*this._ratio))}}r9.LRUCache=o4});var e4=D((cY)=>{Object.defineProperty(cY,"__esModule",{value:!0});cY.Disposable=void 0;var t4;(function(Z){function J(Y){return{dispose:Y}}Z.create=J})(t4||(cY.Disposable=t4={}))});var o9=D((c6)=>{Object.defineProperty(c6,"__esModule",{value:!0});var u6;function l6(){if(u6===void 0)throw Error("No runtime abstraction layer installed");return u6}(function(Z){function J(Y){if(Y===void 0)throw Error("No runtime abstraction layer provided");u6=Y}Z.install=J})(l6||(l6={}));c6.default=l6});var RJ=D((yJ)=>{Object.defineProperty(yJ,"__esModule",{value:!0});yJ.Emitter=yJ.Event=void 0;var fK=o9(),ZQ;(function(Z){let J={dispose(){}};Z.None=function(){return J}})(ZQ||(yJ.Event=ZQ={}));class JQ{add(Z,J=null,Y){if(!this._callbacks)this._callbacks=[],this._contexts=[];if(this._callbacks.push(Z),this._contexts.push(J),Array.isArray(Y))Y.push({dispose:()=>this.remove(Z,J)})}remove(Z,J=null){if(!this._callbacks)return;let Y=!1;for(let $=0,Q=this._callbacks.length;$<Q;$++)if(this._callbacks[$]===Z)if(this._contexts[$]===J){this._callbacks.splice($,1),this._contexts.splice($,1);return}else Y=!0;if(Y)throw Error("When adding a listener with a context, you should remove it with the same context")}invoke(...Z){if(!this._callbacks)return[];let J=[],Y=this._callbacks.slice(0),$=this._contexts.slice(0);for(let Q=0,z=Y.length;Q<z;Q++)try{J.push(Y[Q].apply($[Q],Z))}catch(G){(0,fK.default)().console.error(G)}return J}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class iY{constructor(Z){this._options=Z}get event(){if(!this._event)this._event=(Z,J,Y)=>{if(!this._callbacks)this._callbacks=new JQ;if(this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty())this._options.onFirstListenerAdd(this);this._callbacks.add(Z,J);let $={dispose:()=>{if(!this._callbacks)return;if(this._callbacks.remove(Z,J),$.dispose=iY._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty())this._options.onLastListenerRemove(this)}};if(Array.isArray(Y))Y.push($);return $};return this._event}fire(Z){if(this._callbacks)this._callbacks.invoke.call(this._callbacks,Z)}dispose(){if(this._callbacks)this._callbacks.dispose(),this._callbacks=void 0}}yJ.Emitter=iY;iY._noop=function(){}});var aY=D((hJ)=>{Object.defineProperty(hJ,"__esModule",{value:!0});hJ.CancellationTokenSource=hJ.CancellationToken=void 0;var kK=o9(),vK=bJ(),i6=RJ(),nY;(function(Z){Z.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:i6.Event.None}),Z.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:i6.Event.None});function J(Y){let $=Y;return $&&($===Z.None||$===Z.Cancelled||vK.boolean($.isCancellationRequested)&&!!$.onCancellationRequested)}Z.is=J})(nY||(hJ.CancellationToken=nY={}));var gK=Object.freeze(function(Z,J){let Y=(0,kK.default)().timer.setTimeout(Z.bind(J),0);return{dispose(){Y.dispose()}}});class n6{constructor(){this._isCancelled=!1}cancel(){if(!this._isCancelled){if(this._isCancelled=!0,this._emitter)this._emitter.fire(void 0),this.dispose()}}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){if(this._isCancelled)return gK;if(!this._emitter)this._emitter=new i6.Emitter;return this._emitter.event}dispose(){if(this._emitter)this._emitter.dispose(),this._emitter=void 0}}class YQ{get token(){if(!this._token)this._token=new n6;return this._token}cancel(){if(!this._token)this._token=nY.Cancelled;else this._token.cancel()}dispose(){if(!this._token)this._token=nY.None;else if(this._token instanceof n6)this._token.dispose()}}hJ.CancellationTokenSource=YQ});var XQ=D((xJ)=>{Object.defineProperty(xJ,"__esModule",{value:!0});xJ.SharedArrayReceiverStrategy=xJ.SharedArraySenderStrategy=void 0;var dK=aY(),KY;(function(Z){Z.Continue=0,Z.Cancelled=1})(KY||(KY={}));class $Q{constructor(){this.buffers=new Map}enableCancellation(Z){if(Z.id===null)return;let J=new SharedArrayBuffer(4),Y=new Int32Array(J,0,1);Y[0]=KY.Continue,this.buffers.set(Z.id,J),Z.$cancellationData=J}async sendCancellation(Z,J){let Y=this.buffers.get(J);if(Y===void 0)return;let $=new Int32Array(Y,0,1);Atomics.store($,0,KY.Cancelled)}cleanup(Z){this.buffers.delete(Z)}dispose(){this.buffers.clear()}}xJ.SharedArraySenderStrategy=$Q;class QQ{constructor(Z){this.data=new Int32Array(Z,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===KY.Cancelled}get onCancellationRequested(){throw Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class zQ{constructor(Z){this.token=new QQ(Z)}cancel(){}dispose(){}}class GQ{constructor(){this.kind="request"}createCancellationTokenSource(Z){let J=Z.$cancellationData;if(J===void 0)return new dK.CancellationTokenSource;return new zQ(J)}}xJ.SharedArrayReceiverStrategy=GQ});var a6=D((sY)=>{Object.defineProperty(sY,"__esModule",{value:!0});sY.Semaphore=void 0;var pK=o9();class BQ{constructor(Z=1){if(Z<=0)throw Error("Capacity must be greater than 0");this._capacity=Z,this._active=0,this._waiting=[]}lock(Z){return new Promise((J,Y)=>{this._waiting.push({thunk:Z,resolve:J,reject:Y}),this.runNext()})}get active(){return this._active}runNext(){if(this._waiting.length===0||this._active===this._capacity)return;(0,pK.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let Z=this._waiting.shift();if(this._active++,this._active>this._capacity)throw Error("To many thunks active");try{let J=Z.thunk();if(J instanceof Promise)J.then((Y)=>{this._active--,Z.resolve(Y),this.runNext()},(Y)=>{this._active--,Z.reject(Y),this.runNext()});else this._active--,Z.resolve(J),this.runNext()}catch(J){this._active--,Z.reject(J),this.runNext()}}}sY.Semaphore=BQ});var VQ=D((t9)=>{Object.defineProperty(t9,"__esModule",{value:!0});t9.ReadableStreamMessageReader=t9.AbstractMessageReader=t9.MessageReader=void 0;var r6=o9(),_J=bJ(),s6=RJ(),mK=a6(),jQ;(function(Z){function J(Y){let $=Y;return $&&_J.func($.listen)&&_J.func($.dispose)&&_J.func($.onError)&&_J.func($.onClose)&&_J.func($.onPartialMessage)}Z.is=J})(jQ||(t9.MessageReader=jQ={}));class t6{constructor(){this.errorEmitter=new s6.Emitter,this.closeEmitter=new s6.Emitter,this.partialMessageEmitter=new s6.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(Z){this.errorEmitter.fire(this.asError(Z))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(Z){this.partialMessageEmitter.fire(Z)}asError(Z){if(Z instanceof Error)return Z;else return Error(`Reader received error. Reason: ${_J.string(Z.message)?Z.message:"unknown"}`)}}t9.AbstractMessageReader=t6;var o6;(function(Z){function J(Y){let $,Q,z,G=new Map,B,K=new Map;if(Y===void 0||typeof Y==="string")$=Y??"utf-8";else{if($=Y.charset??"utf-8",Y.contentDecoder!==void 0)z=Y.contentDecoder,G.set(z.name,z);if(Y.contentDecoders!==void 0)for(let A of Y.contentDecoders)G.set(A.name,A);if(Y.contentTypeDecoder!==void 0)B=Y.contentTypeDecoder,K.set(B.name,B);if(Y.contentTypeDecoders!==void 0)for(let A of Y.contentTypeDecoders)K.set(A.name,A)}if(B===void 0)B=(0,r6.default)().applicationJson.decoder,K.set(B.name,B);return{charset:$,contentDecoder:z,contentDecoders:G,contentTypeDecoder:B,contentTypeDecoders:K}}Z.fromOptions=J})(o6||(o6={}));class KQ extends t6{constructor(Z,J){super();this.readable=Z,this.options=o6.fromOptions(J),this.buffer=(0,r6.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new mK.Semaphore(1)}set partialMessageTimeout(Z){this._partialMessageTimeout=Z}get partialMessageTimeout(){return this._partialMessageTimeout}listen(Z){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=Z;let J=this.readable.onData((Y)=>{this.onData(Y)});return this.readable.onError((Y)=>this.fireError(Y)),this.readable.onClose(()=>this.fireClose()),J}onData(Z){try{this.buffer.append(Z);while(!0){if(this.nextMessageLength===-1){let Y=this.buffer.tryReadHeaders(!0);if(!Y)return;let $=Y.get("content-length");if(!$){this.fireError(Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(Y))}`));return}let Q=parseInt($);if(isNaN(Q)){this.fireError(Error(`Content-Length value must be a number. Got ${$}`));return}this.nextMessageLength=Q}let J=this.buffer.tryReadBody(this.nextMessageLength);if(J===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let Y=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(J):J,$=await this.options.contentTypeDecoder.decode(Y,this.options);this.callback($)}).catch((Y)=>{this.fireError(Y)})}}catch(J){this.fireError(J)}}clearPartialMessageTimer(){if(this.partialMessageTimer)this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0}setPartialMessageTimer(){if(this.clearPartialMessageTimer(),this._partialMessageTimeout<=0)return;this.partialMessageTimer=(0,r6.default)().timer.setTimeout((Z,J)=>{if(this.partialMessageTimer=void 0,Z===this.messageToken)this.firePartialMessage({messageToken:Z,waitingTime:J}),this.setPartialMessageTimer()},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout)}}t9.ReadableStreamMessageReader=KQ});var LQ=D((e9)=>{Object.defineProperty(e9,"__esModule",{value:!0});e9.WriteableStreamMessageWriter=e9.AbstractMessageWriter=e9.MessageWriter=void 0;var WQ=o9(),VY=bJ(),uK=a6(),AQ=RJ(),lK="Content-Length: ",HQ=`\r
`,OQ;(function(Z){function J(Y){let $=Y;return $&&VY.func($.dispose)&&VY.func($.onClose)&&VY.func($.onError)&&VY.func($.write)}Z.is=J})(OQ||(e9.MessageWriter=OQ={}));class Z7{constructor(){this.errorEmitter=new AQ.Emitter,this.closeEmitter=new AQ.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(Z,J,Y){this.errorEmitter.fire([this.asError(Z),J,Y])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(Z){if(Z instanceof Error)return Z;else return Error(`Writer received error. Reason: ${VY.string(Z.message)?Z.message:"unknown"}`)}}e9.AbstractMessageWriter=Z7;var e6;(function(Z){function J(Y){if(Y===void 0||typeof Y==="string")return{charset:Y??"utf-8",contentTypeEncoder:(0,WQ.default)().applicationJson.encoder};else return{charset:Y.charset??"utf-8",contentEncoder:Y.contentEncoder,contentTypeEncoder:Y.contentTypeEncoder??(0,WQ.default)().applicationJson.encoder}}Z.fromOptions=J})(e6||(e6={}));class UQ extends Z7{constructor(Z,J){super();this.writable=Z,this.options=e6.fromOptions(J),this.errorCount=0,this.writeSemaphore=new uK.Semaphore(1),this.writable.onError((Y)=>this.fireError(Y)),this.writable.onClose(()=>this.fireClose())}async write(Z){return this.writeSemaphore.lock(async()=>{return this.options.contentTypeEncoder.encode(Z,this.options).then((Y)=>{if(this.options.contentEncoder!==void 0)return this.options.contentEncoder.encode(Y);else return Y}).then((Y)=>{let $=[];return $.push(lK,Y.byteLength.toString(),HQ),$.push(HQ),this.doWrite(Z,$,Y)},(Y)=>{throw this.fireError(Y),Y})})}async doWrite(Z,J,Y){try{return await this.writable.write(J.join(""),"ascii"),this.writable.write(Y)}catch($){return this.handleError($,Z),Promise.reject($)}}handleError(Z,J){this.errorCount++,this.fireError(Z,J,this.errorCount)}end(){this.writable.end()}}e9.WriteableStreamMessageWriter=UQ});var EQ=D((rY)=>{Object.defineProperty(rY,"__esModule",{value:!0});rY.AbstractMessageBuffer=void 0;var cK=13,iK=10,nK=`\r
`;class NQ{constructor(Z="utf-8"){this._encoding=Z,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(Z){let J=typeof Z==="string"?this.fromString(Z,this._encoding):Z;this._chunks.push(J),this._totalLength+=J.byteLength}tryReadHeaders(Z=!1){if(this._chunks.length===0)return;let J=0,Y=0,$=0,Q=0;Z:while(Y<this._chunks.length){let K=this._chunks[Y];$=0;J:while($<K.length){switch(K[$]){case cK:switch(J){case 0:J=1;break;case 2:J=3;break;default:J=0}break;case iK:switch(J){case 1:J=2;break;case 3:J=4,$++;break Z;default:J=0}break;default:J=0}$++}Q+=K.byteLength,Y++}if(J!==4)return;let z=this._read(Q+$),G=new Map,B=this.toString(z,"ascii").split(nK);if(B.length<2)return G;for(let K=0;K<B.length-2;K++){let A=B[K],O=A.indexOf(":");if(O===-1)throw Error(`Message header must separate key and value using ':'
${A}`);let E=A.substr(0,O),N=A.substr(O+1).trim();G.set(Z?E.toLowerCase():E,N)}return G}tryReadBody(Z){if(this._totalLength<Z)return;return this._read(Z)}get numberOfBytes(){return this._totalLength}_read(Z){if(Z===0)return this.emptyBuffer();if(Z>this._totalLength)throw Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===Z){let Q=this._chunks[0];return this._chunks.shift(),this._totalLength-=Z,this.asNative(Q)}if(this._chunks[0].byteLength>Z){let Q=this._chunks[0],z=this.asNative(Q,Z);return this._chunks[0]=Q.slice(Z),this._totalLength-=Z,z}let J=this.allocNative(Z),Y=0,$=0;while(Z>0){let Q=this._chunks[$];if(Q.byteLength>Z){let z=Q.slice(0,Z);J.set(z,Y),Y+=Z,this._chunks[$]=Q.slice(Z),this._totalLength-=Z,Z-=Z}else J.set(Q,Y),Y+=Q.byteLength,this._chunks.shift(),this._totalLength-=Q.byteLength,Z-=Q.byteLength}return J}}rY.AbstractMessageBuffer=NQ});var TQ=D((Y0)=>{Object.defineProperty(Y0,"__esModule",{value:!0});Y0.createMessageConnection=Y0.ConnectionOptions=Y0.MessageStrategy=Y0.CancellationStrategy=Y0.CancellationSenderStrategy=Y0.CancellationReceiverStrategy=Y0.RequestCancellationReceiverStrategy=Y0.IdCancellationReceiverStrategy=Y0.ConnectionStrategy=Y0.ConnectionError=Y0.ConnectionErrors=Y0.LogTraceNotification=Y0.SetTraceNotification=Y0.TraceFormat=Y0.TraceValues=Y0.Trace=Y0.NullLogger=Y0.ProgressType=Y0.ProgressToken=void 0;var wQ=o9(),p0=bJ(),r=d6(),FQ=m6(),WY=RJ(),J7=aY(),OY;(function(Z){Z.type=new r.NotificationType("$/cancelRequest")})(OY||(OY={}));var Y7;(function(Z){function J(Y){return typeof Y==="string"||typeof Y==="number"}Z.is=J})(Y7||(Y0.ProgressToken=Y7={}));var AY;(function(Z){Z.type=new r.NotificationType("$/progress")})(AY||(AY={}));class IQ{constructor(){}}Y0.ProgressType=IQ;var $7;(function(Z){function J(Y){return p0.func(Y)}Z.is=J})($7||($7={}));Y0.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var F0;(function(Z){Z[Z.Off=0]="Off",Z[Z.Messages=1]="Messages",Z[Z.Compact=2]="Compact",Z[Z.Verbose=3]="Verbose"})(F0||(Y0.Trace=F0={}));var PQ;(function(Z){Z.Off="off",Z.Messages="messages",Z.Compact="compact",Z.Verbose="verbose"})(PQ||(Y0.TraceValues=PQ={}));(function(Z){function J($){if(!p0.string($))return Z.Off;switch($=$.toLowerCase(),$){case"off":return Z.Off;case"messages":return Z.Messages;case"compact":return Z.Compact;case"verbose":return Z.Verbose;default:return Z.Off}}Z.fromString=J;function Y($){switch($){case Z.Off:return"off";case Z.Messages:return"messages";case Z.Compact:return"compact";case Z.Verbose:return"verbose";default:return"off"}}Z.toString=Y})(F0||(Y0.Trace=F0={}));var dZ;(function(Z){Z.Text="text",Z.JSON="json"})(dZ||(Y0.TraceFormat=dZ={}));(function(Z){function J(Y){if(!p0.string(Y))return Z.Text;if(Y=Y.toLowerCase(),Y==="json")return Z.JSON;else return Z.Text}Z.fromString=J})(dZ||(Y0.TraceFormat=dZ={}));var Q7;(function(Z){Z.type=new r.NotificationType("$/setTrace")})(Q7||(Y0.SetTraceNotification=Q7={}));var oY;(function(Z){Z.type=new r.NotificationType("$/logTrace")})(oY||(Y0.LogTraceNotification=oY={}));var HY;(function(Z){Z[Z.Closed=1]="Closed",Z[Z.Disposed=2]="Disposed",Z[Z.AlreadyListening=3]="AlreadyListening"})(HY||(Y0.ConnectionErrors=HY={}));class fJ extends Error{constructor(Z,J){super(J);this.code=Z,Object.setPrototypeOf(this,fJ.prototype)}}Y0.ConnectionError=fJ;var z7;(function(Z){function J(Y){let $=Y;return $&&p0.func($.cancelUndispatched)}Z.is=J})(z7||(Y0.ConnectionStrategy=z7={}));var tY;(function(Z){function J(Y){let $=Y;return $&&($.kind===void 0||$.kind==="id")&&p0.func($.createCancellationTokenSource)&&($.dispose===void 0||p0.func($.dispose))}Z.is=J})(tY||(Y0.IdCancellationReceiverStrategy=tY={}));var G7;(function(Z){function J(Y){let $=Y;return $&&$.kind==="request"&&p0.func($.createCancellationTokenSource)&&($.dispose===void 0||p0.func($.dispose))}Z.is=J})(G7||(Y0.RequestCancellationReceiverStrategy=G7={}));var eY;(function(Z){Z.Message=Object.freeze({createCancellationTokenSource(Y){return new J7.CancellationTokenSource}});function J(Y){return tY.is(Y)||G7.is(Y)}Z.is=J})(eY||(Y0.CancellationReceiverStrategy=eY={}));var Z8;(function(Z){Z.Message=Object.freeze({sendCancellation(Y,$){return Y.sendNotification(OY.type,{id:$})},cleanup(Y){}});function J(Y){let $=Y;return $&&p0.func($.sendCancellation)&&p0.func($.cleanup)}Z.is=J})(Z8||(Y0.CancellationSenderStrategy=Z8={}));var J8;(function(Z){Z.Message=Object.freeze({receiver:eY.Message,sender:Z8.Message});function J(Y){let $=Y;return $&&eY.is($.receiver)&&Z8.is($.sender)}Z.is=J})(J8||(Y0.CancellationStrategy=J8={}));var Y8;(function(Z){function J(Y){let $=Y;return $&&p0.func($.handleMessage)}Z.is=J})(Y8||(Y0.MessageStrategy=Y8={}));var MQ;(function(Z){function J(Y){let $=Y;return $&&(J8.is($.cancellationStrategy)||z7.is($.connectionStrategy)||Y8.is($.messageStrategy))}Z.is=J})(MQ||(Y0.ConnectionOptions=MQ={}));var B9;(function(Z){Z[Z.New=1]="New",Z[Z.Listening=2]="Listening",Z[Z.Closed=3]="Closed",Z[Z.Disposed=4]="Disposed"})(B9||(B9={}));function aK(Z,J,Y,$){let Q=Y!==void 0?Y:Y0.NullLogger,z=0,G=0,B=0,K="2.0",A=void 0,O=new Map,E=void 0,N=new Map,L=new Map,T,C=new FQ.LinkedMap,x=new Map,_=new Set,d=new Map,f=F0.Off,B0=dZ.Text,t,u=B9.New,a=new WY.Emitter,j0=new WY.Emitter,_0=new WY.Emitter,y0=new WY.Emitter,qZ=new WY.Emitter,r0=$&&$.cancellationStrategy?$.cancellationStrategy:J8.Message;function nZ(w){if(w===null)throw Error("Can't send requests with id null since the response can't be correlated.");return"req-"+w.toString()}function XZ(w){if(w===null)return"res-unknown-"+(++B).toString();else return"res-"+w.toString()}function wZ(){return"not-"+(++G).toString()}function JZ(w,y){if(r.Message.isRequest(y))w.set(nZ(y.id),y);else if(r.Message.isResponse(y))w.set(XZ(y.id),y);else w.set(wZ(),y)}function R9(w){return}function O9(){return u===B9.Listening}function R0(){return u===B9.Closed}function CZ(){return u===B9.Disposed}function FZ(){if(u===B9.New||u===B9.Listening)u=B9.Closed,j0.fire(void 0)}function BZ(w){a.fire([w,void 0,void 0])}function c9(w){a.fire(w)}Z.onClose(FZ),Z.onError(BZ),J.onClose(FZ),J.onError(c9);function U9(){if(T||C.size===0)return;T=(0,wQ.default)().timer.setImmediate(()=>{T=void 0,h9()})}function L9(w){if(r.Message.isRequest(w))N9(w);else if(r.Message.isNotification(w))Q9(w);else if(r.Message.isResponse(w))$9(w);else E9(w)}function h9(){if(C.size===0)return;let w=C.shift();try{let y=$?.messageStrategy;if(Y8.is(y))y.handleMessage(w,L9);else L9(w)}finally{U9()}}let i9=(w)=>{try{if(r.Message.isNotification(w)&&w.method===OY.type.method){let y=w.params.id,g=nZ(y),m=C.get(g);if(r.Message.isRequest(m)){let O0=$?.connectionStrategy,M0=O0&&O0.cancelUndispatched?O0.cancelUndispatched(m,R9):R9(m);if(M0&&(M0.error!==void 0||M0.result!==void 0)){C.delete(g),d.delete(y),M0.id=m.id,aZ(M0,w.method,Date.now()),J.write(M0).catch(()=>Q.error("Sending response for canceled message failed."));return}}let L0=d.get(y);if(L0!==void 0){L0.cancel(),sZ(w);return}else _.add(y)}JZ(C,w)}finally{U9()}};function N9(w){if(CZ())return;function y(z0,E0,V0){let C0={jsonrpc:K,id:w.id};if(z0 instanceof r.ResponseError)C0.error=z0.toJson();else C0.result=z0===void 0?null:z0;aZ(C0,E0,V0),J.write(C0).catch(()=>Q.error("Sending response failed."))}function g(z0,E0,V0){let C0={jsonrpc:K,id:w.id,error:z0.toJson()};aZ(C0,E0,V0),J.write(C0).catch(()=>Q.error("Sending response failed."))}function m(z0,E0,V0){if(z0===void 0)z0=null;let C0={jsonrpc:K,id:w.id,result:z0};aZ(C0,E0,V0),J.write(C0).catch(()=>Q.error("Sending response failed."))}n9(w);let L0=O.get(w.method),O0,M0;if(L0)O0=L0.type,M0=L0.handler;let q0=Date.now();if(M0||A){let z0=w.id??String(Date.now()),E0=tY.is(r0.receiver)?r0.receiver.createCancellationTokenSource(z0):r0.receiver.createCancellationTokenSource(w);if(w.id!==null&&_.has(w.id))E0.cancel();if(w.id!==null)d.set(z0,E0);try{let V0;if(M0)if(w.params===void 0){if(O0!==void 0&&O0.numberOfParams!==0){g(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${w.method} defines ${O0.numberOfParams} params but received none.`),w.method,q0);return}V0=M0(E0.token)}else if(Array.isArray(w.params)){if(O0!==void 0&&O0.parameterStructures===r.ParameterStructures.byName){g(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${w.method} defines parameters by name but received parameters by position`),w.method,q0);return}V0=M0(...w.params,E0.token)}else{if(O0!==void 0&&O0.parameterStructures===r.ParameterStructures.byPosition){g(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${w.method} defines parameters by position but received parameters by name`),w.method,q0);return}V0=M0(w.params,E0.token)}else if(A)V0=A(w.method,w.params,E0.token);let C0=V0;if(!V0)d.delete(z0),m(V0,w.method,q0);else if(C0.then)C0.then((c0)=>{d.delete(z0),y(c0,w.method,q0)},(c0)=>{if(d.delete(z0),c0 instanceof r.ResponseError)g(c0,w.method,q0);else if(c0&&p0.string(c0.message))g(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${w.method} failed with message: ${c0.message}`),w.method,q0);else g(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${w.method} failed unexpectedly without providing any details.`),w.method,q0)});else d.delete(z0),y(V0,w.method,q0)}catch(V0){if(d.delete(z0),V0 instanceof r.ResponseError)y(V0,w.method,q0);else if(V0&&p0.string(V0.message))g(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${w.method} failed with message: ${V0.message}`),w.method,q0);else g(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${w.method} failed unexpectedly without providing any details.`),w.method,q0)}}else g(new r.ResponseError(r.ErrorCodes.MethodNotFound,`Unhandled method ${w.method}`),w.method,q0)}function $9(w){if(CZ())return;if(w.id===null)if(w.error)Q.error(`Received response message without id: Error is: 
${JSON.stringify(w.error,void 0,4)}`);else Q.error("Received response message without id. No further error information provided.");else{let y=w.id,g=x.get(y);if(w9(w,g),g!==void 0){x.delete(y);try{if(w.error){let m=w.error;g.reject(new r.ResponseError(m.code,m.message,m.data))}else if(w.result!==void 0)g.resolve(w.result);else throw Error("Should never happen.")}catch(m){if(m.message)Q.error(`Response handler '${g.method}' failed with message: ${m.message}`);else Q.error(`Response handler '${g.method}' failed unexpectedly.`)}}}}function Q9(w){if(CZ())return;let y=void 0,g;if(w.method===OY.type.method){let m=w.params.id;_.delete(m),sZ(w);return}else{let m=N.get(w.method);if(m)g=m.handler,y=m.type}if(g||E)try{if(sZ(w),g)if(w.params===void 0){if(y!==void 0){if(y.numberOfParams!==0&&y.parameterStructures!==r.ParameterStructures.byName)Q.error(`Notification ${w.method} defines ${y.numberOfParams} params but received none.`)}g()}else if(Array.isArray(w.params)){let m=w.params;if(w.method===AY.type.method&&m.length===2&&Y7.is(m[0]))g({token:m[0],value:m[1]});else{if(y!==void 0){if(y.parameterStructures===r.ParameterStructures.byName)Q.error(`Notification ${w.method} defines parameters by name but received parameters by position`);if(y.numberOfParams!==w.params.length)Q.error(`Notification ${w.method} defines ${y.numberOfParams} params but received ${m.length} arguments`)}g(...m)}}else{if(y!==void 0&&y.parameterStructures===r.ParameterStructures.byPosition)Q.error(`Notification ${w.method} defines parameters by position but received parameters by name`);g(w.params)}else if(E)E(w.method,w.params)}catch(m){if(m.message)Q.error(`Notification handler '${w.method}' failed with message: ${m.message}`);else Q.error(`Notification handler '${w.method}' failed unexpectedly.`)}else _0.fire(w)}function E9(w){if(!w){Q.error("Received empty message.");return}Q.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(w,null,4)}`);let y=w;if(p0.string(y.id)||p0.number(y.id)){let g=y.id,m=x.get(g);if(m)m.reject(Error("The received response has neither a result nor an error property."))}}function o0(w){if(w===void 0||w===null)return;switch(f){case F0.Verbose:return JSON.stringify(w,null,4);case F0.Compact:return JSON.stringify(w);default:return}}function x9(w){if(f===F0.Off||!t)return;if(B0===dZ.Text){let y=void 0;if((f===F0.Verbose||f===F0.Compact)&&w.params)y=`Params: ${o0(w.params)}

`;t.log(`Sending request '${w.method} - (${w.id})'.`,y)}else s0("send-request",w)}function z9(w){if(f===F0.Off||!t)return;if(B0===dZ.Text){let y=void 0;if(f===F0.Verbose||f===F0.Compact)if(w.params)y=`Params: ${o0(w.params)}

`;else y=`No parameters provided.

`;t.log(`Sending notification '${w.method}'.`,y)}else s0("send-notification",w)}function aZ(w,y,g){if(f===F0.Off||!t)return;if(B0===dZ.Text){let m=void 0;if(f===F0.Verbose||f===F0.Compact){if(w.error&&w.error.data)m=`Error data: ${o0(w.error.data)}

`;else if(w.result)m=`Result: ${o0(w.result)}

`;else if(w.error===void 0)m=`No result returned.

`}t.log(`Sending response '${y} - (${w.id})'. Processing request took ${Date.now()-g}ms`,m)}else s0("send-response",w)}function n9(w){if(f===F0.Off||!t)return;if(B0===dZ.Text){let y=void 0;if((f===F0.Verbose||f===F0.Compact)&&w.params)y=`Params: ${o0(w.params)}

`;t.log(`Received request '${w.method} - (${w.id})'.`,y)}else s0("receive-request",w)}function sZ(w){if(f===F0.Off||!t||w.method===oY.type.method)return;if(B0===dZ.Text){let y=void 0;if(f===F0.Verbose||f===F0.Compact)if(w.params)y=`Params: ${o0(w.params)}

`;else y=`No parameters provided.

`;t.log(`Received notification '${w.method}'.`,y)}else s0("receive-notification",w)}function w9(w,y){if(f===F0.Off||!t)return;if(B0===dZ.Text){let g=void 0;if(f===F0.Verbose||f===F0.Compact){if(w.error&&w.error.data)g=`Error data: ${o0(w.error.data)}

`;else if(w.result)g=`Result: ${o0(w.result)}

`;else if(w.error===void 0)g=`No result returned.

`}if(y){let m=w.error?` Request failed: ${w.error.message} (${w.error.code}).`:"";t.log(`Received response '${y.method} - (${w.id})' in ${Date.now()-y.timerStart}ms.${m}`,g)}else t.log(`Received response ${w.id} without active response promise.`,g)}else s0("receive-response",w)}function s0(w,y){if(!t||f===F0.Off)return;let g={isLSPMessage:!0,type:w,message:y,timestamp:Date.now()};t.log(g)}function WZ(){if(R0())throw new fJ(HY.Closed,"Connection is closed.");if(CZ())throw new fJ(HY.Disposed,"Connection is disposed.")}function jZ(){if(O9())throw new fJ(HY.AlreadyListening,"Connection is already listening")}function vZ(){if(!O9())throw Error("Call listen() first.")}function SZ(w){if(w===void 0)return null;else return w}function F9(w){if(w===null)return;else return w}function _9(w){return w!==void 0&&w!==null&&!Array.isArray(w)&&typeof w==="object"}function G9(w,y){switch(w){case r.ParameterStructures.auto:if(_9(y))return F9(y);else return[SZ(y)];case r.ParameterStructures.byName:if(!_9(y))throw Error("Received parameters by name but param is not an object literal.");return F9(y);case r.ParameterStructures.byPosition:return[SZ(y)];default:throw Error(`Unknown parameter structure ${w.toString()}`)}}function f9(w,y){let g,m=w.numberOfParams;switch(m){case 0:g=void 0;break;case 1:g=G9(w.parameterStructures,y[0]);break;default:g=[];for(let L0=0;L0<y.length&&L0<m;L0++)g.push(SZ(y[L0]));if(y.length<m)for(let L0=y.length;L0<m;L0++)g.push(null);break}return g}let PZ={sendNotification:(w,...y)=>{WZ();let g,m;if(p0.string(w)){g=w;let O0=y[0],M0=0,q0=r.ParameterStructures.auto;if(r.ParameterStructures.is(O0))M0=1,q0=O0;let z0=y.length,E0=z0-M0;switch(E0){case 0:m=void 0;break;case 1:m=G9(q0,y[M0]);break;default:if(q0===r.ParameterStructures.byName)throw Error(`Received ${E0} parameters for 'by Name' notification parameter structure.`);m=y.slice(M0,z0).map((V0)=>SZ(V0));break}}else{let O0=y;g=w.method,m=f9(w,O0)}let L0={jsonrpc:K,method:g,params:m};return z9(L0),J.write(L0).catch((O0)=>{throw Q.error("Sending notification failed."),O0})},onNotification:(w,y)=>{WZ();let g;if(p0.func(w))E=w;else if(y)if(p0.string(w))g=w,N.set(w,{type:void 0,handler:y});else g=w.method,N.set(w.method,{type:w,handler:y});return{dispose:()=>{if(g!==void 0)N.delete(g);else E=void 0}}},onProgress:(w,y,g)=>{if(L.has(y))throw Error(`Progress handler for token ${y} already registered`);return L.set(y,g),{dispose:()=>{L.delete(y)}}},sendProgress:(w,y,g)=>{return PZ.sendNotification(AY.type,{token:y,value:g})},onUnhandledProgress:y0.event,sendRequest:(w,...y)=>{WZ(),vZ();let g,m,L0=void 0;if(p0.string(w)){g=w;let z0=y[0],E0=y[y.length-1],V0=0,C0=r.ParameterStructures.auto;if(r.ParameterStructures.is(z0))V0=1,C0=z0;let c0=y.length;if(J7.CancellationToken.is(E0))c0=c0-1,L0=E0;let YZ=c0-V0;switch(YZ){case 0:m=void 0;break;case 1:m=G9(C0,y[V0]);break;default:if(C0===r.ParameterStructures.byName)throw Error(`Received ${YZ} parameters for 'by Name' request parameter structure.`);m=y.slice(V0,c0).map((a9)=>SZ(a9));break}}else{let z0=y;g=w.method,m=f9(w,z0);let E0=w.numberOfParams;L0=J7.CancellationToken.is(z0[E0])?z0[E0]:void 0}let O0=z++,M0;if(L0)M0=L0.onCancellationRequested(()=>{let z0=r0.sender.sendCancellation(PZ,O0);if(z0===void 0)return Q.log(`Received no promise from cancellation strategy when cancelling id ${O0}`),Promise.resolve();else return z0.catch(()=>{Q.log(`Sending cancellation messages for id ${O0} failed`)})});let q0={jsonrpc:K,id:O0,method:g,params:m};if(x9(q0),typeof r0.sender.enableCancellation==="function")r0.sender.enableCancellation(q0);return new Promise(async(z0,E0)=>{let V0=(YZ)=>{z0(YZ),r0.sender.cleanup(O0),M0?.dispose()},C0=(YZ)=>{E0(YZ),r0.sender.cleanup(O0),M0?.dispose()},c0={method:g,timerStart:Date.now(),resolve:V0,reject:C0};try{await J.write(q0),x.set(O0,c0)}catch(YZ){throw Q.error("Sending request failed."),c0.reject(new r.ResponseError(r.ErrorCodes.MessageWriteError,YZ.message?YZ.message:"Unknown reason")),YZ}})},onRequest:(w,y)=>{WZ();let g=null;if($7.is(w))g=void 0,A=w;else if(p0.string(w)){if(g=null,y!==void 0)g=w,O.set(w,{handler:y,type:void 0})}else if(y!==void 0)g=w.method,O.set(w.method,{type:w,handler:y});return{dispose:()=>{if(g===null)return;if(g!==void 0)O.delete(g);else A=void 0}}},hasPendingResponse:()=>{return x.size>0},trace:async(w,y,g)=>{let m=!1,L0=dZ.Text;if(g!==void 0)if(p0.boolean(g))m=g;else m=g.sendNotification||!1,L0=g.traceFormat||dZ.Text;if(f=w,B0=L0,f===F0.Off)t=void 0;else t=y;if(m&&!R0()&&!CZ())await PZ.sendNotification(Q7.type,{value:F0.toString(w)})},onError:a.event,onClose:j0.event,onUnhandledNotification:_0.event,onDispose:qZ.event,end:()=>{J.end()},dispose:()=>{if(CZ())return;u=B9.Disposed,qZ.fire(void 0);let w=new r.ResponseError(r.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let y of x.values())y.reject(w);if(x=new Map,d=new Map,_=new Set,C=new FQ.LinkedMap,p0.func(J.dispose))J.dispose();if(p0.func(Z.dispose))Z.dispose()},listen:()=>{WZ(),jZ(),u=B9.Listening,Z.listen(i9)},inspect:()=>{(0,wQ.default)().console.log("inspect")}};return PZ.onNotification(oY.type,(w)=>{if(f===F0.Off||!t)return;let y=f===F0.Verbose||f===F0.Compact;t.log(w.message,y?w.verbose:void 0)}),PZ.onNotification(AY.type,(w)=>{let y=L.get(w.token);if(y)y(w.value);else y0.fire(w)}),PZ}Y0.createMessageConnection=aK});var $8=D((b)=>{Object.defineProperty(b,"__esModule",{value:!0});b.ProgressType=b.ProgressToken=b.createMessageConnection=b.NullLogger=b.ConnectionOptions=b.ConnectionStrategy=b.AbstractMessageBuffer=b.WriteableStreamMessageWriter=b.AbstractMessageWriter=b.MessageWriter=b.ReadableStreamMessageReader=b.AbstractMessageReader=b.MessageReader=b.SharedArrayReceiverStrategy=b.SharedArraySenderStrategy=b.CancellationToken=b.CancellationTokenSource=b.Emitter=b.Event=b.Disposable=b.LRUCache=b.Touch=b.LinkedMap=b.ParameterStructures=b.NotificationType9=b.NotificationType8=b.NotificationType7=b.NotificationType6=b.NotificationType5=b.NotificationType4=b.NotificationType3=b.NotificationType2=b.NotificationType1=b.NotificationType0=b.NotificationType=b.ErrorCodes=b.ResponseError=b.RequestType9=b.RequestType8=b.RequestType7=b.RequestType6=b.RequestType5=b.RequestType4=b.RequestType3=b.RequestType2=b.RequestType1=b.RequestType0=b.RequestType=b.Message=b.RAL=void 0;b.MessageStrategy=b.CancellationStrategy=b.CancellationSenderStrategy=b.CancellationReceiverStrategy=b.ConnectionError=b.ConnectionErrors=b.LogTraceNotification=b.SetTraceNotification=b.TraceFormat=b.TraceValues=b.Trace=void 0;var h0=d6();Object.defineProperty(b,"Message",{enumerable:!0,get:function(){return h0.Message}});Object.defineProperty(b,"RequestType",{enumerable:!0,get:function(){return h0.RequestType}});Object.defineProperty(b,"RequestType0",{enumerable:!0,get:function(){return h0.RequestType0}});Object.defineProperty(b,"RequestType1",{enumerable:!0,get:function(){return h0.RequestType1}});Object.defineProperty(b,"RequestType2",{enumerable:!0,get:function(){return h0.RequestType2}});Object.defineProperty(b,"RequestType3",{enumerable:!0,get:function(){return h0.RequestType3}});Object.defineProperty(b,"RequestType4",{enumerable:!0,get:function(){return h0.RequestType4}});Object.defineProperty(b,"RequestType5",{enumerable:!0,get:function(){return h0.RequestType5}});Object.defineProperty(b,"RequestType6",{enumerable:!0,get:function(){return h0.RequestType6}});Object.defineProperty(b,"RequestType7",{enumerable:!0,get:function(){return h0.RequestType7}});Object.defineProperty(b,"RequestType8",{enumerable:!0,get:function(){return h0.RequestType8}});Object.defineProperty(b,"RequestType9",{enumerable:!0,get:function(){return h0.RequestType9}});Object.defineProperty(b,"ResponseError",{enumerable:!0,get:function(){return h0.ResponseError}});Object.defineProperty(b,"ErrorCodes",{enumerable:!0,get:function(){return h0.ErrorCodes}});Object.defineProperty(b,"NotificationType",{enumerable:!0,get:function(){return h0.NotificationType}});Object.defineProperty(b,"NotificationType0",{enumerable:!0,get:function(){return h0.NotificationType0}});Object.defineProperty(b,"NotificationType1",{enumerable:!0,get:function(){return h0.NotificationType1}});Object.defineProperty(b,"NotificationType2",{enumerable:!0,get:function(){return h0.NotificationType2}});Object.defineProperty(b,"NotificationType3",{enumerable:!0,get:function(){return h0.NotificationType3}});Object.defineProperty(b,"NotificationType4",{enumerable:!0,get:function(){return h0.NotificationType4}});Object.defineProperty(b,"NotificationType5",{enumerable:!0,get:function(){return h0.NotificationType5}});Object.defineProperty(b,"NotificationType6",{enumerable:!0,get:function(){return h0.NotificationType6}});Object.defineProperty(b,"NotificationType7",{enumerable:!0,get:function(){return h0.NotificationType7}});Object.defineProperty(b,"NotificationType8",{enumerable:!0,get:function(){return h0.NotificationType8}});Object.defineProperty(b,"NotificationType9",{enumerable:!0,get:function(){return h0.NotificationType9}});Object.defineProperty(b,"ParameterStructures",{enumerable:!0,get:function(){return h0.ParameterStructures}});var X7=m6();Object.defineProperty(b,"LinkedMap",{enumerable:!0,get:function(){return X7.LinkedMap}});Object.defineProperty(b,"LRUCache",{enumerable:!0,get:function(){return X7.LRUCache}});Object.defineProperty(b,"Touch",{enumerable:!0,get:function(){return X7.Touch}});var sK=e4();Object.defineProperty(b,"Disposable",{enumerable:!0,get:function(){return sK.Disposable}});var qQ=RJ();Object.defineProperty(b,"Event",{enumerable:!0,get:function(){return qQ.Event}});Object.defineProperty(b,"Emitter",{enumerable:!0,get:function(){return qQ.Emitter}});var CQ=aY();Object.defineProperty(b,"CancellationTokenSource",{enumerable:!0,get:function(){return CQ.CancellationTokenSource}});Object.defineProperty(b,"CancellationToken",{enumerable:!0,get:function(){return CQ.CancellationToken}});var SQ=XQ();Object.defineProperty(b,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return SQ.SharedArraySenderStrategy}});Object.defineProperty(b,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return SQ.SharedArrayReceiverStrategy}});var B7=VQ();Object.defineProperty(b,"MessageReader",{enumerable:!0,get:function(){return B7.MessageReader}});Object.defineProperty(b,"AbstractMessageReader",{enumerable:!0,get:function(){return B7.AbstractMessageReader}});Object.defineProperty(b,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return B7.ReadableStreamMessageReader}});var j7=LQ();Object.defineProperty(b,"MessageWriter",{enumerable:!0,get:function(){return j7.MessageWriter}});Object.defineProperty(b,"AbstractMessageWriter",{enumerable:!0,get:function(){return j7.AbstractMessageWriter}});Object.defineProperty(b,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return j7.WriteableStreamMessageWriter}});var rK=EQ();Object.defineProperty(b,"AbstractMessageBuffer",{enumerable:!0,get:function(){return rK.AbstractMessageBuffer}});var VZ=TQ();Object.defineProperty(b,"ConnectionStrategy",{enumerable:!0,get:function(){return VZ.ConnectionStrategy}});Object.defineProperty(b,"ConnectionOptions",{enumerable:!0,get:function(){return VZ.ConnectionOptions}});Object.defineProperty(b,"NullLogger",{enumerable:!0,get:function(){return VZ.NullLogger}});Object.defineProperty(b,"createMessageConnection",{enumerable:!0,get:function(){return VZ.createMessageConnection}});Object.defineProperty(b,"ProgressToken",{enumerable:!0,get:function(){return VZ.ProgressToken}});Object.defineProperty(b,"ProgressType",{enumerable:!0,get:function(){return VZ.ProgressType}});Object.defineProperty(b,"Trace",{enumerable:!0,get:function(){return VZ.Trace}});Object.defineProperty(b,"TraceValues",{enumerable:!0,get:function(){return VZ.TraceValues}});Object.defineProperty(b,"TraceFormat",{enumerable:!0,get:function(){return VZ.TraceFormat}});Object.defineProperty(b,"SetTraceNotification",{enumerable:!0,get:function(){return VZ.SetTraceNotification}});Object.defineProperty(b,"LogTraceNotification",{enumerable:!0,get:function(){return VZ.LogTraceNotification}});Object.defineProperty(b,"ConnectionErrors",{enumerable:!0,get:function(){return VZ.ConnectionErrors}});Object.defineProperty(b,"ConnectionError",{enumerable:!0,get:function(){return VZ.ConnectionError}});Object.defineProperty(b,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return VZ.CancellationReceiverStrategy}});Object.defineProperty(b,"CancellationSenderStrategy",{enumerable:!0,get:function(){return VZ.CancellationSenderStrategy}});Object.defineProperty(b,"CancellationStrategy",{enumerable:!0,get:function(){return VZ.CancellationStrategy}});Object.defineProperty(b,"MessageStrategy",{enumerable:!0,get:function(){return VZ.MessageStrategy}});var oK=o9();b.RAL=oK.default});var hQ=D((V7)=>{Object.defineProperty(V7,"__esModule",{value:!0});var DQ=require("util"),k9=$8();class Q8 extends k9.AbstractMessageBuffer{constructor(Z="utf-8"){super(Z)}emptyBuffer(){return Q8.emptyBuffer}fromString(Z,J){return Buffer.from(Z,J)}toString(Z,J){if(Z instanceof Buffer)return Z.toString(J);else return new DQ.TextDecoder(J).decode(Z)}asNative(Z,J){if(J===void 0)return Z instanceof Buffer?Z:Buffer.from(Z);else return Z instanceof Buffer?Z.slice(0,J):Buffer.from(Z,0,J)}allocNative(Z){return Buffer.allocUnsafe(Z)}}Q8.emptyBuffer=Buffer.allocUnsafe(0);class bQ{constructor(Z){this.stream=Z}onClose(Z){return this.stream.on("close",Z),k9.Disposable.create(()=>this.stream.off("close",Z))}onError(Z){return this.stream.on("error",Z),k9.Disposable.create(()=>this.stream.off("error",Z))}onEnd(Z){return this.stream.on("end",Z),k9.Disposable.create(()=>this.stream.off("end",Z))}onData(Z){return this.stream.on("data",Z),k9.Disposable.create(()=>this.stream.off("data",Z))}}class yQ{constructor(Z){this.stream=Z}onClose(Z){return this.stream.on("close",Z),k9.Disposable.create(()=>this.stream.off("close",Z))}onError(Z){return this.stream.on("error",Z),k9.Disposable.create(()=>this.stream.off("error",Z))}onEnd(Z){return this.stream.on("end",Z),k9.Disposable.create(()=>this.stream.off("end",Z))}write(Z,J){return new Promise((Y,$)=>{let Q=(z)=>{if(z===void 0||z===null)Y();else $(z)};if(typeof Z==="string")this.stream.write(Z,J,Q);else this.stream.write(Z,Q)})}end(){this.stream.end()}}var RQ=Object.freeze({messageBuffer:Object.freeze({create:(Z)=>new Q8(Z)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(Z,J)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(Z,void 0,0),J.charset))}catch(Y){return Promise.reject(Y)}}}),decoder:Object.freeze({name:"application/json",decode:(Z,J)=>{try{if(Z instanceof Buffer)return Promise.resolve(JSON.parse(Z.toString(J.charset)));else return Promise.resolve(JSON.parse(new DQ.TextDecoder(J.charset).decode(Z)))}catch(Y){return Promise.reject(Y)}}})}),stream:Object.freeze({asReadableStream:(Z)=>new bQ(Z),asWritableStream:(Z)=>new yQ(Z)}),console,timer:Object.freeze({setTimeout(Z,J,...Y){let $=setTimeout(Z,J,...Y);return{dispose:()=>clearTimeout($)}},setImmediate(Z,...J){let Y=setImmediate(Z,...J);return{dispose:()=>clearImmediate(Y)}},setInterval(Z,J,...Y){let $=setInterval(Z,J,...Y);return{dispose:()=>clearInterval($)}}})});function K7(){return RQ}(function(Z){function J(){k9.RAL.install(RQ)}Z.install=J})(K7||(K7={}));V7.default=K7});var AJ=D((H0)=>{var tK=H0&&H0.__createBinding||(Object.create?function(Z,J,Y,$){if($===void 0)$=Y;var Q=Object.getOwnPropertyDescriptor(J,Y);if(!Q||("get"in Q?!J.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return J[Y]}};Object.defineProperty(Z,$,Q)}:function(Z,J,Y,$){if($===void 0)$=Y;Z[$]=J[Y]}),eK=H0&&H0.__exportStar||function(Z,J){for(var Y in Z)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(J,Y))tK(J,Z,Y)};Object.defineProperty(H0,"__esModule",{value:!0});H0.createMessageConnection=H0.createServerSocketTransport=H0.createClientSocketTransport=H0.createServerPipeTransport=H0.createClientPipeTransport=H0.generateRandomPipeName=H0.StreamMessageWriter=H0.StreamMessageReader=H0.SocketMessageWriter=H0.SocketMessageReader=H0.PortMessageWriter=H0.PortMessageReader=H0.IPCMessageWriter=H0.IPCMessageReader=void 0;var kJ=hQ();kJ.default.install();var xQ=require("path"),ZV=require("os"),JV=require("crypto"),z8=require("net"),pZ=$8();eK($8(),H0);class fQ extends pZ.AbstractMessageReader{constructor(Z){super();this.process=Z;let J=this.process;J.on("error",(Y)=>this.fireError(Y)),J.on("close",()=>this.fireClose())}listen(Z){return this.process.on("message",Z),pZ.Disposable.create(()=>this.process.off("message",Z))}}H0.IPCMessageReader=fQ;class kQ extends pZ.AbstractMessageWriter{constructor(Z){super();this.process=Z,this.errorCount=0;let J=this.process;J.on("error",(Y)=>this.fireError(Y)),J.on("close",()=>this.fireClose)}write(Z){try{if(typeof this.process.send==="function")this.process.send(Z,void 0,void 0,(J)=>{if(J)this.errorCount++,this.handleError(J,Z);else this.errorCount=0});return Promise.resolve()}catch(J){return this.handleError(J,Z),Promise.reject(J)}}handleError(Z,J){this.errorCount++,this.fireError(Z,J,this.errorCount)}end(){}}H0.IPCMessageWriter=kQ;class vQ extends pZ.AbstractMessageReader{constructor(Z){super();this.onData=new pZ.Emitter,Z.on("close",()=>this.fireClose),Z.on("error",(J)=>this.fireError(J)),Z.on("message",(J)=>{this.onData.fire(J)})}listen(Z){return this.onData.event(Z)}}H0.PortMessageReader=vQ;class gQ extends pZ.AbstractMessageWriter{constructor(Z){super();this.port=Z,this.errorCount=0,Z.on("close",()=>this.fireClose()),Z.on("error",(J)=>this.fireError(J))}write(Z){try{return this.port.postMessage(Z),Promise.resolve()}catch(J){return this.handleError(J,Z),Promise.reject(J)}}handleError(Z,J){this.errorCount++,this.fireError(Z,J,this.errorCount)}end(){}}H0.PortMessageWriter=gQ;class vJ extends pZ.ReadableStreamMessageReader{constructor(Z,J="utf-8"){super((0,kJ.default)().stream.asReadableStream(Z),J)}}H0.SocketMessageReader=vJ;class gJ extends pZ.WriteableStreamMessageWriter{constructor(Z,J){super((0,kJ.default)().stream.asWritableStream(Z),J);this.socket=Z}dispose(){super.dispose(),this.socket.destroy()}}H0.SocketMessageWriter=gJ;class W7 extends pZ.ReadableStreamMessageReader{constructor(Z,J){super((0,kJ.default)().stream.asReadableStream(Z),J)}}H0.StreamMessageReader=W7;class A7 extends pZ.WriteableStreamMessageWriter{constructor(Z,J){super((0,kJ.default)().stream.asWritableStream(Z),J)}}H0.StreamMessageWriter=A7;var _Q=process.env.XDG_RUNTIME_DIR,YV=new Map([["linux",107],["darwin",103]]);function $V(){let Z=(0,JV.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${Z}-sock`;let J;if(_Q)J=xQ.join(_Q,`vscode-ipc-${Z}.sock`);else J=xQ.join(ZV.tmpdir(),`vscode-${Z}.sock`);let Y=YV.get(process.platform);if(Y!==void 0&&J.length>Y)(0,kJ.default)().console.warn(`WARNING: IPC handle "${J}" is longer than ${Y} characters.`);return J}H0.generateRandomPipeName=$V;function QV(Z,J="utf-8"){let Y,$=new Promise((Q,z)=>{Y=Q});return new Promise((Q,z)=>{let G=(0,z8.createServer)((B)=>{G.close(),Y([new vJ(B,J),new gJ(B,J)])});G.on("error",z),G.listen(Z,()=>{G.removeListener("error",z),Q({onConnected:()=>{return $}})})})}H0.createClientPipeTransport=QV;function zV(Z,J="utf-8"){let Y=(0,z8.createConnection)(Z);return[new vJ(Y,J),new gJ(Y,J)]}H0.createServerPipeTransport=zV;function GV(Z,J="utf-8"){let Y,$=new Promise((Q,z)=>{Y=Q});return new Promise((Q,z)=>{let G=(0,z8.createServer)((B)=>{G.close(),Y([new vJ(B,J),new gJ(B,J)])});G.on("error",z),G.listen(Z,"127.0.0.1",()=>{G.removeListener("error",z),Q({onConnected:()=>{return $}})})})}H0.createClientSocketTransport=GV;function XV(Z,J="utf-8"){let Y=(0,z8.createConnection)(Z,"127.0.0.1");return[new vJ(Y,J),new gJ(Y,J)]}H0.createServerSocketTransport=XV;function BV(Z){let J=Z;return J.read!==void 0&&J.addListener!==void 0}function jV(Z){let J=Z;return J.write!==void 0&&J.addListener!==void 0}function KV(Z,J,Y,$){if(!Y)Y=pZ.NullLogger;let Q=BV(Z)?new W7(Z):Z,z=jV(J)?new A7(J):J;if(pZ.ConnectionStrategy.is($))$={connectionStrategy:$};return(0,pZ.createMessageConnection)(Q,z,Y,$)}H0.createMessageConnection=KV});var H7=D((oO,dQ)=>{dQ.exports=AJ()});var X8=D((pQ,G8)=>{(function(Z){if(typeof G8==="object"&&typeof G8.exports==="object"){var J=Z(require,pQ);if(J!==void 0)G8.exports=J}else if(typeof define==="function"&&define.amd)define(["require","exports"],Z)})(function(Z,J){Object.defineProperty(J,"__esModule",{value:!0}),J.TextDocument=J.EOL=J.WorkspaceFolder=J.InlineCompletionContext=J.SelectedCompletionInfo=J.InlineCompletionTriggerKind=J.InlineCompletionList=J.InlineCompletionItem=J.StringValue=J.InlayHint=J.InlayHintLabelPart=J.InlayHintKind=J.InlineValueContext=J.InlineValueEvaluatableExpression=J.InlineValueVariableLookup=J.InlineValueText=J.SemanticTokens=J.SemanticTokenModifiers=J.SemanticTokenTypes=J.SelectionRange=J.DocumentLink=J.FormattingOptions=J.CodeLens=J.CodeAction=J.CodeActionContext=J.CodeActionTriggerKind=J.CodeActionKind=J.DocumentSymbol=J.WorkspaceSymbol=J.SymbolInformation=J.SymbolTag=J.SymbolKind=J.DocumentHighlight=J.DocumentHighlightKind=J.SignatureInformation=J.ParameterInformation=J.Hover=J.MarkedString=J.CompletionList=J.CompletionItem=J.CompletionItemLabelDetails=J.InsertTextMode=J.InsertReplaceEdit=J.CompletionItemTag=J.InsertTextFormat=J.CompletionItemKind=J.MarkupContent=J.MarkupKind=J.TextDocumentItem=J.OptionalVersionedTextDocumentIdentifier=J.VersionedTextDocumentIdentifier=J.TextDocumentIdentifier=J.WorkspaceChange=J.WorkspaceEdit=J.DeleteFile=J.RenameFile=J.CreateFile=J.TextDocumentEdit=J.AnnotatedTextEdit=J.ChangeAnnotationIdentifier=J.ChangeAnnotation=J.TextEdit=J.Command=J.Diagnostic=J.CodeDescription=J.DiagnosticTag=J.DiagnosticSeverity=J.DiagnosticRelatedInformation=J.FoldingRange=J.FoldingRangeKind=J.ColorPresentation=J.ColorInformation=J.Color=J.LocationLink=J.Location=J.Range=J.Position=J.uinteger=J.integer=J.URI=J.DocumentUri=void 0;var Y;(function(W){function F(P){return typeof P==="string"}W.is=F})(Y||(J.DocumentUri=Y={}));var $;(function(W){function F(P){return typeof P==="string"}W.is=F})($||(J.URI=$={}));var Q;(function(W){W.MIN_VALUE=-2147483648,W.MAX_VALUE=2147483647;function F(P){return typeof P==="number"&&W.MIN_VALUE<=P&&P<=W.MAX_VALUE}W.is=F})(Q||(J.integer=Q={}));var z;(function(W){W.MIN_VALUE=0,W.MAX_VALUE=2147483647;function F(P){return typeof P==="number"&&W.MIN_VALUE<=P&&P<=W.MAX_VALUE}W.is=F})(z||(J.uinteger=z={}));var G;(function(W){function F(H,j){if(H===Number.MAX_VALUE)H=z.MAX_VALUE;if(j===Number.MAX_VALUE)j=z.MAX_VALUE;return{line:H,character:j}}W.create=F;function P(H){var j=H;return I.objectLiteral(j)&&I.uinteger(j.line)&&I.uinteger(j.character)}W.is=P})(G||(J.Position=G={}));var B;(function(W){function F(H,j,q,R){if(I.uinteger(H)&&I.uinteger(j)&&I.uinteger(q)&&I.uinteger(R))return{start:G.create(H,j),end:G.create(q,R)};else if(G.is(H)&&G.is(j))return{start:H,end:j};else throw Error("Range#create called with invalid arguments[".concat(H,", ").concat(j,", ").concat(q,", ").concat(R,"]"))}W.create=F;function P(H){var j=H;return I.objectLiteral(j)&&G.is(j.start)&&G.is(j.end)}W.is=P})(B||(J.Range=B={}));var K;(function(W){function F(H,j){return{uri:H,range:j}}W.create=F;function P(H){var j=H;return I.objectLiteral(j)&&B.is(j.range)&&(I.string(j.uri)||I.undefined(j.uri))}W.is=P})(K||(J.Location=K={}));var A;(function(W){function F(H,j,q,R){return{targetUri:H,targetRange:j,targetSelectionRange:q,originSelectionRange:R}}W.create=F;function P(H){var j=H;return I.objectLiteral(j)&&B.is(j.targetRange)&&I.string(j.targetUri)&&B.is(j.targetSelectionRange)&&(B.is(j.originSelectionRange)||I.undefined(j.originSelectionRange))}W.is=P})(A||(J.LocationLink=A={}));var O;(function(W){function F(H,j,q,R){return{red:H,green:j,blue:q,alpha:R}}W.create=F;function P(H){var j=H;return I.objectLiteral(j)&&I.numberRange(j.red,0,1)&&I.numberRange(j.green,0,1)&&I.numberRange(j.blue,0,1)&&I.numberRange(j.alpha,0,1)}W.is=P})(O||(J.Color=O={}));var E;(function(W){function F(H,j){return{range:H,color:j}}W.create=F;function P(H){var j=H;return I.objectLiteral(j)&&B.is(j.range)&&O.is(j.color)}W.is=P})(E||(J.ColorInformation=E={}));var N;(function(W){function F(H,j,q){return{label:H,textEdit:j,additionalTextEdits:q}}W.create=F;function P(H){var j=H;return I.objectLiteral(j)&&I.string(j.label)&&(I.undefined(j.textEdit)||t.is(j))&&(I.undefined(j.additionalTextEdits)||I.typedArray(j.additionalTextEdits,t.is))}W.is=P})(N||(J.ColorPresentation=N={}));var L;(function(W){W.Comment="comment",W.Imports="imports",W.Region="region"})(L||(J.FoldingRangeKind=L={}));var T;(function(W){function F(H,j,q,R,e,f0){var S0={startLine:H,endLine:j};if(I.defined(q))S0.startCharacter=q;if(I.defined(R))S0.endCharacter=R;if(I.defined(e))S0.kind=e;if(I.defined(f0))S0.collapsedText=f0;return S0}W.create=F;function P(H){var j=H;return I.objectLiteral(j)&&I.uinteger(j.startLine)&&I.uinteger(j.startLine)&&(I.undefined(j.startCharacter)||I.uinteger(j.startCharacter))&&(I.undefined(j.endCharacter)||I.uinteger(j.endCharacter))&&(I.undefined(j.kind)||I.string(j.kind))}W.is=P})(T||(J.FoldingRange=T={}));var C;(function(W){function F(H,j){return{location:H,message:j}}W.create=F;function P(H){var j=H;return I.defined(j)&&K.is(j.location)&&I.string(j.message)}W.is=P})(C||(J.DiagnosticRelatedInformation=C={}));var x;(function(W){W.Error=1,W.Warning=2,W.Information=3,W.Hint=4})(x||(J.DiagnosticSeverity=x={}));var _;(function(W){W.Unnecessary=1,W.Deprecated=2})(_||(J.DiagnosticTag=_={}));var d;(function(W){function F(P){var H=P;return I.objectLiteral(H)&&I.string(H.href)}W.is=F})(d||(J.CodeDescription=d={}));var f;(function(W){function F(H,j,q,R,e,f0){var S0={range:H,message:j};if(I.defined(q))S0.severity=q;if(I.defined(R))S0.code=R;if(I.defined(e))S0.source=e;if(I.defined(f0))S0.relatedInformation=f0;return S0}W.create=F;function P(H){var j,q=H;return I.defined(q)&&B.is(q.range)&&I.string(q.message)&&(I.number(q.severity)||I.undefined(q.severity))&&(I.integer(q.code)||I.string(q.code)||I.undefined(q.code))&&(I.undefined(q.codeDescription)||I.string((j=q.codeDescription)===null||j===void 0?void 0:j.href))&&(I.string(q.source)||I.undefined(q.source))&&(I.undefined(q.relatedInformation)||I.typedArray(q.relatedInformation,C.is))}W.is=P})(f||(J.Diagnostic=f={}));var B0;(function(W){function F(H,j){var q=[];for(var R=2;R<arguments.length;R++)q[R-2]=arguments[R];var e={title:H,command:j};if(I.defined(q)&&q.length>0)e.arguments=q;return e}W.create=F;function P(H){var j=H;return I.defined(j)&&I.string(j.title)&&I.string(j.command)}W.is=P})(B0||(J.Command=B0={}));var t;(function(W){function F(q,R){return{range:q,newText:R}}W.replace=F;function P(q,R){return{range:{start:q,end:q},newText:R}}W.insert=P;function H(q){return{range:q,newText:""}}W.del=H;function j(q){var R=q;return I.objectLiteral(R)&&I.string(R.newText)&&B.is(R.range)}W.is=j})(t||(J.TextEdit=t={}));var u;(function(W){function F(H,j,q){var R={label:H};if(j!==void 0)R.needsConfirmation=j;if(q!==void 0)R.description=q;return R}W.create=F;function P(H){var j=H;return I.objectLiteral(j)&&I.string(j.label)&&(I.boolean(j.needsConfirmation)||j.needsConfirmation===void 0)&&(I.string(j.description)||j.description===void 0)}W.is=P})(u||(J.ChangeAnnotation=u={}));var a;(function(W){function F(P){var H=P;return I.string(H)}W.is=F})(a||(J.ChangeAnnotationIdentifier=a={}));var j0;(function(W){function F(q,R,e){return{range:q,newText:R,annotationId:e}}W.replace=F;function P(q,R,e){return{range:{start:q,end:q},newText:R,annotationId:e}}W.insert=P;function H(q,R){return{range:q,newText:"",annotationId:R}}W.del=H;function j(q){var R=q;return t.is(R)&&(u.is(R.annotationId)||a.is(R.annotationId))}W.is=j})(j0||(J.AnnotatedTextEdit=j0={}));var _0;(function(W){function F(H,j){return{textDocument:H,edits:j}}W.create=F;function P(H){var j=H;return I.defined(j)&&R0.is(j.textDocument)&&Array.isArray(j.edits)}W.is=P})(_0||(J.TextDocumentEdit=_0={}));var y0;(function(W){function F(H,j,q){var R={kind:"create",uri:H};if(j!==void 0&&(j.overwrite!==void 0||j.ignoreIfExists!==void 0))R.options=j;if(q!==void 0)R.annotationId=q;return R}W.create=F;function P(H){var j=H;return j&&j.kind==="create"&&I.string(j.uri)&&(j.options===void 0||(j.options.overwrite===void 0||I.boolean(j.options.overwrite))&&(j.options.ignoreIfExists===void 0||I.boolean(j.options.ignoreIfExists)))&&(j.annotationId===void 0||a.is(j.annotationId))}W.is=P})(y0||(J.CreateFile=y0={}));var qZ;(function(W){function F(H,j,q,R){var e={kind:"rename",oldUri:H,newUri:j};if(q!==void 0&&(q.overwrite!==void 0||q.ignoreIfExists!==void 0))e.options=q;if(R!==void 0)e.annotationId=R;return e}W.create=F;function P(H){var j=H;return j&&j.kind==="rename"&&I.string(j.oldUri)&&I.string(j.newUri)&&(j.options===void 0||(j.options.overwrite===void 0||I.boolean(j.options.overwrite))&&(j.options.ignoreIfExists===void 0||I.boolean(j.options.ignoreIfExists)))&&(j.annotationId===void 0||a.is(j.annotationId))}W.is=P})(qZ||(J.RenameFile=qZ={}));var r0;(function(W){function F(H,j,q){var R={kind:"delete",uri:H};if(j!==void 0&&(j.recursive!==void 0||j.ignoreIfNotExists!==void 0))R.options=j;if(q!==void 0)R.annotationId=q;return R}W.create=F;function P(H){var j=H;return j&&j.kind==="delete"&&I.string(j.uri)&&(j.options===void 0||(j.options.recursive===void 0||I.boolean(j.options.recursive))&&(j.options.ignoreIfNotExists===void 0||I.boolean(j.options.ignoreIfNotExists)))&&(j.annotationId===void 0||a.is(j.annotationId))}W.is=P})(r0||(J.DeleteFile=r0={}));var nZ;(function(W){function F(P){var H=P;return H&&(H.changes!==void 0||H.documentChanges!==void 0)&&(H.documentChanges===void 0||H.documentChanges.every(function(j){if(I.string(j.kind))return y0.is(j)||qZ.is(j)||r0.is(j);else return _0.is(j)}))}W.is=F})(nZ||(J.WorkspaceEdit=nZ={}));var XZ=function(){function W(F,P){this.edits=F,this.changeAnnotations=P}return W.prototype.insert=function(F,P,H){var j,q;if(H===void 0)j=t.insert(F,P);else if(a.is(H))q=H,j=j0.insert(F,P,H);else this.assertChangeAnnotations(this.changeAnnotations),q=this.changeAnnotations.manage(H),j=j0.insert(F,P,q);if(this.edits.push(j),q!==void 0)return q},W.prototype.replace=function(F,P,H){var j,q;if(H===void 0)j=t.replace(F,P);else if(a.is(H))q=H,j=j0.replace(F,P,H);else this.assertChangeAnnotations(this.changeAnnotations),q=this.changeAnnotations.manage(H),j=j0.replace(F,P,q);if(this.edits.push(j),q!==void 0)return q},W.prototype.delete=function(F,P){var H,j;if(P===void 0)H=t.del(F);else if(a.is(P))j=P,H=j0.del(F,P);else this.assertChangeAnnotations(this.changeAnnotations),j=this.changeAnnotations.manage(P),H=j0.del(F,j);if(this.edits.push(H),j!==void 0)return j},W.prototype.add=function(F){this.edits.push(F)},W.prototype.all=function(){return this.edits},W.prototype.clear=function(){this.edits.splice(0,this.edits.length)},W.prototype.assertChangeAnnotations=function(F){if(F===void 0)throw Error("Text edit change is not configured to manage change annotations.")},W}(),wZ=function(){function W(F){this._annotations=F===void 0?Object.create(null):F,this._counter=0,this._size=0}return W.prototype.all=function(){return this._annotations},Object.defineProperty(W.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),W.prototype.manage=function(F,P){var H;if(a.is(F))H=F;else H=this.nextId(),P=F;if(this._annotations[H]!==void 0)throw Error("Id ".concat(H," is already in use."));if(P===void 0)throw Error("No annotation provided for id ".concat(H));return this._annotations[H]=P,this._size++,H},W.prototype.nextId=function(){return this._counter++,this._counter.toString()},W}(),JZ=function(){function W(F){var P=this;if(this._textEditChanges=Object.create(null),F!==void 0){if(this._workspaceEdit=F,F.documentChanges)this._changeAnnotations=new wZ(F.changeAnnotations),F.changeAnnotations=this._changeAnnotations.all(),F.documentChanges.forEach(function(H){if(_0.is(H)){var j=new XZ(H.edits,P._changeAnnotations);P._textEditChanges[H.textDocument.uri]=j}});else if(F.changes)Object.keys(F.changes).forEach(function(H){var j=new XZ(F.changes[H]);P._textEditChanges[H]=j})}else this._workspaceEdit={}}return Object.defineProperty(W.prototype,"edit",{get:function(){if(this.initDocumentChanges(),this._changeAnnotations!==void 0)if(this._changeAnnotations.size===0)this._workspaceEdit.changeAnnotations=void 0;else this._workspaceEdit.changeAnnotations=this._changeAnnotations.all();return this._workspaceEdit},enumerable:!1,configurable:!0}),W.prototype.getTextEditChange=function(F){if(R0.is(F)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error("Workspace edit is not configured for document changes.");var P={uri:F.uri,version:F.version},H=this._textEditChanges[P.uri];if(!H){var j=[],q={textDocument:P,edits:j};this._workspaceEdit.documentChanges.push(q),H=new XZ(j,this._changeAnnotations),this._textEditChanges[P.uri]=H}return H}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw Error("Workspace edit is not configured for normal text edit changes.");var H=this._textEditChanges[F];if(!H){var j=[];this._workspaceEdit.changes[F]=j,H=new XZ(j),this._textEditChanges[F]=H}return H}},W.prototype.initDocumentChanges=function(){if(this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0)this._changeAnnotations=new wZ,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()},W.prototype.initChanges=function(){if(this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0)this._workspaceEdit.changes=Object.create(null)},W.prototype.createFile=function(F,P,H){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error("Workspace edit is not configured for document changes.");var j;if(u.is(P)||a.is(P))j=P;else H=P;var q,R;if(j===void 0)q=y0.create(F,H);else R=a.is(j)?j:this._changeAnnotations.manage(j),q=y0.create(F,H,R);if(this._workspaceEdit.documentChanges.push(q),R!==void 0)return R},W.prototype.renameFile=function(F,P,H,j){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error("Workspace edit is not configured for document changes.");var q;if(u.is(H)||a.is(H))q=H;else j=H;var R,e;if(q===void 0)R=qZ.create(F,P,j);else e=a.is(q)?q:this._changeAnnotations.manage(q),R=qZ.create(F,P,j,e);if(this._workspaceEdit.documentChanges.push(R),e!==void 0)return e},W.prototype.deleteFile=function(F,P,H){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error("Workspace edit is not configured for document changes.");var j;if(u.is(P)||a.is(P))j=P;else H=P;var q,R;if(j===void 0)q=r0.create(F,H);else R=a.is(j)?j:this._changeAnnotations.manage(j),q=r0.create(F,H,R);if(this._workspaceEdit.documentChanges.push(q),R!==void 0)return R},W}();J.WorkspaceChange=JZ;var R9;(function(W){function F(H){return{uri:H}}W.create=F;function P(H){var j=H;return I.defined(j)&&I.string(j.uri)}W.is=P})(R9||(J.TextDocumentIdentifier=R9={}));var O9;(function(W){function F(H,j){return{uri:H,version:j}}W.create=F;function P(H){var j=H;return I.defined(j)&&I.string(j.uri)&&I.integer(j.version)}W.is=P})(O9||(J.VersionedTextDocumentIdentifier=O9={}));var R0;(function(W){function F(H,j){return{uri:H,version:j}}W.create=F;function P(H){var j=H;return I.defined(j)&&I.string(j.uri)&&(j.version===null||I.integer(j.version))}W.is=P})(R0||(J.OptionalVersionedTextDocumentIdentifier=R0={}));var CZ;(function(W){function F(H,j,q,R){return{uri:H,languageId:j,version:q,text:R}}W.create=F;function P(H){var j=H;return I.defined(j)&&I.string(j.uri)&&I.string(j.languageId)&&I.integer(j.version)&&I.string(j.text)}W.is=P})(CZ||(J.TextDocumentItem=CZ={}));var FZ;(function(W){W.PlainText="plaintext",W.Markdown="markdown";function F(P){var H=P;return H===W.PlainText||H===W.Markdown}W.is=F})(FZ||(J.MarkupKind=FZ={}));var BZ;(function(W){function F(P){var H=P;return I.objectLiteral(P)&&FZ.is(H.kind)&&I.string(H.value)}W.is=F})(BZ||(J.MarkupContent=BZ={}));var c9;(function(W){W.Text=1,W.Method=2,W.Function=3,W.Constructor=4,W.Field=5,W.Variable=6,W.Class=7,W.Interface=8,W.Module=9,W.Property=10,W.Unit=11,W.Value=12,W.Enum=13,W.Keyword=14,W.Snippet=15,W.Color=16,W.File=17,W.Reference=18,W.Folder=19,W.EnumMember=20,W.Constant=21,W.Struct=22,W.Event=23,W.Operator=24,W.TypeParameter=25})(c9||(J.CompletionItemKind=c9={}));var U9;(function(W){W.PlainText=1,W.Snippet=2})(U9||(J.InsertTextFormat=U9={}));var L9;(function(W){W.Deprecated=1})(L9||(J.CompletionItemTag=L9={}));var h9;(function(W){function F(H,j,q){return{newText:H,insert:j,replace:q}}W.create=F;function P(H){var j=H;return j&&I.string(j.newText)&&B.is(j.insert)&&B.is(j.replace)}W.is=P})(h9||(J.InsertReplaceEdit=h9={}));var i9;(function(W){W.asIs=1,W.adjustIndentation=2})(i9||(J.InsertTextMode=i9={}));var N9;(function(W){function F(P){var H=P;return H&&(I.string(H.detail)||H.detail===void 0)&&(I.string(H.description)||H.description===void 0)}W.is=F})(N9||(J.CompletionItemLabelDetails=N9={}));var $9;(function(W){function F(P){return{label:P}}W.create=F})($9||(J.CompletionItem=$9={}));var Q9;(function(W){function F(P,H){return{items:P?P:[],isIncomplete:!!H}}W.create=F})(Q9||(J.CompletionList=Q9={}));var E9;(function(W){function F(H){return H.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}W.fromPlainText=F;function P(H){var j=H;return I.string(j)||I.objectLiteral(j)&&I.string(j.language)&&I.string(j.value)}W.is=P})(E9||(J.MarkedString=E9={}));var o0;(function(W){function F(P){var H=P;return!!H&&I.objectLiteral(H)&&(BZ.is(H.contents)||E9.is(H.contents)||I.typedArray(H.contents,E9.is))&&(P.range===void 0||B.is(P.range))}W.is=F})(o0||(J.Hover=o0={}));var x9;(function(W){function F(P,H){return H?{label:P,documentation:H}:{label:P}}W.create=F})(x9||(J.ParameterInformation=x9={}));var z9;(function(W){function F(P,H){var j=[];for(var q=2;q<arguments.length;q++)j[q-2]=arguments[q];var R={label:P};if(I.defined(H))R.documentation=H;if(I.defined(j))R.parameters=j;else R.parameters=[];return R}W.create=F})(z9||(J.SignatureInformation=z9={}));var aZ;(function(W){W.Text=1,W.Read=2,W.Write=3})(aZ||(J.DocumentHighlightKind=aZ={}));var n9;(function(W){function F(P,H){var j={range:P};if(I.number(H))j.kind=H;return j}W.create=F})(n9||(J.DocumentHighlight=n9={}));var sZ;(function(W){W.File=1,W.Module=2,W.Namespace=3,W.Package=4,W.Class=5,W.Method=6,W.Property=7,W.Field=8,W.Constructor=9,W.Enum=10,W.Interface=11,W.Function=12,W.Variable=13,W.Constant=14,W.String=15,W.Number=16,W.Boolean=17,W.Array=18,W.Object=19,W.Key=20,W.Null=21,W.EnumMember=22,W.Struct=23,W.Event=24,W.Operator=25,W.TypeParameter=26})(sZ||(J.SymbolKind=sZ={}));var w9;(function(W){W.Deprecated=1})(w9||(J.SymbolTag=w9={}));var s0;(function(W){function F(P,H,j,q,R){var e={name:P,kind:H,location:{uri:q,range:j}};if(R)e.containerName=R;return e}W.create=F})(s0||(J.SymbolInformation=s0={}));var WZ;(function(W){function F(P,H,j,q){return q!==void 0?{name:P,kind:H,location:{uri:j,range:q}}:{name:P,kind:H,location:{uri:j}}}W.create=F})(WZ||(J.WorkspaceSymbol=WZ={}));var jZ;(function(W){function F(H,j,q,R,e,f0){var S0={name:H,detail:j,kind:q,range:R,selectionRange:e};if(f0!==void 0)S0.children=f0;return S0}W.create=F;function P(H){var j=H;return j&&I.string(j.name)&&I.number(j.kind)&&B.is(j.range)&&B.is(j.selectionRange)&&(j.detail===void 0||I.string(j.detail))&&(j.deprecated===void 0||I.boolean(j.deprecated))&&(j.children===void 0||Array.isArray(j.children))&&(j.tags===void 0||Array.isArray(j.tags))}W.is=P})(jZ||(J.DocumentSymbol=jZ={}));var vZ;(function(W){W.Empty="",W.QuickFix="quickfix",W.Refactor="refactor",W.RefactorExtract="refactor.extract",W.RefactorInline="refactor.inline",W.RefactorRewrite="refactor.rewrite",W.Source="source",W.SourceOrganizeImports="source.organizeImports",W.SourceFixAll="source.fixAll"})(vZ||(J.CodeActionKind=vZ={}));var SZ;(function(W){W.Invoked=1,W.Automatic=2})(SZ||(J.CodeActionTriggerKind=SZ={}));var F9;(function(W){function F(H,j,q){var R={diagnostics:H};if(j!==void 0&&j!==null)R.only=j;if(q!==void 0&&q!==null)R.triggerKind=q;return R}W.create=F;function P(H){var j=H;return I.defined(j)&&I.typedArray(j.diagnostics,f.is)&&(j.only===void 0||I.typedArray(j.only,I.string))&&(j.triggerKind===void 0||j.triggerKind===SZ.Invoked||j.triggerKind===SZ.Automatic)}W.is=P})(F9||(J.CodeActionContext=F9={}));var _9;(function(W){function F(H,j,q){var R={title:H},e=!0;if(typeof j==="string")e=!1,R.kind=j;else if(B0.is(j))R.command=j;else R.edit=j;if(e&&q!==void 0)R.kind=q;return R}W.create=F;function P(H){var j=H;return j&&I.string(j.title)&&(j.diagnostics===void 0||I.typedArray(j.diagnostics,f.is))&&(j.kind===void 0||I.string(j.kind))&&(j.edit!==void 0||j.command!==void 0)&&(j.command===void 0||B0.is(j.command))&&(j.isPreferred===void 0||I.boolean(j.isPreferred))&&(j.edit===void 0||nZ.is(j.edit))}W.is=P})(_9||(J.CodeAction=_9={}));var G9;(function(W){function F(H,j){var q={range:H};if(I.defined(j))q.data=j;return q}W.create=F;function P(H){var j=H;return I.defined(j)&&B.is(j.range)&&(I.undefined(j.command)||B0.is(j.command))}W.is=P})(G9||(J.CodeLens=G9={}));var f9;(function(W){function F(H,j){return{tabSize:H,insertSpaces:j}}W.create=F;function P(H){var j=H;return I.defined(j)&&I.uinteger(j.tabSize)&&I.boolean(j.insertSpaces)}W.is=P})(f9||(J.FormattingOptions=f9={}));var PZ;(function(W){function F(H,j,q){return{range:H,target:j,data:q}}W.create=F;function P(H){var j=H;return I.defined(j)&&B.is(j.range)&&(I.undefined(j.target)||I.string(j.target))}W.is=P})(PZ||(J.DocumentLink=PZ={}));var w;(function(W){function F(H,j){return{range:H,parent:j}}W.create=F;function P(H){var j=H;return I.objectLiteral(j)&&B.is(j.range)&&(j.parent===void 0||W.is(j.parent))}W.is=P})(w||(J.SelectionRange=w={}));var y;(function(W){W.namespace="namespace",W.type="type",W.class="class",W.enum="enum",W.interface="interface",W.struct="struct",W.typeParameter="typeParameter",W.parameter="parameter",W.variable="variable",W.property="property",W.enumMember="enumMember",W.event="event",W.function="function",W.method="method",W.macro="macro",W.keyword="keyword",W.modifier="modifier",W.comment="comment",W.string="string",W.number="number",W.regexp="regexp",W.operator="operator",W.decorator="decorator"})(y||(J.SemanticTokenTypes=y={}));var g;(function(W){W.declaration="declaration",W.definition="definition",W.readonly="readonly",W.static="static",W.deprecated="deprecated",W.abstract="abstract",W.async="async",W.modification="modification",W.documentation="documentation",W.defaultLibrary="defaultLibrary"})(g||(J.SemanticTokenModifiers=g={}));var m;(function(W){function F(P){var H=P;return I.objectLiteral(H)&&(H.resultId===void 0||typeof H.resultId==="string")&&Array.isArray(H.data)&&(H.data.length===0||typeof H.data[0]==="number")}W.is=F})(m||(J.SemanticTokens=m={}));var L0;(function(W){function F(H,j){return{range:H,text:j}}W.create=F;function P(H){var j=H;return j!==void 0&&j!==null&&B.is(j.range)&&I.string(j.text)}W.is=P})(L0||(J.InlineValueText=L0={}));var O0;(function(W){function F(H,j,q){return{range:H,variableName:j,caseSensitiveLookup:q}}W.create=F;function P(H){var j=H;return j!==void 0&&j!==null&&B.is(j.range)&&I.boolean(j.caseSensitiveLookup)&&(I.string(j.variableName)||j.variableName===void 0)}W.is=P})(O0||(J.InlineValueVariableLookup=O0={}));var M0;(function(W){function F(H,j){return{range:H,expression:j}}W.create=F;function P(H){var j=H;return j!==void 0&&j!==null&&B.is(j.range)&&(I.string(j.expression)||j.expression===void 0)}W.is=P})(M0||(J.InlineValueEvaluatableExpression=M0={}));var q0;(function(W){function F(H,j){return{frameId:H,stoppedLocation:j}}W.create=F;function P(H){var j=H;return I.defined(j)&&B.is(H.stoppedLocation)}W.is=P})(q0||(J.InlineValueContext=q0={}));var z0;(function(W){W.Type=1,W.Parameter=2;function F(P){return P===1||P===2}W.is=F})(z0||(J.InlayHintKind=z0={}));var E0;(function(W){function F(H){return{value:H}}W.create=F;function P(H){var j=H;return I.objectLiteral(j)&&(j.tooltip===void 0||I.string(j.tooltip)||BZ.is(j.tooltip))&&(j.location===void 0||K.is(j.location))&&(j.command===void 0||B0.is(j.command))}W.is=P})(E0||(J.InlayHintLabelPart=E0={}));var V0;(function(W){function F(H,j,q){var R={position:H,label:j};if(q!==void 0)R.kind=q;return R}W.create=F;function P(H){var j=H;return I.objectLiteral(j)&&G.is(j.position)&&(I.string(j.label)||I.typedArray(j.label,E0.is))&&(j.kind===void 0||z0.is(j.kind))&&j.textEdits===void 0||I.typedArray(j.textEdits,t.is)&&(j.tooltip===void 0||I.string(j.tooltip)||BZ.is(j.tooltip))&&(j.paddingLeft===void 0||I.boolean(j.paddingLeft))&&(j.paddingRight===void 0||I.boolean(j.paddingRight))}W.is=P})(V0||(J.InlayHint=V0={}));var C0;(function(W){function F(P){return{kind:"snippet",value:P}}W.createSnippet=F})(C0||(J.StringValue=C0={}));var c0;(function(W){function F(P,H,j,q){return{insertText:P,filterText:H,range:j,command:q}}W.create=F})(c0||(J.InlineCompletionItem=c0={}));var YZ;(function(W){function F(P){return{items:P}}W.create=F})(YZ||(J.InlineCompletionList=YZ={}));var a9;(function(W){W.Invoked=0,W.Automatic=1})(a9||(J.InlineCompletionTriggerKind=a9={}));var s9;(function(W){function F(P,H){return{range:P,text:H}}W.create=F})(s9||(J.SelectedCompletionInfo=s9={}));var V;(function(W){function F(P,H){return{triggerKind:P,selectedCompletionInfo:H}}W.create=F})(V||(J.InlineCompletionContext=V={}));var S;(function(W){function F(P){var H=P;return I.objectLiteral(H)&&$.is(H.uri)&&I.string(H.name)}W.is=F})(S||(J.WorkspaceFolder=S={})),J.EOL=[`
`,`\r
`,"\r"];var i;(function(W){function F(q,R,e,f0){return new w0(q,R,e,f0)}W.create=F;function P(q){var R=q;return I.defined(R)&&I.string(R.uri)&&(I.undefined(R.languageId)||I.string(R.languageId))&&I.uinteger(R.lineCount)&&I.func(R.getText)&&I.func(R.positionAt)&&I.func(R.offsetAt)?!0:!1}W.is=P;function H(q,R){var e=q.getText(),f0=j(R,function(P9,X){var M=P9.range.start.line-X.range.start.line;if(M===0)return P9.range.start.character-X.range.start.character;return M}),S0=e.length;for(var DZ=f0.length-1;DZ>=0;DZ--){var gZ=f0[DZ],X9=q.offsetAt(gZ.range.start),K0=q.offsetAt(gZ.range.end);if(K0<=S0)e=e.substring(0,X9)+gZ.newText+e.substring(K0,e.length);else throw Error("Overlapping edit");S0=X9}return e}W.applyEdits=H;function j(q,R){if(q.length<=1)return q;var e=q.length/2|0,f0=q.slice(0,e),S0=q.slice(e);j(f0,R),j(S0,R);var DZ=0,gZ=0,X9=0;while(DZ<f0.length&&gZ<S0.length){var K0=R(f0[DZ],S0[gZ]);if(K0<=0)q[X9++]=f0[DZ++];else q[X9++]=S0[gZ++]}while(DZ<f0.length)q[X9++]=f0[DZ++];while(gZ<S0.length)q[X9++]=S0[gZ++];return q}})(i||(J.TextDocument=i={}));var w0=function(){function W(F,P,H,j){this._uri=F,this._languageId=P,this._version=H,this._content=j,this._lineOffsets=void 0}return Object.defineProperty(W.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),W.prototype.getText=function(F){if(F){var P=this.offsetAt(F.start),H=this.offsetAt(F.end);return this._content.substring(P,H)}return this._content},W.prototype.update=function(F,P){this._content=F.text,this._version=P,this._lineOffsets=void 0},W.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){var F=[],P=this._content,H=!0;for(var j=0;j<P.length;j++){if(H)F.push(j),H=!1;var q=P.charAt(j);if(H=q==="\r"||q===`
`,q==="\r"&&j+1<P.length&&P.charAt(j+1)===`
`)j++}if(H&&P.length>0)F.push(P.length);this._lineOffsets=F}return this._lineOffsets},W.prototype.positionAt=function(F){F=Math.max(Math.min(F,this._content.length),0);var P=this.getLineOffsets(),H=0,j=P.length;if(j===0)return G.create(0,F);while(H<j){var q=Math.floor((H+j)/2);if(P[q]>F)j=q;else H=q+1}var R=H-1;return G.create(R,F-P[R])},W.prototype.offsetAt=function(F){var P=this.getLineOffsets();if(F.line>=P.length)return this._content.length;else if(F.line<0)return 0;var H=P[F.line],j=F.line+1<P.length?P[F.line+1]:this._content.length;return Math.max(Math.min(H+F.character,j),H)},Object.defineProperty(W.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),W}(),I;(function(W){var F=Object.prototype.toString;function P(K0){return typeof K0<"u"}W.defined=P;function H(K0){return typeof K0>"u"}W.undefined=H;function j(K0){return K0===!0||K0===!1}W.boolean=j;function q(K0){return F.call(K0)==="[object String]"}W.string=q;function R(K0){return F.call(K0)==="[object Number]"}W.number=R;function e(K0,P9,X){return F.call(K0)==="[object Number]"&&P9<=K0&&K0<=X}W.numberRange=e;function f0(K0){return F.call(K0)==="[object Number]"&&-2147483648<=K0&&K0<=2147483647}W.integer=f0;function S0(K0){return F.call(K0)==="[object Number]"&&0<=K0&&K0<=2147483647}W.uinteger=S0;function DZ(K0){return F.call(K0)==="[object Function]"}W.func=DZ;function gZ(K0){return K0!==null&&typeof K0==="object"}W.objectLiteral=gZ;function X9(K0,P9){return Array.isArray(K0)&&K0.every(P9)}W.typedArray=X9})(I||(I={}))})});var v0=D((bZ)=>{Object.defineProperty(bZ,"__esModule",{value:!0});bZ.ProtocolNotificationType=bZ.ProtocolNotificationType0=bZ.ProtocolRequestType=bZ.ProtocolRequestType0=bZ.RegistrationType=bZ.MessageDirection=void 0;var dJ=AJ(),mQ;(function(Z){Z.clientToServer="clientToServer",Z.serverToClient="serverToClient",Z.both="both"})(mQ||(bZ.MessageDirection=mQ={}));class uQ{constructor(Z){this.method=Z}}bZ.RegistrationType=uQ;class lQ extends dJ.RequestType0{constructor(Z){super(Z)}}bZ.ProtocolRequestType0=lQ;class cQ extends dJ.RequestType{constructor(Z){super(Z,dJ.ParameterStructures.byName)}}bZ.ProtocolRequestType=cQ;class iQ extends dJ.NotificationType0{constructor(Z){super(Z)}}bZ.ProtocolNotificationType0=iQ;class nQ extends dJ.NotificationType{constructor(Z){super(Z,dJ.ParameterStructures.byName)}}bZ.ProtocolNotificationType=nQ});var B8=D((t0)=>{Object.defineProperty(t0,"__esModule",{value:!0});t0.objectLiteral=t0.typedArray=t0.stringArray=t0.array=t0.func=t0.error=t0.number=t0.string=t0.boolean=void 0;function VV(Z){return Z===!0||Z===!1}t0.boolean=VV;function aQ(Z){return typeof Z==="string"||Z instanceof String}t0.string=aQ;function WV(Z){return typeof Z==="number"||Z instanceof Number}t0.number=WV;function AV(Z){return Z instanceof Error}t0.error=AV;function HV(Z){return typeof Z==="function"}t0.func=HV;function sQ(Z){return Array.isArray(Z)}t0.array=sQ;function OV(Z){return sQ(Z)&&Z.every((J)=>aQ(J))}t0.stringArray=OV;function UV(Z,J){return Array.isArray(Z)&&Z.every(J)}t0.typedArray=UV;function LV(Z){return Z!==null&&typeof Z==="object"}t0.objectLiteral=LV});var tQ=D((j8)=>{Object.defineProperty(j8,"__esModule",{value:!0});j8.ImplementationRequest=void 0;var rQ=v0(),oQ;(function(Z){Z.method="textDocument/implementation",Z.messageDirection=rQ.MessageDirection.clientToServer,Z.type=new rQ.ProtocolRequestType(Z.method)})(oQ||(j8.ImplementationRequest=oQ={}))});var Jz=D((K8)=>{Object.defineProperty(K8,"__esModule",{value:!0});K8.TypeDefinitionRequest=void 0;var eQ=v0(),Zz;(function(Z){Z.method="textDocument/typeDefinition",Z.messageDirection=eQ.MessageDirection.clientToServer,Z.type=new eQ.ProtocolRequestType(Z.method)})(Zz||(K8.TypeDefinitionRequest=Zz={}))});var Qz=D((pJ)=>{Object.defineProperty(pJ,"__esModule",{value:!0});pJ.DidChangeWorkspaceFoldersNotification=pJ.WorkspaceFoldersRequest=void 0;var V8=v0(),Yz;(function(Z){Z.method="workspace/workspaceFolders",Z.messageDirection=V8.MessageDirection.serverToClient,Z.type=new V8.ProtocolRequestType0(Z.method)})(Yz||(pJ.WorkspaceFoldersRequest=Yz={}));var $z;(function(Z){Z.method="workspace/didChangeWorkspaceFolders",Z.messageDirection=V8.MessageDirection.clientToServer,Z.type=new V8.ProtocolNotificationType(Z.method)})($z||(pJ.DidChangeWorkspaceFoldersNotification=$z={}))});var Xz=D((W8)=>{Object.defineProperty(W8,"__esModule",{value:!0});W8.ConfigurationRequest=void 0;var zz=v0(),Gz;(function(Z){Z.method="workspace/configuration",Z.messageDirection=zz.MessageDirection.serverToClient,Z.type=new zz.ProtocolRequestType(Z.method)})(Gz||(W8.ConfigurationRequest=Gz={}))});var Kz=D((mJ)=>{Object.defineProperty(mJ,"__esModule",{value:!0});mJ.ColorPresentationRequest=mJ.DocumentColorRequest=void 0;var A8=v0(),Bz;(function(Z){Z.method="textDocument/documentColor",Z.messageDirection=A8.MessageDirection.clientToServer,Z.type=new A8.ProtocolRequestType(Z.method)})(Bz||(mJ.DocumentColorRequest=Bz={}));var jz;(function(Z){Z.method="textDocument/colorPresentation",Z.messageDirection=A8.MessageDirection.clientToServer,Z.type=new A8.ProtocolRequestType(Z.method)})(jz||(mJ.ColorPresentationRequest=jz={}))});var Az=D((uJ)=>{Object.defineProperty(uJ,"__esModule",{value:!0});uJ.FoldingRangeRefreshRequest=uJ.FoldingRangeRequest=void 0;var H8=v0(),Vz;(function(Z){Z.method="textDocument/foldingRange",Z.messageDirection=H8.MessageDirection.clientToServer,Z.type=new H8.ProtocolRequestType(Z.method)})(Vz||(uJ.FoldingRangeRequest=Vz={}));var Wz;(function(Z){Z.method="workspace/foldingRange/refresh",Z.messageDirection=H8.MessageDirection.serverToClient,Z.type=new H8.ProtocolRequestType0(Z.method)})(Wz||(uJ.FoldingRangeRefreshRequest=Wz={}))});var Uz=D((O8)=>{Object.defineProperty(O8,"__esModule",{value:!0});O8.DeclarationRequest=void 0;var Hz=v0(),Oz;(function(Z){Z.method="textDocument/declaration",Z.messageDirection=Hz.MessageDirection.clientToServer,Z.type=new Hz.ProtocolRequestType(Z.method)})(Oz||(O8.DeclarationRequest=Oz={}))});var Ez=D((U8)=>{Object.defineProperty(U8,"__esModule",{value:!0});U8.SelectionRangeRequest=void 0;var Lz=v0(),Nz;(function(Z){Z.method="textDocument/selectionRange",Z.messageDirection=Lz.MessageDirection.clientToServer,Z.type=new Lz.ProtocolRequestType(Z.method)})(Nz||(U8.SelectionRangeRequest=Nz={}))});var Mz=D((ZJ)=>{Object.defineProperty(ZJ,"__esModule",{value:!0});ZJ.WorkDoneProgressCancelNotification=ZJ.WorkDoneProgressCreateRequest=ZJ.WorkDoneProgress=void 0;var NV=AJ(),L8=v0(),wz;(function(Z){Z.type=new NV.ProgressType;function J(Y){return Y===Z.type}Z.is=J})(wz||(ZJ.WorkDoneProgress=wz={}));var Fz;(function(Z){Z.method="window/workDoneProgress/create",Z.messageDirection=L8.MessageDirection.serverToClient,Z.type=new L8.ProtocolRequestType(Z.method)})(Fz||(ZJ.WorkDoneProgressCreateRequest=Fz={}));var Pz;(function(Z){Z.method="window/workDoneProgress/cancel",Z.messageDirection=L8.MessageDirection.clientToServer,Z.type=new L8.ProtocolNotificationType(Z.method)})(Pz||(ZJ.WorkDoneProgressCancelNotification=Pz={}))});var Cz=D((JJ)=>{Object.defineProperty(JJ,"__esModule",{value:!0});JJ.CallHierarchyOutgoingCallsRequest=JJ.CallHierarchyIncomingCallsRequest=JJ.CallHierarchyPrepareRequest=void 0;var lJ=v0(),Iz;(function(Z){Z.method="textDocument/prepareCallHierarchy",Z.messageDirection=lJ.MessageDirection.clientToServer,Z.type=new lJ.ProtocolRequestType(Z.method)})(Iz||(JJ.CallHierarchyPrepareRequest=Iz={}));var Tz;(function(Z){Z.method="callHierarchy/incomingCalls",Z.messageDirection=lJ.MessageDirection.clientToServer,Z.type=new lJ.ProtocolRequestType(Z.method)})(Tz||(JJ.CallHierarchyIncomingCallsRequest=Tz={}));var qz;(function(Z){Z.method="callHierarchy/outgoingCalls",Z.messageDirection=lJ.MessageDirection.clientToServer,Z.type=new lJ.ProtocolRequestType(Z.method)})(qz||(JJ.CallHierarchyOutgoingCallsRequest=qz={}))});var hz=D((yZ)=>{Object.defineProperty(yZ,"__esModule",{value:!0});yZ.SemanticTokensRefreshRequest=yZ.SemanticTokensRangeRequest=yZ.SemanticTokensDeltaRequest=yZ.SemanticTokensRequest=yZ.SemanticTokensRegistrationType=yZ.TokenFormat=void 0;var v9=v0(),Sz;(function(Z){Z.Relative="relative"})(Sz||(yZ.TokenFormat=Sz={}));var UY;(function(Z){Z.method="textDocument/semanticTokens",Z.type=new v9.RegistrationType(Z.method)})(UY||(yZ.SemanticTokensRegistrationType=UY={}));var Dz;(function(Z){Z.method="textDocument/semanticTokens/full",Z.messageDirection=v9.MessageDirection.clientToServer,Z.type=new v9.ProtocolRequestType(Z.method),Z.registrationMethod=UY.method})(Dz||(yZ.SemanticTokensRequest=Dz={}));var bz;(function(Z){Z.method="textDocument/semanticTokens/full/delta",Z.messageDirection=v9.MessageDirection.clientToServer,Z.type=new v9.ProtocolRequestType(Z.method),Z.registrationMethod=UY.method})(bz||(yZ.SemanticTokensDeltaRequest=bz={}));var yz;(function(Z){Z.method="textDocument/semanticTokens/range",Z.messageDirection=v9.MessageDirection.clientToServer,Z.type=new v9.ProtocolRequestType(Z.method),Z.registrationMethod=UY.method})(yz||(yZ.SemanticTokensRangeRequest=yz={}));var Rz;(function(Z){Z.method="workspace/semanticTokens/refresh",Z.messageDirection=v9.MessageDirection.serverToClient,Z.type=new v9.ProtocolRequestType0(Z.method)})(Rz||(yZ.SemanticTokensRefreshRequest=Rz={}))});var fz=D((N8)=>{Object.defineProperty(N8,"__esModule",{value:!0});N8.ShowDocumentRequest=void 0;var xz=v0(),_z;(function(Z){Z.method="window/showDocument",Z.messageDirection=xz.MessageDirection.serverToClient,Z.type=new xz.ProtocolRequestType(Z.method)})(_z||(N8.ShowDocumentRequest=_z={}))});var gz=D((E8)=>{Object.defineProperty(E8,"__esModule",{value:!0});E8.LinkedEditingRangeRequest=void 0;var kz=v0(),vz;(function(Z){Z.method="textDocument/linkedEditingRange",Z.messageDirection=kz.MessageDirection.clientToServer,Z.type=new kz.ProtocolRequestType(Z.method)})(vz||(E8.LinkedEditingRangeRequest=vz={}))});var nz=D((UZ)=>{Object.defineProperty(UZ,"__esModule",{value:!0});UZ.WillDeleteFilesRequest=UZ.DidDeleteFilesNotification=UZ.DidRenameFilesNotification=UZ.WillRenameFilesRequest=UZ.DidCreateFilesNotification=UZ.WillCreateFilesRequest=UZ.FileOperationPatternKind=void 0;var oZ=v0(),dz;(function(Z){Z.file="file",Z.folder="folder"})(dz||(UZ.FileOperationPatternKind=dz={}));var pz;(function(Z){Z.method="workspace/willCreateFiles",Z.messageDirection=oZ.MessageDirection.clientToServer,Z.type=new oZ.ProtocolRequestType(Z.method)})(pz||(UZ.WillCreateFilesRequest=pz={}));var mz;(function(Z){Z.method="workspace/didCreateFiles",Z.messageDirection=oZ.MessageDirection.clientToServer,Z.type=new oZ.ProtocolNotificationType(Z.method)})(mz||(UZ.DidCreateFilesNotification=mz={}));var uz;(function(Z){Z.method="workspace/willRenameFiles",Z.messageDirection=oZ.MessageDirection.clientToServer,Z.type=new oZ.ProtocolRequestType(Z.method)})(uz||(UZ.WillRenameFilesRequest=uz={}));var lz;(function(Z){Z.method="workspace/didRenameFiles",Z.messageDirection=oZ.MessageDirection.clientToServer,Z.type=new oZ.ProtocolNotificationType(Z.method)})(lz||(UZ.DidRenameFilesNotification=lz={}));var cz;(function(Z){Z.method="workspace/didDeleteFiles",Z.messageDirection=oZ.MessageDirection.clientToServer,Z.type=new oZ.ProtocolNotificationType(Z.method)})(cz||(UZ.DidDeleteFilesNotification=cz={}));var iz;(function(Z){Z.method="workspace/willDeleteFiles",Z.messageDirection=oZ.MessageDirection.clientToServer,Z.type=new oZ.ProtocolRequestType(Z.method)})(iz||(UZ.WillDeleteFilesRequest=iz={}))});var tz=D((YJ)=>{Object.defineProperty(YJ,"__esModule",{value:!0});YJ.MonikerRequest=YJ.MonikerKind=YJ.UniquenessLevel=void 0;var az=v0(),sz;(function(Z){Z.document="document",Z.project="project",Z.group="group",Z.scheme="scheme",Z.global="global"})(sz||(YJ.UniquenessLevel=sz={}));var rz;(function(Z){Z.$import="import",Z.$export="export",Z.local="local"})(rz||(YJ.MonikerKind=rz={}));var oz;(function(Z){Z.method="textDocument/moniker",Z.messageDirection=az.MessageDirection.clientToServer,Z.type=new az.ProtocolRequestType(Z.method)})(oz||(YJ.MonikerRequest=oz={}))});var YG=D(($J)=>{Object.defineProperty($J,"__esModule",{value:!0});$J.TypeHierarchySubtypesRequest=$J.TypeHierarchySupertypesRequest=$J.TypeHierarchyPrepareRequest=void 0;var cJ=v0(),ez;(function(Z){Z.method="textDocument/prepareTypeHierarchy",Z.messageDirection=cJ.MessageDirection.clientToServer,Z.type=new cJ.ProtocolRequestType(Z.method)})(ez||($J.TypeHierarchyPrepareRequest=ez={}));var ZG;(function(Z){Z.method="typeHierarchy/supertypes",Z.messageDirection=cJ.MessageDirection.clientToServer,Z.type=new cJ.ProtocolRequestType(Z.method)})(ZG||($J.TypeHierarchySupertypesRequest=ZG={}));var JG;(function(Z){Z.method="typeHierarchy/subtypes",Z.messageDirection=cJ.MessageDirection.clientToServer,Z.type=new cJ.ProtocolRequestType(Z.method)})(JG||($J.TypeHierarchySubtypesRequest=JG={}))});var zG=D((iJ)=>{Object.defineProperty(iJ,"__esModule",{value:!0});iJ.InlineValueRefreshRequest=iJ.InlineValueRequest=void 0;var w8=v0(),$G;(function(Z){Z.method="textDocument/inlineValue",Z.messageDirection=w8.MessageDirection.clientToServer,Z.type=new w8.ProtocolRequestType(Z.method)})($G||(iJ.InlineValueRequest=$G={}));var QG;(function(Z){Z.method="workspace/inlineValue/refresh",Z.messageDirection=w8.MessageDirection.serverToClient,Z.type=new w8.ProtocolRequestType0(Z.method)})(QG||(iJ.InlineValueRefreshRequest=QG={}))});var jG=D((QJ)=>{Object.defineProperty(QJ,"__esModule",{value:!0});QJ.InlayHintRefreshRequest=QJ.InlayHintResolveRequest=QJ.InlayHintRequest=void 0;var nJ=v0(),GG;(function(Z){Z.method="textDocument/inlayHint",Z.messageDirection=nJ.MessageDirection.clientToServer,Z.type=new nJ.ProtocolRequestType(Z.method)})(GG||(QJ.InlayHintRequest=GG={}));var XG;(function(Z){Z.method="inlayHint/resolve",Z.messageDirection=nJ.MessageDirection.clientToServer,Z.type=new nJ.ProtocolRequestType(Z.method)})(XG||(QJ.InlayHintResolveRequest=XG={}));var BG;(function(Z){Z.method="workspace/inlayHint/refresh",Z.messageDirection=nJ.MessageDirection.serverToClient,Z.type=new nJ.ProtocolRequestType0(Z.method)})(BG||(QJ.InlayHintRefreshRequest=BG={}))});var UG=D((tZ)=>{Object.defineProperty(tZ,"__esModule",{value:!0});tZ.DiagnosticRefreshRequest=tZ.WorkspaceDiagnosticRequest=tZ.DocumentDiagnosticRequest=tZ.DocumentDiagnosticReportKind=tZ.DiagnosticServerCancellationData=void 0;var OG=AJ(),EV=B8(),aJ=v0(),KG;(function(Z){function J(Y){let $=Y;return $&&EV.boolean($.retriggerRequest)}Z.is=J})(KG||(tZ.DiagnosticServerCancellationData=KG={}));var VG;(function(Z){Z.Full="full",Z.Unchanged="unchanged"})(VG||(tZ.DocumentDiagnosticReportKind=VG={}));var WG;(function(Z){Z.method="textDocument/diagnostic",Z.messageDirection=aJ.MessageDirection.clientToServer,Z.type=new aJ.ProtocolRequestType(Z.method),Z.partialResult=new OG.ProgressType})(WG||(tZ.DocumentDiagnosticRequest=WG={}));var AG;(function(Z){Z.method="workspace/diagnostic",Z.messageDirection=aJ.MessageDirection.clientToServer,Z.type=new aJ.ProtocolRequestType(Z.method),Z.partialResult=new OG.ProgressType})(AG||(tZ.WorkspaceDiagnosticRequest=AG={}));var HG;(function(Z){Z.method="workspace/diagnostic/refresh",Z.messageDirection=aJ.MessageDirection.serverToClient,Z.type=new aJ.ProtocolRequestType0(Z.method)})(HG||(tZ.DiagnosticRefreshRequest=HG={}))});var MG=D((n0)=>{Object.defineProperty(n0,"__esModule",{value:!0});n0.DidCloseNotebookDocumentNotification=n0.DidSaveNotebookDocumentNotification=n0.DidChangeNotebookDocumentNotification=n0.NotebookCellArrayChange=n0.DidOpenNotebookDocumentNotification=n0.NotebookDocumentSyncRegistrationType=n0.NotebookDocument=n0.NotebookCell=n0.ExecutionSummary=n0.NotebookCellKind=void 0;var LY=X8(),j9=B8(),I9=v0(),O7;(function(Z){Z.Markup=1,Z.Code=2;function J(Y){return Y===1||Y===2}Z.is=J})(O7||(n0.NotebookCellKind=O7={}));var U7;(function(Z){function J(Q,z){let G={executionOrder:Q};if(z===!0||z===!1)G.success=z;return G}Z.create=J;function Y(Q){let z=Q;return j9.objectLiteral(z)&&LY.uinteger.is(z.executionOrder)&&(z.success===void 0||j9.boolean(z.success))}Z.is=Y;function $(Q,z){if(Q===z)return!0;if(Q===null||Q===void 0||z===null||z===void 0)return!1;return Q.executionOrder===z.executionOrder&&Q.success===z.success}Z.equals=$})(U7||(n0.ExecutionSummary=U7={}));var F8;(function(Z){function J(z,G){return{kind:z,document:G}}Z.create=J;function Y(z){let G=z;return j9.objectLiteral(G)&&O7.is(G.kind)&&LY.DocumentUri.is(G.document)&&(G.metadata===void 0||j9.objectLiteral(G.metadata))}Z.is=Y;function $(z,G){let B=new Set;if(z.document!==G.document)B.add("document");if(z.kind!==G.kind)B.add("kind");if(z.executionSummary!==G.executionSummary)B.add("executionSummary");if((z.metadata!==void 0||G.metadata!==void 0)&&!Q(z.metadata,G.metadata))B.add("metadata");if((z.executionSummary!==void 0||G.executionSummary!==void 0)&&!U7.equals(z.executionSummary,G.executionSummary))B.add("executionSummary");return B}Z.diff=$;function Q(z,G){if(z===G)return!0;if(z===null||z===void 0||G===null||G===void 0)return!1;if(typeof z!==typeof G)return!1;if(typeof z!=="object")return!1;let B=Array.isArray(z),K=Array.isArray(G);if(B!==K)return!1;if(B&&K){if(z.length!==G.length)return!1;for(let A=0;A<z.length;A++)if(!Q(z[A],G[A]))return!1}if(j9.objectLiteral(z)&&j9.objectLiteral(G)){let A=Object.keys(z),O=Object.keys(G);if(A.length!==O.length)return!1;if(A.sort(),O.sort(),!Q(A,O))return!1;for(let E=0;E<A.length;E++){let N=A[E];if(!Q(z[N],G[N]))return!1}}return!0}})(F8||(n0.NotebookCell=F8={}));var LG;(function(Z){function J($,Q,z,G){return{uri:$,notebookType:Q,version:z,cells:G}}Z.create=J;function Y($){let Q=$;return j9.objectLiteral(Q)&&j9.string(Q.uri)&&LY.integer.is(Q.version)&&j9.typedArray(Q.cells,F8.is)}Z.is=Y})(LG||(n0.NotebookDocument=LG={}));var sJ;(function(Z){Z.method="notebookDocument/sync",Z.messageDirection=I9.MessageDirection.clientToServer,Z.type=new I9.RegistrationType(Z.method)})(sJ||(n0.NotebookDocumentSyncRegistrationType=sJ={}));var NG;(function(Z){Z.method="notebookDocument/didOpen",Z.messageDirection=I9.MessageDirection.clientToServer,Z.type=new I9.ProtocolNotificationType(Z.method),Z.registrationMethod=sJ.method})(NG||(n0.DidOpenNotebookDocumentNotification=NG={}));var EG;(function(Z){function J($){let Q=$;return j9.objectLiteral(Q)&&LY.uinteger.is(Q.start)&&LY.uinteger.is(Q.deleteCount)&&(Q.cells===void 0||j9.typedArray(Q.cells,F8.is))}Z.is=J;function Y($,Q,z){let G={start:$,deleteCount:Q};if(z!==void 0)G.cells=z;return G}Z.create=Y})(EG||(n0.NotebookCellArrayChange=EG={}));var wG;(function(Z){Z.method="notebookDocument/didChange",Z.messageDirection=I9.MessageDirection.clientToServer,Z.type=new I9.ProtocolNotificationType(Z.method),Z.registrationMethod=sJ.method})(wG||(n0.DidChangeNotebookDocumentNotification=wG={}));var FG;(function(Z){Z.method="notebookDocument/didSave",Z.messageDirection=I9.MessageDirection.clientToServer,Z.type=new I9.ProtocolNotificationType(Z.method),Z.registrationMethod=sJ.method})(FG||(n0.DidSaveNotebookDocumentNotification=FG={}));var PG;(function(Z){Z.method="notebookDocument/didClose",Z.messageDirection=I9.MessageDirection.clientToServer,Z.type=new I9.ProtocolNotificationType(Z.method),Z.registrationMethod=sJ.method})(PG||(n0.DidCloseNotebookDocumentNotification=PG={}))});var qG=D((P8)=>{Object.defineProperty(P8,"__esModule",{value:!0});P8.InlineCompletionRequest=void 0;var IG=v0(),TG;(function(Z){Z.method="textDocument/inlineCompletion",Z.messageDirection=IG.MessageDirection.clientToServer,Z.type=new IG.ProtocolRequestType(Z.method)})(TG||(P8.InlineCompletionRequest=TG={}))});var gX=D((U)=>{Object.defineProperty(U,"__esModule",{value:!0});U.WorkspaceSymbolRequest=U.CodeActionResolveRequest=U.CodeActionRequest=U.DocumentSymbolRequest=U.DocumentHighlightRequest=U.ReferencesRequest=U.DefinitionRequest=U.SignatureHelpRequest=U.SignatureHelpTriggerKind=U.HoverRequest=U.CompletionResolveRequest=U.CompletionRequest=U.CompletionTriggerKind=U.PublishDiagnosticsNotification=U.WatchKind=U.RelativePattern=U.FileChangeType=U.DidChangeWatchedFilesNotification=U.WillSaveTextDocumentWaitUntilRequest=U.WillSaveTextDocumentNotification=U.TextDocumentSaveReason=U.DidSaveTextDocumentNotification=U.DidCloseTextDocumentNotification=U.DidChangeTextDocumentNotification=U.TextDocumentContentChangeEvent=U.DidOpenTextDocumentNotification=U.TextDocumentSyncKind=U.TelemetryEventNotification=U.LogMessageNotification=U.ShowMessageRequest=U.ShowMessageNotification=U.MessageType=U.DidChangeConfigurationNotification=U.ExitNotification=U.ShutdownRequest=U.InitializedNotification=U.InitializeErrorCodes=U.InitializeRequest=U.WorkDoneProgressOptions=U.TextDocumentRegistrationOptions=U.StaticRegistrationOptions=U.PositionEncodingKind=U.FailureHandlingKind=U.ResourceOperationKind=U.UnregistrationRequest=U.RegistrationRequest=U.DocumentSelector=U.NotebookCellTextDocumentFilter=U.NotebookDocumentFilter=U.TextDocumentFilter=void 0;U.MonikerRequest=U.MonikerKind=U.UniquenessLevel=U.WillDeleteFilesRequest=U.DidDeleteFilesNotification=U.WillRenameFilesRequest=U.DidRenameFilesNotification=U.WillCreateFilesRequest=U.DidCreateFilesNotification=U.FileOperationPatternKind=U.LinkedEditingRangeRequest=U.ShowDocumentRequest=U.SemanticTokensRegistrationType=U.SemanticTokensRefreshRequest=U.SemanticTokensRangeRequest=U.SemanticTokensDeltaRequest=U.SemanticTokensRequest=U.TokenFormat=U.CallHierarchyPrepareRequest=U.CallHierarchyOutgoingCallsRequest=U.CallHierarchyIncomingCallsRequest=U.WorkDoneProgressCancelNotification=U.WorkDoneProgressCreateRequest=U.WorkDoneProgress=U.SelectionRangeRequest=U.DeclarationRequest=U.FoldingRangeRefreshRequest=U.FoldingRangeRequest=U.ColorPresentationRequest=U.DocumentColorRequest=U.ConfigurationRequest=U.DidChangeWorkspaceFoldersNotification=U.WorkspaceFoldersRequest=U.TypeDefinitionRequest=U.ImplementationRequest=U.ApplyWorkspaceEditRequest=U.ExecuteCommandRequest=U.PrepareRenameRequest=U.RenameRequest=U.PrepareSupportDefaultBehavior=U.DocumentOnTypeFormattingRequest=U.DocumentRangesFormattingRequest=U.DocumentRangeFormattingRequest=U.DocumentFormattingRequest=U.DocumentLinkResolveRequest=U.DocumentLinkRequest=U.CodeLensRefreshRequest=U.CodeLensResolveRequest=U.CodeLensRequest=U.WorkspaceSymbolResolveRequest=void 0;U.InlineCompletionRequest=U.DidCloseNotebookDocumentNotification=U.DidSaveNotebookDocumentNotification=U.DidChangeNotebookDocumentNotification=U.NotebookCellArrayChange=U.DidOpenNotebookDocumentNotification=U.NotebookDocumentSyncRegistrationType=U.NotebookDocument=U.NotebookCell=U.ExecutionSummary=U.NotebookCellKind=U.DiagnosticRefreshRequest=U.WorkspaceDiagnosticRequest=U.DocumentDiagnosticRequest=U.DocumentDiagnosticReportKind=U.DiagnosticServerCancellationData=U.InlayHintRefreshRequest=U.InlayHintResolveRequest=U.InlayHintRequest=U.InlineValueRefreshRequest=U.InlineValueRequest=U.TypeHierarchySupertypesRequest=U.TypeHierarchySubtypesRequest=U.TypeHierarchyPrepareRequest=void 0;var v=v0(),CG=X8(),QZ=B8(),wV=tQ();Object.defineProperty(U,"ImplementationRequest",{enumerable:!0,get:function(){return wV.ImplementationRequest}});var FV=Jz();Object.defineProperty(U,"TypeDefinitionRequest",{enumerable:!0,get:function(){return FV.TypeDefinitionRequest}});var _X=Qz();Object.defineProperty(U,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return _X.WorkspaceFoldersRequest}});Object.defineProperty(U,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return _X.DidChangeWorkspaceFoldersNotification}});var PV=Xz();Object.defineProperty(U,"ConfigurationRequest",{enumerable:!0,get:function(){return PV.ConfigurationRequest}});var fX=Kz();Object.defineProperty(U,"DocumentColorRequest",{enumerable:!0,get:function(){return fX.DocumentColorRequest}});Object.defineProperty(U,"ColorPresentationRequest",{enumerable:!0,get:function(){return fX.ColorPresentationRequest}});var kX=Az();Object.defineProperty(U,"FoldingRangeRequest",{enumerable:!0,get:function(){return kX.FoldingRangeRequest}});Object.defineProperty(U,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return kX.FoldingRangeRefreshRequest}});var MV=Uz();Object.defineProperty(U,"DeclarationRequest",{enumerable:!0,get:function(){return MV.DeclarationRequest}});var IV=Ez();Object.defineProperty(U,"SelectionRangeRequest",{enumerable:!0,get:function(){return IV.SelectionRangeRequest}});var F7=Mz();Object.defineProperty(U,"WorkDoneProgress",{enumerable:!0,get:function(){return F7.WorkDoneProgress}});Object.defineProperty(U,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return F7.WorkDoneProgressCreateRequest}});Object.defineProperty(U,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return F7.WorkDoneProgressCancelNotification}});var P7=Cz();Object.defineProperty(U,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return P7.CallHierarchyIncomingCallsRequest}});Object.defineProperty(U,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return P7.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(U,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return P7.CallHierarchyPrepareRequest}});var rJ=hz();Object.defineProperty(U,"TokenFormat",{enumerable:!0,get:function(){return rJ.TokenFormat}});Object.defineProperty(U,"SemanticTokensRequest",{enumerable:!0,get:function(){return rJ.SemanticTokensRequest}});Object.defineProperty(U,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return rJ.SemanticTokensDeltaRequest}});Object.defineProperty(U,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return rJ.SemanticTokensRangeRequest}});Object.defineProperty(U,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return rJ.SemanticTokensRefreshRequest}});Object.defineProperty(U,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return rJ.SemanticTokensRegistrationType}});var TV=fz();Object.defineProperty(U,"ShowDocumentRequest",{enumerable:!0,get:function(){return TV.ShowDocumentRequest}});var qV=gz();Object.defineProperty(U,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return qV.LinkedEditingRangeRequest}});var HJ=nz();Object.defineProperty(U,"FileOperationPatternKind",{enumerable:!0,get:function(){return HJ.FileOperationPatternKind}});Object.defineProperty(U,"DidCreateFilesNotification",{enumerable:!0,get:function(){return HJ.DidCreateFilesNotification}});Object.defineProperty(U,"WillCreateFilesRequest",{enumerable:!0,get:function(){return HJ.WillCreateFilesRequest}});Object.defineProperty(U,"DidRenameFilesNotification",{enumerable:!0,get:function(){return HJ.DidRenameFilesNotification}});Object.defineProperty(U,"WillRenameFilesRequest",{enumerable:!0,get:function(){return HJ.WillRenameFilesRequest}});Object.defineProperty(U,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return HJ.DidDeleteFilesNotification}});Object.defineProperty(U,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return HJ.WillDeleteFilesRequest}});var M7=tz();Object.defineProperty(U,"UniquenessLevel",{enumerable:!0,get:function(){return M7.UniquenessLevel}});Object.defineProperty(U,"MonikerKind",{enumerable:!0,get:function(){return M7.MonikerKind}});Object.defineProperty(U,"MonikerRequest",{enumerable:!0,get:function(){return M7.MonikerRequest}});var I7=YG();Object.defineProperty(U,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return I7.TypeHierarchyPrepareRequest}});Object.defineProperty(U,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return I7.TypeHierarchySubtypesRequest}});Object.defineProperty(U,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return I7.TypeHierarchySupertypesRequest}});var vX=zG();Object.defineProperty(U,"InlineValueRequest",{enumerable:!0,get:function(){return vX.InlineValueRequest}});Object.defineProperty(U,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return vX.InlineValueRefreshRequest}});var T7=jG();Object.defineProperty(U,"InlayHintRequest",{enumerable:!0,get:function(){return T7.InlayHintRequest}});Object.defineProperty(U,"InlayHintResolveRequest",{enumerable:!0,get:function(){return T7.InlayHintResolveRequest}});Object.defineProperty(U,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return T7.InlayHintRefreshRequest}});var NY=UG();Object.defineProperty(U,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return NY.DiagnosticServerCancellationData}});Object.defineProperty(U,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return NY.DocumentDiagnosticReportKind}});Object.defineProperty(U,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return NY.DocumentDiagnosticRequest}});Object.defineProperty(U,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return NY.WorkspaceDiagnosticRequest}});Object.defineProperty(U,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return NY.DiagnosticRefreshRequest}});var T9=MG();Object.defineProperty(U,"NotebookCellKind",{enumerable:!0,get:function(){return T9.NotebookCellKind}});Object.defineProperty(U,"ExecutionSummary",{enumerable:!0,get:function(){return T9.ExecutionSummary}});Object.defineProperty(U,"NotebookCell",{enumerable:!0,get:function(){return T9.NotebookCell}});Object.defineProperty(U,"NotebookDocument",{enumerable:!0,get:function(){return T9.NotebookDocument}});Object.defineProperty(U,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return T9.NotebookDocumentSyncRegistrationType}});Object.defineProperty(U,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return T9.DidOpenNotebookDocumentNotification}});Object.defineProperty(U,"NotebookCellArrayChange",{enumerable:!0,get:function(){return T9.NotebookCellArrayChange}});Object.defineProperty(U,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return T9.DidChangeNotebookDocumentNotification}});Object.defineProperty(U,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return T9.DidSaveNotebookDocumentNotification}});Object.defineProperty(U,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return T9.DidCloseNotebookDocumentNotification}});var CV=qG();Object.defineProperty(U,"InlineCompletionRequest",{enumerable:!0,get:function(){return CV.InlineCompletionRequest}});var L7;(function(Z){function J(Y){let $=Y;return QZ.string($)||(QZ.string($.language)||QZ.string($.scheme)||QZ.string($.pattern))}Z.is=J})(L7||(U.TextDocumentFilter=L7={}));var N7;(function(Z){function J(Y){let $=Y;return QZ.objectLiteral($)&&(QZ.string($.notebookType)||QZ.string($.scheme)||QZ.string($.pattern))}Z.is=J})(N7||(U.NotebookDocumentFilter=N7={}));var E7;(function(Z){function J(Y){let $=Y;return QZ.objectLiteral($)&&(QZ.string($.notebook)||N7.is($.notebook))&&($.language===void 0||QZ.string($.language))}Z.is=J})(E7||(U.NotebookCellTextDocumentFilter=E7={}));var w7;(function(Z){function J(Y){if(!Array.isArray(Y))return!1;for(let $ of Y)if(!QZ.string($)&&!L7.is($)&&!E7.is($))return!1;return!0}Z.is=J})(w7||(U.DocumentSelector=w7={}));var SG;(function(Z){Z.method="client/registerCapability",Z.messageDirection=v.MessageDirection.serverToClient,Z.type=new v.ProtocolRequestType(Z.method)})(SG||(U.RegistrationRequest=SG={}));var DG;(function(Z){Z.method="client/unregisterCapability",Z.messageDirection=v.MessageDirection.serverToClient,Z.type=new v.ProtocolRequestType(Z.method)})(DG||(U.UnregistrationRequest=DG={}));var bG;(function(Z){Z.Create="create",Z.Rename="rename",Z.Delete="delete"})(bG||(U.ResourceOperationKind=bG={}));var yG;(function(Z){Z.Abort="abort",Z.Transactional="transactional",Z.TextOnlyTransactional="textOnlyTransactional",Z.Undo="undo"})(yG||(U.FailureHandlingKind=yG={}));var RG;(function(Z){Z.UTF8="utf-8",Z.UTF16="utf-16",Z.UTF32="utf-32"})(RG||(U.PositionEncodingKind=RG={}));var hG;(function(Z){function J(Y){let $=Y;return $&&QZ.string($.id)&&$.id.length>0}Z.hasId=J})(hG||(U.StaticRegistrationOptions=hG={}));var xG;(function(Z){function J(Y){let $=Y;return $&&($.documentSelector===null||w7.is($.documentSelector))}Z.is=J})(xG||(U.TextDocumentRegistrationOptions=xG={}));var _G;(function(Z){function J($){let Q=$;return QZ.objectLiteral(Q)&&(Q.workDoneProgress===void 0||QZ.boolean(Q.workDoneProgress))}Z.is=J;function Y($){let Q=$;return Q&&QZ.boolean(Q.workDoneProgress)}Z.hasWorkDoneProgress=Y})(_G||(U.WorkDoneProgressOptions=_G={}));var fG;(function(Z){Z.method="initialize",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(fG||(U.InitializeRequest=fG={}));var kG;(function(Z){Z.unknownProtocolVersion=1})(kG||(U.InitializeErrorCodes=kG={}));var vG;(function(Z){Z.method="initialized",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolNotificationType(Z.method)})(vG||(U.InitializedNotification=vG={}));var gG;(function(Z){Z.method="shutdown",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType0(Z.method)})(gG||(U.ShutdownRequest=gG={}));var dG;(function(Z){Z.method="exit",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolNotificationType0(Z.method)})(dG||(U.ExitNotification=dG={}));var pG;(function(Z){Z.method="workspace/didChangeConfiguration",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolNotificationType(Z.method)})(pG||(U.DidChangeConfigurationNotification=pG={}));var mG;(function(Z){Z.Error=1,Z.Warning=2,Z.Info=3,Z.Log=4,Z.Debug=5})(mG||(U.MessageType=mG={}));var uG;(function(Z){Z.method="window/showMessage",Z.messageDirection=v.MessageDirection.serverToClient,Z.type=new v.ProtocolNotificationType(Z.method)})(uG||(U.ShowMessageNotification=uG={}));var lG;(function(Z){Z.method="window/showMessageRequest",Z.messageDirection=v.MessageDirection.serverToClient,Z.type=new v.ProtocolRequestType(Z.method)})(lG||(U.ShowMessageRequest=lG={}));var cG;(function(Z){Z.method="window/logMessage",Z.messageDirection=v.MessageDirection.serverToClient,Z.type=new v.ProtocolNotificationType(Z.method)})(cG||(U.LogMessageNotification=cG={}));var iG;(function(Z){Z.method="telemetry/event",Z.messageDirection=v.MessageDirection.serverToClient,Z.type=new v.ProtocolNotificationType(Z.method)})(iG||(U.TelemetryEventNotification=iG={}));var nG;(function(Z){Z.None=0,Z.Full=1,Z.Incremental=2})(nG||(U.TextDocumentSyncKind=nG={}));var aG;(function(Z){Z.method="textDocument/didOpen",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolNotificationType(Z.method)})(aG||(U.DidOpenTextDocumentNotification=aG={}));var sG;(function(Z){function J($){let Q=$;return Q!==void 0&&Q!==null&&typeof Q.text==="string"&&Q.range!==void 0&&(Q.rangeLength===void 0||typeof Q.rangeLength==="number")}Z.isIncremental=J;function Y($){let Q=$;return Q!==void 0&&Q!==null&&typeof Q.text==="string"&&Q.range===void 0&&Q.rangeLength===void 0}Z.isFull=Y})(sG||(U.TextDocumentContentChangeEvent=sG={}));var rG;(function(Z){Z.method="textDocument/didChange",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolNotificationType(Z.method)})(rG||(U.DidChangeTextDocumentNotification=rG={}));var oG;(function(Z){Z.method="textDocument/didClose",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolNotificationType(Z.method)})(oG||(U.DidCloseTextDocumentNotification=oG={}));var tG;(function(Z){Z.method="textDocument/didSave",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolNotificationType(Z.method)})(tG||(U.DidSaveTextDocumentNotification=tG={}));var eG;(function(Z){Z.Manual=1,Z.AfterDelay=2,Z.FocusOut=3})(eG||(U.TextDocumentSaveReason=eG={}));var ZX;(function(Z){Z.method="textDocument/willSave",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolNotificationType(Z.method)})(ZX||(U.WillSaveTextDocumentNotification=ZX={}));var JX;(function(Z){Z.method="textDocument/willSaveWaitUntil",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(JX||(U.WillSaveTextDocumentWaitUntilRequest=JX={}));var YX;(function(Z){Z.method="workspace/didChangeWatchedFiles",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolNotificationType(Z.method)})(YX||(U.DidChangeWatchedFilesNotification=YX={}));var $X;(function(Z){Z.Created=1,Z.Changed=2,Z.Deleted=3})($X||(U.FileChangeType=$X={}));var QX;(function(Z){function J(Y){let $=Y;return QZ.objectLiteral($)&&(CG.URI.is($.baseUri)||CG.WorkspaceFolder.is($.baseUri))&&QZ.string($.pattern)}Z.is=J})(QX||(U.RelativePattern=QX={}));var zX;(function(Z){Z.Create=1,Z.Change=2,Z.Delete=4})(zX||(U.WatchKind=zX={}));var GX;(function(Z){Z.method="textDocument/publishDiagnostics",Z.messageDirection=v.MessageDirection.serverToClient,Z.type=new v.ProtocolNotificationType(Z.method)})(GX||(U.PublishDiagnosticsNotification=GX={}));var XX;(function(Z){Z.Invoked=1,Z.TriggerCharacter=2,Z.TriggerForIncompleteCompletions=3})(XX||(U.CompletionTriggerKind=XX={}));var BX;(function(Z){Z.method="textDocument/completion",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(BX||(U.CompletionRequest=BX={}));var jX;(function(Z){Z.method="completionItem/resolve",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(jX||(U.CompletionResolveRequest=jX={}));var KX;(function(Z){Z.method="textDocument/hover",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(KX||(U.HoverRequest=KX={}));var VX;(function(Z){Z.Invoked=1,Z.TriggerCharacter=2,Z.ContentChange=3})(VX||(U.SignatureHelpTriggerKind=VX={}));var WX;(function(Z){Z.method="textDocument/signatureHelp",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(WX||(U.SignatureHelpRequest=WX={}));var AX;(function(Z){Z.method="textDocument/definition",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(AX||(U.DefinitionRequest=AX={}));var HX;(function(Z){Z.method="textDocument/references",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(HX||(U.ReferencesRequest=HX={}));var OX;(function(Z){Z.method="textDocument/documentHighlight",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(OX||(U.DocumentHighlightRequest=OX={}));var UX;(function(Z){Z.method="textDocument/documentSymbol",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(UX||(U.DocumentSymbolRequest=UX={}));var LX;(function(Z){Z.method="textDocument/codeAction",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(LX||(U.CodeActionRequest=LX={}));var NX;(function(Z){Z.method="codeAction/resolve",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(NX||(U.CodeActionResolveRequest=NX={}));var EX;(function(Z){Z.method="workspace/symbol",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(EX||(U.WorkspaceSymbolRequest=EX={}));var wX;(function(Z){Z.method="workspaceSymbol/resolve",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(wX||(U.WorkspaceSymbolResolveRequest=wX={}));var FX;(function(Z){Z.method="textDocument/codeLens",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(FX||(U.CodeLensRequest=FX={}));var PX;(function(Z){Z.method="codeLens/resolve",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(PX||(U.CodeLensResolveRequest=PX={}));var MX;(function(Z){Z.method="workspace/codeLens/refresh",Z.messageDirection=v.MessageDirection.serverToClient,Z.type=new v.ProtocolRequestType0(Z.method)})(MX||(U.CodeLensRefreshRequest=MX={}));var IX;(function(Z){Z.method="textDocument/documentLink",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(IX||(U.DocumentLinkRequest=IX={}));var TX;(function(Z){Z.method="documentLink/resolve",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(TX||(U.DocumentLinkResolveRequest=TX={}));var qX;(function(Z){Z.method="textDocument/formatting",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(qX||(U.DocumentFormattingRequest=qX={}));var CX;(function(Z){Z.method="textDocument/rangeFormatting",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(CX||(U.DocumentRangeFormattingRequest=CX={}));var SX;(function(Z){Z.method="textDocument/rangesFormatting",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(SX||(U.DocumentRangesFormattingRequest=SX={}));var DX;(function(Z){Z.method="textDocument/onTypeFormatting",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(DX||(U.DocumentOnTypeFormattingRequest=DX={}));var bX;(function(Z){Z.Identifier=1})(bX||(U.PrepareSupportDefaultBehavior=bX={}));var yX;(function(Z){Z.method="textDocument/rename",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(yX||(U.RenameRequest=yX={}));var RX;(function(Z){Z.method="textDocument/prepareRename",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(RX||(U.PrepareRenameRequest=RX={}));var hX;(function(Z){Z.method="workspace/executeCommand",Z.messageDirection=v.MessageDirection.clientToServer,Z.type=new v.ProtocolRequestType(Z.method)})(hX||(U.ExecuteCommandRequest=hX={}));var xX;(function(Z){Z.method="workspace/applyEdit",Z.messageDirection=v.MessageDirection.serverToClient,Z.type=new v.ProtocolRequestType("workspace/applyEdit")})(xX||(U.ApplyWorkspaceEditRequest=xX={}))});var pX=D((M8)=>{Object.defineProperty(M8,"__esModule",{value:!0});M8.createProtocolConnection=void 0;var dX=AJ();function SV(Z,J,Y,$){if(dX.ConnectionStrategy.is($))$={connectionStrategy:$};return(0,dX.createMessageConnection)(Z,J,Y,$)}M8.createProtocolConnection=SV});var uX=D((RZ)=>{var DV=RZ&&RZ.__createBinding||(Object.create?function(Z,J,Y,$){if($===void 0)$=Y;var Q=Object.getOwnPropertyDescriptor(J,Y);if(!Q||("get"in Q?!J.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return J[Y]}};Object.defineProperty(Z,$,Q)}:function(Z,J,Y,$){if($===void 0)$=Y;Z[$]=J[Y]}),I8=RZ&&RZ.__exportStar||function(Z,J){for(var Y in Z)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(J,Y))DV(J,Z,Y)};Object.defineProperty(RZ,"__esModule",{value:!0});RZ.LSPErrorCodes=RZ.createProtocolConnection=void 0;I8(AJ(),RZ);I8(X8(),RZ);I8(v0(),RZ);I8(gX(),RZ);var bV=pX();Object.defineProperty(RZ,"createProtocolConnection",{enumerable:!0,get:function(){return bV.createProtocolConnection}});var mX;(function(Z){Z.lspReservedErrorRangeStart=-32899,Z.RequestFailed=-32803,Z.ServerCancelled=-32802,Z.ContentModified=-32801,Z.RequestCancelled=-32800,Z.lspReservedErrorRangeEnd=-32800})(mX||(RZ.LSPErrorCodes=mX={}))});var Z0=D((q9)=>{var yV=q9&&q9.__createBinding||(Object.create?function(Z,J,Y,$){if($===void 0)$=Y;var Q=Object.getOwnPropertyDescriptor(J,Y);if(!Q||("get"in Q?!J.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return J[Y]}};Object.defineProperty(Z,$,Q)}:function(Z,J,Y,$){if($===void 0)$=Y;Z[$]=J[Y]}),lX=q9&&q9.__exportStar||function(Z,J){for(var Y in Z)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(J,Y))yV(J,Z,Y)};Object.defineProperty(q9,"__esModule",{value:!0});q9.createProtocolConnection=void 0;var RV=H7();lX(H7(),q9);lX(uX(),q9);function hV(Z,J,Y,$){return(0,RV.createMessageConnection)(Z,J,Y,$)}q9.createProtocolConnection=hV});var q8=D((LZ)=>{Object.defineProperty(LZ,"__esModule",{value:!0});LZ.forEach=LZ.mapAsync=LZ.map=LZ.clearTestMode=LZ.setTestMode=LZ.Semaphore=LZ.Delayer=void 0;var EY=Z0();class iX{constructor(Z){this.defaultDelay=Z,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(Z,J=this.defaultDelay){if(this.task=Z,J>=0)this.cancelTimeout();if(!this.completionPromise)this.completionPromise=new Promise((Y)=>{this.onSuccess=Y}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var Y=this.task();return this.task=void 0,Y});if(J>=0||this.timeout===void 0)this.timeout=(0,EY.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},J>=0?J:this.defaultDelay);return this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let Z=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,Z}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){if(this.timeout!==void 0)this.timeout.dispose(),this.timeout=void 0}}LZ.Delayer=iX;class nX{constructor(Z=1){if(Z<=0)throw Error("Capacity must be greater than 0");this._capacity=Z,this._active=0,this._waiting=[]}lock(Z){return new Promise((J,Y)=>{this._waiting.push({thunk:Z,resolve:J,reject:Y}),this.runNext()})}get active(){return this._active}runNext(){if(this._waiting.length===0||this._active===this._capacity)return;(0,EY.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let Z=this._waiting.shift();if(this._active++,this._active>this._capacity)throw Error("To many thunks active");try{let J=Z.thunk();if(J instanceof Promise)J.then((Y)=>{this._active--,Z.resolve(Y),this.runNext()},(Y)=>{this._active--,Z.reject(Y),this.runNext()});else this._active--,Z.resolve(J),this.runNext()}catch(J){this._active--,Z.reject(J),this.runNext()}}}LZ.Semaphore=nX;var q7=!1;function xV(){q7=!0}LZ.setTestMode=xV;function _V(){q7=!1}LZ.clearTestMode=_V;var cX=15;class T8{constructor(Z=cX){this.yieldAfter=q7===!0?Math.max(Z,2):Math.max(Z,cX),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let Z=Date.now()-this.startTime,J=Math.max(0,this.yieldAfter-Z);if(this.total+=this.counter,this.counter=0,Z>=this.yieldAfter||J<=1)return this.counterInterval=1,this.total=0,!0;else switch(Z){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}}async function fV(Z,J,Y,$){if(Z.length===0)return[];let Q=Array(Z.length),z=new T8($?.yieldAfter);function G(K){z.start();for(let A=K;A<Z.length;A++)if(Q[A]=J(Z[A]),z.shouldYield())return $?.yieldCallback&&$.yieldCallback(),A+1;return-1}let B=G(0);while(B!==-1){if(Y!==void 0&&Y.isCancellationRequested)break;B=await new Promise((K)=>{(0,EY.RAL)().timer.setImmediate(()=>{K(G(B))})})}return Q}LZ.map=fV;async function kV(Z,J,Y,$){if(Z.length===0)return[];let Q=Array(Z.length),z=new T8($?.yieldAfter);async function G(K){z.start();for(let A=K;A<Z.length;A++)if(Q[A]=await J(Z[A],Y),z.shouldYield())return $?.yieldCallback&&$.yieldCallback(),A+1;return-1}let B=await G(0);while(B!==-1){if(Y!==void 0&&Y.isCancellationRequested)break;B=await new Promise((K)=>{(0,EY.RAL)().timer.setImmediate(()=>{K(G(B))})})}return Q}LZ.mapAsync=kV;async function vV(Z,J,Y,$){if(Z.length===0)return;let Q=new T8($?.yieldAfter);function z(B){Q.start();for(let K=B;K<Z.length;K++)if(J(Z[K]),Q.shouldYield())return $?.yieldCallback&&$.yieldCallback(),K+1;return-1}let G=z(0);while(G!==-1){if(Y!==void 0&&Y.isCancellationRequested)break;G=await new Promise((B)=>{(0,EY.RAL)().timer.setImmediate(()=>{B(z(G))})})}}LZ.forEach=vV});var S7=D((C7)=>{Object.defineProperty(C7,"__esModule",{value:!0});var gV=require("vscode");class aX extends gV.CompletionItem{constructor(Z){super(Z)}}C7.default=aX});var b7=D((D7)=>{Object.defineProperty(D7,"__esModule",{value:!0});var dV=require("vscode");class sX extends dV.CodeLens{constructor(Z){super(Z)}}D7.default=sX});var R7=D((y7)=>{Object.defineProperty(y7,"__esModule",{value:!0});var pV=require("vscode");class rX extends pV.DocumentLink{constructor(Z,J){super(Z,J)}}y7.default=rX});var x7=D((h7)=>{Object.defineProperty(h7,"__esModule",{value:!0});var mV=require("vscode");class oX extends mV.CodeAction{constructor(Z,J){super(Z);this.data=J}}h7.default=oX});var f7=D((oJ)=>{Object.defineProperty(oJ,"__esModule",{value:!0});oJ.ProtocolDiagnostic=oJ.DiagnosticCode=void 0;var uV=require("vscode"),_7=rZ(),tX;(function(Z){function J(Y){let $=Y;return $!==void 0&&$!==null&&(_7.number($.value)||_7.string($.value))&&_7.string($.target)}Z.is=J})(tX||(oJ.DiagnosticCode=tX={}));class eX extends uV.Diagnostic{constructor(Z,J,Y,$){super(Z,J,Y);this.data=$,this.hasDiagnosticCode=!1}}oJ.ProtocolDiagnostic=eX});var v7=D((k7)=>{Object.defineProperty(k7,"__esModule",{value:!0});var lV=require("vscode");class Z5 extends lV.CallHierarchyItem{constructor(Z,J,Y,$,Q,z,G){super(Z,J,Y,$,Q,z);if(G!==void 0)this.data=G}}k7.default=Z5});var d7=D((g7)=>{Object.defineProperty(g7,"__esModule",{value:!0});var cV=require("vscode");class J5 extends cV.TypeHierarchyItem{constructor(Z,J,Y,$,Q,z,G){super(Z,J,Y,$,Q,z);if(G!==void 0)this.data=G}}g7.default=J5});var m7=D((p7)=>{Object.defineProperty(p7,"__esModule",{value:!0});var C8=require("vscode");class Y5 extends C8.SymbolInformation{constructor(Z,J,Y,$,Q){let z=!($ instanceof C8.Uri);super(Z,J,Y,z?$:new C8.Location($,new C8.Range(0,0,0,0)));if(this.hasRange=z,Q!==void 0)this.data=Q}}p7.default=Y5});var l7=D((u7)=>{Object.defineProperty(u7,"__esModule",{value:!0});var iV=require("vscode");class $5 extends iV.InlayHint{constructor(Z,J,Y){super(Z,J,Y)}}u7.default=$5});var X5=D((S8)=>{Object.defineProperty(S8,"__esModule",{value:!0});S8.createConverter=void 0;var e0=require("vscode"),J0=Z0(),OJ=rZ(),Q5=q8(),nV=S7(),aV=b7(),sV=R7(),z5=x7(),G5=f7(),rV=v7(),oV=d7(),tV=m7(),eV=l7(),c7;(function(Z){function J(Y){let $=Y;return $&&!!$.inserting&&!!$.replacing}Z.is=J})(c7||(c7={}));function ZW(Z){let Y=Z||((V)=>V.toString());function $(V){return Y(V)}function Q(V){return{uri:Y(V.uri)}}function z(V){return{uri:Y(V.uri),languageId:V.languageId,version:V.version,text:V.getText()}}function G(V){return{uri:Y(V.uri),version:V.version}}function B(V){return{textDocument:z(V)}}function K(V){let S=V;return!!S.document&&!!S.contentChanges}function A(V){let S=V;return!!S.uri&&!!S.version}function O(V,S,i){if(A(V))return{textDocument:{uri:Y(V.uri),version:V.version},contentChanges:[{text:V.getText()}]};else if(K(V)){let w0=S,I=i;return{textDocument:{uri:Y(w0),version:I},contentChanges:V.contentChanges.map((F)=>{let P=F.range;return{range:{start:{line:P.start.line,character:P.start.character},end:{line:P.end.line,character:P.end.character}},rangeLength:F.rangeLength,text:F.text}})}}else throw Error("Unsupported text document change parameter")}function E(V){return{textDocument:Q(V)}}function N(V,S=!1){let i={textDocument:Q(V)};if(S)i.text=V.getText();return i}function L(V){switch(V){case e0.TextDocumentSaveReason.Manual:return J0.TextDocumentSaveReason.Manual;case e0.TextDocumentSaveReason.AfterDelay:return J0.TextDocumentSaveReason.AfterDelay;case e0.TextDocumentSaveReason.FocusOut:return J0.TextDocumentSaveReason.FocusOut}return J0.TextDocumentSaveReason.Manual}function T(V){return{textDocument:Q(V.document),reason:L(V.reason)}}function C(V){return{files:V.files.map((S)=>({uri:Y(S)}))}}function x(V){return{files:V.files.map((S)=>({oldUri:Y(S.oldUri),newUri:Y(S.newUri)}))}}function _(V){return{files:V.files.map((S)=>({uri:Y(S)}))}}function d(V){return{files:V.files.map((S)=>({uri:Y(S)}))}}function f(V){return{files:V.files.map((S)=>({oldUri:Y(S.oldUri),newUri:Y(S.newUri)}))}}function B0(V){return{files:V.files.map((S)=>({uri:Y(S)}))}}function t(V,S){return{textDocument:Q(V),position:wZ(S)}}function u(V){switch(V){case e0.CompletionTriggerKind.TriggerCharacter:return J0.CompletionTriggerKind.TriggerCharacter;case e0.CompletionTriggerKind.TriggerForIncompleteCompletions:return J0.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return J0.CompletionTriggerKind.Invoked}}function a(V,S,i){return{textDocument:Q(V),position:wZ(S),context:{triggerKind:u(i.triggerKind),triggerCharacter:i.triggerCharacter}}}function j0(V){switch(V){case e0.SignatureHelpTriggerKind.Invoke:return J0.SignatureHelpTriggerKind.Invoked;case e0.SignatureHelpTriggerKind.TriggerCharacter:return J0.SignatureHelpTriggerKind.TriggerCharacter;case e0.SignatureHelpTriggerKind.ContentChange:return J0.SignatureHelpTriggerKind.ContentChange}}function _0(V){return{label:V.label}}function y0(V){return V.map(_0)}function qZ(V){return{label:V.label,parameters:y0(V.parameters)}}function r0(V){return V.map(qZ)}function nZ(V){if(V===void 0)return V;return{signatures:r0(V.signatures),activeSignature:V.activeSignature,activeParameter:V.activeParameter}}function XZ(V,S,i){return{textDocument:Q(V),position:wZ(S),context:{isRetrigger:i.isRetrigger,triggerCharacter:i.triggerCharacter,triggerKind:j0(i.triggerKind),activeSignatureHelp:nZ(i.activeSignatureHelp)}}}function wZ(V){return{line:V.line,character:V.character}}function JZ(V){if(V===void 0||V===null)return V;return{line:V.line>J0.uinteger.MAX_VALUE?J0.uinteger.MAX_VALUE:V.line,character:V.character>J0.uinteger.MAX_VALUE?J0.uinteger.MAX_VALUE:V.character}}function R9(V,S){return Q5.map(V,JZ,S)}function O9(V){return V.map(JZ)}function R0(V){if(V===void 0||V===null)return V;return{start:JZ(V.start),end:JZ(V.end)}}function CZ(V){return V.map(R0)}function FZ(V){if(V===void 0||V===null)return V;return J0.Location.create($(V.uri),R0(V.range))}function BZ(V){switch(V){case e0.DiagnosticSeverity.Error:return J0.DiagnosticSeverity.Error;case e0.DiagnosticSeverity.Warning:return J0.DiagnosticSeverity.Warning;case e0.DiagnosticSeverity.Information:return J0.DiagnosticSeverity.Information;case e0.DiagnosticSeverity.Hint:return J0.DiagnosticSeverity.Hint}}function c9(V){if(!V)return;let S=[];for(let i of V){let w0=U9(i);if(w0!==void 0)S.push(w0)}return S.length>0?S:void 0}function U9(V){switch(V){case e0.DiagnosticTag.Unnecessary:return J0.DiagnosticTag.Unnecessary;case e0.DiagnosticTag.Deprecated:return J0.DiagnosticTag.Deprecated;default:return}}function L9(V){return{message:V.message,location:FZ(V.location)}}function h9(V){return V.map(L9)}function i9(V){if(V===void 0||V===null)return;if(OJ.number(V)||OJ.string(V))return V;return{value:V.value,target:$(V.target)}}function N9(V){let S=J0.Diagnostic.create(R0(V.range),V.message),i=V instanceof G5.ProtocolDiagnostic?V:void 0;if(i!==void 0&&i.data!==void 0)S.data=i.data;let w0=i9(V.code);if(G5.DiagnosticCode.is(w0))if(i!==void 0&&i.hasDiagnosticCode)S.code=w0;else S.code=w0.value,S.codeDescription={href:w0.target};else S.code=w0;if(OJ.number(V.severity))S.severity=BZ(V.severity);if(Array.isArray(V.tags))S.tags=c9(V.tags);if(V.relatedInformation)S.relatedInformation=h9(V.relatedInformation);if(V.source)S.source=V.source;return S}function $9(V,S){if(V===void 0||V===null)return V;return Q5.map(V,N9,S)}function Q9(V){if(V===void 0||V===null)return V;return V.map(N9)}function E9(V,S){switch(V){case"$string":return S;case J0.MarkupKind.PlainText:return{kind:V,value:S};case J0.MarkupKind.Markdown:return{kind:V,value:S.value};default:return`Unsupported Markup content received. Kind is: ${V}`}}function o0(V){switch(V){case e0.CompletionItemTag.Deprecated:return J0.CompletionItemTag.Deprecated}return}function x9(V){if(V===void 0)return V;let S=[];for(let i of V){let w0=o0(i);if(w0!==void 0)S.push(w0)}return S}function z9(V,S){if(S!==void 0)return S;return V+1}function aZ(V,S=!1){let i,w0;if(OJ.string(V.label))i=V.label;else if(i=V.label.label,S&&(V.label.detail!==void 0||V.label.description!==void 0))w0={detail:V.label.detail,description:V.label.description};let I={label:i};if(w0!==void 0)I.labelDetails=w0;let W=V instanceof nV.default?V:void 0;if(V.detail)I.detail=V.detail;if(V.documentation)if(!W||W.documentationFormat==="$string")I.documentation=V.documentation;else I.documentation=E9(W.documentationFormat,V.documentation);if(V.filterText)I.filterText=V.filterText;if(n9(I,V),OJ.number(V.kind))I.kind=z9(V.kind,W&&W.originalItemKind);if(V.sortText)I.sortText=V.sortText;if(V.additionalTextEdits)I.additionalTextEdits=s0(V.additionalTextEdits);if(V.commitCharacters)I.commitCharacters=V.commitCharacters.slice();if(V.command)I.command=m(V.command);if(V.preselect===!0||V.preselect===!1)I.preselect=V.preselect;let F=x9(V.tags);if(W){if(W.data!==void 0)I.data=W.data;if(W.deprecated===!0||W.deprecated===!1){if(W.deprecated===!0&&F!==void 0&&F.length>0){let P=F.indexOf(e0.CompletionItemTag.Deprecated);if(P!==-1)F.splice(P,1)}I.deprecated=W.deprecated}if(W.insertTextMode!==void 0)I.insertTextMode=W.insertTextMode}if(F!==void 0&&F.length>0)I.tags=F;if(I.insertTextMode===void 0&&V.keepWhitespace===!0)I.insertTextMode=J0.InsertTextMode.adjustIndentation;return I}function n9(V,S){let i=J0.InsertTextFormat.PlainText,w0=void 0,I=void 0;if(S.textEdit)w0=S.textEdit.newText,I=S.textEdit.range;else if(S.insertText instanceof e0.SnippetString)i=J0.InsertTextFormat.Snippet,w0=S.insertText.value;else w0=S.insertText;if(S.range)I=S.range;if(V.insertTextFormat=i,S.fromEdit&&w0!==void 0&&I!==void 0)V.textEdit=sZ(w0,I);else V.insertText=w0}function sZ(V,S){if(c7.is(S))return J0.InsertReplaceEdit.create(V,R0(S.inserting),R0(S.replacing));else return{newText:V,range:R0(S)}}function w9(V){return{range:R0(V.range),newText:V.newText}}function s0(V){if(V===void 0||V===null)return V;return V.map(w9)}function WZ(V){if(V<=e0.SymbolKind.TypeParameter)return V+1;return J0.SymbolKind.Property}function jZ(V){return V}function vZ(V){return V.map(jZ)}function SZ(V,S,i){return{textDocument:Q(V),position:wZ(S),context:{includeDeclaration:i.includeDeclaration}}}async function F9(V,S){let i=J0.CodeAction.create(V.title);if(V instanceof z5.default&&V.data!==void 0)i.data=V.data;if(V.kind!==void 0)i.kind=w(V.kind);if(V.diagnostics!==void 0)i.diagnostics=await $9(V.diagnostics,S);if(V.edit!==void 0)throw Error("VS Code code actions can only be converted to a protocol code action without an edit.");if(V.command!==void 0)i.command=m(V.command);if(V.isPreferred!==void 0)i.isPreferred=V.isPreferred;if(V.disabled!==void 0)i.disabled={reason:V.disabled.reason};return i}function _9(V){let S=J0.CodeAction.create(V.title);if(V instanceof z5.default&&V.data!==void 0)S.data=V.data;if(V.kind!==void 0)S.kind=w(V.kind);if(V.diagnostics!==void 0)S.diagnostics=Q9(V.diagnostics);if(V.edit!==void 0)throw Error("VS Code code actions can only be converted to a protocol code action without an edit.");if(V.command!==void 0)S.command=m(V.command);if(V.isPreferred!==void 0)S.isPreferred=V.isPreferred;if(V.disabled!==void 0)S.disabled={reason:V.disabled.reason};return S}async function G9(V,S){if(V===void 0||V===null)return V;let i;if(V.only&&OJ.string(V.only.value))i=[V.only.value];return J0.CodeActionContext.create(await $9(V.diagnostics,S),i,PZ(V.triggerKind))}function f9(V){if(V===void 0||V===null)return V;let S;if(V.only&&OJ.string(V.only.value))S=[V.only.value];return J0.CodeActionContext.create(Q9(V.diagnostics),S,PZ(V.triggerKind))}function PZ(V){switch(V){case e0.CodeActionTriggerKind.Invoke:return J0.CodeActionTriggerKind.Invoked;case e0.CodeActionTriggerKind.Automatic:return J0.CodeActionTriggerKind.Automatic;default:return}}function w(V){if(V===void 0||V===null)return;return V.value}function y(V){if(V===void 0||V===null)return V;return J0.InlineValueContext.create(V.frameId,R0(V.stoppedLocation))}function g(V,S,i){return{context:J0.InlineCompletionContext.create(i.triggerKind,i.selectedCompletionInfo),textDocument:Q(V),position:JZ(S)}}function m(V){let S=J0.Command.create(V.title,V.command);if(V.arguments)S.arguments=V.arguments;return S}function L0(V){let S=J0.CodeLens.create(R0(V.range));if(V.command)S.command=m(V.command);if(V instanceof aV.default){if(V.data)S.data=V.data}return S}function O0(V,S){let i={tabSize:V.tabSize,insertSpaces:V.insertSpaces};if(S.trimTrailingWhitespace)i.trimTrailingWhitespace=!0;if(S.trimFinalNewlines)i.trimFinalNewlines=!0;if(S.insertFinalNewline)i.insertFinalNewline=!0;return i}function M0(V){return{textDocument:Q(V)}}function q0(V){return{textDocument:Q(V)}}function z0(V){let S=J0.DocumentLink.create(R0(V.range));if(V.target)S.target=$(V.target);if(V.tooltip!==void 0)S.tooltip=V.tooltip;let i=V instanceof sV.default?V:void 0;if(i&&i.data)S.data=i.data;return S}function E0(V){return{textDocument:Q(V)}}function V0(V){let S={name:V.name,kind:WZ(V.kind),uri:$(V.uri),range:R0(V.range),selectionRange:R0(V.selectionRange)};if(V.detail!==void 0&&V.detail.length>0)S.detail=V.detail;if(V.tags!==void 0)S.tags=vZ(V.tags);if(V instanceof rV.default&&V.data!==void 0)S.data=V.data;return S}function C0(V){let S={name:V.name,kind:WZ(V.kind),uri:$(V.uri),range:R0(V.range),selectionRange:R0(V.selectionRange)};if(V.detail!==void 0&&V.detail.length>0)S.detail=V.detail;if(V.tags!==void 0)S.tags=vZ(V.tags);if(V instanceof oV.default&&V.data!==void 0)S.data=V.data;return S}function c0(V){let S=V instanceof tV.default?{name:V.name,kind:WZ(V.kind),location:V.hasRange?FZ(V.location):{uri:Y(V.location.uri)},data:V.data}:{name:V.name,kind:WZ(V.kind),location:FZ(V.location)};if(V.tags!==void 0)S.tags=vZ(V.tags);if(V.containerName!=="")S.containerName=V.containerName;return S}function YZ(V){let S=typeof V.label==="string"?V.label:V.label.map(a9),i=J0.InlayHint.create(JZ(V.position),S);if(V.kind!==void 0)i.kind=V.kind;if(V.textEdits!==void 0)i.textEdits=s0(V.textEdits);if(V.tooltip!==void 0)i.tooltip=s9(V.tooltip);if(V.paddingLeft!==void 0)i.paddingLeft=V.paddingLeft;if(V.paddingRight!==void 0)i.paddingRight=V.paddingRight;if(V instanceof eV.default&&V.data!==void 0)i.data=V.data;return i}function a9(V){let S=J0.InlayHintLabelPart.create(V.value);if(V.location!==void 0)S.location=FZ(V.location);if(V.command!==void 0)S.command=m(V.command);if(V.tooltip!==void 0)S.tooltip=s9(V.tooltip);return S}function s9(V){if(typeof V==="string")return V;return{kind:J0.MarkupKind.Markdown,value:V.value}}return{asUri:$,asTextDocumentIdentifier:Q,asTextDocumentItem:z,asVersionedTextDocumentIdentifier:G,asOpenTextDocumentParams:B,asChangeTextDocumentParams:O,asCloseTextDocumentParams:E,asSaveTextDocumentParams:N,asWillSaveTextDocumentParams:T,asDidCreateFilesParams:C,asDidRenameFilesParams:x,asDidDeleteFilesParams:_,asWillCreateFilesParams:d,asWillRenameFilesParams:f,asWillDeleteFilesParams:B0,asTextDocumentPositionParams:t,asCompletionParams:a,asSignatureHelpParams:XZ,asWorkerPosition:wZ,asRange:R0,asRanges:CZ,asPosition:JZ,asPositions:R9,asPositionsSync:O9,asLocation:FZ,asDiagnosticSeverity:BZ,asDiagnosticTag:U9,asDiagnostic:N9,asDiagnostics:$9,asDiagnosticsSync:Q9,asCompletionItem:aZ,asTextEdit:w9,asSymbolKind:WZ,asSymbolTag:jZ,asSymbolTags:vZ,asReferenceParams:SZ,asCodeAction:F9,asCodeActionSync:_9,asCodeActionContext:G9,asCodeActionContextSync:f9,asInlineValueContext:y,asCommand:m,asCodeLens:L0,asFormattingOptions:O0,asDocumentSymbolParams:M0,asCodeLensParams:q0,asDocumentLink:z0,asDocumentLinkParams:E0,asCallHierarchyItem:V0,asTypeHierarchyItem:C0,asInlayHint:YZ,asWorkspaceSymbol:c0,asInlineCompletionParams:g}}S8.createConverter=ZW});var K5=D((b8)=>{Object.defineProperty(b8,"__esModule",{value:!0});b8.createConverter=void 0;var p=require("vscode"),o=Z0(),eZ=rZ(),N0=q8(),JW=S7(),YW=b7(),$W=R7(),QW=x7(),B5=f7(),zW=v7(),GW=d7(),XW=m7(),BW=l7(),j5=Z0(),D8;(function(Z){function J(Y){let $=Y;return $&&eZ.string($.language)&&eZ.string($.value)}Z.is=J})(D8||(D8={}));function jW(Z,J,Y){let Q=Z||((X)=>p.Uri.parse(X));function z(X){return Q(X)}function G(X){let M=[];for(let h of X)if(typeof h==="string")M.push(h);else if(j5.NotebookCellTextDocumentFilter.is(h))if(typeof h.notebook==="string")M.push({notebookType:h.notebook,language:h.language});else{let n=h.notebook.notebookType??"*";M.push({notebookType:n,scheme:h.notebook.scheme,pattern:h.notebook.pattern,language:h.language})}else if(j5.TextDocumentFilter.is(h))M.push({language:h.language,scheme:h.scheme,pattern:h.pattern});return M}async function B(X,M){return N0.map(X,A,M)}function K(X){let M=Array(X.length);for(let h=0;h<X.length;h++)M[h]=A(X[h]);return M}function A(X){let M=new B5.ProtocolDiagnostic(T(X.range),X.message,x(X.severity),X.data);if(X.code!==void 0){if(typeof X.code==="string"||typeof X.code==="number")if(o.CodeDescription.is(X.codeDescription))M.code={value:X.code,target:z(X.codeDescription.href)};else M.code=X.code;else if(B5.DiagnosticCode.is(X.code)){M.hasDiagnosticCode=!0;let h=X.code;M.code={value:h.value,target:z(h.target)}}}if(X.source)M.source=X.source;if(X.relatedInformation)M.relatedInformation=O(X.relatedInformation);if(Array.isArray(X.tags))M.tags=E(X.tags);return M}function O(X){let M=Array(X.length);for(let h=0;h<X.length;h++){let n=X[h];M[h]=new p.DiagnosticRelatedInformation(BZ(n.location),n.message)}return M}function E(X){if(!X)return;let M=[];for(let h of X){let n=N(h);if(n!==void 0)M.push(n)}return M.length>0?M:void 0}function N(X){switch(X){case o.DiagnosticTag.Unnecessary:return p.DiagnosticTag.Unnecessary;case o.DiagnosticTag.Deprecated:return p.DiagnosticTag.Deprecated;default:return}}function L(X){return X?new p.Position(X.line,X.character):void 0}function T(X){return X?new p.Range(X.start.line,X.start.character,X.end.line,X.end.character):void 0}async function C(X,M){return N0.map(X,(h)=>{return new p.Range(h.start.line,h.start.character,h.end.line,h.end.character)},M)}function x(X){if(X===void 0||X===null)return p.DiagnosticSeverity.Error;switch(X){case o.DiagnosticSeverity.Error:return p.DiagnosticSeverity.Error;case o.DiagnosticSeverity.Warning:return p.DiagnosticSeverity.Warning;case o.DiagnosticSeverity.Information:return p.DiagnosticSeverity.Information;case o.DiagnosticSeverity.Hint:return p.DiagnosticSeverity.Hint}return p.DiagnosticSeverity.Error}function _(X){if(eZ.string(X))return f(X);else if(D8.is(X))return f().appendCodeblock(X.value,X.language);else if(Array.isArray(X)){let M=[];for(let h of X){let n=f();if(D8.is(h))n.appendCodeblock(h.value,h.language);else n.appendMarkdown(h);M.push(n)}return M}else return f(X)}function d(X){if(eZ.string(X))return X;else switch(X.kind){case o.MarkupKind.Markdown:return f(X.value);case o.MarkupKind.PlainText:return X.value;default:return`Unsupported Markup content received. Kind is: ${X.kind}`}}function f(X){let M;if(X===void 0||typeof X==="string")M=new p.MarkdownString(X);else switch(X.kind){case o.MarkupKind.Markdown:M=new p.MarkdownString(X.value);break;case o.MarkupKind.PlainText:M=new p.MarkdownString,M.appendText(X.value);break;default:M=new p.MarkdownString,M.appendText(`Unsupported Markup content received. Kind is: ${X.kind}`);break}return M.isTrusted=J,M.supportHtml=Y,M}function B0(X){if(!X)return;return new p.Hover(_(X.contents),T(X.range))}async function t(X,M,h){if(!X)return;if(Array.isArray(X))return N0.map(X,(M9)=>y0(M9,M),h);let n=X,{defaultRange:$Z,commitCharacters:KZ}=u(n,M),T0=await N0.map(n.items,(M9)=>{return y0(M9,KZ,$Z,n.itemDefaults?.insertTextMode,n.itemDefaults?.insertTextFormat,n.itemDefaults?.data)},h);return new p.CompletionList(T0,n.isIncomplete)}function u(X,M){let h=X.itemDefaults?.editRange,n=X.itemDefaults?.commitCharacters??M;return o.Range.is(h)?{defaultRange:T(h),commitCharacters:n}:h!==void 0?{defaultRange:{inserting:T(h.insert),replacing:T(h.replace)},commitCharacters:n}:{defaultRange:void 0,commitCharacters:n}}function a(X){if(o.CompletionItemKind.Text<=X&&X<=o.CompletionItemKind.TypeParameter)return[X-1,void 0];return[p.CompletionItemKind.Text,X]}function j0(X){switch(X){case o.CompletionItemTag.Deprecated:return p.CompletionItemTag.Deprecated}return}function _0(X){if(X===void 0||X===null)return[];let M=[];for(let h of X){let n=j0(h);if(n!==void 0)M.push(n)}return M}function y0(X,M,h,n,$Z,KZ){let T0=_0(X.tags),M9=qZ(X),D0=new JW.default(M9);if(X.detail)D0.detail=X.detail;if(X.documentation)D0.documentation=d(X.documentation),D0.documentationFormat=eZ.string(X.documentation)?"$string":X.documentation.kind;if(X.filterText)D0.filterText=X.filterText;let uY=r0(X,h,$Z);if(uY)D0.insertText=uY.text,D0.range=uY.range,D0.fromEdit=uY.fromEdit;if(eZ.number(X.kind)){let[VK,j4]=a(X.kind);if(D0.kind=VK,j4)D0.originalItemKind=j4}if(X.sortText)D0.sortText=X.sortText;if(X.additionalTextEdits)D0.additionalTextEdits=JZ(X.additionalTextEdits);let X4=X.commitCharacters!==void 0?eZ.stringArray(X.commitCharacters)?X.commitCharacters:void 0:M;if(X4)D0.commitCharacters=X4.slice();if(X.command)D0.command=s0(X.command);if(X.deprecated===!0||X.deprecated===!1){if(D0.deprecated=X.deprecated,X.deprecated===!0)T0.push(p.CompletionItemTag.Deprecated)}if(X.preselect===!0||X.preselect===!1)D0.preselect=X.preselect;let B4=X.data??KZ;if(B4!==void 0)D0.data=B4;if(T0.length>0)D0.tags=T0;let x6=X.insertTextMode??n;if(x6!==void 0){if(D0.insertTextMode=x6,x6===o.InsertTextMode.asIs)D0.keepWhitespace=!0}return D0}function qZ(X){if(o.CompletionItemLabelDetails.is(X.labelDetails))return{label:X.label,detail:X.labelDetails.detail,description:X.labelDetails.description};else return X.label}function r0(X,M,h){let n=X.insertTextFormat??h;if(X.textEdit!==void 0||M!==void 0){let[$Z,KZ]=X.textEdit!==void 0?nZ(X.textEdit):[M,X.textEditText??X.label];if(n===o.InsertTextFormat.Snippet)return{text:new p.SnippetString(KZ),range:$Z,fromEdit:!0};else return{text:KZ,range:$Z,fromEdit:!0}}else if(X.insertText)if(n===o.InsertTextFormat.Snippet)return{text:new p.SnippetString(X.insertText),fromEdit:!1};else return{text:X.insertText,fromEdit:!1};else return}function nZ(X){if(o.InsertReplaceEdit.is(X))return[{inserting:T(X.insert),replacing:T(X.replace)},X.newText];else return[T(X.range),X.newText]}function XZ(X){if(!X)return;return new p.TextEdit(T(X.range),X.newText)}async function wZ(X,M){if(!X)return;return N0.map(X,XZ,M)}function JZ(X){if(!X)return;let M=Array(X.length);for(let h=0;h<X.length;h++)M[h]=XZ(X[h]);return M}async function R9(X,M){if(!X)return;let h=new p.SignatureHelp;if(eZ.number(X.activeSignature))h.activeSignature=X.activeSignature;else h.activeSignature=0;if(eZ.number(X.activeParameter))h.activeParameter=X.activeParameter;else h.activeParameter=0;if(X.signatures)h.signatures=await O9(X.signatures,M);return h}async function O9(X,M){return N0.mapAsync(X,R0,M)}async function R0(X,M){let h=new p.SignatureInformation(X.label);if(X.documentation!==void 0)h.documentation=d(X.documentation);if(X.parameters!==void 0)h.parameters=await CZ(X.parameters,M);if(X.activeParameter!==void 0)h.activeParameter=X.activeParameter;return h}function CZ(X,M){return N0.map(X,FZ,M)}function FZ(X){let M=new p.ParameterInformation(X.label);if(X.documentation)M.documentation=d(X.documentation);return M}function BZ(X){return X?new p.Location(Q(X.uri),T(X.range)):void 0}async function c9(X,M){if(!X)return;return h9(X,M)}async function U9(X,M){if(!X)return;return h9(X,M)}function L9(X){if(!X)return;let M={targetUri:Q(X.targetUri),targetRange:T(X.targetRange),originSelectionRange:T(X.originSelectionRange),targetSelectionRange:T(X.targetSelectionRange)};if(!M.targetSelectionRange)throw Error("targetSelectionRange must not be undefined or null");return M}async function h9(X,M){if(!X)return;if(eZ.array(X))if(X.length===0)return[];else if(o.LocationLink.is(X[0])){let h=X;return N0.map(h,L9,M)}else{let h=X;return N0.map(h,BZ,M)}else if(o.LocationLink.is(X))return[L9(X)];else return BZ(X)}async function i9(X,M){if(!X)return;return N0.map(X,BZ,M)}async function N9(X,M){if(!X)return;return N0.map(X,$9,M)}function $9(X){let M=new p.DocumentHighlight(T(X.range));if(eZ.number(X.kind))M.kind=Q9(X.kind);return M}function Q9(X){switch(X){case o.DocumentHighlightKind.Text:return p.DocumentHighlightKind.Text;case o.DocumentHighlightKind.Read:return p.DocumentHighlightKind.Read;case o.DocumentHighlightKind.Write:return p.DocumentHighlightKind.Write}return p.DocumentHighlightKind.Text}async function E9(X,M){if(!X)return;return N0.map(X,aZ,M)}function o0(X){if(X<=o.SymbolKind.TypeParameter)return X-1;return p.SymbolKind.Property}function x9(X){switch(X){case o.SymbolTag.Deprecated:return p.SymbolTag.Deprecated;default:return}}function z9(X){if(X===void 0||X===null)return;let M=[];for(let h of X){let n=x9(h);if(n!==void 0)M.push(n)}return M.length===0?void 0:M}function aZ(X){let{data:M,location:h}=X,n=h.range===void 0||M!==void 0?new XW.default(X.name,o0(X.kind),X.containerName??"",h.range===void 0?Q(h.uri):new p.Location(Q(X.location.uri),T(h.range)),M):new p.SymbolInformation(X.name,o0(X.kind),X.containerName??"",new p.Location(Q(X.location.uri),T(h.range)));return w9(n,X),n}async function n9(X,M){if(X===void 0||X===null)return;return N0.map(X,sZ,M)}function sZ(X){let M=new p.DocumentSymbol(X.name,X.detail||"",o0(X.kind),T(X.range),T(X.selectionRange));if(w9(M,X),X.children!==void 0&&X.children.length>0){let h=[];for(let n of X.children)h.push(sZ(n));M.children=h}return M}function w9(X,M){if(X.tags=z9(M.tags),M.deprecated){if(!X.tags)X.tags=[p.SymbolTag.Deprecated];else if(!X.tags.includes(p.SymbolTag.Deprecated))X.tags=X.tags.concat(p.SymbolTag.Deprecated)}}function s0(X){let M={title:X.title,command:X.command};if(X.arguments)M.arguments=X.arguments;return M}async function WZ(X,M){if(!X)return;return N0.map(X,s0,M)}let jZ=new Map;jZ.set(o.CodeActionKind.Empty,p.CodeActionKind.Empty),jZ.set(o.CodeActionKind.QuickFix,p.CodeActionKind.QuickFix),jZ.set(o.CodeActionKind.Refactor,p.CodeActionKind.Refactor),jZ.set(o.CodeActionKind.RefactorExtract,p.CodeActionKind.RefactorExtract),jZ.set(o.CodeActionKind.RefactorInline,p.CodeActionKind.RefactorInline),jZ.set(o.CodeActionKind.RefactorRewrite,p.CodeActionKind.RefactorRewrite),jZ.set(o.CodeActionKind.Source,p.CodeActionKind.Source),jZ.set(o.CodeActionKind.SourceOrganizeImports,p.CodeActionKind.SourceOrganizeImports);function vZ(X){if(X===void 0||X===null)return;let M=jZ.get(X);if(M)return M;let h=X.split(".");M=p.CodeActionKind.Empty;for(let n of h)M=M.append(n);return M}function SZ(X){if(X===void 0||X===null)return;return X.map((M)=>vZ(M))}async function F9(X,M){if(X===void 0||X===null)return;let h=new QW.default(X.title,X.data);if(X.kind!==void 0)h.kind=vZ(X.kind);if(X.diagnostics!==void 0)h.diagnostics=K(X.diagnostics);if(X.edit!==void 0)h.edit=await PZ(X.edit,M);if(X.command!==void 0)h.command=s0(X.command);if(X.isPreferred!==void 0)h.isPreferred=X.isPreferred;if(X.disabled!==void 0)h.disabled={reason:X.disabled.reason};return h}function _9(X,M){return N0.mapAsync(X,async(h)=>{if(o.Command.is(h))return s0(h);else return F9(h,M)},M)}function G9(X){if(!X)return;let M=new YW.default(T(X.range));if(X.command)M.command=s0(X.command);if(X.data!==void 0&&X.data!==null)M.data=X.data;return M}async function f9(X,M){if(!X)return;return N0.map(X,G9,M)}async function PZ(X,M){if(!X)return;let h=new Map;if(X.changeAnnotations!==void 0){let KZ=X.changeAnnotations;await N0.forEach(Object.keys(KZ),(T0)=>{let M9=w(KZ[T0]);h.set(T0,M9)},M)}let n=(KZ)=>{if(KZ===void 0)return;else return h.get(KZ)},$Z=new p.WorkspaceEdit;if(X.documentChanges){let KZ=X.documentChanges;await N0.forEach(KZ,(T0)=>{if(o.CreateFile.is(T0))$Z.createFile(Q(T0.uri),T0.options,n(T0.annotationId));else if(o.RenameFile.is(T0))$Z.renameFile(Q(T0.oldUri),Q(T0.newUri),T0.options,n(T0.annotationId));else if(o.DeleteFile.is(T0))$Z.deleteFile(Q(T0.uri),T0.options,n(T0.annotationId));else if(o.TextDocumentEdit.is(T0)){let M9=Q(T0.textDocument.uri);for(let D0 of T0.edits)if(o.AnnotatedTextEdit.is(D0))$Z.replace(M9,T(D0.range),D0.newText,n(D0.annotationId));else $Z.replace(M9,T(D0.range),D0.newText)}else throw Error(`Unknown workspace edit change received:
${JSON.stringify(T0,void 0,4)}`)},M)}else if(X.changes){let KZ=X.changes;await N0.forEach(Object.keys(KZ),(T0)=>{$Z.set(Q(T0),JZ(KZ[T0]))},M)}return $Z}function w(X){if(X===void 0)return;return{label:X.label,needsConfirmation:!!X.needsConfirmation,description:X.description}}function y(X){let M=T(X.range),h=X.target?z(X.target):void 0,n=new $W.default(M,h);if(X.tooltip!==void 0)n.tooltip=X.tooltip;if(X.data!==void 0&&X.data!==null)n.data=X.data;return n}async function g(X,M){if(!X)return;return N0.map(X,y,M)}function m(X){return new p.Color(X.red,X.green,X.blue,X.alpha)}function L0(X){return new p.ColorInformation(T(X.range),m(X.color))}async function O0(X,M){if(!X)return;return N0.map(X,L0,M)}function M0(X){let M=new p.ColorPresentation(X.label);if(M.additionalTextEdits=JZ(X.additionalTextEdits),X.textEdit)M.textEdit=XZ(X.textEdit);return M}async function q0(X,M){if(!X)return;return N0.map(X,M0,M)}function z0(X){if(X)switch(X){case o.FoldingRangeKind.Comment:return p.FoldingRangeKind.Comment;case o.FoldingRangeKind.Imports:return p.FoldingRangeKind.Imports;case o.FoldingRangeKind.Region:return p.FoldingRangeKind.Region}return}function E0(X){return new p.FoldingRange(X.startLine,X.endLine,z0(X.kind))}async function V0(X,M){if(!X)return;return N0.map(X,E0,M)}function C0(X){return new p.SelectionRange(T(X.range),X.parent?C0(X.parent):void 0)}async function c0(X,M){if(!Array.isArray(X))return[];return N0.map(X,C0,M)}function YZ(X){if(o.InlineValueText.is(X))return new p.InlineValueText(T(X.range),X.text);else if(o.InlineValueVariableLookup.is(X))return new p.InlineValueVariableLookup(T(X.range),X.variableName,X.caseSensitiveLookup);else return new p.InlineValueEvaluatableExpression(T(X.range),X.expression)}async function a9(X,M){if(!Array.isArray(X))return[];return N0.map(X,YZ,M)}async function s9(X,M){let h=typeof X.label==="string"?X.label:await N0.map(X.label,V,M),n=new BW.default(L(X.position),h);if(X.kind!==void 0)n.kind=X.kind;if(X.textEdits!==void 0)n.textEdits=await wZ(X.textEdits,M);if(X.tooltip!==void 0)n.tooltip=S(X.tooltip);if(X.paddingLeft!==void 0)n.paddingLeft=X.paddingLeft;if(X.paddingRight!==void 0)n.paddingRight=X.paddingRight;if(X.data!==void 0)n.data=X.data;return n}function V(X){let M=new p.InlayHintLabelPart(X.value);if(X.location!==void 0)M.location=BZ(X.location);if(X.tooltip!==void 0)M.tooltip=S(X.tooltip);if(X.command!==void 0)M.command=s0(X.command);return M}function S(X){if(typeof X==="string")return X;return f(X)}async function i(X,M){if(!Array.isArray(X))return;return N0.mapAsync(X,s9,M)}function w0(X){if(X===null)return;let M=new zW.default(o0(X.kind),X.name,X.detail||"",z(X.uri),T(X.range),T(X.selectionRange),X.data);if(X.tags!==void 0)M.tags=z9(X.tags);return M}async function I(X,M){if(X===null)return;return N0.map(X,w0,M)}async function W(X,M){return new p.CallHierarchyIncomingCall(w0(X.from),await C(X.fromRanges,M))}async function F(X,M){if(X===null)return;return N0.mapAsync(X,W,M)}async function P(X,M){return new p.CallHierarchyOutgoingCall(w0(X.to),await C(X.fromRanges,M))}async function H(X,M){if(X===null)return;return N0.mapAsync(X,P,M)}async function j(X,M){if(X===void 0||X===null)return;return new p.SemanticTokens(new Uint32Array(X.data),X.resultId)}function q(X){return new p.SemanticTokensEdit(X.start,X.deleteCount,X.data!==void 0?new Uint32Array(X.data):void 0)}async function R(X,M){if(X===void 0||X===null)return;return new p.SemanticTokensEdits(X.edits.map(q),X.resultId)}function e(X){return X}async function f0(X,M){if(X===null||X===void 0)return;return new p.LinkedEditingRanges(await C(X.ranges,M),S0(X.wordPattern))}function S0(X){if(X===null||X===void 0)return;return new RegExp(X)}function DZ(X){if(X===null)return;let M=new GW.default(o0(X.kind),X.name,X.detail||"",z(X.uri),T(X.range),T(X.selectionRange),X.data);if(X.tags!==void 0)M.tags=z9(X.tags);return M}async function gZ(X,M){if(X===null)return;return N0.map(X,DZ,M)}function X9(X){if(eZ.string(X))return X;if(o.RelativePattern.is(X)){if(o.URI.is(X.baseUri))return new p.RelativePattern(z(X.baseUri),X.pattern);else if(o.WorkspaceFolder.is(X.baseUri)){let M=p.workspace.getWorkspaceFolder(z(X.baseUri.uri));return M!==void 0?new p.RelativePattern(M,X.pattern):void 0}}return}async function K0(X,M){if(!X)return;if(Array.isArray(X))return N0.map(X,($Z)=>P9($Z),M);let h=X,n=await N0.map(h.items,($Z)=>{return P9($Z)},M);return new p.InlineCompletionList(n)}function P9(X){let M;if(typeof X.insertText==="string")M=X.insertText;else M=new p.SnippetString(X.insertText.value);let h=void 0;if(X.command)h=s0(X.command);let n=new p.InlineCompletionItem(M,T(X.range),h);if(X.filterText)n.filterText=X.filterText;return n}return{asUri:z,asDocumentSelector:G,asDiagnostics:B,asDiagnostic:A,asRange:T,asRanges:C,asPosition:L,asDiagnosticSeverity:x,asDiagnosticTag:N,asHover:B0,asCompletionResult:t,asCompletionItem:y0,asTextEdit:XZ,asTextEdits:wZ,asSignatureHelp:R9,asSignatureInformations:O9,asSignatureInformation:R0,asParameterInformations:CZ,asParameterInformation:FZ,asDeclarationResult:c9,asDefinitionResult:U9,asLocation:BZ,asReferences:i9,asDocumentHighlights:N9,asDocumentHighlight:$9,asDocumentHighlightKind:Q9,asSymbolKind:o0,asSymbolTag:x9,asSymbolTags:z9,asSymbolInformations:E9,asSymbolInformation:aZ,asDocumentSymbols:n9,asDocumentSymbol:sZ,asCommand:s0,asCommands:WZ,asCodeAction:F9,asCodeActionKind:vZ,asCodeActionKinds:SZ,asCodeActionResult:_9,asCodeLens:G9,asCodeLenses:f9,asWorkspaceEdit:PZ,asDocumentLink:y,asDocumentLinks:g,asFoldingRangeKind:z0,asFoldingRange:E0,asFoldingRanges:V0,asColor:m,asColorInformation:L0,asColorInformations:O0,asColorPresentation:M0,asColorPresentations:q0,asSelectionRange:C0,asSelectionRanges:c0,asInlineValue:YZ,asInlineValues:a9,asInlayHint:s9,asInlayHints:i,asSemanticTokensLegend:e,asSemanticTokens:j,asSemanticTokensEdit:q,asSemanticTokensEdits:R,asCallHierarchyItem:w0,asCallHierarchyItems:I,asCallHierarchyIncomingCall:W,asCallHierarchyIncomingCalls:F,asCallHierarchyOutgoingCall:P,asCallHierarchyOutgoingCalls:H,asLinkedEditingRanges:f0,asTypeHierarchyItem:DZ,asTypeHierarchyItems:gZ,asGlobPattern:X9,asInlineCompletionResult:K0,asInlineCompletionItem:P9}}b8.createConverter=jW});var g0=D((Z9)=>{Object.defineProperty(Z9,"__esModule",{value:!0});Z9.generateUuid=Z9.parse=Z9.isUUID=Z9.v4=Z9.empty=void 0;class y8{constructor(Z){this._value=Z}asHex(){return this._value}equals(Z){return this.asHex()===Z.asHex()}}class G0 extends y8{static _oneOf(Z){return Z[Math.floor(Z.length*Math.random())]}static _randomHex(){return G0._oneOf(G0._chars)}constructor(){super([G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),"-",G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),"-","4",G0._randomHex(),G0._randomHex(),G0._randomHex(),"-",G0._oneOf(G0._timeHighBits),G0._randomHex(),G0._randomHex(),G0._randomHex(),"-",G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex(),G0._randomHex()].join(""))}}G0._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];G0._timeHighBits=["8","9","a","b"];Z9.empty=new y8("00000000-0000-0000-0000-000000000000");function V5(){return new G0}Z9.v4=V5;var KW=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function W5(Z){return KW.test(Z)}Z9.isUUID=W5;function VW(Z){if(!W5(Z))throw Error("invalid uuid");return new y8(Z)}Z9.parse=VW;function WW(){return V5().asHex()}Z9.generateUuid=WW});var i7=D((R8)=>{Object.defineProperty(R8,"__esModule",{value:!0});R8.ProgressPart=void 0;var A5=require("vscode"),H5=Z0(),O5=rZ();class U5{constructor(Z,J,Y){this._client=Z,this._token=J,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(H5.WorkDoneProgress.type,this._token,($)=>{switch($.kind){case"begin":this.begin($);break;case"report":this.report($);break;case"end":this.done(),Y&&Y(this);break}})}begin(Z){if(this._infinite=Z.percentage===void 0,this._lspProgressDisposable===void 0)return;A5.window.withProgress({location:A5.ProgressLocation.Window,cancellable:Z.cancellable,title:Z.title},async(J,Y)=>{if(this._lspProgressDisposable===void 0)return;return this._progress=J,this._cancellationToken=Y,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(H5.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(Z),new Promise(($,Q)=>{this._resolve=$,this._reject=Q})})}report(Z){if(this._infinite&&O5.string(Z.message))this._progress!==void 0&&this._progress.report({message:Z.message});else if(O5.number(Z.percentage)){let J=Math.max(0,Math.min(Z.percentage,100)),Y=Math.max(0,J-this._reported);this._reported+=Y,this._progress!==void 0&&this._progress.report({message:Z.message,increment:Y})}}cancel(){if(this.cleanup(),this._reject!==void 0)this._reject(),this._resolve=void 0,this._reject=void 0}done(){if(this.cleanup(),this._resolve!==void 0)this._resolve(),this._resolve=void 0,this._reject=void 0}cleanup(){if(this._lspProgressDisposable!==void 0)this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0;if(this._tokenDisposable!==void 0)this._tokenDisposable.dispose(),this._tokenDisposable=void 0;this._progress=void 0,this._cancellationToken=void 0}}R8.ProgressPart=U5});var U0=D((zZ)=>{Object.defineProperty(zZ,"__esModule",{value:!0});zZ.WorkspaceFeature=zZ.TextDocumentLanguageFeature=zZ.TextDocumentEventFeature=zZ.DynamicDocumentFeature=zZ.DynamicFeature=zZ.StaticFeature=zZ.ensure=zZ.LSPCancellationError=void 0;var UJ=require("vscode"),n7=Z0(),MZ=rZ(),L5=g0();class w5 extends UJ.CancellationError{constructor(Z){super();this.data=Z}}zZ.LSPCancellationError=w5;function AW(Z,J){if(Z[J]===void 0)Z[J]={};return Z[J]}zZ.ensure=AW;var N5;(function(Z){function J(Y){let $=Y;return $!==void 0&&$!==null&&MZ.func($.fillClientCapabilities)&&MZ.func($.initialize)&&MZ.func($.getState)&&MZ.func($.clear)&&($.fillInitializeParams===void 0||MZ.func($.fillInitializeParams))}Z.is=J})(N5||(zZ.StaticFeature=N5={}));var E5;(function(Z){function J(Y){let $=Y;return $!==void 0&&$!==null&&MZ.func($.fillClientCapabilities)&&MZ.func($.initialize)&&MZ.func($.getState)&&MZ.func($.clear)&&($.fillInitializeParams===void 0||MZ.func($.fillInitializeParams))&&MZ.func($.register)&&MZ.func($.unregister)&&$.registrationType!==void 0}Z.is=J})(E5||(zZ.DynamicFeature=E5={}));class h8{constructor(Z){this._client=Z}getState(){let Z=this.getDocumentSelectors(),J=0;for(let $ of Z){J++;for(let Q of UJ.workspace.textDocuments)if(UJ.languages.match($,Q)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let Y=J>0;return{kind:"document",id:this.registrationType.method,registrations:Y,matches:!1}}}zZ.DynamicDocumentFeature=h8;class F5 extends h8{static textDocumentFilter(Z,J){for(let Y of Z)if(UJ.languages.match(Y,J)>0)return!0;return!1}constructor(Z,J,Y,$,Q,z,G){super(Z);this._event=J,this._type=Y,this._middleware=$,this._createParams=Q,this._textDocument=z,this._selectorFilter=G,this._selectors=new Map,this._onNotificationSent=new UJ.EventEmitter}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(Z){if(!Z.registerOptions.documentSelector)return;if(!this._listener)this._listener=this._event((J)=>{this.callback(J).catch((Y)=>{this._client.error(`Sending document notification ${this._type.method} failed.`,Y)})});this._selectors.set(Z.id,this._client.protocol2CodeConverter.asDocumentSelector(Z.registerOptions.documentSelector))}async callback(Z){let J=async(Y)=>{let $=this._createParams(Y);await this._client.sendNotification(this._type,$),this.notificationSent(this.getTextDocument(Y),this._type,$)};if(this.matches(Z)){let Y=this._middleware();return Y?Y(Z,($)=>J($)):J(Z)}}matches(Z){if(this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(Z)))return!1;return!this._selectorFilter||this._selectorFilter(this._selectors.values(),Z)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(Z,J,Y){this._onNotificationSent.fire({textDocument:Z,type:J,params:Y})}unregister(Z){if(this._selectors.delete(Z),this._selectors.size===0&&this._listener)this._listener.dispose(),this._listener=void 0}clear(){if(this._selectors.clear(),this._onNotificationSent.dispose(),this._listener)this._listener.dispose(),this._listener=void 0}getProvider(Z){for(let J of this._selectors.values())if(UJ.languages.match(J,Z)>0)return{send:(Y)=>{return this.callback(Y)}};return}}zZ.TextDocumentEventFeature=F5;class P5 extends h8{constructor(Z,J){super(Z);this._registrationType=J,this._registrations=new Map}*getDocumentSelectors(){for(let Z of this._registrations.values()){let J=Z.data.registerOptions.documentSelector;if(J===null)continue;yield this._client.protocol2CodeConverter.asDocumentSelector(J)}}get registrationType(){return this._registrationType}register(Z){if(!Z.registerOptions.documentSelector)return;let J=this.registerLanguageProvider(Z.registerOptions,Z.id);this._registrations.set(Z.id,{disposable:J[0],data:Z,provider:J[1]})}unregister(Z){let J=this._registrations.get(Z);if(J!==void 0)J.disposable.dispose()}clear(){this._registrations.forEach((Z)=>{Z.disposable.dispose()}),this._registrations.clear()}getRegistration(Z,J){if(!J)return[void 0,void 0];else if(n7.TextDocumentRegistrationOptions.is(J)){let Y=n7.StaticRegistrationOptions.hasId(J)?J.id:L5.generateUuid(),$=J.documentSelector??Z;if($)return[Y,Object.assign({},J,{documentSelector:$})]}else if(MZ.boolean(J)&&J===!0||n7.WorkDoneProgressOptions.is(J)){if(!Z)return[void 0,void 0];let Y=MZ.boolean(J)&&J===!0?{documentSelector:Z}:Object.assign({},J,{documentSelector:Z});return[L5.generateUuid(),Y]}return[void 0,void 0]}getRegistrationOptions(Z,J){if(!Z||!J)return;return MZ.boolean(J)&&J===!0?{documentSelector:Z}:Object.assign({},J,{documentSelector:Z})}getProvider(Z){for(let J of this._registrations.values()){let Y=J.data.registerOptions.documentSelector;if(Y!==null&&UJ.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(Y),Z)>0)return J.provider}return}getAllProviders(){let Z=[];for(let J of this._registrations.values())Z.push(J.provider);return Z}}zZ.TextDocumentLanguageFeature=P5;class M5{constructor(Z,J){this._client=Z,this._registrationType=J,this._registrations=new Map}getState(){let Z=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:Z}}get registrationType(){return this._registrationType}register(Z){let J=this.registerLanguageProvider(Z.registerOptions);this._registrations.set(Z.id,{disposable:J[0],provider:J[1]})}unregister(Z){let J=this._registrations.get(Z);if(J!==void 0)J.disposable.dispose()}clear(){this._registrations.forEach((Z)=>{Z.disposable.dispose()}),this._registrations.clear()}getProviders(){let Z=[];for(let J of this._registrations.values())Z.push(J.provider);return Z}}zZ.WorkspaceFeature=M5});var T5=D((d1,I5)=>{var HW=typeof process==="object"&&process&&process.platform==="win32";I5.exports=HW?{sep:"\\"}:{sep:"/"}});var b5=D((p1,D5)=>{D5.exports=C5;function C5(Z,J,Y){if(Z instanceof RegExp)Z=q5(Z,Y);if(J instanceof RegExp)J=q5(J,Y);var $=S5(Z,J,Y);return $&&{start:$[0],end:$[1],pre:Y.slice(0,$[0]),body:Y.slice($[0]+Z.length,$[1]),post:Y.slice($[1]+J.length)}}function q5(Z,J){var Y=J.match(Z);return Y?Y[0]:null}C5.range=S5;function S5(Z,J,Y){var $,Q,z,G,B,K=Y.indexOf(Z),A=Y.indexOf(J,K+1),O=K;if(K>=0&&A>0){if(Z===J)return[K,A];$=[],z=Y.length;while(O>=0&&!B){if(O==K)$.push(O),K=Y.indexOf(Z,O+1);else if($.length==1)B=[$.pop(),A];else{if(Q=$.pop(),Q<z)z=Q,G=A;A=Y.indexOf(J,O+1)}O=K<A&&K>=0?K:A}if($.length)B=[z,G]}return B}});var v5=D((m1,k5)=>{var y5=b5();k5.exports=LW;var R5="\x00SLASH"+Math.random()+"\x00",h5="\x00OPEN"+Math.random()+"\x00",s7="\x00CLOSE"+Math.random()+"\x00",x5="\x00COMMA"+Math.random()+"\x00",_5="\x00PERIOD"+Math.random()+"\x00";function a7(Z){return parseInt(Z,10)==Z?parseInt(Z,10):Z.charCodeAt(0)}function OW(Z){return Z.split("\\\\").join(R5).split("\\{").join(h5).split("\\}").join(s7).split("\\,").join(x5).split("\\.").join(_5)}function UW(Z){return Z.split(R5).join("\\").split(h5).join("{").split(s7).join("}").split(x5).join(",").split(_5).join(".")}function f5(Z){if(!Z)return[""];var J=[],Y=y5("{","}",Z);if(!Y)return Z.split(",");var{pre:$,body:Q,post:z}=Y,G=$.split(",");G[G.length-1]+="{"+Q+"}";var B=f5(z);if(z.length)G[G.length-1]+=B.shift(),G.push.apply(G,B);return J.push.apply(J,G),J}function LW(Z){if(!Z)return[];if(Z.substr(0,2)==="{}")Z="\\{\\}"+Z.substr(2);return wY(OW(Z),!0).map(UW)}function NW(Z){return"{"+Z+"}"}function EW(Z){return/^-?0\d/.test(Z)}function wW(Z,J){return Z<=J}function FW(Z,J){return Z>=J}function wY(Z,J){var Y=[],$=y5("{","}",Z);if(!$)return[Z];var Q=$.pre,z=$.post.length?wY($.post,!1):[""];if(/\$$/.test($.pre))for(var G=0;G<z.length;G++){var B=Q+"{"+$.body+"}"+z[G];Y.push(B)}else{var K=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test($.body),A=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test($.body),O=K||A,E=$.body.indexOf(",")>=0;if(!O&&!E){if($.post.match(/,.*\}/))return Z=$.pre+"{"+$.body+s7+$.post,wY(Z);return[Z]}var N;if(O)N=$.body.split(/\.\./);else if(N=f5($.body),N.length===1){if(N=wY(N[0],!1).map(NW),N.length===1)return z.map(function(y0){return $.pre+N[0]+y0})}var L;if(O){var T=a7(N[0]),C=a7(N[1]),x=Math.max(N[0].length,N[1].length),_=N.length==3?Math.abs(a7(N[2])):1,d=wW,f=C<T;if(f)_*=-1,d=FW;var B0=N.some(EW);L=[];for(var t=T;d(t,C);t+=_){var u;if(A){if(u=String.fromCharCode(t),u==="\\")u=""}else if(u=String(t),B0){var a=x-u.length;if(a>0){var j0=Array(a+1).join("0");if(t<0)u="-"+j0+u.slice(1);else u=j0+u}}L.push(u)}}else{L=[];for(var _0=0;_0<N.length;_0++)L.push.apply(L,wY(N[_0],!1))}for(var _0=0;_0<L.length;_0++)for(var G=0;G<z.length;G++){var B=Q+L[_0]+z[G];if(!J||O||B)Y.push(B)}}return Y}});var _8=D((u1,Z$)=>{var mZ=Z$.exports=(Z,J,Y={})=>{if(x8(J),!Y.nocomment&&J.charAt(0)==="#")return!1;return new FY(J,Y).match(Z)};Z$.exports=mZ;var t7=T5();mZ.sep=t7.sep;var K9=Symbol("globstar **");mZ.GLOBSTAR=K9;var PW=v5(),g5={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},e7="[^/]",r7=e7+"*?",MW="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",IW="(?:(?!(?:\\/|^)\\.).)*?",m5=(Z)=>Z.split("").reduce((J,Y)=>{return J[Y]=!0,J},{}),d5=m5("().*{}+?[]^$\\!"),TW=m5("[.("),p5=/\/+/;mZ.filter=(Z,J={})=>(Y,$,Q)=>mZ(Y,Z,J);var zJ=(Z,J={})=>{let Y={};return Object.keys(Z).forEach(($)=>Y[$]=Z[$]),Object.keys(J).forEach(($)=>Y[$]=J[$]),Y};mZ.defaults=(Z)=>{if(!Z||typeof Z!=="object"||!Object.keys(Z).length)return mZ;let J=mZ,Y=($,Q,z)=>J($,Q,zJ(Z,z));return Y.Minimatch=class extends J.Minimatch{constructor(Q,z){super(Q,zJ(Z,z))}},Y.Minimatch.defaults=($)=>J.defaults(zJ(Z,$)).Minimatch,Y.filter=($,Q)=>J.filter($,zJ(Z,Q)),Y.defaults=($)=>J.defaults(zJ(Z,$)),Y.makeRe=($,Q)=>J.makeRe($,zJ(Z,Q)),Y.braceExpand=($,Q)=>J.braceExpand($,zJ(Z,Q)),Y.match=($,Q,z)=>J.match($,Q,zJ(Z,z)),Y};mZ.braceExpand=(Z,J)=>u5(Z,J);var u5=(Z,J={})=>{if(x8(Z),J.nobrace||!/\{(?:(?!\{).)*\}/.test(Z))return[Z];return PW(Z)},qW=65536,x8=(Z)=>{if(typeof Z!=="string")throw TypeError("invalid pattern");if(Z.length>qW)throw TypeError("pattern is too long")},o7=Symbol("subparse");mZ.makeRe=(Z,J)=>new FY(Z,J||{}).makeRe();mZ.match=(Z,J,Y={})=>{let $=new FY(J,Y);if(Z=Z.filter((Q)=>$.match(Q)),$.options.nonull&&!Z.length)Z.push(J);return Z};var CW=(Z)=>Z.replace(/\\(.)/g,"$1"),SW=(Z)=>Z.replace(/\\([^-\]])/g,"$1"),DW=(Z)=>Z.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),bW=(Z)=>Z.replace(/[[\]\\]/g,"\\$&");class FY{constructor(Z,J){if(x8(Z),!J)J={};if(this.options=J,this.set=[],this.pattern=Z,this.windowsPathsNoEscape=!!J.windowsPathsNoEscape||J.allowWindowsEscape===!1,this.windowsPathsNoEscape)this.pattern=this.pattern.replace(/\\/g,"/");this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!J.partial,this.make()}debug(){}make(){let Z=this.pattern,J=this.options;if(!J.nocomment&&Z.charAt(0)==="#"){this.comment=!0;return}if(!Z){this.empty=!0;return}this.parseNegate();let Y=this.globSet=this.braceExpand();if(J.debug)this.debug=(...$)=>console.error(...$);this.debug(this.pattern,Y),Y=this.globParts=Y.map(($)=>$.split(p5)),this.debug(this.pattern,Y),Y=Y.map(($,Q,z)=>$.map(this.parse,this)),this.debug(this.pattern,Y),Y=Y.filter(($)=>$.indexOf(!1)===-1),this.debug(this.pattern,Y),this.set=Y}parseNegate(){if(this.options.nonegate)return;let Z=this.pattern,J=!1,Y=0;for(let $=0;$<Z.length&&Z.charAt($)==="!";$++)J=!J,Y++;if(Y)this.pattern=Z.slice(Y);this.negate=J}matchOne(Z,J,Y){var $=this.options;this.debug("matchOne",{this:this,file:Z,pattern:J}),this.debug("matchOne",Z.length,J.length);for(var Q=0,z=0,G=Z.length,B=J.length;Q<G&&z<B;Q++,z++){this.debug("matchOne loop");var K=J[z],A=Z[Q];if(this.debug(J,K,A),K===!1)return!1;if(K===K9){this.debug("GLOBSTAR",[J,K,A]);var O=Q,E=z+1;if(E===B){this.debug("** at the end");for(;Q<G;Q++)if(Z[Q]==="."||Z[Q]===".."||!$.dot&&Z[Q].charAt(0)===".")return!1;return!0}while(O<G){var N=Z[O];if(this.debug(`
globstar while`,Z,O,J,E,N),this.matchOne(Z.slice(O),J.slice(E),Y))return this.debug("globstar found match!",O,G,N),!0;else{if(N==="."||N===".."||!$.dot&&N.charAt(0)==="."){this.debug("dot detected!",Z,O,J,E);break}this.debug("globstar swallow a segment, and continue"),O++}}if(Y){if(this.debug(`
>>> no match, partial?`,Z,O,J,E),O===G)return!0}return!1}var L;if(typeof K==="string")L=A===K,this.debug("string match",K,A,L);else L=A.match(K),this.debug("pattern match",K,A,L);if(!L)return!1}if(Q===G&&z===B)return!0;else if(Q===G)return Y;else if(z===B)return Q===G-1&&Z[Q]==="";throw Error("wtf?")}braceExpand(){return u5(this.pattern,this.options)}parse(Z,J){x8(Z);let Y=this.options;if(Z==="**")if(!Y.noglobstar)return K9;else Z="*";if(Z==="")return"";let $="",Q=!1,z=!1,G=[],B=[],K,A=!1,O=-1,E=-1,N,L,T,C=Z.charAt(0)===".",x=Y.dot||C,_=()=>C?"":x?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",d=(u)=>u.charAt(0)==="."?"":Y.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",f=()=>{if(K){switch(K){case"*":$+=r7,Q=!0;break;case"?":$+=e7,Q=!0;break;default:$+="\\"+K;break}this.debug("clearStateChar %j %j",K,$),K=!1}};for(let u=0,a;u<Z.length&&(a=Z.charAt(u));u++){if(this.debug("%s	%s %s %j",Z,u,$,a),z){if(a==="/")return!1;if(d5[a])$+="\\";$+=a,z=!1;continue}switch(a){case"/":return!1;case"\\":if(A&&Z.charAt(u+1)==="-"){$+=a;continue}f(),z=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",Z,u,$,a),A){if(this.debug("  in class"),a==="!"&&u===E+1)a="^";$+=a;continue}if(this.debug("call clearStateChar %j",K),f(),K=a,Y.noext)f();continue;case"(":{if(A){$+="(";continue}if(!K){$+="\\(";continue}let j0={type:K,start:u-1,reStart:$.length,open:g5[K].open,close:g5[K].close};if(this.debug(this.pattern,"\t",j0),G.push(j0),$+=j0.open,j0.start===0&&j0.type!=="!")C=!0,$+=d(Z.slice(u+1));this.debug("plType %j %j",K,$),K=!1;continue}case")":{let j0=G[G.length-1];if(A||!j0){$+="\\)";continue}if(G.pop(),f(),Q=!0,L=j0,$+=L.close,L.type==="!")B.push(Object.assign(L,{reEnd:$.length}));continue}case"|":{let j0=G[G.length-1];if(A||!j0){$+="\\|";continue}if(f(),$+="|",j0.start===0&&j0.type!=="!")C=!0,$+=d(Z.slice(u+1));continue}case"[":if(f(),A){$+="\\"+a;continue}A=!0,E=u,O=$.length,$+=a;continue;case"]":if(u===E+1||!A){$+="\\"+a;continue}N=Z.substring(E+1,u);try{RegExp("["+bW(SW(N))+"]"),$+=a}catch(j0){$=$.substring(0,O)+"(?:$.)"}Q=!0,A=!1;continue;default:if(f(),d5[a]&&!(a==="^"&&A))$+="\\";$+=a;break}}if(A)N=Z.slice(E+1),T=this.parse(N,o7),$=$.substring(0,O)+"\\["+T[0],Q=Q||T[1];for(L=G.pop();L;L=G.pop()){let u;u=$.slice(L.reStart+L.open.length),this.debug("setting tail",$,L),u=u.replace(/((?:\\{2}){0,64})(\\?)\|/g,(j0,_0,y0)=>{if(!y0)y0="\\";return _0+_0+y0+"|"}),this.debug(`tail=%j
   %s`,u,u,L,$);let a=L.type==="*"?r7:L.type==="?"?e7:"\\"+L.type;Q=!0,$=$.slice(0,L.reStart)+a+"\\("+u}if(f(),z)$+="\\\\";let B0=TW[$.charAt(0)];for(let u=B.length-1;u>-1;u--){let a=B[u],j0=$.slice(0,a.reStart),_0=$.slice(a.reStart,a.reEnd-8),y0=$.slice(a.reEnd),qZ=$.slice(a.reEnd-8,a.reEnd)+y0,r0=j0.split(")").length,nZ=j0.split("(").length-r0,XZ=y0;for(let JZ=0;JZ<nZ;JZ++)XZ=XZ.replace(/\)[+*?]?/,"");y0=XZ;let wZ=y0===""&&J!==o7?"(?:$|\\/)":"";$=j0+_0+y0+wZ+qZ}if($!==""&&Q)$="(?=.)"+$;if(B0)$=_()+$;if(J===o7)return[$,Q];if(Y.nocase&&!Q)Q=Z.toUpperCase()!==Z.toLowerCase();if(!Q)return CW(Z);let t=Y.nocase?"i":"";try{return Object.assign(new RegExp("^"+$+"$",t),{_glob:Z,_src:$})}catch(u){return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let Z=this.set;if(!Z.length)return this.regexp=!1,this.regexp;let J=this.options,Y=J.noglobstar?r7:J.dot?MW:IW,$=J.nocase?"i":"",Q=Z.map((z)=>{return z=z.map((G)=>typeof G==="string"?DW(G):G===K9?K9:G._src).reduce((G,B)=>{if(!(G[G.length-1]===K9&&B===K9))G.push(B);return G},[]),z.forEach((G,B)=>{if(G!==K9||z[B-1]===K9)return;if(B===0)if(z.length>1)z[B+1]="(?:\\/|"+Y+"\\/)?"+z[B+1];else z[B]=Y;else if(B===z.length-1)z[B-1]+="(?:\\/|"+Y+")?";else z[B-1]+="(?:\\/|\\/"+Y+"\\/)"+z[B+1],z[B+1]=K9}),z.filter((G)=>G!==K9).join("/")}).join("|");if(Q="^(?:"+Q+")$",this.negate)Q="^(?!"+Q+").*$";try{this.regexp=new RegExp(Q,$)}catch(z){this.regexp=!1}return this.regexp}match(Z,J=this.partial){if(this.debug("match",Z,this.pattern),this.comment)return!1;if(this.empty)return Z==="";if(Z==="/"&&J)return!0;let Y=this.options;if(t7.sep!=="/")Z=Z.split(t7.sep).join("/");Z=Z.split(p5),this.debug(this.pattern,"split",Z);let $=this.set;this.debug(this.pattern,"set",$);let Q;for(let z=Z.length-1;z>=0;z--)if(Q=Z[z],Q)break;for(let z=0;z<$.length;z++){let G=$[z],B=Z;if(Y.matchBase&&G.length===1)B=[Q];if(this.matchOne(B,G,J)){if(Y.flipNegate)return!0;return!this.negate}}if(Y.flipNegate)return!1;return this.negate}static defaults(Z){return mZ.defaults(Z).Minimatch}}mZ.Minimatch=FY});var Y$=D((GJ)=>{Object.defineProperty(GJ,"__esModule",{value:!0});GJ.DiagnosticFeature=GJ.DiagnosticPullMode=GJ.vsdiag=void 0;var yW=_8(),W0=require("vscode"),a0=Z0(),RW=g0(),J$=U0();function f8(Z,J){if(Z[J]===void 0)Z[J]={};return Z[J]}var J9;(function(Z){let J;(function(Y){Y.full="full",Y.unChanged="unChanged"})(J=Z.DocumentDiagnosticReportKind||(Z.DocumentDiagnosticReportKind={}))})(J9||(GJ.vsdiag=J9={}));var k8;(function(Z){Z.onType="onType",Z.onSave="onSave"})(k8||(GJ.DiagnosticPullMode=k8={}));var NZ;(function(Z){Z.active="open",Z.reschedule="reschedule",Z.outDated="drop"})(NZ||(NZ={}));class PY{constructor(){this.open=new Set,this._onOpen=new W0.EventEmitter,this._onClose=new W0.EventEmitter,PY.fillTabResources(this.open);let Z=(J)=>{if(J.closed.length===0&&J.opened.length===0)return;let Y=this.open,$=new Set;PY.fillTabResources($);let Q=new Set,z=new Set($);for(let G of Y.values())if($.has(G))z.delete(G);else Q.add(G);if(this.open=$,Q.size>0){let G=new Set;for(let B of Q)G.add(W0.Uri.parse(B));this._onClose.fire(G)}if(z.size>0){let G=new Set;for(let B of z)G.add(W0.Uri.parse(B));this._onOpen.fire(G)}};if(W0.window.tabGroups.onDidChangeTabs!==void 0)this.disposable=W0.window.tabGroups.onDidChangeTabs(Z);else this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(Z){return Z instanceof W0.Uri?W0.window.activeTextEditor?.document.uri===Z:W0.window.activeTextEditor?.document===Z}isVisible(Z){let J=Z instanceof W0.Uri?Z:Z.uri;return this.open.has(J.toString())}getTabResources(){let Z=new Set;return PY.fillTabResources(new Set,Z),Z}static fillTabResources(Z,J){let Y=Z??new Set;for(let $ of W0.window.tabGroups.all)for(let Q of $.tabs){let z=Q.input,G;if(z instanceof W0.TabInputText)G=z.uri;else if(z instanceof W0.TabInputTextDiff)G=z.modified;else if(z instanceof W0.TabInputCustom)G=z.uri;if(G!==void 0&&!Y.has(G.toString()))Y.add(G.toString()),J!==void 0&&J.add(G)}}}var ZZ;(function(Z){Z[Z.document=1]="document",Z[Z.workspace=2]="workspace"})(ZZ||(ZZ={}));var g9;(function(Z){function J(Y){return Y instanceof W0.Uri?Y.toString():Y.uri.toString()}Z.asKey=J})(g9||(g9={}));class l5{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(Z,J,Y){let $=Z===ZZ.document?this.documentPullStates:this.workspacePullStates,[Q,z,G]=J instanceof W0.Uri?[J.toString(),J,Y]:[J.uri.toString(),J.uri,J.version],B=$.get(Q);if(B===void 0)B={document:z,pulledVersion:G,resultId:void 0},$.set(Q,B);return B}update(Z,J,Y,$){let Q=Z===ZZ.document?this.documentPullStates:this.workspacePullStates,[z,G,B,K]=J instanceof W0.Uri?[J.toString(),J,Y,$]:[J.uri.toString(),J.uri,J.version,Y],A=Q.get(z);if(A===void 0)A={document:G,pulledVersion:B,resultId:K},Q.set(z,A);else A.pulledVersion=B,A.resultId=K}unTrack(Z,J){let Y=g9.asKey(J);(Z===ZZ.document?this.documentPullStates:this.workspacePullStates).delete(Y)}tracks(Z,J){let Y=g9.asKey(J);return(Z===ZZ.document?this.documentPullStates:this.workspacePullStates).has(Y)}getResultId(Z,J){let Y=g9.asKey(J);return(Z===ZZ.document?this.documentPullStates:this.workspacePullStates).get(Y)?.resultId}getAllResultIds(){let Z=[];for(let[J,Y]of this.workspacePullStates){if(this.documentPullStates.has(J))Y=this.documentPullStates.get(J);if(Y.resultId!==void 0)Z.push({uri:J,value:Y.resultId})}return Z}}class c5{constructor(Z,J,Y){this.client=Z,this.tabs=J,this.options=Y,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new W0.EventEmitter,this.provider=this.createProvider(),this.diagnostics=W0.languages.createDiagnosticCollection(Y.identifier),this.openRequests=new Map,this.documentStates=new l5,this.workspaceErrorCounter=0}knows(Z,J){let Y=J instanceof W0.Uri?J:J.uri;return this.documentStates.tracks(Z,J)||this.openRequests.has(Y.toString())}forget(Z,J){this.documentStates.unTrack(Z,J)}pull(Z,J){if(this.isDisposed)return;let Y=Z instanceof W0.Uri?Z:Z.uri;this.pullAsync(Z).then(()=>{if(J)J()},($)=>{this.client.error(`Document pull failed for text document ${Y.toString()}`,$,!1)})}async pullAsync(Z,J){if(this.isDisposed)return;let Y=Z instanceof W0.Uri,$=Y?Z:Z.uri,Q=$.toString();J=Y?J:Z.version;let z=this.openRequests.get(Q),G=Y?this.documentStates.track(ZZ.document,Z,J):this.documentStates.track(ZZ.document,Z);if(z===void 0){let B=new W0.CancellationTokenSource;this.openRequests.set(Q,{state:NZ.active,document:Z,version:J,tokenSource:B});let K,A;try{K=await this.provider.provideDiagnostics(Z,G.resultId,B.token)??{kind:J9.DocumentDiagnosticReportKind.full,items:[]}}catch(O){if(O instanceof J$.LSPCancellationError&&a0.DiagnosticServerCancellationData.is(O.data)&&O.data.retriggerRequest===!1)A={state:NZ.outDated,document:Z};if(A===void 0&&O instanceof W0.CancellationError)A={state:NZ.reschedule,document:Z};else throw O}if(A=A??this.openRequests.get(Q),A===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${Q}`),this.diagnostics.delete($);return}if(this.openRequests.delete(Q),!this.tabs.isVisible(Z)){this.documentStates.unTrack(ZZ.document,Z);return}if(A.state===NZ.outDated)return;if(K!==void 0){if(K.kind===J9.DocumentDiagnosticReportKind.full)this.diagnostics.set($,K.items);G.pulledVersion=J,G.resultId=K.resultId}if(A.state===NZ.reschedule)this.pull(Z)}else if(z.state===NZ.active)z.tokenSource.cancel(),this.openRequests.set(Q,{state:NZ.reschedule,document:z.document});else if(z.state===NZ.outDated)this.openRequests.set(Q,{state:NZ.reschedule,document:z.document})}forgetDocument(Z){let J=Z instanceof W0.Uri?Z:Z.uri,Y=J.toString(),$=this.openRequests.get(Y);if(this.options.workspaceDiagnostics)if($!==void 0)this.openRequests.set(Y,{state:NZ.reschedule,document:Z});else this.pull(Z,()=>{this.forget(ZZ.document,Z)});else{if($!==void 0){if($.state===NZ.active)$.tokenSource.cancel();this.openRequests.set(Y,{state:NZ.outDated,document:Z})}this.diagnostics.delete(J),this.forget(ZZ.document,Z)}}pullWorkspace(){if(this.isDisposed)return;this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,a0.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2000)},(Z)=>{if(!(Z instanceof J$.LSPCancellationError)&&!a0.DiagnosticServerCancellationData.is(Z.data))this.client.error("Workspace diagnostic pull failed.",Z,!1),this.workspaceErrorCounter++;if(this.workspaceErrorCounter<=5)this.workspaceTimeout=(0,a0.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2000)})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;if(this.workspaceCancellation!==void 0)this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0;this.workspaceCancellation=new W0.CancellationTokenSource;let Z=this.documentStates.getAllResultIds().map((J)=>{return{uri:this.client.protocol2CodeConverter.asUri(J.uri),value:J.value}});await this.provider.provideWorkspaceDiagnostics(Z,this.workspaceCancellation.token,(J)=>{if(!J||this.isDisposed)return;for(let Y of J.items){if(Y.kind===J9.DocumentDiagnosticReportKind.full){if(!this.documentStates.tracks(ZZ.document,Y.uri))this.diagnostics.set(Y.uri,Y.items)}this.documentStates.update(ZZ.workspace,Y.uri,Y.version??void 0,Y.resultId)}})}createProvider(){let Z={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(J,Y,$)=>{let Q=(G,B,K)=>{let A={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(G instanceof W0.Uri?G:G.uri)},previousResultId:B};if(this.isDisposed===!0||!this.client.isRunning())return{kind:J9.DocumentDiagnosticReportKind.full,items:[]};return this.client.sendRequest(a0.DocumentDiagnosticRequest.type,A,K).then(async(O)=>{if(O===void 0||O===null||this.isDisposed||K.isCancellationRequested)return{kind:J9.DocumentDiagnosticReportKind.full,items:[]};if(O.kind===a0.DocumentDiagnosticReportKind.Full)return{kind:J9.DocumentDiagnosticReportKind.full,resultId:O.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(O.items,K)};else return{kind:J9.DocumentDiagnosticReportKind.unChanged,resultId:O.resultId}},(O)=>{return this.client.handleFailedRequest(a0.DocumentDiagnosticRequest.type,K,O,{kind:J9.DocumentDiagnosticReportKind.full,items:[]})})},z=this.client.middleware;return z.provideDiagnostics?z.provideDiagnostics(J,Y,$,Q):Q(J,Y,$)}};if(this.options.workspaceDiagnostics)Z.provideWorkspaceDiagnostics=(J,Y,$)=>{let Q=async(K)=>{if(K.kind===a0.DocumentDiagnosticReportKind.Full)return{kind:J9.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(K.uri),resultId:K.resultId,version:K.version,items:await this.client.protocol2CodeConverter.asDiagnostics(K.items,Y)};else return{kind:J9.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(K.uri),resultId:K.resultId,version:K.version}},z=(K)=>{let A=[];for(let O of K)A.push({uri:this.client.code2ProtocolConverter.asUri(O.uri),value:O.value});return A},G=(K,A)=>{let O=(0,RW.generateUuid)(),E=this.client.onProgress(a0.WorkspaceDiagnosticRequest.partialResult,O,async(L)=>{if(L===void 0||L===null){$(null);return}let T={items:[]};for(let C of L.items)try{T.items.push(await Q(C))}catch(x){this.client.error("Converting workspace diagnostics failed.",x)}$(T)}),N={identifier:this.options.identifier,previousResultIds:z(K),partialResultToken:O};if(this.isDisposed===!0||!this.client.isRunning())return{items:[]};return this.client.sendRequest(a0.WorkspaceDiagnosticRequest.type,N,A).then(async(L)=>{if(A.isCancellationRequested)return{items:[]};let T={items:[]};for(let C of L.items)T.items.push(await Q(C));return E.dispose(),$(T),{items:[]}},(L)=>{return E.dispose(),this.client.handleFailedRequest(a0.DocumentDiagnosticRequest.type,A,L,{items:[]})})},B=this.client.middleware;return B.provideWorkspaceDiagnostics?B.provideWorkspaceDiagnostics(J,Y,$,G):G(J,Y,$)};return Z}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[Z,J]of this.openRequests){if(J.state===NZ.active)J.tokenSource.cancel();this.openRequests.set(Z,{state:NZ.outDated,document:J.document})}this.diagnostics.dispose()}}class i5{constructor(Z){this.diagnosticRequestor=Z,this.documents=new a0.LinkedMap,this.isDisposed=!1}add(Z){if(this.isDisposed===!0)return;let J=g9.asKey(Z);if(this.documents.has(J))return;this.documents.set(J,Z,a0.Touch.Last),this.trigger()}remove(Z){let J=g9.asKey(Z);if(this.documents.delete(J),this.documents.size===0)this.stop();else if(J===this.endDocumentKey())this.endDocument=this.documents.last}trigger(){if(this.isDisposed===!0)return;if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,a0.RAL)().timer.setInterval(()=>{let Z=this.documents.first;if(Z!==void 0){let J=g9.asKey(Z);if(this.diagnosticRequestor.pull(Z),this.documents.set(J,Z,a0.Touch.Last),J===this.endDocumentKey())this.stop()}},200)}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}endDocumentKey(){return this.endDocument!==void 0?g9.asKey(this.endDocument):void 0}}class n5{constructor(Z,J,Y){let $=Z.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},Q=Z.protocol2CodeConverter.asDocumentSelector(Y.documentSelector),z=[],G=(L)=>{let T=Y.documentSelector;if($.match!==void 0)return $.match(T,L);for(let C of T){if(!a0.TextDocumentFilter.is(C))continue;if(typeof C==="string")return!1;if(C.language!==void 0&&C.language!=="*")return!1;if(C.scheme!==void 0&&C.scheme!=="*"&&C.scheme!==L.scheme)return!1;if(C.pattern!==void 0){let x=new yW.Minimatch(C.pattern,{noext:!0});if(!x.makeRe())return!1;if(!x.match(L.fsPath))return!1}}return!0},B=(L)=>{return L instanceof W0.Uri?G(L):W0.languages.match(Q,L)>0&&J.isVisible(L)},K=(L)=>{return L instanceof W0.Uri?this.activeTextDocument?.uri.toString()===L.toString():this.activeTextDocument===L};this.diagnosticRequestor=new c5(Z,J,Y),this.backgroundScheduler=new i5(this.diagnosticRequestor);let A=(L)=>{if(!B(L)||!Y.interFileDependencies||K(L))return;this.backgroundScheduler.add(L)};this.activeTextDocument=W0.window.activeTextEditor?.document,W0.window.onDidChangeActiveTextEditor((L)=>{let T=this.activeTextDocument;if(this.activeTextDocument=L?.document,T!==void 0)A(T);if(this.activeTextDocument!==void 0)this.backgroundScheduler.remove(this.activeTextDocument)});let O=Z.getFeature(a0.DidOpenTextDocumentNotification.method);z.push(O.onNotificationSent((L)=>{let T=L.textDocument;if(this.diagnosticRequestor.knows(ZZ.document,T))return;if(B(T))this.diagnosticRequestor.pull(T,()=>{A(T)})})),z.push(J.onOpen((L)=>{for(let T of L){if(this.diagnosticRequestor.knows(ZZ.document,T))continue;let C=T.toString(),x;for(let _ of W0.workspace.textDocuments)if(C===_.uri.toString()){x=_;break}if(x!==void 0&&B(x))this.diagnosticRequestor.pull(x,()=>{A(x)})}}));let E=new Set;for(let L of W0.workspace.textDocuments)if(B(L))this.diagnosticRequestor.pull(L,()=>{A(L)}),E.add(L.uri.toString());if($.onTabs===!0){for(let L of J.getTabResources())if(!E.has(L.toString())&&B(L))this.diagnosticRequestor.pull(L,()=>{A(L)})}if($.onChange===!0){let L=Z.getFeature(a0.DidChangeTextDocumentNotification.method);z.push(L.onNotificationSent(async(T)=>{let C=T.textDocument;if(($.filter===void 0||!$.filter(C,k8.onType))&&this.diagnosticRequestor.knows(ZZ.document,C))this.diagnosticRequestor.pull(C,()=>{this.backgroundScheduler.trigger()})}))}if($.onSave===!0){let L=Z.getFeature(a0.DidSaveTextDocumentNotification.method);z.push(L.onNotificationSent((T)=>{let C=T.textDocument;if(($.filter===void 0||!$.filter(C,k8.onSave))&&this.diagnosticRequestor.knows(ZZ.document,C))this.diagnosticRequestor.pull(T.textDocument,()=>{this.backgroundScheduler.trigger()})}))}let N=Z.getFeature(a0.DidCloseTextDocumentNotification.method);if(z.push(N.onNotificationSent((L)=>{this.cleanUpDocument(L.textDocument)})),J.onClose((L)=>{for(let T of L)this.cleanUpDocument(T)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let L of W0.workspace.textDocuments)if(B(L))this.diagnosticRequestor.pull(L)}),Y.workspaceDiagnostics===!0&&Y.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14")this.diagnosticRequestor.pullWorkspace();this.disposable=W0.Disposable.from(...z,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(Z){if(this.diagnosticRequestor.knows(ZZ.document,Z))this.diagnosticRequestor.forgetDocument(Z),this.backgroundScheduler.remove(Z)}}class a5 extends J$.TextDocumentLanguageFeature{constructor(Z){super(Z,a0.DocumentDiagnosticRequest.type)}fillClientCapabilities(Z){let J=f8(f8(Z,"textDocument"),"diagnostic");J.dynamicRegistration=!0,J.relatedDocumentSupport=!1,f8(f8(Z,"workspace"),"diagnostics").refreshSupport=!0}initialize(Z,J){this._client.onRequest(a0.DiagnosticRefreshRequest.type,async()=>{for(let z of this.getAllProviders())z.onDidChangeDiagnosticsEmitter.fire()});let[$,Q]=this.getRegistration(J,Z.diagnosticProvider);if(!$||!Q)return;this.register({id:$,registerOptions:Q})}clear(){if(this.tabs!==void 0)this.tabs.dispose(),this.tabs=void 0;super.clear()}registerLanguageProvider(Z){if(this.tabs===void 0)this.tabs=new PY;let J=new n5(this._client,this.tabs,Z);return[J.disposable,J]}}GJ.DiagnosticFeature=a5});var o5=D((d8)=>{Object.defineProperty(d8,"__esModule",{value:!0});d8.NotebookDocumentSyncFeature=void 0;var EZ=require("vscode"),hW=_8(),d9=Z0(),xW=g0(),s5=rZ();function r5(Z,J){if(Z[J]===void 0)Z[J]={};return Z[J]}var tJ;(function(Z){let J;(function(Y){function $(N,L){return{version:N.version,uri:L.asUri(N.uri)}}Y.asVersionedNotebookDocumentIdentifier=$;function Q(N,L,T){let C=d9.NotebookDocument.create(T.asUri(N.uri),N.notebookType,N.version,z(L,T));if(Object.keys(N.metadata).length>0)C.metadata=G(N.metadata);return C}Y.asNotebookDocument=Q;function z(N,L){return N.map((T)=>B(T,L))}Y.asNotebookCells=z;function G(N){return A(new Set,N)}Y.asMetadata=G;function B(N,L){let T=d9.NotebookCell.create(K(N.kind),L.asUri(N.document.uri));if(Object.keys(N.metadata).length>0)T.metadata=G(N.metadata);if(N.executionSummary!==void 0&&(s5.number(N.executionSummary.executionOrder)&&s5.boolean(N.executionSummary.success)))T.executionSummary={executionOrder:N.executionSummary.executionOrder,success:N.executionSummary.success};return T}Y.asNotebookCell=B;function K(N){switch(N){case EZ.NotebookCellKind.Markup:return d9.NotebookCellKind.Markup;case EZ.NotebookCellKind.Code:return d9.NotebookCellKind.Code}}function A(N,L){if(N.has(L))throw Error("Can't deep copy cyclic structures.");if(Array.isArray(L)){let T=[];for(let C of L)if(C!==null&&typeof C==="object"||Array.isArray(C))T.push(A(N,C));else{if(C instanceof RegExp)throw Error("Can't transfer regular expressions to the server");T.push(C)}return T}else{let T=Object.keys(L),C=Object.create(null);for(let x of T){let _=L[x];if(_!==null&&typeof _==="object"||Array.isArray(_))C[x]=A(N,_);else{if(_ instanceof RegExp)throw Error("Can't transfer regular expressions to the server");C[x]=_}}return C}}function O(N,L){let T=L.asChangeTextDocumentParams(N,N.document.uri,N.document.version);return{document:T.textDocument,changes:T.contentChanges}}Y.asTextContentChange=O;function E(N,L){let T=Object.create(null);if(N.metadata)T.metadata=Z.c2p.asMetadata(N.metadata);if(N.cells!==void 0){let C=Object.create(null),x=N.cells;if(x.structure)C.structure={array:{start:x.structure.array.start,deleteCount:x.structure.array.deleteCount,cells:x.structure.array.cells!==void 0?x.structure.array.cells.map((_)=>Z.c2p.asNotebookCell(_,L)):void 0},didOpen:x.structure.didOpen!==void 0?x.structure.didOpen.map((_)=>L.asOpenTextDocumentParams(_.document).textDocument):void 0,didClose:x.structure.didClose!==void 0?x.structure.didClose.map((_)=>L.asCloseTextDocumentParams(_.document).textDocument):void 0};if(x.data!==void 0)C.data=x.data.map((_)=>Z.c2p.asNotebookCell(_,L));if(x.textContent!==void 0)C.textContent=x.textContent.map((_)=>Z.c2p.asTextContentChange(_,L));if(Object.keys(C).length>0)T.cells=C}return T}Y.asNotebookDocumentChangeEvent=E})(J=Z.c2p||(Z.c2p={}))})(tJ||(tJ={}));var $$;(function(Z){function J(B,K,A){let O=B.length,E=K.length,N=0;while(N<E&&N<O&&Y(B[N],K[N],A))N++;if(N<E&&N<O){let L=O-1,T=E-1;while(L>=0&&T>=0&&Y(B[L],K[T],A))L--,T--;let C=L+1-N,x=N===T+1?void 0:K.slice(N,T+1);return x!==void 0?{start:N,deleteCount:C,cells:x}:{start:N,deleteCount:C}}else if(N<E)return{start:N,deleteCount:0,cells:K.slice(N)};else if(N<O)return{start:N,deleteCount:O-N};else return}Z.computeDiff=J;function Y(B,K,A=!0){if(B.kind!==K.kind||B.document.uri.toString()!==K.document.uri.toString()||B.document.languageId!==K.document.languageId||!$(B.executionSummary,K.executionSummary))return!1;return!A||A&&z(B.metadata,K.metadata)}function $(B,K){if(B===K)return!0;if(B===void 0||K===void 0)return!1;return B.executionOrder===K.executionOrder&&B.success===K.success&&Q(B.timing,K.timing)}function Q(B,K){if(B===K)return!0;if(B===void 0||K===void 0)return!1;return B.startTime===K.startTime&&B.endTime===K.endTime}function z(B,K){if(B===K)return!0;if(B===null||B===void 0||K===null||K===void 0)return!1;if(typeof B!==typeof K)return!1;if(typeof B!=="object")return!1;let A=Array.isArray(B),O=Array.isArray(K);if(A!==O)return!1;if(A&&O){if(B.length!==K.length)return!1;for(let E=0;E<B.length;E++)if(!z(B[E],K[E]))return!1}if(G(B)&&G(K)){let E=Object.keys(B),N=Object.keys(K);if(E.length!==N.length)return!1;if(E.sort(),N.sort(),!z(E,N))return!1;for(let L=0;L<E.length;L++){let T=E[L];if(!z(B[T],K[T]))return!1}return!0}return!1}function G(B){return B!==null&&typeof B==="object"}Z.isObjectLiteral=G})($$||($$={}));var Q$;(function(Z){function J(Y,$){if(typeof Y==="string")return Y==="*"||$.notebookType===Y;if(Y.notebookType!==void 0&&Y.notebookType!=="*"&&$.notebookType!==Y.notebookType)return!1;let Q=$.uri;if(Y.scheme!==void 0&&Y.scheme!=="*"&&Q.scheme!==Y.scheme)return!1;if(Y.pattern!==void 0){let z=new hW.Minimatch(Y.pattern,{noext:!0});if(!z.makeRe())return!1;if(!z.match(Q.fsPath))return!1}return!0}Z.matchNotebook=J})(Q$||(Q$={}));var v8;(function(Z){function J($){let Q=$.notebookSelector,z=[];for(let G of Q){let B=(typeof G.notebook==="string"?G.notebook:G.notebook?.notebookType)??"*",K=typeof G.notebook==="string"?void 0:G.notebook?.scheme,A=typeof G.notebook==="string"?void 0:G.notebook?.pattern;if(G.cells!==void 0)for(let O of G.cells)z.push(Y(B,K,A,O.language));else z.push(Y(B,K,A,void 0))}return z}Z.asDocumentSelector=J;function Y($,Q,z,G){return Q===void 0&&z===void 0?{notebook:$,language:G}:{notebook:{notebookType:$,scheme:Q,pattern:z},language:G}}})(v8||(v8={}));var g8;(function(Z){function J(Y){return{cells:Y,uris:new Set(Y.map(($)=>$.document.uri.toString()))}}Z.create=J})(g8||(g8={}));class MY{constructor(Z,J){this.client=Z,this.options=J,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=Z.protocol2CodeConverter.asDocumentSelector(v8.asDocumentSelector(J)),EZ.workspace.onDidOpenNotebookDocument((Y)=>{this.notebookDidOpen.add(Y.uri.toString()),this.didOpen(Y)},void 0,this.disposables);for(let Y of EZ.workspace.notebookDocuments)this.notebookDidOpen.add(Y.uri.toString()),this.didOpen(Y);if(EZ.workspace.onDidChangeNotebookDocument((Y)=>this.didChangeNotebookDocument(Y),void 0,this.disposables),this.options.save===!0)EZ.workspace.onDidSaveNotebookDocument((Y)=>this.didSave(Y),void 0,this.disposables);EZ.workspace.onDidCloseNotebookDocument((Y)=>{this.didClose(Y),this.notebookDidOpen.delete(Y.uri.toString())},void 0,this.disposables)}getState(){for(let Z of EZ.workspace.notebookDocuments)if(this.getMatchingCells(Z)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(Z){return EZ.languages.match(this.selector,Z)>0}didOpenNotebookCellTextDocument(Z,J){if(EZ.languages.match(this.selector,J.document)===0)return;if(!this.notebookDidOpen.has(Z.uri.toString()))return;let Y=this.notebookSyncInfo.get(Z.uri.toString()),$=this.cellMatches(Z,J);if(Y!==void 0){let Q=Y.uris.has(J.document.uri.toString());if($&&Q||!$&&!Q)return;if($){let z=this.getMatchingCells(Z);if(z!==void 0){let G=this.asNotebookDocumentChangeEvent(Z,void 0,Y,z);if(G!==void 0)this.doSendChange(G,z).catch(()=>{})}}}else if($)this.doSendOpen(Z,[J]).catch(()=>{})}didChangeNotebookCellTextDocument(Z,J){if(EZ.languages.match(this.selector,J.document)===0)return;this.doSendChange({notebook:Z,cells:{textContent:[J]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(Z,J){let Y=this.notebookSyncInfo.get(Z.uri.toString());if(Y===void 0)return;let $=J.document.uri,Q=Y.cells.findIndex((z)=>z.document.uri.toString()===$.toString());if(Q===-1)return;if(Q===0&&Y.cells.length===1)this.doSendClose(Z,Y.cells).catch(()=>{});else{let z=Y.cells.slice(),G=z.splice(Q,1);this.doSendChange({notebook:Z,cells:{structure:{array:{start:Q,deleteCount:1},didClose:G}}},z).catch(()=>{})}}dispose(){for(let Z of this.disposables)Z.dispose()}didOpen(Z,J=this.getMatchingCells(Z),Y=this.notebookSyncInfo.get(Z.uri.toString())){if(Y!==void 0)if(J!==void 0){let $=this.asNotebookDocumentChangeEvent(Z,void 0,Y,J);if($!==void 0)this.doSendChange($,J).catch(()=>{})}else this.doSendClose(Z,[]).catch(()=>{});else{if(J===void 0)return;this.doSendOpen(Z,J).catch(()=>{})}}didChangeNotebookDocument(Z){let J=Z.notebook,Y=this.notebookSyncInfo.get(J.uri.toString());if(Y===void 0){if(Z.contentChanges.length===0)return;let $=this.getMatchingCells(J);if($===void 0)return;this.didOpen(J,$,Y)}else{let $=this.getMatchingCells(J);if($===void 0){this.didClose(J,Y);return}let Q=this.asNotebookDocumentChangeEvent(Z.notebook,Z,Y,$);if(Q!==void 0)this.doSendChange(Q,$).catch(()=>{})}}didSave(Z){if(this.notebookSyncInfo.get(Z.uri.toString())===void 0)return;this.doSendSave(Z).catch(()=>{})}didClose(Z,J=this.notebookSyncInfo.get(Z.uri.toString())){if(J===void 0)return;let Y=Z.getCells().filter(($)=>J.uris.has($.document.uri.toString()));this.doSendClose(Z,Y).catch(()=>{})}async sendDidOpenNotebookDocument(Z){let J=this.getMatchingCells(Z);if(J===void 0)return;return this.doSendOpen(Z,J)}async doSendOpen(Z,J){let Y=async(Q,z)=>{let G=tJ.c2p.asNotebookDocument(Q,z,this.client.code2ProtocolConverter),B=z.map((K)=>this.client.code2ProtocolConverter.asTextDocumentItem(K.document));try{await this.client.sendNotification(d9.DidOpenNotebookDocumentNotification.type,{notebookDocument:G,cellTextDocuments:B})}catch(K){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",K),K}},$=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(Z.uri.toString(),g8.create(J)),$?.didOpen!==void 0?$.didOpen(Z,J,Y):Y(Z,J)}async sendDidChangeNotebookDocument(Z){return this.doSendChange(Z,void 0)}async doSendChange(Z,J=this.getMatchingCells(Z.notebook)){let Y=async(Q)=>{try{await this.client.sendNotification(d9.DidChangeNotebookDocumentNotification.type,{notebookDocument:tJ.c2p.asVersionedNotebookDocumentIdentifier(Q.notebook,this.client.code2ProtocolConverter),change:tJ.c2p.asNotebookDocumentChangeEvent(Q,this.client.code2ProtocolConverter)})}catch(z){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",z),z}},$=this.client.middleware?.notebooks;if(Z.cells?.structure!==void 0)this.notebookSyncInfo.set(Z.notebook.uri.toString(),g8.create(J??[]));return $?.didChange!==void 0?$?.didChange(Z,Y):Y(Z)}async sendDidSaveNotebookDocument(Z){return this.doSendSave(Z)}async doSendSave(Z){let J=async($)=>{try{await this.client.sendNotification(d9.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri($.uri)}})}catch(Q){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",Q),Q}},Y=this.client.middleware?.notebooks;return Y?.didSave!==void 0?Y.didSave(Z,J):J(Z)}async sendDidCloseNotebookDocument(Z){return this.doSendClose(Z,this.getMatchingCells(Z)??[])}async doSendClose(Z,J){let Y=async(Q,z)=>{try{await this.client.sendNotification(d9.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(Q.uri)},cellTextDocuments:z.map((G)=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(G.document))})}catch(G){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",G),G}},$=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(Z.uri.toString()),$?.didClose!==void 0?$.didClose(Z,J,Y):Y(Z,J)}asNotebookDocumentChangeEvent(Z,J,Y,$){if(J!==void 0&&J.notebook!==Z)throw Error("Notebook must be identical");let Q={notebook:Z};if(J?.metadata!==void 0)Q.metadata=tJ.c2p.asMetadata(J.metadata);let z;if(J?.cellChanges!==void 0&&J.cellChanges.length>0){let G=[];z=new Set($.map((B)=>B.document.uri.toString()));for(let B of J.cellChanges)if(z.has(B.cell.document.uri.toString())&&(B.executionSummary!==void 0||B.metadata!==void 0))G.push(B.cell);if(G.length>0)Q.cells=Q.cells??{},Q.cells.data=G}if((J?.contentChanges!==void 0&&J.contentChanges.length>0||J===void 0)&&Y!==void 0&&$!==void 0){let G=Y.cells,B=$,K=$$.computeDiff(G,B,!1),A,O;if(K!==void 0){A=K.cells===void 0?new Map:new Map(K.cells.map((L)=>[L.document.uri.toString(),L])),O=K.deleteCount===0?new Map:new Map(G.slice(K.start,K.start+K.deleteCount).map((L)=>[L.document.uri.toString(),L]));for(let L of Array.from(O.keys()))if(A.has(L))O.delete(L),A.delete(L);Q.cells=Q.cells??{};let E=[],N=[];if(A.size>0||O.size>0){for(let L of A.values())E.push(L);for(let L of O.values())N.push(L)}Q.cells.structure={array:K,didOpen:E,didClose:N}}}return Object.keys(Q).length>1?Q:void 0}getMatchingCells(Z,J=Z.getCells()){if(this.options.notebookSelector===void 0)return;for(let Y of this.options.notebookSelector)if(Y.notebook===void 0||Q$.matchNotebook(Y.notebook,Z)){let $=this.filterCells(Z,J,Y.cells);return $.length===0?void 0:$}return}cellMatches(Z,J){let Y=this.getMatchingCells(Z,[J]);return Y!==void 0&&Y[0]===J}filterCells(Z,J,Y){let $=Y!==void 0?J.filter((Q)=>{let z=Q.document.languageId;return Y.some((G)=>G.language==="*"||z===G.language)}):J;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells==="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(Z,$):$}}class LJ{constructor(Z){this.client=Z,this.registrations=new Map,this.registrationType=d9.NotebookDocumentSyncRegistrationType.type,EZ.workspace.onDidOpenTextDocument((J)=>{if(J.uri.scheme!==LJ.CellScheme)return;let[Y,$]=this.findNotebookDocumentAndCell(J);if(Y===void 0||$===void 0)return;for(let Q of this.registrations.values())if(Q instanceof MY)Q.didOpenNotebookCellTextDocument(Y,$)}),EZ.workspace.onDidChangeTextDocument((J)=>{if(J.contentChanges.length===0)return;let Y=J.document;if(Y.uri.scheme!==LJ.CellScheme)return;let[$]=this.findNotebookDocumentAndCell(Y);if($===void 0)return;for(let Q of this.registrations.values())if(Q instanceof MY)Q.didChangeNotebookCellTextDocument($,J)}),EZ.workspace.onDidCloseTextDocument((J)=>{if(J.uri.scheme!==LJ.CellScheme)return;let[Y,$]=this.findNotebookDocumentAndCell(J);if(Y===void 0||$===void 0)return;for(let Q of this.registrations.values())if(Q instanceof MY)Q.didCloseNotebookCellTextDocument(Y,$)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let Z of this.registrations.values()){let J=Z.getState();if(J.kind==="document"&&J.registrations===!0&&J.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(Z){let J=r5(r5(Z,"notebookDocument"),"synchronization");J.dynamicRegistration=!0,J.executionSummarySupport=!0}preInitialize(Z){let J=Z.notebookDocumentSync;if(J===void 0)return;this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(v8.asDocumentSelector(J))}initialize(Z){let J=Z.notebookDocumentSync;if(J===void 0)return;let Y=J.id??xW.generateUuid();this.register({id:Y,registerOptions:J})}register(Z){let J=new MY(this.client,Z.registerOptions);this.registrations.set(Z.id,J)}unregister(Z){let J=this.registrations.get(Z);J&&J.dispose()}clear(){for(let Z of this.registrations.values())Z.dispose();this.registrations.clear()}handles(Z){if(Z.uri.scheme!==LJ.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&EZ.languages.match(this.dedicatedChannel,Z)>0)return!0;for(let J of this.registrations.values())if(J.handles(Z))return!0;return!1}getProvider(Z){for(let J of this.registrations.values())if(J.handles(Z.document))return J;return}findNotebookDocumentAndCell(Z){let J=Z.uri.toString();for(let Y of EZ.workspace.notebookDocuments)for(let $ of Y.getCells())if($.document.uri.toString()===J)return[Y,$];return[void 0,void 0]}}d8.NotebookDocumentSyncFeature=LJ;LJ.CellScheme="vscode-notebook-cell"});var J3=D((XJ)=>{Object.defineProperty(XJ,"__esModule",{value:!0});XJ.SyncConfigurationFeature=XJ.toJSONObject=XJ.ConfigurationFeature=void 0;var eJ=require("vscode"),IY=Z0(),_W=rZ(),fW=g0(),t5=U0();class e5{constructor(Z){this._client=Z}getState(){return{kind:"static"}}fillClientCapabilities(Z){Z.workspace=Z.workspace||{},Z.workspace.configuration=!0}initialize(){let Z=this._client;Z.onRequest(IY.ConfigurationRequest.type,(J,Y)=>{let $=(z)=>{let G=[];for(let B of z.items){let K=B.scopeUri!==void 0&&B.scopeUri!==null?this._client.protocol2CodeConverter.asUri(B.scopeUri):void 0;G.push(this.getConfiguration(K,B.section!==null?B.section:void 0))}return G},Q=Z.middleware.workspace;return Q&&Q.configuration?Q.configuration(J,Y,$):$(J,Y)})}getConfiguration(Z,J){let Y=null;if(J){let $=J.lastIndexOf(".");if($===-1)Y=NJ(eJ.workspace.getConfiguration(void 0,Z).get(J));else{let Q=eJ.workspace.getConfiguration(J.substr(0,$),Z);if(Q)Y=NJ(Q.get(J.substr($+1)))}}else{let $=eJ.workspace.getConfiguration(void 0,Z);Y={};for(let Q of Object.keys($))if($.has(Q))Y[Q]=NJ($.get(Q))}if(Y===void 0)Y=null;return Y}clear(){}}XJ.ConfigurationFeature=e5;function NJ(Z){if(Z){if(Array.isArray(Z))return Z.map(NJ);else if(typeof Z==="object"){let J=Object.create(null);for(let Y in Z)if(Object.prototype.hasOwnProperty.call(Z,Y))J[Y]=NJ(Z[Y]);return J}}return Z}XJ.toJSONObject=NJ;class Z3{constructor(Z){this._client=Z,this.isCleared=!1,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return IY.DidChangeConfigurationNotification.type}fillClientCapabilities(Z){(0,t5.ensure)((0,t5.ensure)(Z,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){this.isCleared=!1;let Z=this._client.clientOptions.synchronize?.configurationSection;if(Z!==void 0)this.register({id:fW.generateUuid(),registerOptions:{section:Z}})}register(Z){let J=eJ.workspace.onDidChangeConfiguration((Y)=>{this.onDidChangeConfiguration(Z.registerOptions.section,Y)});if(this._listeners.set(Z.id,J),Z.registerOptions.section!==void 0)this.onDidChangeConfiguration(Z.registerOptions.section,void 0)}unregister(Z){let J=this._listeners.get(Z);if(J)this._listeners.delete(Z),J.dispose()}clear(){for(let Z of this._listeners.values())Z.dispose();this._listeners.clear(),this.isCleared=!0}onDidChangeConfiguration(Z,J){if(this.isCleared)return;let Y;if(_W.string(Z))Y=[Z];else Y=Z;if(Y!==void 0&&J!==void 0){if(!Y.some((G)=>J.affectsConfiguration(G)))return}let $=async(z)=>{if(z===void 0)return this._client.sendNotification(IY.DidChangeConfigurationNotification.type,{settings:null});else return this._client.sendNotification(IY.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(z)})},Q=this._client.middleware.workspace?.didChangeConfiguration;(Q?Q(Y,$):$(Y)).catch((z)=>{this._client.error(`Sending notification ${IY.DidChangeConfigurationNotification.type.method} failed`,z)})}extractSettingsInformation(Z){function J(Q,z){let G=Q;for(let B=0;B<z.length-1;B++){let K=G[z[B]];if(!K)K=Object.create(null),G[z[B]]=K;G=K}return G}let Y=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,$=Object.create(null);for(let Q=0;Q<Z.length;Q++){let z=Z[Q],G=z.indexOf("."),B=null;if(G>=0)B=eJ.workspace.getConfiguration(z.substr(0,G),Y).get(z.substr(G+1));else B=eJ.workspace.getConfiguration(void 0,Y).get(z);if(B){let K=Z[Q].split(".");J($,K)[K[K.length-1]]=NJ(B)}}return $}}XJ.SyncConfigurationFeature=Z3});var B3=D((hZ)=>{Object.defineProperty(hZ,"__esModule",{value:!0});hZ.DidSaveTextDocumentFeature=hZ.WillSaveWaitUntilFeature=hZ.WillSaveFeature=hZ.DidChangeTextDocumentFeature=hZ.DidCloseTextDocumentFeature=hZ.DidOpenTextDocumentFeature=void 0;var uZ=require("vscode"),b0=Z0(),m0=U0(),ZY=g0();class Y3 extends m0.TextDocumentEventFeature{constructor(Z,J){super(Z,uZ.workspace.onDidOpenTextDocument,b0.DidOpenTextDocumentNotification.type,()=>Z.middleware.didOpen,(Y)=>Z.code2ProtocolConverter.asOpenTextDocumentParams(Y),(Y)=>Y,m0.TextDocumentEventFeature.textDocumentFilter);this._syncedDocuments=J}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(Z){(0,m0.ensure)((0,m0.ensure)(Z,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(Z,J){let Y=Z.resolvedTextDocumentSync;if(J&&Y&&Y.openClose)this.register({id:ZY.generateUuid(),registerOptions:{documentSelector:J}})}get registrationType(){return b0.DidOpenTextDocumentNotification.type}register(Z){if(super.register(Z),!Z.registerOptions.documentSelector)return;let J=this._client.protocol2CodeConverter.asDocumentSelector(Z.registerOptions.documentSelector);uZ.workspace.textDocuments.forEach((Y)=>{let $=Y.uri.toString();if(this._syncedDocuments.has($))return;if(uZ.languages.match(J,Y)>0&&!this._client.hasDedicatedTextSynchronizationFeature(Y)){let Q=this._client.middleware,z=(G)=>{return this._client.sendNotification(this._type,this._createParams(G))};(Q.didOpen?Q.didOpen(Y,z):z(Y)).catch((G)=>{this._client.error(`Sending document notification ${this._type.method} failed`,G)}),this._syncedDocuments.set($,Y)}})}getTextDocument(Z){return Z}notificationSent(Z,J,Y){this._syncedDocuments.set(Z.uri.toString(),Z),super.notificationSent(Z,J,Y)}}hZ.DidOpenTextDocumentFeature=Y3;class $3 extends m0.TextDocumentEventFeature{constructor(Z,J,Y){super(Z,uZ.workspace.onDidCloseTextDocument,b0.DidCloseTextDocumentNotification.type,()=>Z.middleware.didClose,($)=>Z.code2ProtocolConverter.asCloseTextDocumentParams($),($)=>$,m0.TextDocumentEventFeature.textDocumentFilter);this._syncedDocuments=J,this._pendingTextDocumentChanges=Y}get registrationType(){return b0.DidCloseTextDocumentNotification.type}fillClientCapabilities(Z){(0,m0.ensure)((0,m0.ensure)(Z,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(Z,J){let Y=Z.resolvedTextDocumentSync;if(J&&Y&&Y.openClose)this.register({id:ZY.generateUuid(),registerOptions:{documentSelector:J}})}async callback(Z){await super.callback(Z),this._pendingTextDocumentChanges.delete(Z.uri.toString())}getTextDocument(Z){return Z}notificationSent(Z,J,Y){this._syncedDocuments.delete(Z.uri.toString()),super.notificationSent(Z,J,Y)}unregister(Z){let J=this._selectors.get(Z);super.unregister(Z);let Y=this._selectors.values();this._syncedDocuments.forEach(($)=>{if(uZ.languages.match(J,$)>0&&!this._selectorFilter(Y,$)&&!this._client.hasDedicatedTextSynchronizationFeature($)){let Q=this._client.middleware,z=(G)=>{return this._client.sendNotification(this._type,this._createParams(G))};this._syncedDocuments.delete($.uri.toString()),(Q.didClose?Q.didClose($,z):z($)).catch((G)=>{this._client.error(`Sending document notification ${this._type.method} failed`,G)})}})}}hZ.DidCloseTextDocumentFeature=$3;class Q3 extends m0.DynamicDocumentFeature{constructor(Z,J){super(Z);this._changeData=new Map,this._onNotificationSent=new uZ.EventEmitter,this._onPendingChangeAdded=new uZ.EventEmitter,this._pendingTextDocumentChanges=J,this._syncKind=b0.TextDocumentSyncKind.None}get onNotificationSent(){return this._onNotificationSent.event}get onPendingChangeAdded(){return this._onPendingChangeAdded.event}get syncKind(){return this._syncKind}get registrationType(){return b0.DidChangeTextDocumentNotification.type}fillClientCapabilities(Z){(0,m0.ensure)((0,m0.ensure)(Z,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(Z,J){let Y=Z.resolvedTextDocumentSync;if(J&&Y&&Y.change!==void 0&&Y.change!==b0.TextDocumentSyncKind.None)this.register({id:ZY.generateUuid(),registerOptions:Object.assign({},{documentSelector:J},{syncKind:Y.change})})}register(Z){if(!Z.registerOptions.documentSelector)return;if(!this._listener)this._listener=uZ.workspace.onDidChangeTextDocument(this.callback,this);this._changeData.set(Z.id,{syncKind:Z.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(Z.registerOptions.documentSelector)}),this.updateSyncKind(Z.registerOptions.syncKind)}*getDocumentSelectors(){for(let Z of this._changeData.values())yield Z.documentSelector}async callback(Z){if(Z.contentChanges.length===0)return;let J=Z.document.uri,Y=Z.document.version,$=[];for(let Q of this._changeData.values())if(uZ.languages.match(Q.documentSelector,Z.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(Z.document)){let z=this._client.middleware;if(Q.syncKind===b0.TextDocumentSyncKind.Incremental){let G=async(B)=>{let K=this._client.code2ProtocolConverter.asChangeTextDocumentParams(B,J,Y);await this._client.sendNotification(b0.DidChangeTextDocumentNotification.type,K),this.notificationSent(B.document,b0.DidChangeTextDocumentNotification.type,K)};$.push(z.didChange?z.didChange(Z,(B)=>G(B)):G(Z))}else if(Q.syncKind===b0.TextDocumentSyncKind.Full){let G=async(B)=>{let K=B.document.uri.toString();this._pendingTextDocumentChanges.set(K,B.document),this._onPendingChangeAdded.fire()};$.push(z.didChange?z.didChange(Z,(B)=>G(B)):G(Z))}}return Promise.all($).then(void 0,(Q)=>{throw this._client.error(`Sending document notification ${b0.DidChangeTextDocumentNotification.type.method} failed`,Q),Q})}notificationSent(Z,J,Y){this._onNotificationSent.fire({textDocument:Z,type:J,params:Y})}unregister(Z){if(this._changeData.delete(Z),this._changeData.size===0){if(this._listener)this._listener.dispose(),this._listener=void 0;this._syncKind=b0.TextDocumentSyncKind.None}else{this._syncKind=b0.TextDocumentSyncKind.None;for(let J of this._changeData.values())if(this.updateSyncKind(J.syncKind),this._syncKind===b0.TextDocumentSyncKind.Full)break}}clear(){if(this._pendingTextDocumentChanges.clear(),this._changeData.clear(),this._syncKind=b0.TextDocumentSyncKind.None,this._listener)this._listener.dispose(),this._listener=void 0}getPendingDocumentChanges(Z){if(this._pendingTextDocumentChanges.size===0)return[];let J;if(Z.size===0)J=Array.from(this._pendingTextDocumentChanges.values()),this._pendingTextDocumentChanges.clear();else{J=[];for(let Y of this._pendingTextDocumentChanges)if(!Z.has(Y[0]))J.push(Y[1]),this._pendingTextDocumentChanges.delete(Y[0])}return J}getProvider(Z){for(let J of this._changeData.values())if(uZ.languages.match(J.documentSelector,Z)>0)return{send:(Y)=>{return this.callback(Y)}};return}updateSyncKind(Z){if(this._syncKind===b0.TextDocumentSyncKind.Full)return;switch(Z){case b0.TextDocumentSyncKind.Full:this._syncKind=Z;break;case b0.TextDocumentSyncKind.Incremental:if(this._syncKind===b0.TextDocumentSyncKind.None)this._syncKind=b0.TextDocumentSyncKind.Incremental;break}}}hZ.DidChangeTextDocumentFeature=Q3;class z3 extends m0.TextDocumentEventFeature{constructor(Z){super(Z,uZ.workspace.onWillSaveTextDocument,b0.WillSaveTextDocumentNotification.type,()=>Z.middleware.willSave,(J)=>Z.code2ProtocolConverter.asWillSaveTextDocumentParams(J),(J)=>J.document,(J,Y)=>m0.TextDocumentEventFeature.textDocumentFilter(J,Y.document))}get registrationType(){return b0.WillSaveTextDocumentNotification.type}fillClientCapabilities(Z){let J=(0,m0.ensure)((0,m0.ensure)(Z,"textDocument"),"synchronization");J.willSave=!0}initialize(Z,J){let Y=Z.resolvedTextDocumentSync;if(J&&Y&&Y.willSave)this.register({id:ZY.generateUuid(),registerOptions:{documentSelector:J}})}getTextDocument(Z){return Z.document}}hZ.WillSaveFeature=z3;class G3 extends m0.DynamicDocumentFeature{constructor(Z){super(Z);this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return b0.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(Z){let J=(0,m0.ensure)((0,m0.ensure)(Z,"textDocument"),"synchronization");J.willSaveWaitUntil=!0}initialize(Z,J){let Y=Z.resolvedTextDocumentSync;if(J&&Y&&Y.willSaveWaitUntil)this.register({id:ZY.generateUuid(),registerOptions:{documentSelector:J}})}register(Z){if(!Z.registerOptions.documentSelector)return;if(!this._listener)this._listener=uZ.workspace.onWillSaveTextDocument(this.callback,this);this._selectors.set(Z.id,this._client.protocol2CodeConverter.asDocumentSelector(Z.registerOptions.documentSelector))}callback(Z){if(m0.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),Z.document)&&!this._client.hasDedicatedTextSynchronizationFeature(Z.document)){let J=this._client.middleware,Y=($)=>{return this._client.sendRequest(b0.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams($)).then(async(Q)=>{let z=await this._client.protocol2CodeConverter.asTextEdits(Q);return z===void 0?[]:z})};Z.waitUntil(J.willSaveWaitUntil?J.willSaveWaitUntil(Z,Y):Y(Z))}}unregister(Z){if(this._selectors.delete(Z),this._selectors.size===0&&this._listener)this._listener.dispose(),this._listener=void 0}clear(){if(this._selectors.clear(),this._listener)this._listener.dispose(),this._listener=void 0}}hZ.WillSaveWaitUntilFeature=G3;class X3 extends m0.TextDocumentEventFeature{constructor(Z){super(Z,uZ.workspace.onDidSaveTextDocument,b0.DidSaveTextDocumentNotification.type,()=>Z.middleware.didSave,(J)=>Z.code2ProtocolConverter.asSaveTextDocumentParams(J,this._includeText),(J)=>J,m0.TextDocumentEventFeature.textDocumentFilter);this._includeText=!1}get registrationType(){return b0.DidSaveTextDocumentNotification.type}fillClientCapabilities(Z){(0,m0.ensure)((0,m0.ensure)(Z,"textDocument"),"synchronization").didSave=!0}initialize(Z,J){let Y=Z.resolvedTextDocumentSync;if(J&&Y&&Y.save){let $=typeof Y.save==="boolean"?{includeText:!1}:{includeText:!!Y.save.includeText};this.register({id:ZY.generateUuid(),registerOptions:Object.assign({},{documentSelector:J},$)})}}register(Z){this._includeText=!!Z.registerOptions.includeText,super.register(Z)}getTextDocument(Z){return Z}}hZ.DidSaveTextDocumentFeature=X3});var K3=D((p8)=>{Object.defineProperty(p8,"__esModule",{value:!0});p8.CompletionItemFeature=void 0;var kW=require("vscode"),A0=Z0(),z$=U0(),vW=g0(),gW=[A0.CompletionItemKind.Text,A0.CompletionItemKind.Method,A0.CompletionItemKind.Function,A0.CompletionItemKind.Constructor,A0.CompletionItemKind.Field,A0.CompletionItemKind.Variable,A0.CompletionItemKind.Class,A0.CompletionItemKind.Interface,A0.CompletionItemKind.Module,A0.CompletionItemKind.Property,A0.CompletionItemKind.Unit,A0.CompletionItemKind.Value,A0.CompletionItemKind.Enum,A0.CompletionItemKind.Keyword,A0.CompletionItemKind.Snippet,A0.CompletionItemKind.Color,A0.CompletionItemKind.File,A0.CompletionItemKind.Reference,A0.CompletionItemKind.Folder,A0.CompletionItemKind.EnumMember,A0.CompletionItemKind.Constant,A0.CompletionItemKind.Struct,A0.CompletionItemKind.Event,A0.CompletionItemKind.Operator,A0.CompletionItemKind.TypeParameter];class j3 extends z$.TextDocumentLanguageFeature{constructor(Z){super(Z,A0.CompletionRequest.type);this.labelDetailsSupport=new Map}fillClientCapabilities(Z){let J=(0,z$.ensure)((0,z$.ensure)(Z,"textDocument"),"completion");J.dynamicRegistration=!0,J.contextSupport=!0,J.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[A0.MarkupKind.Markdown,A0.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[A0.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[A0.InsertTextMode.asIs,A0.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},J.insertTextMode=A0.InsertTextMode.adjustIndentation,J.completionItemKind={valueSet:gW},J.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode","data"]}}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.completionProvider);if(!Y)return;this.register({id:vW.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z,J){this.labelDetailsSupport.set(J,!!Z.completionItem?.labelDetailsSupport);let Y=Z.triggerCharacters??[],$=Z.allCommitCharacters,Q=Z.documentSelector,z={provideCompletionItems:(G,B,K,A)=>{let O=this._client,E=this._client.middleware,N=(L,T,C,x)=>{return O.sendRequest(A0.CompletionRequest.type,O.code2ProtocolConverter.asCompletionParams(L,T,C),x).then((_)=>{if(x.isCancellationRequested)return null;return O.protocol2CodeConverter.asCompletionResult(_,$,x)},(_)=>{return O.handleFailedRequest(A0.CompletionRequest.type,x,_,null)})};return E.provideCompletionItem?E.provideCompletionItem(G,B,A,K,N):N(G,B,A,K)},resolveCompletionItem:Z.resolveProvider?(G,B)=>{let K=this._client,A=this._client.middleware,O=(E,N)=>{return K.sendRequest(A0.CompletionResolveRequest.type,K.code2ProtocolConverter.asCompletionItem(E,!!this.labelDetailsSupport.get(J)),N).then((L)=>{if(N.isCancellationRequested)return null;return K.protocol2CodeConverter.asCompletionItem(L)},(L)=>{return K.handleFailedRequest(A0.CompletionResolveRequest.type,N,L,E)})};return A.resolveCompletionItem?A.resolveCompletionItem(G,B,O):O(G,B)}:void 0};return[kW.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(Q),z,...Y),z]}}p8.CompletionItemFeature=j3});var W3=D((m8)=>{Object.defineProperty(m8,"__esModule",{value:!0});m8.HoverFeature=void 0;var dW=require("vscode"),TY=Z0(),G$=U0(),pW=g0();class V3 extends G$.TextDocumentLanguageFeature{constructor(Z){super(Z,TY.HoverRequest.type)}fillClientCapabilities(Z){let J=(0,G$.ensure)((0,G$.ensure)(Z,"textDocument"),"hover");J.dynamicRegistration=!0,J.contentFormat=[TY.MarkupKind.Markdown,TY.MarkupKind.PlainText]}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.hoverProvider);if(!Y)return;this.register({id:pW.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideHover:($,Q,z)=>{let G=this._client,B=(A,O,E)=>{return G.sendRequest(TY.HoverRequest.type,G.code2ProtocolConverter.asTextDocumentPositionParams(A,O),E).then((N)=>{if(E.isCancellationRequested)return null;return G.protocol2CodeConverter.asHover(N)},(N)=>{return G.handleFailedRequest(TY.HoverRequest.type,E,N,null)})},K=G.middleware;return K.provideHover?K.provideHover($,Q,z,B):B($,Q,z)}};return[this.registerProvider(J,Y),Y]}registerProvider(Z,J){return dW.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}m8.HoverFeature=V3});var H3=D((u8)=>{Object.defineProperty(u8,"__esModule",{value:!0});u8.DefinitionFeature=void 0;var mW=require("vscode"),X$=Z0(),B$=U0(),uW=g0();class A3 extends B$.TextDocumentLanguageFeature{constructor(Z){super(Z,X$.DefinitionRequest.type)}fillClientCapabilities(Z){let J=(0,B$.ensure)((0,B$.ensure)(Z,"textDocument"),"definition");J.dynamicRegistration=!0,J.linkSupport=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.definitionProvider);if(!Y)return;this.register({id:uW.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideDefinition:($,Q,z)=>{let G=this._client,B=(A,O,E)=>{return G.sendRequest(X$.DefinitionRequest.type,G.code2ProtocolConverter.asTextDocumentPositionParams(A,O),E).then((N)=>{if(E.isCancellationRequested)return null;return G.protocol2CodeConverter.asDefinitionResult(N,E)},(N)=>{return G.handleFailedRequest(X$.DefinitionRequest.type,E,N,null)})},K=G.middleware;return K.provideDefinition?K.provideDefinition($,Q,z,B):B($,Q,z)}};return[this.registerProvider(J,Y),Y]}registerProvider(Z,J){return mW.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}u8.DefinitionFeature=A3});var L3=D((l8)=>{Object.defineProperty(l8,"__esModule",{value:!0});l8.SignatureHelpFeature=void 0;var O3=require("vscode"),qY=Z0(),j$=U0(),lW=g0();class U3 extends j$.TextDocumentLanguageFeature{constructor(Z){super(Z,qY.SignatureHelpRequest.type)}fillClientCapabilities(Z){let J=(0,j$.ensure)((0,j$.ensure)(Z,"textDocument"),"signatureHelp");J.dynamicRegistration=!0,J.signatureInformation={documentationFormat:[qY.MarkupKind.Markdown,qY.MarkupKind.PlainText]},J.signatureInformation.parameterInformation={labelOffsetSupport:!0},J.signatureInformation.activeParameterSupport=!0,J.contextSupport=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.signatureHelpProvider);if(!Y)return;this.register({id:lW.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J={provideSignatureHelp:(Y,$,Q,z)=>{let G=this._client,B=(A,O,E,N)=>{return G.sendRequest(qY.SignatureHelpRequest.type,G.code2ProtocolConverter.asSignatureHelpParams(A,O,E),N).then((L)=>{if(N.isCancellationRequested)return null;return G.protocol2CodeConverter.asSignatureHelp(L,N)},(L)=>{return G.handleFailedRequest(qY.SignatureHelpRequest.type,N,L,null)})},K=G.middleware;return K.provideSignatureHelp?K.provideSignatureHelp(Y,$,z,Q,B):B(Y,$,z,Q)}};return[this.registerProvider(Z,J),J]}registerProvider(Z,J){let Y=this._client.protocol2CodeConverter.asDocumentSelector(Z.documentSelector);if(Z.retriggerCharacters===void 0){let $=Z.triggerCharacters||[];return O3.languages.registerSignatureHelpProvider(Y,J,...$)}else{let $={triggerCharacters:Z.triggerCharacters||[],retriggerCharacters:Z.retriggerCharacters||[]};return O3.languages.registerSignatureHelpProvider(Y,J,$)}}}l8.SignatureHelpFeature=U3});var E3=D((c8)=>{Object.defineProperty(c8,"__esModule",{value:!0});c8.DocumentHighlightFeature=void 0;var cW=require("vscode"),K$=Z0(),V$=U0(),iW=g0();class N3 extends V$.TextDocumentLanguageFeature{constructor(Z){super(Z,K$.DocumentHighlightRequest.type)}fillClientCapabilities(Z){(0,V$.ensure)((0,V$.ensure)(Z,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.documentHighlightProvider);if(!Y)return;this.register({id:iW.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideDocumentHighlights:($,Q,z)=>{let G=this._client,B=(A,O,E)=>{return G.sendRequest(K$.DocumentHighlightRequest.type,G.code2ProtocolConverter.asTextDocumentPositionParams(A,O),E).then((N)=>{if(E.isCancellationRequested)return null;return G.protocol2CodeConverter.asDocumentHighlights(N,E)},(N)=>{return G.handleFailedRequest(K$.DocumentHighlightRequest.type,E,N,null)})},K=G.middleware;return K.provideDocumentHighlights?K.provideDocumentHighlights($,Q,z,B):B($,Q,z)}};return[cW.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),Y),Y]}}c8.DocumentHighlightFeature=N3});var A$=D((C9)=>{Object.defineProperty(C9,"__esModule",{value:!0});C9.DocumentSymbolFeature=C9.SupportedSymbolTags=C9.SupportedSymbolKinds=void 0;var nW=require("vscode"),P0=Z0(),W$=U0(),aW=g0();C9.SupportedSymbolKinds=[P0.SymbolKind.File,P0.SymbolKind.Module,P0.SymbolKind.Namespace,P0.SymbolKind.Package,P0.SymbolKind.Class,P0.SymbolKind.Method,P0.SymbolKind.Property,P0.SymbolKind.Field,P0.SymbolKind.Constructor,P0.SymbolKind.Enum,P0.SymbolKind.Interface,P0.SymbolKind.Function,P0.SymbolKind.Variable,P0.SymbolKind.Constant,P0.SymbolKind.String,P0.SymbolKind.Number,P0.SymbolKind.Boolean,P0.SymbolKind.Array,P0.SymbolKind.Object,P0.SymbolKind.Key,P0.SymbolKind.Null,P0.SymbolKind.EnumMember,P0.SymbolKind.Struct,P0.SymbolKind.Event,P0.SymbolKind.Operator,P0.SymbolKind.TypeParameter];C9.SupportedSymbolTags=[P0.SymbolTag.Deprecated];class w3 extends W$.TextDocumentLanguageFeature{constructor(Z){super(Z,P0.DocumentSymbolRequest.type)}fillClientCapabilities(Z){let J=(0,W$.ensure)((0,W$.ensure)(Z,"textDocument"),"documentSymbol");J.dynamicRegistration=!0,J.symbolKind={valueSet:C9.SupportedSymbolKinds},J.hierarchicalDocumentSymbolSupport=!0,J.tagSupport={valueSet:C9.SupportedSymbolTags},J.labelSupport=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.documentSymbolProvider);if(!Y)return;this.register({id:aW.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideDocumentSymbols:(Q,z)=>{let G=this._client,B=async(A,O)=>{try{let E=await G.sendRequest(P0.DocumentSymbolRequest.type,G.code2ProtocolConverter.asDocumentSymbolParams(A),O);if(O.isCancellationRequested||E===void 0||E===null)return null;if(E.length===0)return[];else{let N=E[0];if(P0.DocumentSymbol.is(N))return await G.protocol2CodeConverter.asDocumentSymbols(E,O);else return await G.protocol2CodeConverter.asSymbolInformations(E,O)}}catch(E){return G.handleFailedRequest(P0.DocumentSymbolRequest.type,O,E,null)}},K=G.middleware;return K.provideDocumentSymbols?K.provideDocumentSymbols(Q,z,B):B(Q,z)}},$=Z.label!==void 0?{label:Z.label}:void 0;return[nW.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),Y,$),Y]}}C9.DocumentSymbolFeature=w3});var M3=D((i8)=>{Object.defineProperty(i8,"__esModule",{value:!0});i8.WorkspaceSymbolFeature=void 0;var sW=require("vscode"),CY=Z0(),H$=U0(),F3=A$(),rW=g0();class P3 extends H$.WorkspaceFeature{constructor(Z){super(Z,CY.WorkspaceSymbolRequest.type)}fillClientCapabilities(Z){let J=(0,H$.ensure)((0,H$.ensure)(Z,"workspace"),"symbol");J.dynamicRegistration=!0,J.symbolKind={valueSet:F3.SupportedSymbolKinds},J.tagSupport={valueSet:F3.SupportedSymbolTags},J.resolveSupport={properties:["location.range"]}}initialize(Z){if(!Z.workspaceSymbolProvider)return;this.register({id:rW.generateUuid(),registerOptions:Z.workspaceSymbolProvider===!0?{workDoneProgress:!1}:Z.workspaceSymbolProvider})}registerLanguageProvider(Z){let J={provideWorkspaceSymbols:(Y,$)=>{let Q=this._client,z=(B,K)=>{return Q.sendRequest(CY.WorkspaceSymbolRequest.type,{query:B},K).then((A)=>{if(K.isCancellationRequested)return null;return Q.protocol2CodeConverter.asSymbolInformations(A,K)},(A)=>{return Q.handleFailedRequest(CY.WorkspaceSymbolRequest.type,K,A,null)})},G=Q.middleware;return G.provideWorkspaceSymbols?G.provideWorkspaceSymbols(Y,$,z):z(Y,$)},resolveWorkspaceSymbol:Z.resolveProvider===!0?(Y,$)=>{let Q=this._client,z=(B,K)=>{return Q.sendRequest(CY.WorkspaceSymbolResolveRequest.type,Q.code2ProtocolConverter.asWorkspaceSymbol(B),K).then((A)=>{if(K.isCancellationRequested)return null;return Q.protocol2CodeConverter.asSymbolInformation(A)},(A)=>{return Q.handleFailedRequest(CY.WorkspaceSymbolResolveRequest.type,K,A,null)})},G=Q.middleware;return G.resolveWorkspaceSymbol?G.resolveWorkspaceSymbol(Y,$,z):z(Y,$)}:void 0};return[sW.languages.registerWorkspaceSymbolProvider(J),J]}}i8.WorkspaceSymbolFeature=P3});var T3=D((n8)=>{Object.defineProperty(n8,"__esModule",{value:!0});n8.ReferencesFeature=void 0;var oW=require("vscode"),O$=Z0(),U$=U0(),tW=g0();class I3 extends U$.TextDocumentLanguageFeature{constructor(Z){super(Z,O$.ReferencesRequest.type)}fillClientCapabilities(Z){(0,U$.ensure)((0,U$.ensure)(Z,"textDocument"),"references").dynamicRegistration=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.referencesProvider);if(!Y)return;this.register({id:tW.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideReferences:($,Q,z,G)=>{let B=this._client,K=(O,E,N,L)=>{return B.sendRequest(O$.ReferencesRequest.type,B.code2ProtocolConverter.asReferenceParams(O,E,N),L).then((T)=>{if(L.isCancellationRequested)return null;return B.protocol2CodeConverter.asReferences(T,L)},(T)=>{return B.handleFailedRequest(O$.ReferencesRequest.type,L,T,null)})},A=B.middleware;return A.provideReferences?A.provideReferences($,Q,z,G,K):K($,Q,z,G)}};return[this.registerProvider(J,Y),Y]}registerProvider(Z,J){return oW.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}n8.ReferencesFeature=I3});var C3=D((a8)=>{Object.defineProperty(a8,"__esModule",{value:!0});a8.CodeActionFeature=void 0;var eW=require("vscode"),lZ=Z0(),ZA=g0(),L$=U0();class q3 extends L$.TextDocumentLanguageFeature{constructor(Z){super(Z,lZ.CodeActionRequest.type)}fillClientCapabilities(Z){let J=(0,L$.ensure)((0,L$.ensure)(Z,"textDocument"),"codeAction");J.dynamicRegistration=!0,J.isPreferredSupport=!0,J.disabledSupport=!0,J.dataSupport=!0,J.resolveSupport={properties:["edit"]},J.codeActionLiteralSupport={codeActionKind:{valueSet:[lZ.CodeActionKind.Empty,lZ.CodeActionKind.QuickFix,lZ.CodeActionKind.Refactor,lZ.CodeActionKind.RefactorExtract,lZ.CodeActionKind.RefactorInline,lZ.CodeActionKind.RefactorRewrite,lZ.CodeActionKind.Source,lZ.CodeActionKind.SourceOrganizeImports]}},J.honorsChangeAnnotations=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.codeActionProvider);if(!Y)return;this.register({id:ZA.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideCodeActions:($,Q,z,G)=>{let B=this._client,K=async(O,E,N,L)=>{let T={textDocument:B.code2ProtocolConverter.asTextDocumentIdentifier(O),range:B.code2ProtocolConverter.asRange(E),context:B.code2ProtocolConverter.asCodeActionContextSync(N)};return B.sendRequest(lZ.CodeActionRequest.type,T,L).then((C)=>{if(L.isCancellationRequested||C===null||C===void 0)return null;return B.protocol2CodeConverter.asCodeActionResult(C,L)},(C)=>{return B.handleFailedRequest(lZ.CodeActionRequest.type,L,C,null)})},A=B.middleware;return A.provideCodeActions?A.provideCodeActions($,Q,z,G,K):K($,Q,z,G)},resolveCodeAction:Z.resolveProvider?($,Q)=>{let z=this._client,G=this._client.middleware,B=async(K,A)=>{return z.sendRequest(lZ.CodeActionResolveRequest.type,z.code2ProtocolConverter.asCodeActionSync(K),A).then((O)=>{if(A.isCancellationRequested)return K;return z.protocol2CodeConverter.asCodeAction(O,A)},(O)=>{return z.handleFailedRequest(lZ.CodeActionResolveRequest.type,A,O,K)})};return G.resolveCodeAction?G.resolveCodeAction($,Q,B):B($,Q)}:void 0};return[eW.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),Y,Z.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(Z.codeActionKinds)}:void 0),Y]}}a8.CodeActionFeature=q3});var b3=D((s8)=>{Object.defineProperty(s8,"__esModule",{value:!0});s8.CodeLensFeature=void 0;var S3=require("vscode"),JY=Z0(),JA=g0(),SY=U0();class D3 extends SY.TextDocumentLanguageFeature{constructor(Z){super(Z,JY.CodeLensRequest.type)}fillClientCapabilities(Z){(0,SY.ensure)((0,SY.ensure)(Z,"textDocument"),"codeLens").dynamicRegistration=!0,(0,SY.ensure)((0,SY.ensure)(Z,"workspace"),"codeLens").refreshSupport=!0}initialize(Z,J){this._client.onRequest(JY.CodeLensRefreshRequest.type,async()=>{for(let Q of this.getAllProviders())Q.onDidChangeCodeLensEmitter.fire()});let $=this.getRegistrationOptions(J,Z.codeLensProvider);if(!$)return;this.register({id:JA.generateUuid(),registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y=new S3.EventEmitter,$={onDidChangeCodeLenses:Y.event,provideCodeLenses:(Q,z)=>{let G=this._client,B=(A,O)=>{return G.sendRequest(JY.CodeLensRequest.type,G.code2ProtocolConverter.asCodeLensParams(A),O).then((E)=>{if(O.isCancellationRequested)return null;return G.protocol2CodeConverter.asCodeLenses(E,O)},(E)=>{return G.handleFailedRequest(JY.CodeLensRequest.type,O,E,null)})},K=G.middleware;return K.provideCodeLenses?K.provideCodeLenses(Q,z,B):B(Q,z)},resolveCodeLens:Z.resolveProvider?(Q,z)=>{let G=this._client,B=(A,O)=>{return G.sendRequest(JY.CodeLensResolveRequest.type,G.code2ProtocolConverter.asCodeLens(A),O).then((E)=>{if(O.isCancellationRequested)return A;return G.protocol2CodeConverter.asCodeLens(E)},(E)=>{return G.handleFailedRequest(JY.CodeLensResolveRequest.type,O,E,A)})},K=G.middleware;return K.resolveCodeLens?K.resolveCodeLens(Q,z,B):B(Q,z)}:void 0};return[S3.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),$),{provider:$,onDidChangeCodeLensEmitter:Y}]}}s8.CodeLensFeature=D3});var x3=D((BJ)=>{Object.defineProperty(BJ,"__esModule",{value:!0});BJ.DocumentOnTypeFormattingFeature=BJ.DocumentRangeFormattingFeature=BJ.DocumentFormattingFeature=void 0;var r8=require("vscode"),V9=Z0(),N$=g0(),p9=U0(),YY;(function(Z){function J(Y){let $=r8.workspace.getConfiguration("files",Y);return{trimTrailingWhitespace:$.get("trimTrailingWhitespace"),trimFinalNewlines:$.get("trimFinalNewlines"),insertFinalNewline:$.get("insertFinalNewline")}}Z.fromConfiguration=J})(YY||(YY={}));class y3 extends p9.TextDocumentLanguageFeature{constructor(Z){super(Z,V9.DocumentFormattingRequest.type)}fillClientCapabilities(Z){(0,p9.ensure)((0,p9.ensure)(Z,"textDocument"),"formatting").dynamicRegistration=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.documentFormattingProvider);if(!Y)return;this.register({id:N$.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideDocumentFormattingEdits:($,Q,z)=>{let G=this._client,B=(A,O,E)=>{let N={textDocument:G.code2ProtocolConverter.asTextDocumentIdentifier(A),options:G.code2ProtocolConverter.asFormattingOptions(O,YY.fromConfiguration(A))};return G.sendRequest(V9.DocumentFormattingRequest.type,N,E).then((L)=>{if(E.isCancellationRequested)return null;return G.protocol2CodeConverter.asTextEdits(L,E)},(L)=>{return G.handleFailedRequest(V9.DocumentFormattingRequest.type,E,L,null)})},K=G.middleware;return K.provideDocumentFormattingEdits?K.provideDocumentFormattingEdits($,Q,z,B):B($,Q,z)}};return[r8.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),Y),Y]}}BJ.DocumentFormattingFeature=y3;class R3 extends p9.TextDocumentLanguageFeature{constructor(Z){super(Z,V9.DocumentRangeFormattingRequest.type)}fillClientCapabilities(Z){let J=(0,p9.ensure)((0,p9.ensure)(Z,"textDocument"),"rangeFormatting");J.dynamicRegistration=!0,J.rangesSupport=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.documentRangeFormattingProvider);if(!Y)return;this.register({id:N$.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideDocumentRangeFormattingEdits:($,Q,z,G)=>{let B=this._client,K=(O,E,N,L)=>{let T={textDocument:B.code2ProtocolConverter.asTextDocumentIdentifier(O),range:B.code2ProtocolConverter.asRange(E),options:B.code2ProtocolConverter.asFormattingOptions(N,YY.fromConfiguration(O))};return B.sendRequest(V9.DocumentRangeFormattingRequest.type,T,L).then((C)=>{if(L.isCancellationRequested)return null;return B.protocol2CodeConverter.asTextEdits(C,L)},(C)=>{return B.handleFailedRequest(V9.DocumentRangeFormattingRequest.type,L,C,null)})},A=B.middleware;return A.provideDocumentRangeFormattingEdits?A.provideDocumentRangeFormattingEdits($,Q,z,G,K):K($,Q,z,G)}};if(Z.rangesSupport)Y.provideDocumentRangesFormattingEdits=($,Q,z,G)=>{let B=this._client,K=(O,E,N,L)=>{let T={textDocument:B.code2ProtocolConverter.asTextDocumentIdentifier(O),ranges:B.code2ProtocolConverter.asRanges(E),options:B.code2ProtocolConverter.asFormattingOptions(N,YY.fromConfiguration(O))};return B.sendRequest(V9.DocumentRangesFormattingRequest.type,T,L).then((C)=>{if(L.isCancellationRequested)return null;return B.protocol2CodeConverter.asTextEdits(C,L)},(C)=>{return B.handleFailedRequest(V9.DocumentRangesFormattingRequest.type,L,C,null)})},A=B.middleware;return A.provideDocumentRangesFormattingEdits?A.provideDocumentRangesFormattingEdits($,Q,z,G,K):K($,Q,z,G)};return[r8.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),Y),Y]}}BJ.DocumentRangeFormattingFeature=R3;class h3 extends p9.TextDocumentLanguageFeature{constructor(Z){super(Z,V9.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(Z){(0,p9.ensure)((0,p9.ensure)(Z,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.documentOnTypeFormattingProvider);if(!Y)return;this.register({id:N$.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideOnTypeFormattingEdits:(Q,z,G,B,K)=>{let A=this._client,O=(N,L,T,C,x)=>{let _={textDocument:A.code2ProtocolConverter.asTextDocumentIdentifier(N),position:A.code2ProtocolConverter.asPosition(L),ch:T,options:A.code2ProtocolConverter.asFormattingOptions(C,YY.fromConfiguration(N))};return A.sendRequest(V9.DocumentOnTypeFormattingRequest.type,_,x).then((d)=>{if(x.isCancellationRequested)return null;return A.protocol2CodeConverter.asTextEdits(d,x)},(d)=>{return A.handleFailedRequest(V9.DocumentOnTypeFormattingRequest.type,x,d,null)})},E=A.middleware;return E.provideOnTypeFormattingEdits?E.provideOnTypeFormattingEdits(Q,z,G,B,K,O):O(Q,z,G,B,K)}},$=Z.moreTriggerCharacter||[];return[r8.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),Y,Z.firstTriggerCharacter,...$),Y]}}BJ.DocumentOnTypeFormattingFeature=h3});var k3=D((o8)=>{Object.defineProperty(o8,"__esModule",{value:!0});o8.RenameFeature=void 0;var YA=require("vscode"),EJ=Z0(),$A=g0(),_3=rZ(),E$=U0();class f3 extends E$.TextDocumentLanguageFeature{constructor(Z){super(Z,EJ.RenameRequest.type)}fillClientCapabilities(Z){let J=(0,E$.ensure)((0,E$.ensure)(Z,"textDocument"),"rename");J.dynamicRegistration=!0,J.prepareSupport=!0,J.prepareSupportDefaultBehavior=EJ.PrepareSupportDefaultBehavior.Identifier,J.honorsChangeAnnotations=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.renameProvider);if(!Y)return;if(_3.boolean(Z.renameProvider))Y.prepareProvider=!1;this.register({id:$A.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideRenameEdits:($,Q,z,G)=>{let B=this._client,K=(O,E,N,L)=>{let T={textDocument:B.code2ProtocolConverter.asTextDocumentIdentifier(O),position:B.code2ProtocolConverter.asPosition(E),newName:N};return B.sendRequest(EJ.RenameRequest.type,T,L).then((C)=>{if(L.isCancellationRequested)return null;return B.protocol2CodeConverter.asWorkspaceEdit(C,L)},(C)=>{return B.handleFailedRequest(EJ.RenameRequest.type,L,C,null,!1)})},A=B.middleware;return A.provideRenameEdits?A.provideRenameEdits($,Q,z,G,K):K($,Q,z,G)},prepareRename:Z.prepareProvider?($,Q,z)=>{let G=this._client,B=(A,O,E)=>{let N={textDocument:G.code2ProtocolConverter.asTextDocumentIdentifier(A),position:G.code2ProtocolConverter.asPosition(O)};return G.sendRequest(EJ.PrepareRenameRequest.type,N,E).then((L)=>{if(E.isCancellationRequested)return null;if(EJ.Range.is(L))return G.protocol2CodeConverter.asRange(L);else if(this.isDefaultBehavior(L))return L.defaultBehavior===!0?null:Promise.reject(Error("The element can't be renamed."));else if(L&&EJ.Range.is(L.range))return{range:G.protocol2CodeConverter.asRange(L.range),placeholder:L.placeholder};return Promise.reject(Error("The element can't be renamed."))},(L)=>{if(typeof L.message==="string")throw Error(L.message);else throw Error("The element can't be renamed.")})},K=G.middleware;return K.prepareRename?K.prepareRename($,Q,z,B):B($,Q,z)}:void 0};return[this.registerProvider(J,Y),Y]}registerProvider(Z,J){return YA.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}isDefaultBehavior(Z){let J=Z;return J&&_3.boolean(J.defaultBehavior)}}o8.RenameFeature=f3});var g3=D((t8)=>{Object.defineProperty(t8,"__esModule",{value:!0});t8.DocumentLinkFeature=void 0;var QA=require("vscode"),DY=Z0(),w$=U0(),zA=g0();class v3 extends w$.TextDocumentLanguageFeature{constructor(Z){super(Z,DY.DocumentLinkRequest.type)}fillClientCapabilities(Z){let J=(0,w$.ensure)((0,w$.ensure)(Z,"textDocument"),"documentLink");J.dynamicRegistration=!0,J.tooltipSupport=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.documentLinkProvider);if(!Y)return;this.register({id:zA.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideDocumentLinks:($,Q)=>{let z=this._client,G=(K,A)=>{return z.sendRequest(DY.DocumentLinkRequest.type,z.code2ProtocolConverter.asDocumentLinkParams(K),A).then((O)=>{if(A.isCancellationRequested)return null;return z.protocol2CodeConverter.asDocumentLinks(O,A)},(O)=>{return z.handleFailedRequest(DY.DocumentLinkRequest.type,A,O,null)})},B=z.middleware;return B.provideDocumentLinks?B.provideDocumentLinks($,Q,G):G($,Q)},resolveDocumentLink:Z.resolveProvider?($,Q)=>{let z=this._client,G=(K,A)=>{return z.sendRequest(DY.DocumentLinkResolveRequest.type,z.code2ProtocolConverter.asDocumentLink(K),A).then((O)=>{if(A.isCancellationRequested)return K;return z.protocol2CodeConverter.asDocumentLink(O)},(O)=>{return z.handleFailedRequest(DY.DocumentLinkResolveRequest.type,A,O,K)})},B=z.middleware;return B.resolveDocumentLink?B.resolveDocumentLink($,Q,G):G($,Q)}:void 0};return[QA.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),Y),Y]}}t8.DocumentLinkFeature=v3});var m3=D((e8)=>{Object.defineProperty(e8,"__esModule",{value:!0});e8.ExecuteCommandFeature=void 0;var GA=require("vscode"),F$=Z0(),XA=g0(),d3=U0();class p3{constructor(Z){this._client=Z,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return F$.ExecuteCommandRequest.type}fillClientCapabilities(Z){(0,d3.ensure)((0,d3.ensure)(Z,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(Z){if(!Z.executeCommandProvider)return;this.register({id:XA.generateUuid(),registerOptions:Object.assign({},Z.executeCommandProvider)})}register(Z){let J=this._client,Y=J.middleware,$=(Q,z)=>{let G={command:Q,arguments:z};return J.sendRequest(F$.ExecuteCommandRequest.type,G).then(void 0,(B)=>{return J.handleFailedRequest(F$.ExecuteCommandRequest.type,void 0,B,void 0)})};if(Z.registerOptions.commands){let Q=[];for(let z of Z.registerOptions.commands)Q.push(GA.commands.registerCommand(z,(...G)=>{return Y.executeCommand?Y.executeCommand(z,G,$):$(z,G)}));this._commands.set(Z.id,Q)}}unregister(Z){let J=this._commands.get(Z);if(J)J.forEach((Y)=>Y.dispose())}clear(){this._commands.forEach((Z)=>{Z.forEach((J)=>J.dispose())}),this._commands.clear()}}e8.ExecuteCommandFeature=p3});var l3=D((J6)=>{Object.defineProperty(J6,"__esModule",{value:!0});J6.FileSystemWatcherFeature=void 0;var BA=require("vscode"),wJ=Z0(),Z6=U0();class u3{constructor(Z,J){this._client=Z,this._notifyFileEvent=J,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return wJ.DidChangeWatchedFilesNotification.type}fillClientCapabilities(Z){(0,Z6.ensure)((0,Z6.ensure)(Z,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,Z6.ensure)((0,Z6.ensure)(Z,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(Z,J){}register(Z){if(!Array.isArray(Z.registerOptions.watchers))return;let J=[];for(let Y of Z.registerOptions.watchers){let $=this._client.protocol2CodeConverter.asGlobPattern(Y.globPattern);if($===void 0)continue;let Q=!0,z=!0,G=!0;if(Y.kind!==void 0&&Y.kind!==null)Q=(Y.kind&wJ.WatchKind.Create)!==0,z=(Y.kind&wJ.WatchKind.Change)!==0,G=(Y.kind&wJ.WatchKind.Delete)!==0;let B=BA.workspace.createFileSystemWatcher($,!Q,!z,!G);this.hookListeners(B,Q,z,G,J),J.push(B)}this._watchers.set(Z.id,J)}registerRaw(Z,J){let Y=[];for(let $ of J)this.hookListeners($,!0,!0,!0,Y);this._watchers.set(Z,Y)}hookListeners(Z,J,Y,$,Q){if(J)Z.onDidCreate((z)=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(z),type:wJ.FileChangeType.Created}),null,Q);if(Y)Z.onDidChange((z)=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(z),type:wJ.FileChangeType.Changed}),null,Q);if($)Z.onDidDelete((z)=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(z),type:wJ.FileChangeType.Deleted}),null,Q)}unregister(Z){let J=this._watchers.get(Z);if(J)for(let Y of J)Y.dispose()}clear(){this._watchers.forEach((Z)=>{for(let J of Z)J.dispose()}),this._watchers.clear()}}J6.FileSystemWatcherFeature=u3});var i3=D((Y6)=>{Object.defineProperty(Y6,"__esModule",{value:!0});Y6.ColorProviderFeature=void 0;var jA=require("vscode"),bY=Z0(),P$=U0();class c3 extends P$.TextDocumentLanguageFeature{constructor(Z){super(Z,bY.DocumentColorRequest.type)}fillClientCapabilities(Z){(0,P$.ensure)((0,P$.ensure)(Z,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(Z,J){let[Y,$]=this.getRegistration(J,Z.colorProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideColorPresentations:($,Q,z)=>{let G=this._client,B=(A,O,E)=>{let N={color:A,textDocument:G.code2ProtocolConverter.asTextDocumentIdentifier(O.document),range:G.code2ProtocolConverter.asRange(O.range)};return G.sendRequest(bY.ColorPresentationRequest.type,N,E).then((L)=>{if(E.isCancellationRequested)return null;return this._client.protocol2CodeConverter.asColorPresentations(L,E)},(L)=>{return G.handleFailedRequest(bY.ColorPresentationRequest.type,E,L,null)})},K=G.middleware;return K.provideColorPresentations?K.provideColorPresentations($,Q,z,B):B($,Q,z)},provideDocumentColors:($,Q)=>{let z=this._client,G=(K,A)=>{let O={textDocument:z.code2ProtocolConverter.asTextDocumentIdentifier(K)};return z.sendRequest(bY.DocumentColorRequest.type,O,A).then((E)=>{if(A.isCancellationRequested)return null;return this._client.protocol2CodeConverter.asColorInformations(E,A)},(E)=>{return z.handleFailedRequest(bY.DocumentColorRequest.type,A,E,null)})},B=z.middleware;return B.provideDocumentColors?B.provideDocumentColors($,Q,G):G($,Q)}};return[jA.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),Y),Y]}}Y6.ColorProviderFeature=c3});var a3=D(($6)=>{Object.defineProperty($6,"__esModule",{value:!0});$6.ImplementationFeature=void 0;var KA=require("vscode"),M$=Z0(),I$=U0();class n3 extends I$.TextDocumentLanguageFeature{constructor(Z){super(Z,M$.ImplementationRequest.type)}fillClientCapabilities(Z){let J=(0,I$.ensure)((0,I$.ensure)(Z,"textDocument"),"implementation");J.dynamicRegistration=!0,J.linkSupport=!0}initialize(Z,J){let[Y,$]=this.getRegistration(J,Z.implementationProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideImplementation:($,Q,z)=>{let G=this._client,B=(A,O,E)=>{return G.sendRequest(M$.ImplementationRequest.type,G.code2ProtocolConverter.asTextDocumentPositionParams(A,O),E).then((N)=>{if(E.isCancellationRequested)return null;return G.protocol2CodeConverter.asDefinitionResult(N,E)},(N)=>{return G.handleFailedRequest(M$.ImplementationRequest.type,E,N,null)})},K=G.middleware;return K.provideImplementation?K.provideImplementation($,Q,z,B):B($,Q,z)}};return[this.registerProvider(J,Y),Y]}registerProvider(Z,J){return KA.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}$6.ImplementationFeature=n3});var r3=D((Q6)=>{Object.defineProperty(Q6,"__esModule",{value:!0});Q6.TypeDefinitionFeature=void 0;var VA=require("vscode"),T$=Z0(),yY=U0();class s3 extends yY.TextDocumentLanguageFeature{constructor(Z){super(Z,T$.TypeDefinitionRequest.type)}fillClientCapabilities(Z){(0,yY.ensure)((0,yY.ensure)(Z,"textDocument"),"typeDefinition").dynamicRegistration=!0;let J=(0,yY.ensure)((0,yY.ensure)(Z,"textDocument"),"typeDefinition");J.dynamicRegistration=!0,J.linkSupport=!0}initialize(Z,J){let[Y,$]=this.getRegistration(J,Z.typeDefinitionProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideTypeDefinition:($,Q,z)=>{let G=this._client,B=(A,O,E)=>{return G.sendRequest(T$.TypeDefinitionRequest.type,G.code2ProtocolConverter.asTextDocumentPositionParams(A,O),E).then((N)=>{if(E.isCancellationRequested)return null;return G.protocol2CodeConverter.asDefinitionResult(N,E)},(N)=>{return G.handleFailedRequest(T$.TypeDefinitionRequest.type,E,N,null)})},K=G.middleware;return K.provideTypeDefinition?K.provideTypeDefinition($,Q,z,B):B($,Q,z)}};return[this.registerProvider(J,Y),Y]}registerProvider(Z,J){return VA.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}Q6.TypeDefinitionFeature=s3});var t3=D(($Y)=>{Object.defineProperty($Y,"__esModule",{value:!0});$Y.WorkspaceFoldersFeature=$Y.arrayDiff=void 0;var WA=g0(),z6=require("vscode"),RY=Z0();function q$(Z,J){if(Z===void 0||Z===null)return;return Z[J]}function C$(Z,J){return Z.filter((Y)=>J.indexOf(Y)<0)}$Y.arrayDiff=C$;class o3{constructor(Z){this._client=Z,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return RY.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(Z){let J=z6.workspace.workspaceFolders;if(this.initializeWithFolders(J),J===void 0)Z.workspaceFolders=null;else Z.workspaceFolders=J.map((Y)=>this.asProtocol(Y))}initializeWithFolders(Z){this._initialFolders=Z}fillClientCapabilities(Z){Z.workspace=Z.workspace||{},Z.workspace.workspaceFolders=!0}initialize(Z){let J=this._client;J.onRequest(RY.WorkspaceFoldersRequest.type,(Q)=>{let z=()=>{let B=z6.workspace.workspaceFolders;if(B===void 0)return null;return B.map((A)=>{return this.asProtocol(A)})},G=J.middleware.workspace;return G&&G.workspaceFolders?G.workspaceFolders(Q,z):z(Q)});let Y=q$(q$(q$(Z,"workspace"),"workspaceFolders"),"changeNotifications"),$;if(typeof Y==="string")$=Y;else if(Y===!0)$=WA.generateUuid();if($)this.register({id:$,registerOptions:void 0})}sendInitialEvent(Z){let J;if(this._initialFolders&&Z){let Y=C$(this._initialFolders,Z),$=C$(Z,this._initialFolders);if($.length>0||Y.length>0)J=this.doSendEvent($,Y)}else if(this._initialFolders)J=this.doSendEvent([],this._initialFolders);else if(Z)J=this.doSendEvent(Z,[]);if(J!==void 0)J.catch((Y)=>{this._client.error(`Sending notification ${RY.DidChangeWorkspaceFoldersNotification.type.method} failed`,Y)})}doSendEvent(Z,J){let Y={event:{added:Z.map(($)=>this.asProtocol($)),removed:J.map(($)=>this.asProtocol($))}};return this._client.sendNotification(RY.DidChangeWorkspaceFoldersNotification.type,Y)}register(Z){let J=Z.id,Y=this._client,$=z6.workspace.onDidChangeWorkspaceFolders((Q)=>{let z=(K)=>{return this.doSendEvent(K.added,K.removed)},G=Y.middleware.workspace;(G&&G.didChangeWorkspaceFolders?G.didChangeWorkspaceFolders(Q,z):z(Q)).catch((K)=>{this._client.error(`Sending notification ${RY.DidChangeWorkspaceFoldersNotification.type.method} failed`,K)})});this._listeners.set(J,$),this.sendInitialEvent(z6.workspace.workspaceFolders)}unregister(Z){let J=this._listeners.get(Z);if(J===void 0)return;this._listeners.delete(Z),J.dispose()}clear(){for(let Z of this._listeners.values())Z.dispose();this._listeners.clear()}asProtocol(Z){if(Z===void 0)return null;return{uri:this._client.code2ProtocolConverter.asUri(Z.uri),name:Z.name}}}$Y.WorkspaceFoldersFeature=o3});var JB=D((G6)=>{Object.defineProperty(G6,"__esModule",{value:!0});G6.FoldingRangeFeature=void 0;var e3=require("vscode"),FJ=Z0(),hY=U0();class ZB extends hY.TextDocumentLanguageFeature{constructor(Z){super(Z,FJ.FoldingRangeRequest.type)}fillClientCapabilities(Z){let J=(0,hY.ensure)((0,hY.ensure)(Z,"textDocument"),"foldingRange");J.dynamicRegistration=!0,J.rangeLimit=5000,J.lineFoldingOnly=!0,J.foldingRangeKind={valueSet:[FJ.FoldingRangeKind.Comment,FJ.FoldingRangeKind.Imports,FJ.FoldingRangeKind.Region]},J.foldingRange={collapsedText:!1},(0,hY.ensure)((0,hY.ensure)(Z,"workspace"),"foldingRange").refreshSupport=!0}initialize(Z,J){this._client.onRequest(FJ.FoldingRangeRefreshRequest.type,async()=>{for(let Q of this.getAllProviders())Q.onDidChangeFoldingRange.fire()});let[Y,$]=this.getRegistration(J,Z.foldingRangeProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y=new e3.EventEmitter,$={onDidChangeFoldingRanges:Y.event,provideFoldingRanges:(Q,z,G)=>{let B=this._client,K=(O,E,N)=>{let L={textDocument:B.code2ProtocolConverter.asTextDocumentIdentifier(O)};return B.sendRequest(FJ.FoldingRangeRequest.type,L,N).then((T)=>{if(N.isCancellationRequested)return null;return B.protocol2CodeConverter.asFoldingRanges(T,N)},(T)=>{return B.handleFailedRequest(FJ.FoldingRangeRequest.type,N,T,null)})},A=B.middleware;return A.provideFoldingRanges?A.provideFoldingRanges(Q,z,G,K):K(Q,z,G)}};return[e3.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),$),{provider:$,onDidChangeFoldingRange:Y}]}}G6.FoldingRangeFeature=ZB});var $B=D((X6)=>{Object.defineProperty(X6,"__esModule",{value:!0});X6.DeclarationFeature=void 0;var AA=require("vscode"),S$=Z0(),D$=U0();class YB extends D$.TextDocumentLanguageFeature{constructor(Z){super(Z,S$.DeclarationRequest.type)}fillClientCapabilities(Z){let J=(0,D$.ensure)((0,D$.ensure)(Z,"textDocument"),"declaration");J.dynamicRegistration=!0,J.linkSupport=!0}initialize(Z,J){let[Y,$]=this.getRegistration(J,Z.declarationProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideDeclaration:($,Q,z)=>{let G=this._client,B=(A,O,E)=>{return G.sendRequest(S$.DeclarationRequest.type,G.code2ProtocolConverter.asTextDocumentPositionParams(A,O),E).then((N)=>{if(E.isCancellationRequested)return null;return G.protocol2CodeConverter.asDeclarationResult(N,E)},(N)=>{return G.handleFailedRequest(S$.DeclarationRequest.type,E,N,null)})},K=G.middleware;return K.provideDeclaration?K.provideDeclaration($,Q,z,B):B($,Q,z)}};return[this.registerProvider(J,Y),Y]}registerProvider(Z,J){return AA.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}X6.DeclarationFeature=YB});var zB=D((B6)=>{Object.defineProperty(B6,"__esModule",{value:!0});B6.SelectionRangeFeature=void 0;var HA=require("vscode"),b$=Z0(),y$=U0();class QB extends y$.TextDocumentLanguageFeature{constructor(Z){super(Z,b$.SelectionRangeRequest.type)}fillClientCapabilities(Z){let J=(0,y$.ensure)((0,y$.ensure)(Z,"textDocument"),"selectionRange");J.dynamicRegistration=!0}initialize(Z,J){let[Y,$]=this.getRegistration(J,Z.selectionRangeProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideSelectionRanges:($,Q,z)=>{let G=this._client,B=async(A,O,E)=>{let N={textDocument:G.code2ProtocolConverter.asTextDocumentIdentifier(A),positions:G.code2ProtocolConverter.asPositionsSync(O,E)};return G.sendRequest(b$.SelectionRangeRequest.type,N,E).then((L)=>{if(E.isCancellationRequested)return null;return G.protocol2CodeConverter.asSelectionRanges(L,E)},(L)=>{return G.handleFailedRequest(b$.SelectionRangeRequest.type,E,L,null)})},K=G.middleware;return K.provideSelectionRanges?K.provideSelectionRanges($,Q,z,B):B($,Q,z)}};return[this.registerProvider(J,Y),Y]}registerProvider(Z,J){return HA.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}B6.SelectionRangeFeature=QB});var BB=D((j6)=>{Object.defineProperty(j6,"__esModule",{value:!0});j6.ProgressFeature=void 0;var GB=Z0(),OA=i7();function UA(Z,J){if(Z[J]===void 0)Z[J]=Object.create(null);return Z[J]}class XB{constructor(Z){this._client=Z,this.activeParts=new Set}getState(){return{kind:"window",id:GB.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(Z){UA(Z,"window").workDoneProgress=!0}initialize(){let Z=this._client,J=($)=>{this.activeParts.delete($)},Y=($)=>{this.activeParts.add(new OA.ProgressPart(this._client,$.token,J))};Z.onRequest(GB.WorkDoneProgressCreateRequest.type,Y)}clear(){for(let Z of this.activeParts)Z.done();this.activeParts.clear()}}j6.ProgressFeature=XB});var VB=D((K6)=>{Object.defineProperty(K6,"__esModule",{value:!0});K6.CallHierarchyFeature=void 0;var LA=require("vscode"),PJ=Z0(),R$=U0();class jB{constructor(Z){this.client=Z,this.middleware=Z.middleware}prepareCallHierarchy(Z,J,Y){let $=this.client,Q=this.middleware,z=(G,B,K)=>{let A=$.code2ProtocolConverter.asTextDocumentPositionParams(G,B);return $.sendRequest(PJ.CallHierarchyPrepareRequest.type,A,K).then((O)=>{if(K.isCancellationRequested)return null;return $.protocol2CodeConverter.asCallHierarchyItems(O,K)},(O)=>{return $.handleFailedRequest(PJ.CallHierarchyPrepareRequest.type,K,O,null)})};return Q.prepareCallHierarchy?Q.prepareCallHierarchy(Z,J,Y,z):z(Z,J,Y)}provideCallHierarchyIncomingCalls(Z,J){let Y=this.client,$=this.middleware,Q=(z,G)=>{let B={item:Y.code2ProtocolConverter.asCallHierarchyItem(z)};return Y.sendRequest(PJ.CallHierarchyIncomingCallsRequest.type,B,G).then((K)=>{if(G.isCancellationRequested)return null;return Y.protocol2CodeConverter.asCallHierarchyIncomingCalls(K,G)},(K)=>{return Y.handleFailedRequest(PJ.CallHierarchyIncomingCallsRequest.type,G,K,null)})};return $.provideCallHierarchyIncomingCalls?$.provideCallHierarchyIncomingCalls(Z,J,Q):Q(Z,J)}provideCallHierarchyOutgoingCalls(Z,J){let Y=this.client,$=this.middleware,Q=(z,G)=>{let B={item:Y.code2ProtocolConverter.asCallHierarchyItem(z)};return Y.sendRequest(PJ.CallHierarchyOutgoingCallsRequest.type,B,G).then((K)=>{if(G.isCancellationRequested)return null;return Y.protocol2CodeConverter.asCallHierarchyOutgoingCalls(K,G)},(K)=>{return Y.handleFailedRequest(PJ.CallHierarchyOutgoingCallsRequest.type,G,K,null)})};return $.provideCallHierarchyOutgoingCalls?$.provideCallHierarchyOutgoingCalls(Z,J,Q):Q(Z,J)}}class KB extends R$.TextDocumentLanguageFeature{constructor(Z){super(Z,PJ.CallHierarchyPrepareRequest.type)}fillClientCapabilities(Z){let J=Z,Y=(0,R$.ensure)((0,R$.ensure)(J,"textDocument"),"callHierarchy");Y.dynamicRegistration=!0}initialize(Z,J){let[Y,$]=this.getRegistration(J,Z.callHierarchyProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=this._client,Y=new jB(J);return[LA.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z.documentSelector),Y),Y]}}K6.CallHierarchyFeature=KB});var AB=D((W6)=>{Object.defineProperty(W6,"__esModule",{value:!0});W6.SemanticTokensFeature=void 0;var V6=require("vscode"),$0=Z0(),xY=U0(),NA=rZ();class WB extends xY.TextDocumentLanguageFeature{constructor(Z){super(Z,$0.SemanticTokensRegistrationType.type)}fillClientCapabilities(Z){let J=(0,xY.ensure)((0,xY.ensure)(Z,"textDocument"),"semanticTokens");J.dynamicRegistration=!0,J.tokenTypes=[$0.SemanticTokenTypes.namespace,$0.SemanticTokenTypes.type,$0.SemanticTokenTypes.class,$0.SemanticTokenTypes.enum,$0.SemanticTokenTypes.interface,$0.SemanticTokenTypes.struct,$0.SemanticTokenTypes.typeParameter,$0.SemanticTokenTypes.parameter,$0.SemanticTokenTypes.variable,$0.SemanticTokenTypes.property,$0.SemanticTokenTypes.enumMember,$0.SemanticTokenTypes.event,$0.SemanticTokenTypes.function,$0.SemanticTokenTypes.method,$0.SemanticTokenTypes.macro,$0.SemanticTokenTypes.keyword,$0.SemanticTokenTypes.modifier,$0.SemanticTokenTypes.comment,$0.SemanticTokenTypes.string,$0.SemanticTokenTypes.number,$0.SemanticTokenTypes.regexp,$0.SemanticTokenTypes.operator,$0.SemanticTokenTypes.decorator],J.tokenModifiers=[$0.SemanticTokenModifiers.declaration,$0.SemanticTokenModifiers.definition,$0.SemanticTokenModifiers.readonly,$0.SemanticTokenModifiers.static,$0.SemanticTokenModifiers.deprecated,$0.SemanticTokenModifiers.abstract,$0.SemanticTokenModifiers.async,$0.SemanticTokenModifiers.modification,$0.SemanticTokenModifiers.documentation,$0.SemanticTokenModifiers.defaultLibrary],J.formats=[$0.TokenFormat.Relative],J.requests={range:!0,full:{delta:!0}},J.multilineTokenSupport=!1,J.overlappingTokenSupport=!1,J.serverCancelSupport=!0,J.augmentsSyntaxTokens=!0,(0,xY.ensure)((0,xY.ensure)(Z,"workspace"),"semanticTokens").refreshSupport=!0}initialize(Z,J){this._client.onRequest($0.SemanticTokensRefreshRequest.type,async()=>{for(let z of this.getAllProviders())z.onDidChangeSemanticTokensEmitter.fire()});let[$,Q]=this.getRegistration(J,Z.semanticTokensProvider);if(!$||!Q)return;this.register({id:$,registerOptions:Q})}registerLanguageProvider(Z){let J=Z.documentSelector,Y=NA.boolean(Z.full)?Z.full:Z.full!==void 0,$=Z.full!==void 0&&typeof Z.full!=="boolean"&&Z.full.delta===!0,Q=new V6.EventEmitter,z=Y?{onDidChangeSemanticTokens:Q.event,provideDocumentSemanticTokens:(N,L)=>{let T=this._client,C=T.middleware,x=(_,d)=>{let f={textDocument:T.code2ProtocolConverter.asTextDocumentIdentifier(_)};return T.sendRequest($0.SemanticTokensRequest.type,f,d).then((B0)=>{if(d.isCancellationRequested)return null;return T.protocol2CodeConverter.asSemanticTokens(B0,d)},(B0)=>{return T.handleFailedRequest($0.SemanticTokensRequest.type,d,B0,null)})};return C.provideDocumentSemanticTokens?C.provideDocumentSemanticTokens(N,L,x):x(N,L)},provideDocumentSemanticTokensEdits:$?(N,L,T)=>{let C=this._client,x=C.middleware,_=(d,f,B0)=>{let t={textDocument:C.code2ProtocolConverter.asTextDocumentIdentifier(d),previousResultId:f};return C.sendRequest($0.SemanticTokensDeltaRequest.type,t,B0).then(async(u)=>{if(B0.isCancellationRequested)return null;if($0.SemanticTokens.is(u))return await C.protocol2CodeConverter.asSemanticTokens(u,B0);else return await C.protocol2CodeConverter.asSemanticTokensEdits(u,B0)},(u)=>{return C.handleFailedRequest($0.SemanticTokensDeltaRequest.type,B0,u,null)})};return x.provideDocumentSemanticTokensEdits?x.provideDocumentSemanticTokensEdits(N,L,T,_):_(N,L,T)}:void 0}:void 0,B=Z.range===!0?{provideDocumentRangeSemanticTokens:(N,L,T)=>{let C=this._client,x=C.middleware,_=(d,f,B0)=>{let t={textDocument:C.code2ProtocolConverter.asTextDocumentIdentifier(d),range:C.code2ProtocolConverter.asRange(f)};return C.sendRequest($0.SemanticTokensRangeRequest.type,t,B0).then((u)=>{if(B0.isCancellationRequested)return null;return C.protocol2CodeConverter.asSemanticTokens(u,B0)},(u)=>{return C.handleFailedRequest($0.SemanticTokensRangeRequest.type,B0,u,null)})};return x.provideDocumentRangeSemanticTokens?x.provideDocumentRangeSemanticTokens(N,L,T,_):_(N,L,T)}}:void 0,K=[],A=this._client,O=A.protocol2CodeConverter.asSemanticTokensLegend(Z.legend),E=A.protocol2CodeConverter.asDocumentSelector(J);if(z!==void 0)K.push(V6.languages.registerDocumentSemanticTokensProvider(E,z,O));if(B!==void 0)K.push(V6.languages.registerDocumentRangeSemanticTokensProvider(E,B,O));return[new V6.Disposable(()=>K.forEach((N)=>N.dispose())),{range:B,full:z,onDidChangeSemanticTokensEmitter:Q}]}}W6.SemanticTokensFeature=WB});var PB=D((xZ)=>{Object.defineProperty(xZ,"__esModule",{value:!0});xZ.WillDeleteFilesFeature=xZ.WillRenameFilesFeature=xZ.WillCreateFilesFeature=xZ.DidDeleteFilesFeature=xZ.DidRenameFilesFeature=xZ.DidCreateFilesFeature=void 0;var Y9=require("vscode"),EA=_8(),m9=Z0(),wA=g0();function HB(Z,J){if(Z[J]===void 0)Z[J]={};return Z[J]}function FA(Z,J){return Z[J]}function OB(Z,J,Y){Z[J]=Y}class MJ{constructor(Z,J,Y,$,Q){this._client=Z,this._event=J,this._registrationType=Y,this._clientCapability=$,this._serverCapability=Q,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(Z){let J=HB(HB(Z,"workspace"),"fileOperations");OB(J,"dynamicRegistration",!0),OB(J,this._clientCapability,!0)}initialize(Z){let J=Z.workspace?.fileOperations,Y=J!==void 0?FA(J,this._serverCapability):void 0;if(Y?.filters!==void 0)try{this.register({id:wA.generateUuid(),registerOptions:{filters:Y.filters}})}catch($){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${$}`)}}register(Z){if(!this._listener)this._listener=this._event(this.send,this);let J=Z.registerOptions.filters.map((Y)=>{let $=new EA.Minimatch(Y.pattern.glob,MJ.asMinimatchOptions(Y.pattern.options));if(!$.makeRe())throw Error(`Invalid pattern ${Y.pattern.glob}!`);return{scheme:Y.scheme,matcher:$,kind:Y.pattern.matches}});this._filters.set(Z.id,J)}unregister(Z){if(this._filters.delete(Z),this._filters.size===0&&this._listener)this._listener.dispose(),this._listener=void 0}clear(){if(this._filters.clear(),this._listener)this._listener.dispose(),this._listener=void 0}getFileType(Z){return MJ.getFileType(Z)}async filter(Z,J){let Y=await Promise.all(Z.files.map(async(Q)=>{let z=J(Q),G=z.fsPath.replace(/\\/g,"/");for(let B of this._filters.values())for(let K of B){if(K.scheme!==void 0&&K.scheme!==z.scheme)continue;if(K.matcher.match(G)){if(K.kind===void 0)return!0;let A=await this.getFileType(z);if(A===void 0)return this._client.error(`Failed to determine file type for ${z.toString()}.`),!0;if(A===Y9.FileType.File&&K.kind===m9.FileOperationPatternKind.file||A===Y9.FileType.Directory&&K.kind===m9.FileOperationPatternKind.folder)return!0}else if(K.kind===m9.FileOperationPatternKind.folder){if(await MJ.getFileType(z)===Y9.FileType.Directory&&K.matcher.match(`${G}/`))return!0}}return!1})),$=Z.files.filter((Q,z)=>Y[z]);return{...Z,files:$}}static async getFileType(Z){try{return(await Y9.workspace.fs.stat(Z)).type}catch(J){return}}static asMinimatchOptions(Z){let J={dot:!0};if(Z?.ignoreCase===!0)J.nocase=!0;return J}}class h$ extends MJ{constructor(Z,J,Y,$,Q,z,G){super(Z,J,Y,$,Q);this._notificationType=Y,this._accessUri=z,this._createParams=G}async send(Z){let J=await this.filter(Z,this._accessUri);if(J.files.length){let Y=async($)=>{return this._client.sendNotification(this._notificationType,this._createParams($))};return this.doSend(J,Y)}}}class x$ extends h${constructor(){super(...arguments);this._fsPathFileTypes=new Map}async getFileType(Z){let J=Z.fsPath;if(this._fsPathFileTypes.has(J))return this._fsPathFileTypes.get(J);let Y=await MJ.getFileType(Z);if(Y)this._fsPathFileTypes.set(J,Y);return Y}async cacheFileTypes(Z,J){await this.filter(Z,J)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(Z){if(super.unregister(Z),this.filterSize()===0&&this._willListener)this._willListener.dispose(),this._willListener=void 0}clear(){if(super.clear(),this._willListener)this._willListener.dispose(),this._willListener=void 0}}class UB extends h${constructor(Z){super(Z,Y9.workspace.onDidCreateFiles,m9.DidCreateFilesNotification.type,"didCreate","didCreate",(J)=>J,Z.code2ProtocolConverter.asDidCreateFilesParams)}doSend(Z,J){let Y=this._client.middleware.workspace;return Y?.didCreateFiles?Y.didCreateFiles(Z,J):J(Z)}}xZ.DidCreateFilesFeature=UB;class LB extends x${constructor(Z){super(Z,Y9.workspace.onDidRenameFiles,m9.DidRenameFilesNotification.type,"didRename","didRename",(J)=>J.oldUri,Z.code2ProtocolConverter.asDidRenameFilesParams)}register(Z){if(!this._willListener)this._willListener=Y9.workspace.onWillRenameFiles(this.willRename,this);super.register(Z)}willRename(Z){Z.waitUntil(this.cacheFileTypes(Z,(J)=>J.oldUri))}doSend(Z,J){this.clearFileTypeCache();let Y=this._client.middleware.workspace;return Y?.didRenameFiles?Y.didRenameFiles(Z,J):J(Z)}}xZ.DidRenameFilesFeature=LB;class NB extends x${constructor(Z){super(Z,Y9.workspace.onDidDeleteFiles,m9.DidDeleteFilesNotification.type,"didDelete","didDelete",(J)=>J,Z.code2ProtocolConverter.asDidDeleteFilesParams)}register(Z){if(!this._willListener)this._willListener=Y9.workspace.onWillDeleteFiles(this.willDelete,this);super.register(Z)}willDelete(Z){Z.waitUntil(this.cacheFileTypes(Z,(J)=>J))}doSend(Z,J){this.clearFileTypeCache();let Y=this._client.middleware.workspace;return Y?.didDeleteFiles?Y.didDeleteFiles(Z,J):J(Z)}}xZ.DidDeleteFilesFeature=NB;class A6 extends MJ{constructor(Z,J,Y,$,Q,z,G){super(Z,J,Y,$,Q);this._requestType=Y,this._accessUri=z,this._createParams=G}async send(Z){let J=this.waitUntil(Z);Z.waitUntil(J)}async waitUntil(Z){let J=await this.filter(Z,this._accessUri);if(J.files.length){let Y=($)=>{return this._client.sendRequest(this._requestType,this._createParams($),$.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit)};return this.doSend(J,Y)}else return}}class EB extends A6{constructor(Z){super(Z,Y9.workspace.onWillCreateFiles,m9.WillCreateFilesRequest.type,"willCreate","willCreate",(J)=>J,Z.code2ProtocolConverter.asWillCreateFilesParams)}doSend(Z,J){let Y=this._client.middleware.workspace;return Y?.willCreateFiles?Y.willCreateFiles(Z,J):J(Z)}}xZ.WillCreateFilesFeature=EB;class wB extends A6{constructor(Z){super(Z,Y9.workspace.onWillRenameFiles,m9.WillRenameFilesRequest.type,"willRename","willRename",(J)=>J.oldUri,Z.code2ProtocolConverter.asWillRenameFilesParams)}doSend(Z,J){let Y=this._client.middleware.workspace;return Y?.willRenameFiles?Y.willRenameFiles(Z,J):J(Z)}}xZ.WillRenameFilesFeature=wB;class FB extends A6{constructor(Z){super(Z,Y9.workspace.onWillDeleteFiles,m9.WillDeleteFilesRequest.type,"willDelete","willDelete",(J)=>J,Z.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(Z,J){let Y=this._client.middleware.workspace;return Y?.willDeleteFiles?Y.willDeleteFiles(Z,J):J(Z)}}xZ.WillDeleteFilesFeature=FB});var IB=D((H6)=>{Object.defineProperty(H6,"__esModule",{value:!0});H6.LinkedEditingFeature=void 0;var PA=require("vscode"),_$=Z0(),f$=U0();class MB extends f$.TextDocumentLanguageFeature{constructor(Z){super(Z,_$.LinkedEditingRangeRequest.type)}fillClientCapabilities(Z){let J=(0,f$.ensure)((0,f$.ensure)(Z,"textDocument"),"linkedEditingRange");J.dynamicRegistration=!0}initialize(Z,J){let[Y,$]=this.getRegistration(J,Z.linkedEditingRangeProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideLinkedEditingRanges:($,Q,z)=>{let G=this._client,B=(A,O,E)=>{return G.sendRequest(_$.LinkedEditingRangeRequest.type,G.code2ProtocolConverter.asTextDocumentPositionParams(A,O),E).then((N)=>{if(E.isCancellationRequested)return null;return G.protocol2CodeConverter.asLinkedEditingRanges(N,E)},(N)=>{return G.handleFailedRequest(_$.LinkedEditingRangeRequest.type,E,N,null)})},K=G.middleware;return K.provideLinkedEditingRange?K.provideLinkedEditingRange($,Q,z,B):B($,Q,z)}};return[this.registerProvider(J,Y),Y]}registerProvider(Z,J){return PA.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}H6.LinkedEditingFeature=MB});var CB=D((O6)=>{Object.defineProperty(O6,"__esModule",{value:!0});O6.TypeHierarchyFeature=void 0;var MA=require("vscode"),IJ=Z0(),k$=U0();class TB{constructor(Z){this.client=Z,this.middleware=Z.middleware}prepareTypeHierarchy(Z,J,Y){let $=this.client,Q=this.middleware,z=(G,B,K)=>{let A=$.code2ProtocolConverter.asTextDocumentPositionParams(G,B);return $.sendRequest(IJ.TypeHierarchyPrepareRequest.type,A,K).then((O)=>{if(K.isCancellationRequested)return null;return $.protocol2CodeConverter.asTypeHierarchyItems(O,K)},(O)=>{return $.handleFailedRequest(IJ.TypeHierarchyPrepareRequest.type,K,O,null)})};return Q.prepareTypeHierarchy?Q.prepareTypeHierarchy(Z,J,Y,z):z(Z,J,Y)}provideTypeHierarchySupertypes(Z,J){let Y=this.client,$=this.middleware,Q=(z,G)=>{let B={item:Y.code2ProtocolConverter.asTypeHierarchyItem(z)};return Y.sendRequest(IJ.TypeHierarchySupertypesRequest.type,B,G).then((K)=>{if(G.isCancellationRequested)return null;return Y.protocol2CodeConverter.asTypeHierarchyItems(K,G)},(K)=>{return Y.handleFailedRequest(IJ.TypeHierarchySupertypesRequest.type,G,K,null)})};return $.provideTypeHierarchySupertypes?$.provideTypeHierarchySupertypes(Z,J,Q):Q(Z,J)}provideTypeHierarchySubtypes(Z,J){let Y=this.client,$=this.middleware,Q=(z,G)=>{let B={item:Y.code2ProtocolConverter.asTypeHierarchyItem(z)};return Y.sendRequest(IJ.TypeHierarchySubtypesRequest.type,B,G).then((K)=>{if(G.isCancellationRequested)return null;return Y.protocol2CodeConverter.asTypeHierarchyItems(K,G)},(K)=>{return Y.handleFailedRequest(IJ.TypeHierarchySubtypesRequest.type,G,K,null)})};return $.provideTypeHierarchySubtypes?$.provideTypeHierarchySubtypes(Z,J,Q):Q(Z,J)}}class qB extends k$.TextDocumentLanguageFeature{constructor(Z){super(Z,IJ.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(Z){let J=(0,k$.ensure)((0,k$.ensure)(Z,"textDocument"),"typeHierarchy");J.dynamicRegistration=!0}initialize(Z,J){let[Y,$]=this.getRegistration(J,Z.typeHierarchyProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=this._client,Y=new TB(J);return[MA.languages.registerTypeHierarchyProvider(J.protocol2CodeConverter.asDocumentSelector(Z.documentSelector),Y),Y]}}O6.TypeHierarchyFeature=qB});var bB=D((L6)=>{Object.defineProperty(L6,"__esModule",{value:!0});L6.InlineValueFeature=void 0;var SB=require("vscode"),U6=Z0(),_Y=U0();class DB extends _Y.TextDocumentLanguageFeature{constructor(Z){super(Z,U6.InlineValueRequest.type)}fillClientCapabilities(Z){(0,_Y.ensure)((0,_Y.ensure)(Z,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,_Y.ensure)((0,_Y.ensure)(Z,"workspace"),"inlineValue").refreshSupport=!0}initialize(Z,J){this._client.onRequest(U6.InlineValueRefreshRequest.type,async()=>{for(let Q of this.getAllProviders())Q.onDidChangeInlineValues.fire()});let[Y,$]=this.getRegistration(J,Z.inlineValueProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y=new SB.EventEmitter,$={onDidChangeInlineValues:Y.event,provideInlineValues:(Q,z,G,B)=>{let K=this._client,A=(E,N,L,T)=>{let C={textDocument:K.code2ProtocolConverter.asTextDocumentIdentifier(E),range:K.code2ProtocolConverter.asRange(N),context:K.code2ProtocolConverter.asInlineValueContext(L)};return K.sendRequest(U6.InlineValueRequest.type,C,T).then((x)=>{if(T.isCancellationRequested)return null;return K.protocol2CodeConverter.asInlineValues(x,T)},(x)=>{return K.handleFailedRequest(U6.InlineValueRequest.type,T,x,null)})},O=K.middleware;return O.provideInlineValues?O.provideInlineValues(Q,z,G,B,A):A(Q,z,G,B)}};return[this.registerProvider(J,$),{provider:$,onDidChangeInlineValues:Y}]}registerProvider(Z,J){return SB.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}L6.InlineValueFeature=DB});var hB=D((N6)=>{Object.defineProperty(N6,"__esModule",{value:!0});N6.InlayHintsFeature=void 0;var yB=require("vscode"),QY=Z0(),fY=U0();class RB extends fY.TextDocumentLanguageFeature{constructor(Z){super(Z,QY.InlayHintRequest.type)}fillClientCapabilities(Z){let J=(0,fY.ensure)((0,fY.ensure)(Z,"textDocument"),"inlayHint");J.dynamicRegistration=!0,J.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,fY.ensure)((0,fY.ensure)(Z,"workspace"),"inlayHint").refreshSupport=!0}initialize(Z,J){this._client.onRequest(QY.InlayHintRefreshRequest.type,async()=>{for(let Q of this.getAllProviders())Q.onDidChangeInlayHints.fire()});let[Y,$]=this.getRegistration(J,Z.inlayHintProvider);if(!Y||!$)return;this.register({id:Y,registerOptions:$})}registerLanguageProvider(Z){let J=Z.documentSelector,Y=new yB.EventEmitter,$={onDidChangeInlayHints:Y.event,provideInlayHints:(Q,z,G)=>{let B=this._client,K=async(O,E,N)=>{let L={textDocument:B.code2ProtocolConverter.asTextDocumentIdentifier(O),range:B.code2ProtocolConverter.asRange(E)};try{let T=await B.sendRequest(QY.InlayHintRequest.type,L,N);if(N.isCancellationRequested)return null;return B.protocol2CodeConverter.asInlayHints(T,N)}catch(T){return B.handleFailedRequest(QY.InlayHintRequest.type,N,T,null)}},A=B.middleware;return A.provideInlayHints?A.provideInlayHints(Q,z,G,K):K(Q,z,G)}};return $.resolveInlayHint=Z.resolveProvider===!0?(Q,z)=>{let G=this._client,B=async(A,O)=>{try{let E=await G.sendRequest(QY.InlayHintResolveRequest.type,G.code2ProtocolConverter.asInlayHint(A),O);if(O.isCancellationRequested)return null;let N=G.protocol2CodeConverter.asInlayHint(E,O);return O.isCancellationRequested?null:N}catch(E){return G.handleFailedRequest(QY.InlayHintResolveRequest.type,O,E,null)}},K=G.middleware;return K.resolveInlayHint?K.resolveInlayHint(Q,z,B):B(Q,z)}:void 0,[this.registerProvider(J,$),{provider:$,onDidChangeInlayHints:Y}]}registerProvider(Z,J){return yB.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J)}}N6.InlayHintsFeature=RB});var _B=D((E6)=>{Object.defineProperty(E6,"__esModule",{value:!0});E6.InlineCompletionItemFeature=void 0;var IA=require("vscode"),v$=Z0(),g$=U0(),TA=g0();class xB extends g$.TextDocumentLanguageFeature{constructor(Z){super(Z,v$.InlineCompletionRequest.type)}fillClientCapabilities(Z){let J=(0,g$.ensure)((0,g$.ensure)(Z,"textDocument"),"inlineCompletion");J.dynamicRegistration=!0}initialize(Z,J){let Y=this.getRegistrationOptions(J,Z.inlineCompletionProvider);if(!Y)return;this.register({id:TA.generateUuid(),registerOptions:Y})}registerLanguageProvider(Z){let J=Z.documentSelector,Y={provideInlineCompletionItems:($,Q,z,G)=>{let B=this._client,K=this._client.middleware,A=(O,E,N,L)=>{return B.sendRequest(v$.InlineCompletionRequest.type,B.code2ProtocolConverter.asInlineCompletionParams(O,E,N),L).then((T)=>{if(L.isCancellationRequested)return null;return B.protocol2CodeConverter.asInlineCompletionResult(T,L)},(T)=>{return B.handleFailedRequest(v$.InlineCompletionRequest.type,L,T,null)})};return K.provideInlineCompletionItems?K.provideInlineCompletionItems($,Q,z,G,A):A($,Q,z,G)}};return[IA.languages.registerInlineCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(J),Y),Y]}}E6.InlineCompletionItemFeature=xB});var u$=D((GZ)=>{Object.defineProperty(GZ,"__esModule",{value:!0});GZ.ProposedFeatures=GZ.BaseLanguageClient=GZ.MessageTransports=GZ.SuspendMode=GZ.State=GZ.CloseAction=GZ.ErrorAction=GZ.RevealOutputChannelOn=void 0;var I0=require("vscode"),k=Z0(),qA=X5(),CA=K5(),A9=rZ(),w6=q8(),fB=g0(),SA=i7(),W9=U0(),DA=Y$(),kB=o5(),vB=J3(),zY=B3(),bA=K3(),yA=W3(),RA=H3(),hA=L3(),xA=E3(),_A=A$(),fA=M3(),kA=T3(),vA=C3(),gA=b3(),d$=x3(),dA=k3(),pA=g3(),mA=m3(),uA=l3(),lA=i3(),cA=a3(),iA=r3(),nA=t3(),aA=JB(),sA=$B(),rA=zB(),oA=BB(),tA=VB(),eA=AB(),GY=PB(),ZH=IB(),JH=CB(),YH=bB(),$H=hB(),QH=_B(),TJ;(function(Z){Z[Z.Debug=0]="Debug",Z[Z.Info=1]="Info",Z[Z.Warn=2]="Warn",Z[Z.Error=3]="Error",Z[Z.Never=4]="Never"})(TJ||(GZ.RevealOutputChannelOn=TJ={}));var vY;(function(Z){Z[Z.Continue=1]="Continue",Z[Z.Shutdown=2]="Shutdown"})(vY||(GZ.ErrorAction=vY={}));var jJ;(function(Z){Z[Z.DoNotRestart=1]="DoNotRestart",Z[Z.Restart=2]="Restart"})(jJ||(GZ.CloseAction=jJ={}));var kY;(function(Z){Z[Z.Stopped=1]="Stopped",Z[Z.Starting=3]="Starting",Z[Z.Running=2]="Running"})(kY||(GZ.State=kY={}));var gB;(function(Z){Z.off="off",Z.on="on"})(gB||(GZ.SuspendMode=gB={}));var p$;(function(Z){function J(Y){if(Y===void 0||Y===null)return!1;if(typeof Y==="boolean"||typeof Y==="object"&&Y!==null&&A9.stringArray(Y.enabledCommands))return Y;return!1}Z.sanitizeIsTrusted=J})(p$||(p$={}));class pB{constructor(Z,J){this.client=Z,this.maxRestartCount=J,this.restarts=[]}error(Z,J,Y){if(Y&&Y<=3)return{action:vY.Continue};return{action:vY.Shutdown}}closed(){if(this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount)return{action:jJ.Restart};else if(this.restarts[this.restarts.length-1]-this.restarts[0]<=180000)return{action:jJ.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`};else return this.restarts.shift(),{action:jJ.Restart}}}var X0;(function(Z){Z.Initial="initial",Z.Starting="starting",Z.StartFailed="startFailed",Z.Running="running",Z.Stopping="stopping",Z.Stopped="stopped"})(X0||(X0={}));var dB;(function(Z){function J(Y){return Y&&k.MessageReader.is(Y.reader)&&k.MessageWriter.is(Y.writer)}Z.is=J})(dB||(GZ.MessageTransports=dB={}));class qJ{constructor(Z,J,Y){this._traceFormat=k.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new w6.Semaphore(1),this._id=Z,this._name=J,Y=Y||{};let $={isTrusted:!1,supportHtml:!1};if(Y.markdown!==void 0)$.isTrusted=p$.sanitizeIsTrusted(Y.markdown.isTrusted),$.supportHtml=Y.markdown.supportHtml===!0;if(this._clientOptions={documentSelector:Y.documentSelector??[],synchronize:Y.synchronize??{},diagnosticCollectionName:Y.diagnosticCollectionName,outputChannelName:Y.outputChannelName??this._name,revealOutputChannelOn:Y.revealOutputChannelOn??TJ.Error,stdioEncoding:Y.stdioEncoding??"utf8",initializationOptions:Y.initializationOptions,initializationFailedHandler:Y.initializationFailedHandler,progressOnInitialization:!!Y.progressOnInitialization,errorHandler:Y.errorHandler??this.createDefaultErrorHandler(Y.connectionOptions?.maxRestartCount),middleware:Y.middleware??{},uriConverters:Y.uriConverters,workspaceFolder:Y.workspaceFolder,connectionOptions:Y.connectionOptions,markdown:$,diagnosticPullOptions:Y.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:Y.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=X0.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,Y.outputChannel)this._outputChannel=Y.outputChannel,this._disposeOutputChannel=!1;else this._outputChannel=void 0,this._disposeOutputChannel=!0;this._traceOutputChannel=Y.traceOutputChannel,this._diagnostics=void 0,this._pendingOpenNotifications=new Set,this._pendingChangeSemaphore=new w6.Semaphore(1),this._pendingChangeDelayer=new w6.Delayer(250),this._fileEvents=[],this._fileEventDelayer=new w6.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new k.Emitter,this._stateChangeEmitter=new k.Emitter,this._trace=k.Trace.Off,this._tracer={log:(Q,z)=>{if(A9.string(Q))this.logTrace(Q,z);else this.logObjectTrace(Q)}},this._c2p=qA.createConverter(Y.uriConverters?Y.uriConverters.code2Protocol:void 0),this._p2c=CA.createConverter(Y.uriConverters?Y.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){if(!this._outputChannel)this._outputChannel=I0.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name);return this._outputChannel}get traceOutputChannel(){if(this._traceOutputChannel)return this._traceOutputChannel;return this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(Z){let J=this.getPublicState();this._state=Z;let Y=this.getPublicState();if(Y!==J)this._stateChangeEmitter.fire({oldState:J,newState:Y})}getPublicState(){switch(this.$state){case X0.Starting:return kY.Starting;case X0.Running:return kY.Running;default:return kY.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(Z,...J){if(this.$state===X0.StartFailed||this.$state===X0.Stopping||this.$state===X0.Stopped)return Promise.reject(new k.ResponseError(k.ErrorCodes.ConnectionInactive,"Client is not running"));let Y=await this.$start();if(this._didChangeTextDocumentFeature.syncKind===k.TextDocumentSyncKind.Full)await this.sendPendingFullTextDocumentChanges(Y);let $=this._clientOptions.middleware?.sendRequest;if($!==void 0){let Q=void 0,z=void 0;if(J.length===1)if(k.CancellationToken.is(J[0]))z=J[0];else Q=J[0];else if(J.length===2)Q=J[0],z=J[1];return $(Z,Q,z,(G,B,K)=>{let A=[];if(B!==void 0)A.push(B);if(K!==void 0)A.push(K);return Y.sendRequest(G,...A)})}else return Y.sendRequest(Z,...J)}onRequest(Z,J){let Y=typeof Z==="string"?Z:Z.method;this._requestHandlers.set(Y,J);let $=this.activeConnection(),Q;if($!==void 0)this._requestDisposables.set(Y,$.onRequest(Z,J)),Q={dispose:()=>{let z=this._requestDisposables.get(Y);if(z!==void 0)z.dispose(),this._requestDisposables.delete(Y)}};else this._pendingRequestHandlers.set(Y,J),Q={dispose:()=>{this._pendingRequestHandlers.delete(Y);let z=this._requestDisposables.get(Y);if(z!==void 0)z.dispose(),this._requestDisposables.delete(Y)}};return{dispose:()=>{this._requestHandlers.delete(Y),Q.dispose()}}}async sendNotification(Z,J){if(this.$state===X0.StartFailed||this.$state===X0.Stopping||this.$state===X0.Stopped)return Promise.reject(new k.ResponseError(k.ErrorCodes.ConnectionInactive,"Client is not running"));let Y=this._didChangeTextDocumentFeature.syncKind===k.TextDocumentSyncKind.Full,$;if(Y&&typeof Z!=="string"&&Z.method===k.DidOpenTextDocumentNotification.method)$=J?.textDocument.uri,this._pendingOpenNotifications.add($);let Q=await this.$start();if(Y)await this.sendPendingFullTextDocumentChanges(Q);if($!==void 0)this._pendingOpenNotifications.delete($);let z=this._clientOptions.middleware?.sendNotification;return z?z(Z,Q.sendNotification.bind(Q),J):Q.sendNotification(Z,J)}onNotification(Z,J){let Y=typeof Z==="string"?Z:Z.method;this._notificationHandlers.set(Y,J);let $=this.activeConnection(),Q;if($!==void 0)this._notificationDisposables.set(Y,$.onNotification(Z,J)),Q={dispose:()=>{let z=this._notificationDisposables.get(Y);if(z!==void 0)z.dispose(),this._notificationDisposables.delete(Y)}};else this._pendingNotificationHandlers.set(Y,J),Q={dispose:()=>{this._pendingNotificationHandlers.delete(Y);let z=this._notificationDisposables.get(Y);if(z!==void 0)z.dispose(),this._notificationDisposables.delete(Y)}};return{dispose:()=>{this._notificationHandlers.delete(Y),Q.dispose()}}}async sendProgress(Z,J,Y){if(this.$state===X0.StartFailed||this.$state===X0.Stopping||this.$state===X0.Stopped)return Promise.reject(new k.ResponseError(k.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(Z,J,Y)}catch($){throw this.error(`Sending progress for token ${J} failed.`,$),$}}onProgress(Z,J,Y){this._progressHandlers.set(J,{type:Z,handler:Y});let $=this.activeConnection(),Q,z=this._clientOptions.middleware?.handleWorkDoneProgress,G=k.WorkDoneProgress.is(Z)&&z!==void 0?(B)=>{z(J,B,()=>Y(B))}:Y;if($!==void 0)this._progressDisposables.set(J,$.onProgress(Z,J,G)),Q={dispose:()=>{let B=this._progressDisposables.get(J);if(B!==void 0)B.dispose(),this._progressDisposables.delete(J)}};else this._pendingProgressHandlers.set(J,{type:Z,handler:Y}),Q={dispose:()=>{this._pendingProgressHandlers.delete(J);let B=this._progressDisposables.get(J);if(B!==void 0)B.dispose(),this._progressDisposables.delete(J)}};return{dispose:()=>{this._progressHandlers.delete(J),Q.dispose()}}}createDefaultErrorHandler(Z){if(Z!==void 0&&Z<0)throw Error(`Invalid maxRestartCount: ${Z}`);return new pB(this,Z??4)}async setTrace(Z){this._trace=Z;let J=this.activeConnection();if(J!==void 0)await J.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(Z){if(Z instanceof k.ResponseError){let J=Z;return`  Message: ${J.message}
  Code: ${J.code} ${J.data?`
`+J.data.toString():""}`}if(Z instanceof Error){if(A9.string(Z.stack))return Z.stack;return Z.message}if(A9.string(Z))return Z;return Z.toString()}debug(Z,J,Y=!0){this.logOutputMessage(k.MessageType.Debug,TJ.Debug,"Debug",Z,J,Y)}info(Z,J,Y=!0){this.logOutputMessage(k.MessageType.Info,TJ.Info,"Info",Z,J,Y)}warn(Z,J,Y=!0){this.logOutputMessage(k.MessageType.Warning,TJ.Warn,"Warn",Z,J,Y)}error(Z,J,Y=!0){this.logOutputMessage(k.MessageType.Error,TJ.Error,"Error",Z,J,Y)}logOutputMessage(Z,J,Y,$,Q,z){if(this.outputChannel.appendLine(`[${Y.padEnd(5)} - ${new Date().toLocaleTimeString()}] ${$}`),Q!==null&&Q!==void 0)this.outputChannel.appendLine(this.data2String(Q));if(z==="force"||z&&this._clientOptions.revealOutputChannelOn<=J)this.showNotificationMessage(Z,$)}showNotificationMessage(Z,J){J=J??"A request has failed. See the output for more information.",(Z===k.MessageType.Error?I0.window.showErrorMessage:Z===k.MessageType.Warning?I0.window.showWarningMessage:I0.window.showInformationMessage)(J,"Go to output").then(($)=>{if($!==void 0)this.outputChannel.show(!0)})}logTrace(Z,J){if(this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${Z}`),J)this.traceOutputChannel.appendLine(this.data2String(J))}logObjectTrace(Z){if(Z.isLSPMessage&&Z.type)this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `);else this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `);if(Z)this.traceOutputChannel.appendLine(`${JSON.stringify(Z)}`)}needsStart(){return this.$state===X0.Initial||this.$state===X0.Stopping||this.$state===X0.Stopped}needsStop(){return this.$state===X0.Starting||this.$state===X0.Running}activeConnection(){return this.$state===X0.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===X0.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw Error("Client got disposed and can't be restarted.");if(this.$state===X0.Stopping)throw Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[Z,J,Y]=this.createOnStartPromise();if(this._onStart=Z,this._diagnostics===void 0)this._diagnostics=this._clientOptions.diagnosticCollectionName?I0.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):I0.languages.createDiagnosticCollection();for(let[$,Q]of this._notificationHandlers)if(!this._pendingNotificationHandlers.has($))this._pendingNotificationHandlers.set($,Q);for(let[$,Q]of this._requestHandlers)if(!this._pendingRequestHandlers.has($))this._pendingRequestHandlers.set($,Q);for(let[$,Q]of this._progressHandlers)if(!this._pendingProgressHandlers.has($))this._pendingProgressHandlers.set($,Q);this.$state=X0.Starting;try{let $=await this.createConnection();$.onNotification(k.LogMessageNotification.type,(Q)=>{switch(Q.type){case k.MessageType.Error:this.error(Q.message,void 0,!1);break;case k.MessageType.Warning:this.warn(Q.message,void 0,!1);break;case k.MessageType.Info:this.info(Q.message,void 0,!1);break;case k.MessageType.Debug:this.debug(Q.message,void 0,!1);break;default:this.outputChannel.appendLine(Q.message)}}),$.onNotification(k.ShowMessageNotification.type,(Q)=>{switch(Q.type){case k.MessageType.Error:I0.window.showErrorMessage(Q.message);break;case k.MessageType.Warning:I0.window.showWarningMessage(Q.message);break;case k.MessageType.Info:I0.window.showInformationMessage(Q.message);break;default:I0.window.showInformationMessage(Q.message)}}),$.onRequest(k.ShowMessageRequest.type,(Q)=>{let z;switch(Q.type){case k.MessageType.Error:z=I0.window.showErrorMessage;break;case k.MessageType.Warning:z=I0.window.showWarningMessage;break;case k.MessageType.Info:z=I0.window.showInformationMessage;break;default:z=I0.window.showInformationMessage}let G=Q.actions||[];return z(Q.message,...G)}),$.onNotification(k.TelemetryEventNotification.type,(Q)=>{this._telemetryEmitter.fire(Q)}),$.onRequest(k.ShowDocumentRequest.type,async(Q)=>{let z=async(B)=>{let K=this.protocol2CodeConverter.asUri(B.uri);try{if(B.external===!0)return{success:await I0.env.openExternal(K)};else{let A={};if(B.selection!==void 0)A.selection=this.protocol2CodeConverter.asRange(B.selection);if(B.takeFocus===void 0||B.takeFocus===!1)A.preserveFocus=!0;else if(B.takeFocus===!0)A.preserveFocus=!1;return await I0.window.showTextDocument(K,A),{success:!0}}}catch(A){return{success:!1}}},G=this._clientOptions.middleware.window?.showDocument;if(G!==void 0)return G(Q,z);else return z(Q)}),$.listen(),await this.initialize($),J()}catch($){this.$state=X0.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,$,"force"),Y($)}return this._onStart}createOnStartPromise(){let Z,J;return[new Promise(($,Q)=>{Z=$,J=Q}),Z,J]}async initialize(Z){this.refreshTrace(Z,!1);let J=this._clientOptions.initializationOptions,[Y,$]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],Q={processId:null,clientInfo:{name:I0.env.appName,version:I0.version},locale:this.getLocale(),rootPath:Y?Y:null,rootUri:Y?this._c2p.asUri(I0.Uri.file(Y)):null,capabilities:this.computeClientCapabilities(),initializationOptions:A9.func(J)?J():J,trace:k.Trace.toString(this._trace),workspaceFolders:$};if(this.fillInitializeParams(Q),this._clientOptions.progressOnInitialization){let z=fB.generateUuid(),G=new SA.ProgressPart(Z,z);Q.workDoneToken=z;try{let B=await this.doInitialize(Z,Q);return G.done(),B}catch(B){throw G.cancel(),B}}else return this.doInitialize(Z,Q)}async doInitialize(Z,J){try{let Y=await Z.initialize(J);if(Y.capabilities.positionEncoding!==void 0&&Y.capabilities.positionEncoding!==k.PositionEncodingKind.UTF16)throw Error(`Unsupported position encoding (${Y.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=Y,this.$state=X0.Running;let $=void 0;if(A9.number(Y.capabilities.textDocumentSync))if(Y.capabilities.textDocumentSync===k.TextDocumentSyncKind.None)$={openClose:!1,change:k.TextDocumentSyncKind.None,save:void 0};else $={openClose:!0,change:Y.capabilities.textDocumentSync,save:{includeText:!1}};else if(Y.capabilities.textDocumentSync!==void 0&&Y.capabilities.textDocumentSync!==null)$=Y.capabilities.textDocumentSync;this._capabilities=Object.assign({},Y.capabilities,{resolvedTextDocumentSync:$}),Z.onNotification(k.PublishDiagnosticsNotification.type,(Q)=>this.handleDiagnostics(Q)),Z.onRequest(k.RegistrationRequest.type,(Q)=>this.handleRegistrationRequest(Q)),Z.onRequest("client/registerFeature",(Q)=>this.handleRegistrationRequest(Q)),Z.onRequest(k.UnregistrationRequest.type,(Q)=>this.handleUnregistrationRequest(Q)),Z.onRequest("client/unregisterFeature",(Q)=>this.handleUnregistrationRequest(Q)),Z.onRequest(k.ApplyWorkspaceEditRequest.type,(Q)=>this.handleApplyWorkspaceEdit(Q));for(let[Q,z]of this._pendingNotificationHandlers)this._notificationDisposables.set(Q,Z.onNotification(Q,z));this._pendingNotificationHandlers.clear();for(let[Q,z]of this._pendingRequestHandlers)this._requestDisposables.set(Q,Z.onRequest(Q,z));this._pendingRequestHandlers.clear();for(let[Q,z]of this._pendingProgressHandlers)this._progressDisposables.set(Q,Z.onProgress(z.type,Q,z.handler));return this._pendingProgressHandlers.clear(),await Z.sendNotification(k.InitializedNotification.type,{}),this.hookFileEvents(Z),this.hookConfigurationChanged(Z),this.initializeFeatures(Z),Y}catch(Y){if(this._clientOptions.initializationFailedHandler)if(this._clientOptions.initializationFailedHandler(Y))this.initialize(Z);else this.stop();else if(Y instanceof k.ResponseError&&Y.data&&Y.data.retry)I0.window.showErrorMessage(Y.message,{title:"Retry",id:"retry"}).then(($)=>{if($&&$.id==="retry")this.initialize(Z);else this.stop()});else{if(Y&&Y.message)I0.window.showErrorMessage(Y.message);this.error("Server initialization failed.",Y),this.stop()}throw Y}}_clientGetRootPath(){let Z=I0.workspace.workspaceFolders;if(!Z||Z.length===0)return;let J=Z[0];if(J.uri.scheme==="file")return J.uri.fsPath;return}stop(Z=2000){return this.shutdown("stop",Z)}dispose(Z=2000){try{return this._disposed="disposing",this.stop(Z)}finally{this._disposed="disposed"}}async shutdown(Z,J){if(this.$state===X0.Stopped||this.$state===X0.Initial)return;if(this.$state===X0.Stopping)if(this._onStop!==void 0)return this._onStop;else throw Error("Client is stopping but no stop promise available.");let Y=this.activeConnection();if(Y===void 0||this.$state!==X0.Running)throw Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=X0.Stopping,this.cleanUp(Z);let $=new Promise((z)=>{(0,k.RAL)().timer.setTimeout(z,J)}),Q=(async(z)=>{return await z.shutdown(),await z.exit(),z})(Y);return this._onStop=Promise.race([$,Q]).then((z)=>{if(z!==void 0)z.end(),z.dispose();else throw this.error("Stopping server timed out",void 0,!1),Error("Stopping the server timed out")},(z)=>{throw this.error("Stopping server failed",z,!1),z}).finally(()=>{this.$state=X0.Stopped,Z==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(Z){this._fileEvents=[],this._fileEventDelayer.cancel();let J=this._listeners.splice(0,this._listeners.length);for(let Y of J)Y.dispose();if(this._syncedDocuments)this._syncedDocuments.clear();for(let Y of Array.from(this._features.entries()).map(($)=>$[1]).reverse())Y.clear();if(Z==="stop"&&this._diagnostics!==void 0)this._diagnostics.dispose(),this._diagnostics=void 0;if(this._idleInterval!==void 0)this._idleInterval.dispose(),this._idleInterval=void 0}cleanUpChannel(){if(this._outputChannel!==void 0&&this._disposeOutputChannel)this._outputChannel.dispose(),this._outputChannel=void 0}notifyFileEvent(Z){let J=this;async function Y(Q){return J._fileEvents.push(Q),J._fileEventDelayer.trigger(async()=>{await J.sendNotification(k.DidChangeWatchedFilesNotification.type,{changes:J._fileEvents}),J._fileEvents=[]})}let $=this.clientOptions.middleware?.workspace;(($?.didChangeWatchedFile)?$.didChangeWatchedFile(Z,Y):Y(Z)).catch((Q)=>{J.error("Notify file events failed.",Q)})}async sendPendingFullTextDocumentChanges(Z){return this._pendingChangeSemaphore.lock(async()=>{try{let J=this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);if(J.length===0)return;for(let Y of J){let $=this.code2ProtocolConverter.asChangeTextDocumentParams(Y);await Z.sendNotification(k.DidChangeTextDocumentNotification.type,$),this._didChangeTextDocumentFeature.notificationSent(Y,k.DidChangeTextDocumentNotification.type,$)}}catch(J){throw this.error("Sending pending changes failed",J,!1),J}})}triggerPendingChangeDelivery(){this._pendingChangeDelayer.trigger(async()=>{let Z=this.activeConnection();if(Z===void 0){this.triggerPendingChangeDelivery();return}await this.sendPendingFullTextDocumentChanges(Z)}).catch((Z)=>this.error("Delivering pending changes failed",Z,!1))}handleDiagnostics(Z){if(!this._diagnostics)return;let J=Z.uri;if(this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===J)this._diagnosticQueueState.tokenSource.cancel();this._diagnosticQueue.set(Z.uri,Z.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,k.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let Z=this._diagnosticQueue.entries().next();if(Z.done===!0)return;let[J,Y]=Z.value;this._diagnosticQueue.delete(J);let $=new I0.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:J,tokenSource:$},this._p2c.asDiagnostics(Y,$.token).then((Q)=>{if(!$.token.isCancellationRequested){let z=this._p2c.asUri(J),G=this.clientOptions.middleware;if(G.handleDiagnostics)G.handleDiagnostics(z,Q,(B,K)=>this.setDiagnostics(B,K));else this.setDiagnostics(z,Q)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(Z,J){if(!this._diagnostics)return;this._diagnostics.set(Z,J)}getLocale(){return I0.env.language}async $start(){if(this.$state===X0.StartFailed)throw Error("Previous start failed. Can't restart server.");await this.start();let Z=this.activeConnection();if(Z===void 0)throw Error("Starting server failed");return Z}async createConnection(){let Z=($,Q,z)=>{this.handleConnectionError($,Q,z).catch((G)=>this.error("Handling connection error failed",G))},J=()=>{this.handleConnectionClosed().catch(($)=>this.error("Handling connection close failed",$))},Y=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=zH(Y.reader,Y.writer,Z,J,this._clientOptions.connectionOptions),this._connection}async handleConnectionClosed(){if(this.$state===X0.Stopped)return;try{if(this._connection!==void 0)this._connection.dispose()}catch(J){}let Z={action:jJ.DoNotRestart};if(this.$state!==X0.Stopping)try{Z=await this._clientOptions.errorHandler.closed()}catch(J){}if(this._connection=void 0,Z.action===jJ.DoNotRestart){if(this.error(Z.message??"Connection to server got closed. Server will not be restarted.",void 0,Z.handled===!0?!1:"force"),this.cleanUp("stop"),this.$state===X0.Starting)this.$state=X0.StartFailed;else this.$state=X0.Stopped;this._onStop=Promise.resolve(),this._onStart=void 0}else if(Z.action===jJ.Restart)this.info(Z.message??"Connection to server got closed. Server will restart.",!Z.handled),this.cleanUp("restart"),this.$state=X0.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch((J)=>this.error("Restarting server failed",J,"force"))}async handleConnectionError(Z,J,Y){let $=await this._clientOptions.errorHandler.error(Z,J,Y);if($.action===vY.Shutdown)this.error($.message??`Client ${this._name}: connection to server is erroring.
${Z.message}
Shutting down server.`,void 0,$.handled===!0?!1:"force"),this.stop().catch((Q)=>{this.error("Stopping server failed",Q,!1)});else this.error($.message??`Client ${this._name}: connection to server is erroring.
${Z.message}`,void 0,$.handled===!0?!1:"force")}hookConfigurationChanged(Z){this._listeners.push(I0.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(Z,!0)}))}refreshTrace(Z,J=!1){let Y=I0.workspace.getConfiguration(this._id),$=k.Trace.Off,Q=k.TraceFormat.Text;if(Y){let z=Y.get("trace.server","off");if(typeof z==="string")$=k.Trace.fromString(z);else $=k.Trace.fromString(Y.get("trace.server.verbosity","off")),Q=k.TraceFormat.fromString(Y.get("trace.server.format","text"))}this._trace=$,this._traceFormat=Q,Z.trace(this._trace,this._tracer,{sendNotification:J,traceFormat:this._traceFormat}).catch((z)=>{this.error("Updating trace failed with error",z,!1)})}hookFileEvents(Z){let J=this._clientOptions.synchronize.fileEvents;if(!J)return;let Y;if(A9.array(J))Y=J;else Y=[J];if(!Y)return;this._dynamicFeatures.get(k.DidChangeWatchedFilesNotification.type.method).registerRaw(fB.generateUuid(),Y)}registerFeatures(Z){for(let J of Z)this.registerFeature(J)}registerFeature(Z){if(this._features.push(Z),W9.DynamicFeature.is(Z)){let J=Z.registrationType;this._dynamicFeatures.set(J.method,Z)}}getFeature(Z){return this._dynamicFeatures.get(Z)}hasDedicatedTextSynchronizationFeature(Z){let J=this.getFeature(k.NotebookDocumentSyncRegistrationType.method);if(J===void 0||!(J instanceof kB.NotebookDocumentSyncFeature))return!1;return J.handles(Z)}registerBuiltinFeatures(){let Z=new Map;if(this.registerFeature(new vB.ConfigurationFeature(this)),this.registerFeature(new zY.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this._didChangeTextDocumentFeature=new zY.DidChangeTextDocumentFeature(this,Z),this._didChangeTextDocumentFeature.onPendingChangeAdded(()=>{this.triggerPendingChangeDelivery()}),this.registerFeature(this._didChangeTextDocumentFeature),this.registerFeature(new zY.WillSaveFeature(this)),this.registerFeature(new zY.WillSaveWaitUntilFeature(this)),this.registerFeature(new zY.DidSaveTextDocumentFeature(this)),this.registerFeature(new zY.DidCloseTextDocumentFeature(this,this._syncedDocuments,Z)),this.registerFeature(new uA.FileSystemWatcherFeature(this,(J)=>this.notifyFileEvent(J))),this.registerFeature(new bA.CompletionItemFeature(this)),this.registerFeature(new yA.HoverFeature(this)),this.registerFeature(new hA.SignatureHelpFeature(this)),this.registerFeature(new RA.DefinitionFeature(this)),this.registerFeature(new kA.ReferencesFeature(this)),this.registerFeature(new xA.DocumentHighlightFeature(this)),this.registerFeature(new _A.DocumentSymbolFeature(this)),this.registerFeature(new fA.WorkspaceSymbolFeature(this)),this.registerFeature(new vA.CodeActionFeature(this)),this.registerFeature(new gA.CodeLensFeature(this)),this.registerFeature(new d$.DocumentFormattingFeature(this)),this.registerFeature(new d$.DocumentRangeFormattingFeature(this)),this.registerFeature(new d$.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new dA.RenameFeature(this)),this.registerFeature(new pA.DocumentLinkFeature(this)),this.registerFeature(new mA.ExecuteCommandFeature(this)),this.registerFeature(new vB.SyncConfigurationFeature(this)),this.registerFeature(new iA.TypeDefinitionFeature(this)),this.registerFeature(new cA.ImplementationFeature(this)),this.registerFeature(new lA.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0)this.registerFeature(new nA.WorkspaceFoldersFeature(this));this.registerFeature(new aA.FoldingRangeFeature(this)),this.registerFeature(new sA.DeclarationFeature(this)),this.registerFeature(new rA.SelectionRangeFeature(this)),this.registerFeature(new oA.ProgressFeature(this)),this.registerFeature(new tA.CallHierarchyFeature(this)),this.registerFeature(new eA.SemanticTokensFeature(this)),this.registerFeature(new ZH.LinkedEditingFeature(this)),this.registerFeature(new GY.DidCreateFilesFeature(this)),this.registerFeature(new GY.DidRenameFilesFeature(this)),this.registerFeature(new GY.DidDeleteFilesFeature(this)),this.registerFeature(new GY.WillCreateFilesFeature(this)),this.registerFeature(new GY.WillRenameFilesFeature(this)),this.registerFeature(new GY.WillDeleteFilesFeature(this)),this.registerFeature(new JH.TypeHierarchyFeature(this)),this.registerFeature(new YH.InlineValueFeature(this)),this.registerFeature(new $H.InlayHintsFeature(this)),this.registerFeature(new DA.DiagnosticFeature(this)),this.registerFeature(new kB.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(m$.createAll(this))}fillInitializeParams(Z){for(let J of this._features)if(A9.func(J.fillInitializeParams))J.fillInitializeParams(Z)}computeClientCapabilities(){let Z={};(0,W9.ensure)(Z,"workspace").applyEdit=!0;let J=(0,W9.ensure)((0,W9.ensure)(Z,"workspace"),"workspaceEdit");J.documentChanges=!0,J.resourceOperations=[k.ResourceOperationKind.Create,k.ResourceOperationKind.Rename,k.ResourceOperationKind.Delete],J.failureHandling=k.FailureHandlingKind.TextOnlyTransactional,J.normalizesLineEndings=!0,J.changeAnnotationSupport={groupsOnLabel:!0};let Y=(0,W9.ensure)((0,W9.ensure)(Z,"textDocument"),"publishDiagnostics");Y.relatedInformation=!0,Y.versionSupport=!1,Y.tagSupport={valueSet:[k.DiagnosticTag.Unnecessary,k.DiagnosticTag.Deprecated]},Y.codeDescriptionSupport=!0,Y.dataSupport=!0;let $=(0,W9.ensure)(Z,"window"),Q=(0,W9.ensure)($,"showMessage");Q.messageActionItem={additionalPropertiesSupport:!0};let z=(0,W9.ensure)($,"showDocument");z.support=!0;let G=(0,W9.ensure)(Z,"general");if(G.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(qJ.RequestsToCancelOnContentModified)},G.regularExpressions={engine:"ECMAScript",version:"ES2020"},G.markdown={parser:"marked",version:"1.1.0"},G.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml)G.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"];for(let B of this._features)B.fillClientCapabilities(Z);return Z}initializeFeatures(Z){let J=this._clientOptions.documentSelector;for(let Y of this._features)if(A9.func(Y.preInitialize))Y.preInitialize(this._capabilities,J);for(let Y of this._features)Y.initialize(this._capabilities,J)}async handleRegistrationRequest(Z){let J=this.clientOptions.middleware?.handleRegisterCapability;if(J)return J(Z,(Y)=>this.doRegisterCapability(Y));else return this.doRegisterCapability(Z)}async doRegisterCapability(Z){if(!this.isRunning()){for(let J of Z.registrations)this._ignoredRegistrations.add(J.id);return}for(let J of Z.registrations){let Y=this._dynamicFeatures.get(J.method);if(Y===void 0)return Promise.reject(Error(`No feature implementation for ${J.method} found. Registration failed.`));let $=J.registerOptions??{};$.documentSelector=$.documentSelector??this._clientOptions.documentSelector;let Q={id:J.id,registerOptions:$};try{Y.register(Q)}catch(z){return Promise.reject(z)}}}async handleUnregistrationRequest(Z){let J=this.clientOptions.middleware?.handleUnregisterCapability;if(J)return J(Z,(Y)=>this.doUnregisterCapability(Y));else return this.doUnregisterCapability(Z)}async doUnregisterCapability(Z){for(let J of Z.unregisterations){if(this._ignoredRegistrations.has(J.id))continue;let Y=this._dynamicFeatures.get(J.method);if(!Y)return Promise.reject(Error(`No feature implementation for ${J.method} found. Unregistration failed.`));Y.unregister(J.id)}}async handleApplyWorkspaceEdit(Z){let J=Z.edit,Y=await this.workspaceEditLock.lock(()=>{return this._p2c.asWorkspaceEdit(J)}),$=new Map;I0.workspace.textDocuments.forEach((z)=>$.set(z.uri.toString(),z));let Q=!1;if(J.documentChanges){for(let z of J.documentChanges)if(k.TextDocumentEdit.is(z)&&z.textDocument.version&&z.textDocument.version>=0){let G=this._p2c.asUri(z.textDocument.uri).toString(),B=$.get(G);if(B&&B.version!==z.textDocument.version){Q=!0;break}}}if(Q)return Promise.resolve({applied:!1});return A9.asPromise(I0.workspace.applyEdit(Y).then((z)=>{return{applied:z}}))}handleFailedRequest(Z,J,Y,$,Q=!0){if(Y instanceof k.ResponseError){if(Y.code===k.ErrorCodes.PendingResponseRejected||Y.code===k.ErrorCodes.ConnectionInactive)return $;if(Y.code===k.LSPErrorCodes.RequestCancelled||Y.code===k.LSPErrorCodes.ServerCancelled)if(J!==void 0&&J.isCancellationRequested)return $;else if(Y.data!==void 0)throw new W9.LSPCancellationError(Y.data);else throw new I0.CancellationError;else if(Y.code===k.LSPErrorCodes.ContentModified)if(qJ.RequestsToCancelOnContentModified.has(Z.method)||qJ.CancellableResolveCalls.has(Z.method))throw new I0.CancellationError;else return $}throw this.error(`Request ${Z.method} failed.`,Y,Q),Y}}GZ.BaseLanguageClient=qJ;qJ.RequestsToCancelOnContentModified=new Set([k.SemanticTokensRequest.method,k.SemanticTokensRangeRequest.method,k.SemanticTokensDeltaRequest.method]);qJ.CancellableResolveCalls=new Set([k.CompletionResolveRequest.method,k.CodeLensResolveRequest.method,k.CodeActionResolveRequest.method,k.InlayHintResolveRequest.method,k.DocumentLinkResolveRequest.method,k.WorkspaceSymbolResolveRequest.method]);class mB{error(Z){(0,k.RAL)().console.error(Z)}warn(Z){(0,k.RAL)().console.warn(Z)}info(Z){(0,k.RAL)().console.info(Z)}log(Z){(0,k.RAL)().console.log(Z)}}function zH(Z,J,Y,$,Q){let z=new mB,G=(0,k.createProtocolConnection)(Z,J,z,Q);return G.onError((K)=>{Y(K[0],K[1],K[2])}),G.onClose($),{listen:()=>G.listen(),sendRequest:G.sendRequest,onRequest:G.onRequest,hasPendingResponse:G.hasPendingResponse,sendNotification:G.sendNotification,onNotification:G.onNotification,onProgress:G.onProgress,sendProgress:G.sendProgress,trace:(K,A,O)=>{let E={sendNotification:!1,traceFormat:k.TraceFormat.Text};if(O===void 0)return G.trace(K,A,E);else if(A9.boolean(O))return G.trace(K,A,O);else return G.trace(K,A,O)},initialize:(K)=>{return G.sendRequest(k.InitializeRequest.type,K)},shutdown:()=>{return G.sendRequest(k.ShutdownRequest.type,void 0)},exit:()=>{return G.sendNotification(k.ExitNotification.type)},end:()=>G.end(),dispose:()=>G.dispose()}}var m$;(function(Z){function J(Y){return[new QH.InlineCompletionItemFeature(Y)]}Z.createAll=J})(m$||(GZ.ProposedFeatures=m$={}))});var lB=D((F6)=>{var __dirname="/home/runner/work/vscode-nix-ide/vscode-nix-ide/node_modules/vscode-languageclient/lib/node";Object.defineProperty(F6,"__esModule",{value:!0});F6.terminate=void 0;var uB=require("child_process"),GH=require("path"),XH=process.platform==="win32",BH=process.platform==="darwin",jH=process.platform==="linux";function KH(Z,J){if(XH)try{let Q={stdio:["pipe","pipe","ignore"]};if(J)Q.cwd=J;return uB.execFileSync("taskkill",["/T","/F","/PID",Z.pid.toString()],Q),!0}catch(Q){return!1}else if(jH||BH)try{var Y=(0,GH.join)(__dirname,"terminateProcess.sh"),$=uB.spawnSync(Y,[Z.pid.toString()]);return $.error?!1:!0}catch(Q){return!1}else return Z.kill("SIGKILL"),!0}F6.terminate=KH});var l$=D((CU,cB)=>{cB.exports=Z0()});var gY=D((SU,iB)=>{var VH=typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...Z)=>console.error("SEMVER",...Z):()=>{};iB.exports=VH});var P6=D((DU,nB)=>{var WH=Number.MAX_SAFE_INTEGER||9007199254740991,AH=["major","premajor","minor","preminor","patch","prepatch","prerelease"];nB.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:WH,RELEASE_TYPES:AH,SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var M6=D((u9,aB)=>{var{MAX_SAFE_COMPONENT_LENGTH:c$,MAX_SAFE_BUILD_LENGTH:HH,MAX_LENGTH:OH}=P6(),UH=gY();u9=aB.exports={};var LH=u9.re=[],NH=u9.safeRe=[],l=u9.src=[],c=u9.t={},EH=0,i$="[a-zA-Z0-9-]",wH=[["\\s",1],["\\d",OH],[i$,HH]],FH=(Z)=>{for(let[J,Y]of wH)Z=Z.split(`${J}*`).join(`${J}{0,${Y}}`).split(`${J}+`).join(`${J}{1,${Y}}`);return Z},Q0=(Z,J,Y)=>{let $=FH(J),Q=EH++;UH(Z,Q,J),c[Z]=Q,l[Q]=J,LH[Q]=new RegExp(J,Y?"g":void 0),NH[Q]=new RegExp($,Y?"g":void 0)};Q0("NUMERICIDENTIFIER","0|[1-9]\\d*");Q0("NUMERICIDENTIFIERLOOSE","\\d+");Q0("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${i$}*`);Q0("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`);Q0("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`);Q0("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`);Q0("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`);Q0("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`);Q0("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`);Q0("BUILDIDENTIFIER",`${i$}+`);Q0("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`);Q0("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`);Q0("FULL",`^${l[c.FULLPLAIN]}$`);Q0("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`);Q0("LOOSE",`^${l[c.LOOSEPLAIN]}$`);Q0("GTLT","((?:<|>)?=?)");Q0("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Q0("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`);Q0("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`);Q0("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`);Q0("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`);Q0("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`);Q0("COERCEPLAIN",`(^|[^\\d])(\\d{1,${c$}})(?:\\.(\\d{1,${c$}}))?(?:\\.(\\d{1,${c$}}))?`);Q0("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`);Q0("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`);Q0("COERCERTL",l[c.COERCE],!0);Q0("COERCERTLFULL",l[c.COERCEFULL],!0);Q0("LONETILDE","(?:~>?)");Q0("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0);u9.tildeTrimReplace="$1~";Q0("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`);Q0("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`);Q0("LONECARET","(?:\\^)");Q0("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0);u9.caretTrimReplace="$1^";Q0("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`);Q0("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`);Q0("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`);Q0("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`);Q0("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0);u9.comparatorTrimReplace="$1$2$3";Q0("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`);Q0("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`);Q0("STAR","(<|>)?=?\\s*\\*");Q0("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Q0("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var I6=D((bU,sB)=>{var PH=Object.freeze({loose:!0}),MH=Object.freeze({}),IH=(Z)=>{if(!Z)return MH;if(typeof Z!=="object")return PH;return Z};sB.exports=IH});var eB=D((yU,tB)=>{var rB=/^[0-9]+$/,oB=(Z,J)=>{let Y=rB.test(Z),$=rB.test(J);if(Y&&$)Z=+Z,J=+J;return Z===J?0:Y&&!$?-1:$&&!Y?1:Z<J?-1:1},TH=(Z,J)=>oB(J,Z);tB.exports={compareIdentifiers:oB,rcompareIdentifiers:TH}});var dY=D((RU,$j)=>{var T6=gY(),{MAX_LENGTH:Zj,MAX_SAFE_INTEGER:q6}=P6(),{safeRe:Jj,t:Yj}=M6(),qH=I6(),{compareIdentifiers:XY}=eB();class H9{constructor(Z,J){if(J=qH(J),Z instanceof H9)if(Z.loose===!!J.loose&&Z.includePrerelease===!!J.includePrerelease)return Z;else Z=Z.version;else if(typeof Z!=="string")throw TypeError(`Invalid version. Must be a string. Got type "${typeof Z}".`);if(Z.length>Zj)throw TypeError(`version is longer than ${Zj} characters`);T6("SemVer",Z,J),this.options=J,this.loose=!!J.loose,this.includePrerelease=!!J.includePrerelease;let Y=Z.trim().match(J.loose?Jj[Yj.LOOSE]:Jj[Yj.FULL]);if(!Y)throw TypeError(`Invalid Version: ${Z}`);if(this.raw=Z,this.major=+Y[1],this.minor=+Y[2],this.patch=+Y[3],this.major>q6||this.major<0)throw TypeError("Invalid major version");if(this.minor>q6||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>q6||this.patch<0)throw TypeError("Invalid patch version");if(!Y[4])this.prerelease=[];else this.prerelease=Y[4].split(".").map(($)=>{if(/^[0-9]+$/.test($)){let Q=+$;if(Q>=0&&Q<q6)return Q}return $});this.build=Y[5]?Y[5].split("."):[],this.format()}format(){if(this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length)this.version+=`-${this.prerelease.join(".")}`;return this.version}toString(){return this.version}compare(Z){if(T6("SemVer.compare",this.version,this.options,Z),!(Z instanceof H9)){if(typeof Z==="string"&&Z===this.version)return 0;Z=new H9(Z,this.options)}if(Z.version===this.version)return 0;return this.compareMain(Z)||this.comparePre(Z)}compareMain(Z){if(!(Z instanceof H9))Z=new H9(Z,this.options);return XY(this.major,Z.major)||XY(this.minor,Z.minor)||XY(this.patch,Z.patch)}comparePre(Z){if(!(Z instanceof H9))Z=new H9(Z,this.options);if(this.prerelease.length&&!Z.prerelease.length)return-1;else if(!this.prerelease.length&&Z.prerelease.length)return 1;else if(!this.prerelease.length&&!Z.prerelease.length)return 0;let J=0;do{let Y=this.prerelease[J],$=Z.prerelease[J];if(T6("prerelease compare",J,Y,$),Y===void 0&&$===void 0)return 0;else if($===void 0)return 1;else if(Y===void 0)return-1;else if(Y===$)continue;else return XY(Y,$)}while(++J)}compareBuild(Z){if(!(Z instanceof H9))Z=new H9(Z,this.options);let J=0;do{let Y=this.build[J],$=Z.build[J];if(T6("build compare",J,Y,$),Y===void 0&&$===void 0)return 0;else if($===void 0)return 1;else if(Y===void 0)return-1;else if(Y===$)continue;else return XY(Y,$)}while(++J)}inc(Z,J,Y){switch(Z){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",J,Y);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",J,Y);break;case"prepatch":this.prerelease.length=0,this.inc("patch",J,Y),this.inc("pre",J,Y);break;case"prerelease":if(this.prerelease.length===0)this.inc("patch",J,Y);this.inc("pre",J,Y);break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0)this.major++;this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0)this.minor++;this.patch=0,this.prerelease=[];break;case"patch":if(this.prerelease.length===0)this.patch++;this.prerelease=[];break;case"pre":{let $=Number(Y)?1:0;if(!J&&Y===!1)throw Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[$];else{let Q=this.prerelease.length;while(--Q>=0)if(typeof this.prerelease[Q]==="number")this.prerelease[Q]++,Q=-2;if(Q===-1){if(J===this.prerelease.join(".")&&Y===!1)throw Error("invalid increment argument: identifier already exists");this.prerelease.push($)}}if(J){let Q=[J,$];if(Y===!1)Q=[J];if(XY(this.prerelease[0],J)===0){if(isNaN(this.prerelease[1]))this.prerelease=Q}else this.prerelease=Q}break}default:throw Error(`invalid increment argument: ${Z}`)}if(this.raw=this.format(),this.build.length)this.raw+=`+${this.build.join(".")}`;return this}}$j.exports=H9});var Gj=D((hU,zj)=>{var Qj=dY(),CH=(Z,J,Y=!1)=>{if(Z instanceof Qj)return Z;try{return new Qj(Z,J)}catch($){if(!Y)return null;throw $}};zj.exports=CH});var jj=D((xU,Bj)=>{class Xj{constructor(){this.max=1000,this.map=new Map}get(Z){let J=this.map.get(Z);if(J===void 0)return;else return this.map.delete(Z),this.map.set(Z,J),J}delete(Z){return this.map.delete(Z)}set(Z,J){if(!this.delete(Z)&&J!==void 0){if(this.map.size>=this.max){let $=this.map.keys().next().value;this.delete($)}this.map.set(Z,J)}return this}}Bj.exports=Xj});var CJ=D((_U,Vj)=>{var Kj=dY(),SH=(Z,J,Y)=>new Kj(Z,Y).compare(new Kj(J,Y));Vj.exports=SH});var Aj=D((fU,Wj)=>{var DH=CJ(),bH=(Z,J,Y)=>DH(Z,J,Y)===0;Wj.exports=bH});var Oj=D((kU,Hj)=>{var yH=CJ(),RH=(Z,J,Y)=>yH(Z,J,Y)!==0;Hj.exports=RH});var Lj=D((vU,Uj)=>{var hH=CJ(),xH=(Z,J,Y)=>hH(Z,J,Y)>0;Uj.exports=xH});var Ej=D((gU,Nj)=>{var _H=CJ(),fH=(Z,J,Y)=>_H(Z,J,Y)>=0;Nj.exports=fH});var Fj=D((dU,wj)=>{var kH=CJ(),vH=(Z,J,Y)=>kH(Z,J,Y)<0;wj.exports=vH});var Mj=D((pU,Pj)=>{var gH=CJ(),dH=(Z,J,Y)=>gH(Z,J,Y)<=0;Pj.exports=dH});var Tj=D((mU,Ij)=>{var pH=Aj(),mH=Oj(),uH=Lj(),lH=Ej(),cH=Fj(),iH=Mj(),nH=(Z,J,Y,$)=>{switch(J){case"===":if(typeof Z==="object")Z=Z.version;if(typeof Y==="object")Y=Y.version;return Z===Y;case"!==":if(typeof Z==="object")Z=Z.version;if(typeof Y==="object")Y=Y.version;return Z!==Y;case"":case"=":case"==":return pH(Z,Y,$);case"!=":return mH(Z,Y,$);case">":return uH(Z,Y,$);case">=":return lH(Z,Y,$);case"<":return cH(Z,Y,$);case"<=":return iH(Z,Y,$);default:throw TypeError(`Invalid operator: ${J}`)}};Ij.exports=nH});var Rj=D((uU,yj)=>{var pY=Symbol("SemVer ANY");class C6{static get ANY(){return pY}constructor(Z,J){if(J=qj(J),Z instanceof C6)if(Z.loose===!!J.loose)return Z;else Z=Z.value;if(Z=Z.trim().split(/\s+/).join(" "),a$("comparator",Z,J),this.options=J,this.loose=!!J.loose,this.parse(Z),this.semver===pY)this.value="";else this.value=this.operator+this.semver.version;a$("comp",this)}parse(Z){let J=this.options.loose?Cj[Sj.COMPARATORLOOSE]:Cj[Sj.COMPARATOR],Y=Z.match(J);if(!Y)throw TypeError(`Invalid comparator: ${Z}`);if(this.operator=Y[1]!==void 0?Y[1]:"",this.operator==="=")this.operator="";if(!Y[2])this.semver=pY;else this.semver=new Dj(Y[2],this.options.loose)}toString(){return this.value}test(Z){if(a$("Comparator.test",Z,this.options.loose),this.semver===pY||Z===pY)return!0;if(typeof Z==="string")try{Z=new Dj(Z,this.options)}catch(J){return!1}return n$(Z,this.operator,this.semver,this.options)}intersects(Z,J){if(!(Z instanceof C6))throw TypeError("a Comparator is required");if(this.operator===""){if(this.value==="")return!0;return new bj(Z.value,J).test(this.value)}else if(Z.operator===""){if(Z.value==="")return!0;return new bj(this.value,J).test(Z.semver)}if(J=qj(J),J.includePrerelease&&(this.value==="<0.0.0-0"||Z.value==="<0.0.0-0"))return!1;if(!J.includePrerelease&&(this.value.startsWith("<0.0.0")||Z.value.startsWith("<0.0.0")))return!1;if(this.operator.startsWith(">")&&Z.operator.startsWith(">"))return!0;if(this.operator.startsWith("<")&&Z.operator.startsWith("<"))return!0;if(this.semver.version===Z.semver.version&&this.operator.includes("=")&&Z.operator.includes("="))return!0;if(n$(this.semver,"<",Z.semver,J)&&this.operator.startsWith(">")&&Z.operator.startsWith("<"))return!0;if(n$(this.semver,">",Z.semver,J)&&this.operator.startsWith("<")&&Z.operator.startsWith(">"))return!0;return!1}}yj.exports=C6;var qj=I6(),{safeRe:Cj,t:Sj}=M6(),n$=Tj(),a$=gY(),Dj=dY(),bj=s$()});var s$=D((lU,fj)=>{var aH=/\s+/g;class mY{constructor(Z,J){if(J=rH(J),Z instanceof mY)if(Z.loose===!!J.loose&&Z.includePrerelease===!!J.includePrerelease)return Z;else return new mY(Z.raw,J);if(Z instanceof r$)return this.raw=Z.value,this.set=[[Z]],this.formatted=void 0,this;if(this.options=J,this.loose=!!J.loose,this.includePrerelease=!!J.includePrerelease,this.raw=Z.trim().replace(aH," "),this.set=this.raw.split("||").map((Y)=>this.parseRange(Y.trim())).filter((Y)=>Y.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let Y=this.set[0];if(this.set=this.set.filter(($)=>!xj($[0])),this.set.length===0)this.set=[Y];else if(this.set.length>1){for(let $ of this.set)if($.length===1&&$O($[0])){this.set=[$];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let Z=0;Z<this.set.length;Z++){if(Z>0)this.formatted+="||";let J=this.set[Z];for(let Y=0;Y<J.length;Y++){if(Y>0)this.formatted+=" ";this.formatted+=J[Y].toString().trim()}}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(Z){let Y=((this.options.includePrerelease&&JO)|(this.options.loose&&YO))+":"+Z,$=hj.get(Y);if($)return $;let Q=this.options.loose,z=Q?_Z[IZ.HYPHENRANGELOOSE]:_Z[IZ.HYPHENRANGE];Z=Z.replace(z,AO(this.options.includePrerelease)),x0("hyphen replace",Z),Z=Z.replace(_Z[IZ.COMPARATORTRIM],tH),x0("comparator trim",Z),Z=Z.replace(_Z[IZ.TILDETRIM],eH),x0("tilde trim",Z),Z=Z.replace(_Z[IZ.CARETTRIM],ZO),x0("caret trim",Z);let G=Z.split(" ").map((O)=>QO(O,this.options)).join(" ").split(/\s+/).map((O)=>WO(O,this.options));if(Q)G=G.filter((O)=>{return x0("loose invalid filter",O,this.options),!!O.match(_Z[IZ.COMPARATORLOOSE])});x0("range list",G);let B=new Map,K=G.map((O)=>new r$(O,this.options));for(let O of K){if(xj(O))return[O];B.set(O.value,O)}if(B.size>1&&B.has(""))B.delete("");let A=[...B.values()];return hj.set(Y,A),A}intersects(Z,J){if(!(Z instanceof mY))throw TypeError("a Range is required");return this.set.some((Y)=>{return _j(Y,J)&&Z.set.some(($)=>{return _j($,J)&&Y.every((Q)=>{return $.every((z)=>{return Q.intersects(z,J)})})})})}test(Z){if(!Z)return!1;if(typeof Z==="string")try{Z=new oH(Z,this.options)}catch(J){return!1}for(let J=0;J<this.set.length;J++)if(HO(this.set[J],Z,this.options))return!0;return!1}}fj.exports=mY;var sH=jj(),hj=new sH,rH=I6(),r$=Rj(),x0=gY(),oH=dY(),{safeRe:_Z,t:IZ,comparatorTrimReplace:tH,tildeTrimReplace:eH,caretTrimReplace:ZO}=M6(),{FLAG_INCLUDE_PRERELEASE:JO,FLAG_LOOSE:YO}=P6(),xj=(Z)=>Z.value==="<0.0.0-0",$O=(Z)=>Z.value==="",_j=(Z,J)=>{let Y=!0,$=Z.slice(),Q=$.pop();while(Y&&$.length)Y=$.every((z)=>{return Q.intersects(z,J)}),Q=$.pop();return Y},QO=(Z,J)=>{return x0("comp",Z,J),Z=XO(Z,J),x0("caret",Z),Z=zO(Z,J),x0("tildes",Z),Z=jO(Z,J),x0("xrange",Z),Z=VO(Z,J),x0("stars",Z),Z},TZ=(Z)=>!Z||Z.toLowerCase()==="x"||Z==="*",zO=(Z,J)=>{return Z.trim().split(/\s+/).map((Y)=>GO(Y,J)).join(" ")},GO=(Z,J)=>{let Y=J.loose?_Z[IZ.TILDELOOSE]:_Z[IZ.TILDE];return Z.replace(Y,($,Q,z,G,B)=>{x0("tilde",Z,$,Q,z,G,B);let K;if(TZ(Q))K="";else if(TZ(z))K=`>=${Q}.0.0 <${+Q+1}.0.0-0`;else if(TZ(G))K=`>=${Q}.${z}.0 <${Q}.${+z+1}.0-0`;else if(B)x0("replaceTilde pr",B),K=`>=${Q}.${z}.${G}-${B} <${Q}.${+z+1}.0-0`;else K=`>=${Q}.${z}.${G} <${Q}.${+z+1}.0-0`;return x0("tilde return",K),K})},XO=(Z,J)=>{return Z.trim().split(/\s+/).map((Y)=>BO(Y,J)).join(" ")},BO=(Z,J)=>{x0("caret",Z,J);let Y=J.loose?_Z[IZ.CARETLOOSE]:_Z[IZ.CARET],$=J.includePrerelease?"-0":"";return Z.replace(Y,(Q,z,G,B,K)=>{x0("caret",Z,Q,z,G,B,K);let A;if(TZ(z))A="";else if(TZ(G))A=`>=${z}.0.0${$} <${+z+1}.0.0-0`;else if(TZ(B))if(z==="0")A=`>=${z}.${G}.0${$} <${z}.${+G+1}.0-0`;else A=`>=${z}.${G}.0${$} <${+z+1}.0.0-0`;else if(K)if(x0("replaceCaret pr",K),z==="0")if(G==="0")A=`>=${z}.${G}.${B}-${K} <${z}.${G}.${+B+1}-0`;else A=`>=${z}.${G}.${B}-${K} <${z}.${+G+1}.0-0`;else A=`>=${z}.${G}.${B}-${K} <${+z+1}.0.0-0`;else if(x0("no pr"),z==="0")if(G==="0")A=`>=${z}.${G}.${B}${$} <${z}.${G}.${+B+1}-0`;else A=`>=${z}.${G}.${B}${$} <${z}.${+G+1}.0-0`;else A=`>=${z}.${G}.${B} <${+z+1}.0.0-0`;return x0("caret return",A),A})},jO=(Z,J)=>{return x0("replaceXRanges",Z,J),Z.split(/\s+/).map((Y)=>KO(Y,J)).join(" ")},KO=(Z,J)=>{Z=Z.trim();let Y=J.loose?_Z[IZ.XRANGELOOSE]:_Z[IZ.XRANGE];return Z.replace(Y,($,Q,z,G,B,K)=>{x0("xRange",Z,$,Q,z,G,B,K);let A=TZ(z),O=A||TZ(G),E=O||TZ(B),N=E;if(Q==="="&&N)Q="";if(K=J.includePrerelease?"-0":"",A)if(Q===">"||Q==="<")$="<0.0.0-0";else $="*";else if(Q&&N){if(O)G=0;if(B=0,Q===">")if(Q=">=",O)z=+z+1,G=0,B=0;else G=+G+1,B=0;else if(Q==="<=")if(Q="<",O)z=+z+1;else G=+G+1;if(Q==="<")K="-0";$=`${Q+z}.${G}.${B}${K}`}else if(O)$=`>=${z}.0.0${K} <${+z+1}.0.0-0`;else if(E)$=`>=${z}.${G}.0${K} <${z}.${+G+1}.0-0`;return x0("xRange return",$),$})},VO=(Z,J)=>{return x0("replaceStars",Z,J),Z.trim().replace(_Z[IZ.STAR],"")},WO=(Z,J)=>{return x0("replaceGTE0",Z,J),Z.trim().replace(_Z[J.includePrerelease?IZ.GTE0PRE:IZ.GTE0],"")},AO=(Z)=>(J,Y,$,Q,z,G,B,K,A,O,E,N)=>{if(TZ($))Y="";else if(TZ(Q))Y=`>=${$}.0.0${Z?"-0":""}`;else if(TZ(z))Y=`>=${$}.${Q}.0${Z?"-0":""}`;else if(G)Y=`>=${Y}`;else Y=`>=${Y}${Z?"-0":""}`;if(TZ(A))K="";else if(TZ(O))K=`<${+A+1}.0.0-0`;else if(TZ(E))K=`<${A}.${+O+1}.0-0`;else if(N)K=`<=${A}.${O}.${E}-${N}`;else if(Z)K=`<${A}.${O}.${+E+1}-0`;else K=`<=${K}`;return`${Y} ${K}`.trim()},HO=(Z,J,Y)=>{for(let $=0;$<Z.length;$++)if(!Z[$].test(J))return!1;if(J.prerelease.length&&!Y.includePrerelease){for(let $=0;$<Z.length;$++){if(x0(Z[$].semver),Z[$].semver===r$.ANY)continue;if(Z[$].semver.prerelease.length>0){let Q=Z[$].semver;if(Q.major===J.major&&Q.minor===J.minor&&Q.patch===J.patch)return!0}}return!1}return!0}});var vj=D((cU,kj)=>{var OO=s$(),UO=(Z,J,Y)=>{try{J=new OO(J,Y)}catch($){return!1}return J.test(Z)};kj.exports=UO});var dj=D((cZ)=>{var LO=cZ&&cZ.__createBinding||(Object.create?function(Z,J,Y,$){if($===void 0)$=Y;var Q=Object.getOwnPropertyDescriptor(J,Y);if(!Q||("get"in Q?!J.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return J[Y]}};Object.defineProperty(Z,$,Q)}:function(Z,J,Y,$){if($===void 0)$=Y;Z[$]=J[Y]}),o$=cZ&&cZ.__exportStar||function(Z,J){for(var Y in Z)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(J,Y))LO(J,Z,Y)};Object.defineProperty(cZ,"__esModule",{value:!0});cZ.DiagnosticPullMode=cZ.vsdiag=void 0;o$(Z0(),cZ);o$(U0(),cZ);var gj=Y$();Object.defineProperty(cZ,"vsdiag",{enumerable:!0,get:function(){return gj.vsdiag}});Object.defineProperty(cZ,"DiagnosticPullMode",{enumerable:!0,get:function(){return gj.DiagnosticPullMode}});o$(u$(),cZ)});var ij=D((fZ)=>{var NO=fZ&&fZ.__createBinding||(Object.create?function(Z,J,Y,$){if($===void 0)$=Y;var Q=Object.getOwnPropertyDescriptor(J,Y);if(!Q||("get"in Q?!J.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return J[Y]}};Object.defineProperty(Z,$,Q)}:function(Z,J,Y,$){if($===void 0)$=Y;Z[$]=J[Y]}),uj=fZ&&fZ.__exportStar||function(Z,J){for(var Y in Z)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(J,Y))NO(J,Z,Y)};Object.defineProperty(fZ,"__esModule",{value:!0});fZ.SettingMonitor=fZ.LanguageClient=fZ.TransportKind=void 0;var l9=require("child_process"),t$=require("fs"),e$=require("path"),VJ=require("vscode"),d0=rZ(),pj=u$(),EO=lB(),u0=l$(),wO=Gj(),FO=vj();uj(l$(),fZ);uj(dj(),fZ);var mj="^1.82.0",l0;(function(Z){Z[Z.stdio=0]="stdio",Z[Z.ipc=1]="ipc",Z[Z.pipe=2]="pipe",Z[Z.socket=3]="socket"})(l0||(fZ.TransportKind=l0={}));var KJ;(function(Z){function J(Y){let $=Y;return $&&$.kind===l0.socket&&d0.number($.port)}Z.isSocket=J})(KJ||(KJ={}));var Z4;(function(Z){function J(Y){return d0.string(Y.command)}Z.is=J})(Z4||(Z4={}));var J4;(function(Z){function J(Y){return d0.string(Y.module)}Z.is=J})(J4||(J4={}));var Y4;(function(Z){function J(Y){let $=Y;return $&&$.writer!==void 0&&$.reader!==void 0}Z.is=J})(Y4||(Y4={}));var $4;(function(Z){function J(Y){let $=Y;return $&&$.process!==void 0&&typeof $.detached==="boolean"}Z.is=J})($4||($4={}));class lj extends pj.BaseLanguageClient{constructor(Z,J,Y,$,Q){let z,G,B,K,A;if(d0.string(J))z=Z,G=J,B=Y,K=$,A=!!Q;else z=Z.toLowerCase(),G=Z,B=J,K=Y,A=$;if(A===void 0)A=!1;super(z,G,K);this._serverOptions=B,this._forceDebug=A,this._isInDebugMode=A;try{this.checkVersion()}catch(O){if(d0.string(O.message))this.outputChannel.appendLine(O.message);throw O}}checkVersion(){let Z=wO(VJ.version);if(!Z)throw Error(`No valid VS Code version detected. Version string is: ${VJ.version}`);if(Z.prerelease&&Z.prerelease.length>0)Z.prerelease=[];if(!FO(Z,mj))throw Error(`The language client requires VS Code version ${mj} but received version ${VJ.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){if(await this.stop(),this.isInDebugMode)await new Promise((Z)=>setTimeout(Z,1000)),await this.start();else await this.start()}stop(Z=2000){return super.stop(Z).finally(()=>{if(this._serverProcess){let J=this._serverProcess;if(this._serverProcess=void 0,this._isDetached===void 0||!this._isDetached)this.checkProcessDied(J);this._isDetached=void 0}})}checkProcessDied(Z){if(!Z||Z.pid===void 0)return;setTimeout(()=>{try{if(Z.pid!==void 0)process.kill(Z.pid,0),(0,EO.terminate)(Z)}catch(J){}},2000)}handleConnectionClosed(){return this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(Z){if(super.fillInitializeParams(Z),Z.processId===null)Z.processId=process.pid}createMessageTransports(Z){function J(A,O){if(!A&&!O)return;let E=Object.create(null);if(Object.keys(process.env).forEach((N)=>E[N]=process.env[N]),O)E.ELECTRON_RUN_AS_NODE="1",E.ELECTRON_NO_ASAR="1";if(A)Object.keys(A).forEach((N)=>E[N]=A[N]);return E}let Y=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],$=["--debug","--debug-brk","--inspect","--inspect-brk"];function Q(){let A=process.execArgv;if(A)return A.some((O)=>{return Y.some((E)=>O.startsWith(E))||$.some((E)=>O===E)});return!1}function z(A){if(A.stdin===null||A.stdout===null||A.stderr===null)throw Error("Process created without stdio streams")}let G=this._serverOptions;if(d0.func(G))return G().then((A)=>{if(pj.MessageTransports.is(A))return this._isDetached=!!A.detached,A;else if(Y4.is(A))return this._isDetached=!!A.detached,{reader:new u0.StreamMessageReader(A.reader),writer:new u0.StreamMessageWriter(A.writer)};else{let O;if($4.is(A))O=A.process,this._isDetached=A.detached;else O=A,this._isDetached=!1;return O.stderr.on("data",(E)=>this.outputChannel.append(d0.string(E)?E:E.toString(Z))),{reader:new u0.StreamMessageReader(O.stdout),writer:new u0.StreamMessageWriter(O.stdin)}}});let B,K=G;if(K.run||K.debug)if(this._forceDebug||Q())B=K.debug,this._isInDebugMode=!0;else B=K.run,this._isInDebugMode=!1;else B=G;return this._getServerWorkingDir(B.options).then((A)=>{if(J4.is(B)&&B.module){let O=B,E=O.transport||l0.stdio;if(O.runtime){let N=[],L=O.options??Object.create(null);if(L.execArgv)L.execArgv.forEach((_)=>N.push(_));if(N.push(O.module),O.args)O.args.forEach((_)=>N.push(_));let T=Object.create(null);T.cwd=A,T.env=J(L.env,!1);let C=this._getRuntimePath(O.runtime,A),x=void 0;if(E===l0.ipc)T.stdio=[null,null,null,"ipc"],N.push("--node-ipc");else if(E===l0.stdio)N.push("--stdio");else if(E===l0.pipe)x=(0,u0.generateRandomPipeName)(),N.push(`--pipe=${x}`);else if(KJ.isSocket(E))N.push(`--socket=${E.port}`);if(N.push(`--clientProcessId=${process.pid.toString()}`),E===l0.ipc||E===l0.stdio){let _=l9.spawn(C,N,T);if(!_||!_.pid)return BY(_,`Launching server using runtime ${C} failed.`);if(this._serverProcess=_,_.stderr.on("data",(d)=>this.outputChannel.append(d0.string(d)?d:d.toString(Z))),E===l0.ipc)return _.stdout.on("data",(d)=>this.outputChannel.append(d0.string(d)?d:d.toString(Z))),Promise.resolve({reader:new u0.IPCMessageReader(_),writer:new u0.IPCMessageWriter(_)});else return Promise.resolve({reader:new u0.StreamMessageReader(_.stdout),writer:new u0.StreamMessageWriter(_.stdin)})}else if(E===l0.pipe)return(0,u0.createClientPipeTransport)(x).then((_)=>{let d=l9.spawn(C,N,T);if(!d||!d.pid)return BY(d,`Launching server using runtime ${C} failed.`);return this._serverProcess=d,d.stderr.on("data",(f)=>this.outputChannel.append(d0.string(f)?f:f.toString(Z))),d.stdout.on("data",(f)=>this.outputChannel.append(d0.string(f)?f:f.toString(Z))),_.onConnected().then((f)=>{return{reader:f[0],writer:f[1]}})});else if(KJ.isSocket(E))return(0,u0.createClientSocketTransport)(E.port).then((_)=>{let d=l9.spawn(C,N,T);if(!d||!d.pid)return BY(d,`Launching server using runtime ${C} failed.`);return this._serverProcess=d,d.stderr.on("data",(f)=>this.outputChannel.append(d0.string(f)?f:f.toString(Z))),d.stdout.on("data",(f)=>this.outputChannel.append(d0.string(f)?f:f.toString(Z))),_.onConnected().then((f)=>{return{reader:f[0],writer:f[1]}})})}else{let N=void 0;return new Promise((L,T)=>{let C=(O.args&&O.args.slice())??[];if(E===l0.ipc)C.push("--node-ipc");else if(E===l0.stdio)C.push("--stdio");else if(E===l0.pipe)N=(0,u0.generateRandomPipeName)(),C.push(`--pipe=${N}`);else if(KJ.isSocket(E))C.push(`--socket=${E.port}`);C.push(`--clientProcessId=${process.pid.toString()}`);let x=O.options??Object.create(null);if(x.env=J(x.env,!0),x.execArgv=x.execArgv||[],x.cwd=A,x.silent=!0,E===l0.ipc||E===l0.stdio){let _=l9.fork(O.module,C||[],x);if(z(_),this._serverProcess=_,_.stderr.on("data",(d)=>this.outputChannel.append(d0.string(d)?d:d.toString(Z))),E===l0.ipc)_.stdout.on("data",(d)=>this.outputChannel.append(d0.string(d)?d:d.toString(Z))),L({reader:new u0.IPCMessageReader(this._serverProcess),writer:new u0.IPCMessageWriter(this._serverProcess)});else L({reader:new u0.StreamMessageReader(_.stdout),writer:new u0.StreamMessageWriter(_.stdin)})}else if(E===l0.pipe)(0,u0.createClientPipeTransport)(N).then((_)=>{let d=l9.fork(O.module,C||[],x);z(d),this._serverProcess=d,d.stderr.on("data",(f)=>this.outputChannel.append(d0.string(f)?f:f.toString(Z))),d.stdout.on("data",(f)=>this.outputChannel.append(d0.string(f)?f:f.toString(Z))),_.onConnected().then((f)=>{L({reader:f[0],writer:f[1]})},T)},T);else if(KJ.isSocket(E))(0,u0.createClientSocketTransport)(E.port).then((_)=>{let d=l9.fork(O.module,C||[],x);z(d),this._serverProcess=d,d.stderr.on("data",(f)=>this.outputChannel.append(d0.string(f)?f:f.toString(Z))),d.stdout.on("data",(f)=>this.outputChannel.append(d0.string(f)?f:f.toString(Z))),_.onConnected().then((f)=>{L({reader:f[0],writer:f[1]})},T)},T)})}}else if(Z4.is(B)&&B.command){let O=B,E=B.args!==void 0?B.args.slice(0):[],N=void 0,L=B.transport;if(L===l0.stdio)E.push("--stdio");else if(L===l0.pipe)N=(0,u0.generateRandomPipeName)(),E.push(`--pipe=${N}`);else if(KJ.isSocket(L))E.push(`--socket=${L.port}`);else if(L===l0.ipc)throw Error("Transport kind ipc is not support for command executable");let T=Object.assign({},O.options);if(T.cwd=T.cwd||A,L===void 0||L===l0.stdio){let C=l9.spawn(O.command,E,T);if(!C||!C.pid)return BY(C,`Launching server using command ${O.command} failed.`);return C.stderr.on("data",(x)=>this.outputChannel.append(d0.string(x)?x:x.toString(Z))),this._serverProcess=C,this._isDetached=!!T.detached,Promise.resolve({reader:new u0.StreamMessageReader(C.stdout),writer:new u0.StreamMessageWriter(C.stdin)})}else if(L===l0.pipe)return(0,u0.createClientPipeTransport)(N).then((C)=>{let x=l9.spawn(O.command,E,T);if(!x||!x.pid)return BY(x,`Launching server using command ${O.command} failed.`);return this._serverProcess=x,this._isDetached=!!T.detached,x.stderr.on("data",(_)=>this.outputChannel.append(d0.string(_)?_:_.toString(Z))),x.stdout.on("data",(_)=>this.outputChannel.append(d0.string(_)?_:_.toString(Z))),C.onConnected().then((_)=>{return{reader:_[0],writer:_[1]}})});else if(KJ.isSocket(L))return(0,u0.createClientSocketTransport)(L.port).then((C)=>{let x=l9.spawn(O.command,E,T);if(!x||!x.pid)return BY(x,`Launching server using command ${O.command} failed.`);return this._serverProcess=x,this._isDetached=!!T.detached,x.stderr.on("data",(_)=>this.outputChannel.append(d0.string(_)?_:_.toString(Z))),x.stdout.on("data",(_)=>this.outputChannel.append(d0.string(_)?_:_.toString(Z))),C.onConnected().then((_)=>{return{reader:_[0],writer:_[1]}})})}return Promise.reject(Error("Unsupported server configuration "+JSON.stringify(G,null,4)))}).finally(()=>{if(this._serverProcess!==void 0)this._serverProcess.on("exit",(A,O)=>{if(A!==null)this.error(`Server process exited with code ${A}.`,void 0,!1);if(O!==null)this.error(`Server process exited with signal ${O}.`,void 0,!1)})})}_getRuntimePath(Z,J){if(e$.isAbsolute(Z))return Z;let Y=this._mainGetRootPath();if(Y!==void 0){let $=e$.join(Y,Z);if(t$.existsSync($))return $}if(J!==void 0){let $=e$.join(J,Z);if(t$.existsSync($))return $}return Z}_mainGetRootPath(){let Z=VJ.workspace.workspaceFolders;if(!Z||Z.length===0)return;let J=Z[0];if(J.uri.scheme==="file")return J.uri.fsPath;return}_getServerWorkingDir(Z){let J=Z&&Z.cwd;if(!J)J=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath();if(J)return new Promise((Y)=>{t$.lstat(J,($,Q)=>{Y(!$&&Q.isDirectory()?J:void 0)})});return Promise.resolve(void 0)}}fZ.LanguageClient=lj;class cj{constructor(Z,J){this._client=Z,this._setting=J,this._listeners=[]}start(){return VJ.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new VJ.Disposable(()=>{if(this._client.needsStop())this._client.stop()})}onDidChangeConfiguration(){let Z=this._setting.indexOf("."),J=Z>=0?this._setting.substr(0,Z):this._setting,Y=Z>=0?this._setting.substr(Z+1):void 0,$=Y?VJ.workspace.getConfiguration(J).get(Y,!1):VJ.workspace.getConfiguration(J);if($&&this._client.needsStart())this._client.start().catch((Q)=>this._client.error("Start failed after configuration change",Q,"force"));else if(!$&&this._client.needsStop())this._client.stop().catch((Q)=>this._client.error("Stop failed after configuration change",Q,"force"))}}fZ.SettingMonitor=cj;function BY(Z,J){if(Z===null)return Promise.reject(J);return new Promise((Y,$)=>{Z.on("error",(Q)=>{$(`${J} ${Q}`)}),setImmediate(()=>$(J))})}});var aj=D((aU,nj)=>{nj.exports=ij()});var tj=D((rj,oj)=>{Object.defineProperty(rj,"__esModule",{value:!0});var S6=require("os"),sj=require("process"),S9=require("vscode");oj.exports=function Z(J,Y=!1){let $=S9.workspace.workspaceFolders,z=S9.window.activeTextEditor?.document?.uri.fsPath,G=S9.workspace.workspaceFolders?.[0],B=$?.find((A)=>z?.startsWith(A.uri.fsPath))?.uri.fsPath,K=S6.homedir();if(J=J.replace(/\${userHome}/g,K),J=J.replace(/\${workspaceFolder}/g,G?.uri.fsPath??""),J=J.replace(/\${workspaceFolder:(.*?)}/g,function(A,O){return $?.find((E)=>E.name===O)?.uri.fsPath??""}),J=J.replace(/\${workspaceFolderBasename}/g,G?.name??""),J=J.replace(/\${workspaceFolderBasename:(.*?)}/g,function(A,O){return $?.find((E)=>E.name===O)?.name??""}),J=J.replace(/\${file}/g,z??""),J=J.replace(/\${fileWorkspaceFolder}/g,B??""),J=J.replace(/\${relativeFile}/g,z?.substring(B?.length??0)??""),J=J.replace(/\${relativeFileDirname}/g,z?.substring(B?.length??0,z?.lastIndexOf(S6.platform()==="win32"?"\\":"/"))??""),J=J.replace(/\${fileBasename}/g,z?.split("/")?.pop()??""),J=J.replace(/\${fileBasenameNoExtension}/g,z?.split("/").pop()?.split(".")?.shift()??""),J=J.replace(/\${fileDirname}/g,z?.split("/")?.slice(0,-1)?.join("/")??""),J=J.replace(/\${fileExtname}/g,z?.split(".")?.pop()??""),J=J.replace(/\${lineNumber}/g,(S9.window.activeTextEditor?S9.window.activeTextEditor.selection.start.line+1:0).toString()),J=J.replace(/\${selectedText}/g,function(){return S9.window.activeTextEditor?.document.getText(new S9.Range(S9.window.activeTextEditor.selection.start,S9.window.activeTextEditor.selection.end))??""}),J=J.replace(/\${execPath}/g,sj.execPath),J=J.replace(/\${pathSeparator}/g,S6.platform()==="win32"?"\\":"/"),J=J.replace(/\${\/}/g,S6.platform()==="win32"?"\\":"/"),J=J.replace(/\${env:(.*?)}/g,function(A,O){return sj.env[O]||""}),J=J.replace(/\${config:(.*?)}/g,function(A,O){return S9.workspace.getConfiguration().get(O,"")}),Y&&J.match(/\${(workspaceFolder|workspaceFolder:(.*?)|workspaceFolderBase:(.*?)|workspaceFolderBasename|fileWorkspaceFolder|relativeFile|fileBasename|fileBasenameNoExtension|fileExtname|fileDirname|cwd|pathSeparator|lineNumber|selectedText|env:(.*?)|config:(.*?)|userHome)}/))J=Z(J,Y);return J}});var bO={};UK(bO,{deactivate:()=>DO,activate:()=>SO});module.exports=OK(bO);var y9=SJ(require("vscode"));var YK=require("util"),$K=SJ(w4()),b9=require("vscode"),QK=SJ(aj());var ZK=require("vscode");var ej=SJ(tj()),D6=(Z)=>{let J=Z;try{if(typeof J==="string")J=ej.default(J);else if(!!J&&typeof J==="object")for(let Y of Object.keys(J))J[Y]=D6(J[Y]);else if(Array.isArray(J)&&J.length>0)J=J.map((Y)=>D6(Y));return J}catch(Y){return console.error(Y),J}};class JK{rootSection="nix";get cfg(){return ZK.workspace.getConfiguration(this.rootSection)}get(Z,J){return D6(this.cfg.get(Z)??J)}get formatterPath(){let Z=this.get("formatterPath","nixfmt");if(typeof Z==="string")switch(Z){case"nix3-fmt":return["nix","fmt","--","--"];case"treefmt":return["treefmt","--stdin","{file}"];default:return[Z]}return Z}get serverPath(){let Z=this.get("serverPath","nil");if(typeof Z==="string")return[Z];return Z}get LSPEnabled(){return this.get("enableLanguageServer",!1)}get hiddenErrorKinds(){return this.get("hiddenLanguageServerErrors",[])}get serverSettings(){return this.get("serverSettings",{})}requiresServerRestart(Z){return Z.affectsConfiguration("nix.serverPath")||Z.affectsConfiguration("nix.enableLanguageServer")}}var kZ=new JK;class zK extends QK.LanguageClient{disposables=[];handleFailedRequest(Z,J,Y,$,Q){if(kZ.hiddenErrorKinds.includes(Z.method))return this.outputChannel.appendLine(`Suppressing failed ${YK.inspect(Z.method)} notification`),super.handleFailedRequest(Z,J,Y,$,!1);return super.handleFailedRequest(Z,J,Y,$,Q)}dispose(Z){let J=!1;if(Z)setTimeout(()=>{J=!0},Z);for(let Y of this.disposables){if(J)break;Y.dispose()}return Promise.resolve()}}var D9;async function Q4(Z){if(!$K.sync(kZ.serverPath[0])){let B=await b9.window.showErrorMessage(`Command ${kZ.serverPath} not found in $PATH`,{title:"Install language server",uri:b9.Uri.parse("https://github.com/nix-community/vscode-nix-ide?tab=readme-ov-file#language-servers")});if(B?.uri!==void 0){await b9.env.openExternal(B?.uri);return}}let Y={command:kZ.serverPath[0],args:kZ.serverPath.slice(1)},$=[{scheme:"file",language:"nix"},{scheme:"untitled",language:"nix"}],Q=b9.window.createOutputChannel("Nix"),z=b9.workspace.createFileSystemWatcher("**/*.nix"),G={documentSelector:$,synchronize:{fileEvents:z,configurationSection:[kZ.rootSection]},outputChannel:Q,middleware:{workspace:{configuration:(B)=>{let K=B.items||[],A=[],O=kZ.serverSettings;for(let E of K){if(!E?.section)continue;let N=O[E.section];if(!N)D9.warn(`failed to find "${E.section}" in "nix.serverSettings"`);A.push(N??null)}return A}}}};D9=new zK("nix","Nix",Y,G),D9.disposables.push(Q,z),D9.registerProposedFeatures(),await D9.start(),Z.subscriptions.push(D9)}async function z4(){if(D9?.needsStop())await D9.stop();await D9.dispose()}async function G4(Z){let J=b9.window.setStatusBarMessage("$(loading~spin) Restarting Nix language server");try{await z4(),await Q4(Z)}catch(Y){D9?.error("Failed to restart Nix language server",Y,"force")}finally{J.dispose()}}var R6=SJ(require("vscode")),h6=require("vscode");var GK=require("node:child_process"),MO=(Z)=>Z.errno!==void 0&&typeof Z.errno==="string",IO=(Z)=>!MO(Z)&&Z.code!==void 0&&Z.code>0,b6=(Z,J,Y)=>new Promise(($,Q)=>{let z=Z?Z.uri.fsPath:process.cwd(),G=GK.execFile(J[0],J.slice(1),{cwd:z},(B,K,A)=>{if(B&&!IO(B))console.error("Command error",J,B),Q(B);else{let O=B?B.code:0;$({stdout:K,stderr:A,exitCode:O})}});if(Y&&G.stdin)G.stdin.end(Y)});var y6=kZ.formatterPath,XK=async(Z,J)=>{let Y=Z.validateRange(J||new h6.Range(0,0,Number.MAX_VALUE,Number.MAX_VALUE)),$;try{y6.forEach((Q,z)=>{y6[z]=Q.replace("{file}",Z.fileName)}),$=await b6(R6.workspace.getWorkspaceFolder(Z.uri),y6,Z.getText(Y))}catch(Q){if(Q instanceof Error)await R6.window.showErrorMessage(`Failed to run ${y6.join(" ")}: ${Q.message}`);throw Q}return $.exitCode===0?[h6.TextEdit.replace(Y,$.stdout)]:[]},BK={provideDocumentFormattingEdits:(Z,J,Y)=>XK(Z).then(($)=>Y.isCancellationRequested?[]:$),provideDocumentRangeFormattingEdits:(Z,J,Y,$)=>XK(Z,J).then((Q)=>$.isCancellationRequested?[]:Q)};var iZ=SJ(require("vscode")),jK=require("vscode");var TO=(Z)=>!Z.isDirty&&0<iZ.languages.match({language:"nix",scheme:"file"},Z),qO=(Z)=>{let J=[],Y=/^error: (.+) at .+:(\d+):(\d+)$/gm,$=Y.exec(Z);while($!==null)J.push({msg:$[1],row:Number.parseInt($[2]),col:Number.parseInt($[3])}),$=Y.exec(Z);return J},CO=(Z,J)=>{let Y=[];for(let $ of qO(J)){let Q=Z.validateRange(new iZ.Range($.row-1,$.col-2,$.row-1,$.col+2)),z=new jK.Diagnostic(Q,$.msg);z.source="nix",Y.push(z)}return Y};async function KK(Z){let J=iZ.languages.createDiagnosticCollection("nix");Z.subscriptions.push(J);let Y=async($)=>{if(TO($)){let Q=iZ.workspace.getWorkspaceFolder($.uri),z;try{let G=await b6(Q,["nix-instantiate","--parse",$.fileName]);z=CO($,G.stderr)}catch(G){if(G instanceof Error)await iZ.window.showErrorMessage(G.message);J.delete($.uri);return}J.set($.uri,z)}};iZ.workspace.onDidOpenTextDocument(Y,null,Z.subscriptions),iZ.workspace.onDidSaveTextDocument(Y,null,Z.subscriptions);for await(let $ of iZ.workspace.textDocuments)await Y($);iZ.workspace.onDidCloseTextDocument(($)=>J.delete($.uri),null,Z.subscriptions)}async function SO(Z){if(kZ.LSPEnabled)try{await Q4(Z)}catch(J){console.error(J)}else{await KK(Z);let J=[y9.languages.registerDocumentFormattingEditProvider,y9.languages.registerDocumentRangeFormattingEditProvider].map((Y)=>Y("nix",BK));Z.subscriptions.concat(J)}Z.subscriptions.push(y9.commands.registerCommand("nix-ide.restartLanguageServer",async()=>{if(kZ.LSPEnabled)await G4(Z)})),y9.workspace.onDidChangeConfiguration(async(J)=>{if(kZ.requiresServerRestart(J)){if(await y9.window.showWarningMessage("Configuration change requires restarting the language server","Restart")==="Restart")await G4(Z)}})}async function DO(){await z4()}
