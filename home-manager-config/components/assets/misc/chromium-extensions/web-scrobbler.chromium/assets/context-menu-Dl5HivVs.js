(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();const z={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return Us(this.context.count)},getNextContextId(){return Us(this.context.count++)}};function Us(e){const t=String(e),s=t.length-1;return z.context.id+(s?String.fromCharCode(96+s):"")+t}function Je(e){z.context=e}const kr=!1,Sr=(e,t)=>e===t,Pt=Symbol("solid-proxy"),bn=typeof Proxy=="function",xr=Symbol("solid-track"),It={equals:Sr};let fn=$n;const _e=1,Dt=2,vn={owned:null,cleanups:null,context:null,owner:null},ss={};var H=null;let Ie=null,Tr=null,G=null,Z=null,de=null,Vt=0;function Xe(e,t){const s=G,n=H,r=e.length===0,i=t===void 0?n:t,o=r?vn:{owned:null,cleanups:null,context:i?i.context:null,owner:i},a=r?e:()=>e(()=>ee(()=>st(o)));H=o,G=null;try{return pe(a,!0)}finally{G=s,H=n}}function V(e,t){t=t?Object.assign({},It,t):It;const s={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=r=>(typeof r=="function"&&(r=r(s.value)),wn(s,r));return[yn.bind(s),n]}function Ns(e,t,s){const n=Wt(e,t,!0,_e);Be(n)}function x(e,t,s){const n=Wt(e,t,!1,_e);Be(n)}function ps(e,t,s){fn=Ir;const n=Wt(e,t,!1,_e),r=Ne&&ys(Ne);r&&(n.suspense=r),n.user=!0,de?de.push(n):Be(n)}function q(e,t,s){s=s?Object.assign({},It,s):It;const n=Wt(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=s.equals||void 0,Be(n),yn.bind(n)}function Cr(e){return e&&typeof e=="object"&&"then"in e}function X(e,t,s){let n,r,i;n=!0,r=e,i={};let o=null,a=ss,l=null,d=!1,c=!1,g="initialValue"in i,S=typeof n=="function"&&q(n);const j=new Set,[E,T]=(i.storage||V)(i.initialValue),[D,B]=V(void 0),[U,N]=V(void 0,{equals:!1}),[F,p]=V(g?"ready":"unresolved");z.context&&(l=z.getNextContextId(),i.ssrLoadFrom==="initial"?a=i.initialValue:z.load&&z.has(l)&&(a=z.load(l)));function y(O,w,_,A){return o===O&&(o=null,A!==void 0&&(g=!0),(O===a||w===a)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(A,{value:w})),a=ss,b(w,_)),w}function b(O,w){pe(()=>{w===void 0&&T(()=>O),p(w!==void 0?"errored":g?"ready":"unresolved"),B(w);for(const _ of j.keys())_.decrement();j.clear()},!1)}function C(){const O=Ne&&ys(Ne),w=E(),_=D();if(_!==void 0&&!o)throw _;return G&&!G.user&&O&&Ns(()=>{U(),o&&(O.resolved&&Ie&&d?Ie.promises.add(o):j.has(O)||(O.increment(),j.add(O)))}),w}function R(O=!0){if(O!==!1&&c)return;c=!1;const w=S?S():n;if(d=Ie,w==null||w===!1){y(o,ee(E));return}let _;const A=a!==ss?a:ee(()=>{try{return r(w,{value:E(),refetching:O})}catch(k){_=k}});if(_!==void 0){y(o,void 0,Rt(_),w);return}else if(!Cr(A))return y(o,A,void 0,w),A;return o=A,"v"in A?(A.s===1?y(o,A.v,void 0,w):y(o,void 0,Rt(A.v),w),A):(c=!0,queueMicrotask(()=>c=!1),pe(()=>{p(g?"refreshing":"pending"),N()},!1),A.then(k=>y(A,k,void 0,w),k=>y(A,void 0,Rt(k),w)))}Object.defineProperties(C,{state:{get:()=>F()},error:{get:()=>D()},loading:{get(){const O=F();return O==="pending"||O==="refreshing"}},latest:{get(){if(!g)return C();const O=D();if(O&&!o)throw O;return E()}}});let I=H;return S?Ns(()=>(I=H,R(!1))):R(!1),[C,{refetch:O=>Rr(I,()=>R(O)),mutate:T}]}function qg(e){return pe(e,!1)}function ee(e){if(G===null)return e();const t=G;G=null;try{return e()}finally{G=t}}function _s(e){ps(()=>ee(e))}function Gt(e){return H===null||(H.cleanups===null?H.cleanups=[e]:H.cleanups.push(e)),e}function Hg(){return G}function Er(){return H}function Rr(e,t){const s=H,n=G;H=e,G=null;try{return pe(t,!0)}catch(r){ws(r)}finally{H=s,G=n}}const[Vg,Gg]=V(!1);function Lr(e){de.push.apply(de,e),e.length=0}function pn(e,t){const s=Symbol("context");return{id:s,Provider:Dr(s),defaultValue:e}}function ys(e){let t;return H&&H.context&&(t=H.context[e.id])!==void 0?t:e.defaultValue}function _n(e){const t=q(e),s=q(()=>ls(t()));return s.toArray=()=>{const n=s();return Array.isArray(n)?n:n!=null?[n]:[]},s}let Ne;function Or(){return Ne||(Ne=pn())}function yn(){if(this.sources&&this.state)if(this.state===_e)Be(this);else{const e=Z;Z=null,pe(()=>Ut(this),!1),Z=e}if(G){const e=this.observers?this.observers.length:0;G.sources?(G.sources.push(this),G.sourceSlots.push(e)):(G.sources=[this],G.sourceSlots=[e]),this.observers?(this.observers.push(G),this.observerSlots.push(G.sources.length-1)):(this.observers=[G],this.observerSlots=[G.sources.length-1])}return this.value}function wn(e,t,s){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&pe(()=>{for(let r=0;r<e.observers.length;r+=1){const i=e.observers[r],o=Ie&&Ie.running;o&&Ie.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?Z.push(i):de.push(i),i.observers&&jn(i)),o||(i.state=_e)}if(Z.length>1e6)throw Z=[],new Error},!1)),t}function Be(e){if(!e.fn)return;st(e);const t=Vt;Mr(e,e.value,t)}function Mr(e,t,s){let n;const r=H,i=G;G=H=e;try{n=e.fn(t)}catch(o){return e.pure&&(e.state=_e,e.owned&&e.owned.forEach(st),e.owned=null),e.updatedAt=s+1,ws(o)}finally{G=i,H=r}(!e.updatedAt||e.updatedAt<=s)&&(e.updatedAt!=null&&"observers"in e?wn(e,n):e.value=n,e.updatedAt=s)}function Wt(e,t,s,n=_e,r){const i={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:H,context:H?H.context:null,pure:s};return H===null||H!==vn&&(H.owned?H.owned.push(i):H.owned=[i]),i}function zt(e){if(e.state===0)return;if(e.state===Dt)return Ut(e);if(e.suspense&&ee(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Vt);)e.state&&t.push(e);for(let s=t.length-1;s>=0;s--)if(e=t[s],e.state===_e)Be(e);else if(e.state===Dt){const n=Z;Z=null,pe(()=>Ut(e,t[0]),!1),Z=n}}function pe(e,t){if(Z)return e();let s=!1;t||(Z=[]),de?s=!0:de=[],Vt++;try{const n=e();return Pr(s),n}catch(n){s||(de=null),Z=null,ws(n)}}function Pr(e){if(Z&&($n(Z),Z=null),e)return;const t=de;de=null,t.length&&pe(()=>fn(t),!1)}function $n(e){for(let t=0;t<e.length;t++)zt(e[t])}function Ir(e){let t,s=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[s++]=n:zt(n)}if(z.context){if(z.count){z.effects||(z.effects=[]),z.effects.push(...e.slice(0,s));return}Je()}for(z.effects&&(z.done||!z.count)&&(e=[...z.effects,...e],s+=z.effects.length,delete z.effects),t=0;t<s;t++)zt(e[t])}function Ut(e,t){e.state=0;for(let s=0;s<e.sources.length;s+=1){const n=e.sources[s];if(n.sources){const r=n.state;r===_e?n!==t&&(!n.updatedAt||n.updatedAt<Vt)&&zt(n):r===Dt&&Ut(n,t)}}}function jn(e){for(let t=0;t<e.observers.length;t+=1){const s=e.observers[t];s.state||(s.state=Dt,s.pure?Z.push(s):de.push(s),s.observers&&jn(s))}}function st(e){let t;if(e.sources)for(;e.sources.length;){const s=e.sources.pop(),n=e.sourceSlots.pop(),r=s.observers;if(r&&r.length){const i=r.pop(),o=s.observerSlots.pop();n<r.length&&(i.sourceSlots[o]=n,r[n]=i,s.observerSlots[n]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)st(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)st(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Rt(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function ws(e,t=H){throw Rt(e)}function ls(e){if(typeof e=="function"&&!e.length)return ls(e());if(Array.isArray(e)){const t=[];for(let s=0;s<e.length;s++){const n=ls(e[s]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function Dr(e,t){return function(n){let r;return x(()=>r=ee(()=>(H.context={...H.context,[e]:n.value},_n(()=>n.children))),void 0),r}}const zr=Symbol("fallback");function Bs(e){for(let t=0;t<e.length;t++)e[t]()}function Ur(e,t,s={}){let n=[],r=[],i=[],o=0,a=t.length>1?[]:null;return Gt(()=>Bs(i)),()=>{let l=e()||[],d=l.length,c,g;return l[xr],ee(()=>{let j,E,T,D,B,U,N,F,p;if(d===0)o!==0&&(Bs(i),i=[],n=[],r=[],o=0,a&&(a=[])),s.fallback&&(n=[zr],r[0]=Xe(y=>(i[0]=y,s.fallback())),o=1);else if(o===0){for(r=new Array(d),g=0;g<d;g++)n[g]=l[g],r[g]=Xe(S);o=d}else{for(T=new Array(d),D=new Array(d),a&&(B=new Array(d)),U=0,N=Math.min(o,d);U<N&&n[U]===l[U];U++);for(N=o-1,F=d-1;N>=U&&F>=U&&n[N]===l[F];N--,F--)T[F]=r[N],D[F]=i[N],a&&(B[F]=a[N]);for(j=new Map,E=new Array(F+1),g=F;g>=U;g--)p=l[g],c=j.get(p),E[g]=c===void 0?-1:c,j.set(p,g);for(c=U;c<=N;c++)p=n[c],g=j.get(p),g!==void 0&&g!==-1?(T[g]=r[c],D[g]=i[c],a&&(B[g]=a[c]),g=E[g],j.set(p,g)):i[c]();for(g=U;g<d;g++)g in T?(r[g]=T[g],i[g]=D[g],a&&(a[g]=B[g],a[g](g))):r[g]=Xe(S);r=r.slice(0,o=d),n=l.slice(0)}return r});function S(j){if(i[g]=j,a){const[E,T]=V(g);return a[g]=T,t(l[g],E)}return t(l[g])}}}function v(e,t){return ee(()=>e(t||{}))}function wt(){return!0}const cs={get(e,t,s){return t===Pt?s:e.get(t)},has(e,t){return t===Pt?!0:e.has(t)},set:wt,deleteProperty:wt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:wt,deleteProperty:wt}},ownKeys(e){return e.keys()}};function ns(e){return(e=typeof e=="function"?e():e)?e:{}}function Nr(){for(let e=0,t=this.length;e<t;++e){const s=this[e]();if(s!==void 0)return s}}function Br(...e){let t=!1;for(let o=0;o<e.length;o++){const a=e[o];t=t||!!a&&Pt in a,e[o]=typeof a=="function"?(t=!0,q(a)):a}if(bn&&t)return new Proxy({get(o){for(let a=e.length-1;a>=0;a--){const l=ns(e[a])[o];if(l!==void 0)return l}},has(o){for(let a=e.length-1;a>=0;a--)if(o in ns(e[a]))return!0;return!1},keys(){const o=[];for(let a=0;a<e.length;a++)o.push(...Object.keys(ns(e[a])));return[...new Set(o)]}},cs);const s={},n=Object.create(null);for(let o=e.length-1;o>=0;o--){const a=e[o];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let d=l.length-1;d>=0;d--){const c=l[d];if(c==="__proto__"||c==="constructor")continue;const g=Object.getOwnPropertyDescriptor(a,c);if(!n[c])n[c]=g.get?{enumerable:!0,configurable:!0,get:Nr.bind(s[c]=[g.get.bind(a)])}:g.value!==void 0?g:void 0;else{const S=s[c];S&&(g.get?S.push(g.get.bind(a)):g.value!==void 0&&S.push(()=>g.value))}}}const r={},i=Object.keys(n);for(let o=i.length-1;o>=0;o--){const a=i[o],l=n[a];l&&l.get?Object.defineProperty(r,a,l):r[a]=l?l.value:void 0}return r}function Fr(e,...t){if(bn&&Pt in e){const r=new Set(t.length>1?t.flat():t[0]),i=t.map(o=>new Proxy({get(a){return o.includes(a)?e[a]:void 0},has(a){return o.includes(a)&&a in e},keys(){return o.filter(a=>a in e)}},cs));return i.push(new Proxy({get(o){return r.has(o)?void 0:e[o]},has(o){return r.has(o)?!1:o in e},keys(){return Object.keys(e).filter(o=>!r.has(o))}},cs)),i}const s={},n=t.map(()=>({}));for(const r of Object.getOwnPropertyNames(e)){const i=Object.getOwnPropertyDescriptor(e,r),o=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let a=!1,l=0;for(const d of t)d.includes(r)&&(a=!0,o?n[l][r]=i.value:Object.defineProperty(n[l],r,i)),++l;a||(o?s[r]=i.value:Object.defineProperty(s,r,i))}return[...n,s]}const An=e=>`Stale read from <${e}>.`;function re(e){const t="fallback"in e&&{fallback:()=>e.fallback};return q(Ur(()=>e.each,e.children,t||void 0))}function Y(e){const t=e.keyed,s=q(()=>e.when,void 0,void 0),n=t?s:q(s,void 0,{equals:(r,i)=>!r==!i});return q(()=>{const r=n();if(r){const i=e.children;return typeof i=="function"&&i.length>0?ee(()=>i(t?r:()=>{if(!ee(n))throw An("Show");return s()})):i}return e.fallback},void 0,void 0)}function Fs(e){const t=_n(()=>e.children),s=q(()=>{const n=t(),r=Array.isArray(n)?n:[n];let i=()=>{};for(let o=0;o<r.length;o++){const a=o,l=r[o],d=i,c=q(()=>d()?void 0:l.when,void 0,void 0),g=l.keyed?c:q(c,void 0,{equals:(S,j)=>!S==!j});i=()=>d()||(g()?[a,c,l]:void 0)}return i});return q(()=>{const n=s()();if(!n)return e.fallback;const[r,i,o]=n,a=o.children;return typeof a=="function"&&a.length>0?ee(()=>a(o.keyed?i():()=>{if(ee(s)()?.[0]!==r)throw An("Match");return i()})):a},void 0,void 0)}function $t(e){return e}const qr=pn();function kn(e){let t=0,s,n,r,i,o;const[a,l]=V(!1),d=Or(),c={increment:()=>{++t===1&&l(!0)},decrement:()=>{--t===0&&l(!1)},inFallback:a,effects:[],resolved:!1},g=Er();if(z.context&&z.load){const E=z.getContextId();let T=z.load(E);if(T&&(typeof T!="object"||T.s!==1?r=T:z.gather(E)),r&&r!=="$$f"){const[D,B]=V(void 0,{equals:!1});i=D,r.then(()=>{if(z.done)return B();z.gather(E),Je(n),B(),Je()},U=>{o=U,B()})}}const S=ys(qr);S&&(s=S.register(c.inFallback));let j;return Gt(()=>j&&j()),v(d.Provider,{value:c,get children(){return q(()=>{if(o)throw o;if(n=z.context,i)return i(),i=void 0;n&&r==="$$f"&&Je();const E=q(()=>e.children);return q(T=>{const D=c.inFallback(),{showContent:B=!0,showFallback:U=!0}=s?s():{};if((!D||r&&r!=="$$f")&&B)return c.resolved=!0,j&&j(),j=n=r=void 0,Lr(c.effects),E();if(U)return j?T:Xe(N=>(j=N,n&&(Je({id:n.id+"F",count:0}),n=void 0),e.fallback),g)})})}})}const Hr=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],Vr=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...Hr]),Gr=new Set(["innerHTML","textContent","innerText","children"]),Wr=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Kr=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function Jr(e,t){const s=Kr[e];return typeof s=="object"?s[t]?s.$:void 0:s}const Yr=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Qr=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),Zr={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},Lt=e=>q(()=>e());function Xr(e,t,s){let n=s.length,r=t.length,i=n,o=0,a=0,l=t[r-1].nextSibling,d=null;for(;o<r||a<i;){if(t[o]===s[a]){o++,a++;continue}for(;t[r-1]===s[i-1];)r--,i--;if(r===o){const c=i<n?a?s[a-1].nextSibling:s[i-a]:l;for(;a<i;)e.insertBefore(s[a++],c)}else if(i===a)for(;o<r;)(!d||!d.has(t[o]))&&t[o].remove(),o++;else if(t[o]===s[i-1]&&s[a]===t[r-1]){const c=t[--r].nextSibling;e.insertBefore(s[a++],t[o++].nextSibling),e.insertBefore(s[--i],c),t[r]=s[i]}else{if(!d){d=new Map;let g=a;for(;g<i;)d.set(s[g],g++)}const c=d.get(t[o]);if(c!=null)if(a<c&&c<i){let g=o,S=1,j;for(;++g<r&&g<i&&!((j=d.get(t[g]))==null||j!==c+S);)S++;if(S>c-a){const E=t[o];for(;a<c;)e.insertBefore(s[a++],E)}else e.replaceChild(s[a++],t[o++])}else o++;else t[o++].remove()}}}const qs="_$DX_DELEGATE";function Wg(e,t,s,n={}){let r;return Xe(i=>{r=i,t===document?e():u(t,e(),t.firstChild?null:void 0,s)},n.owner),()=>{r(),t.textContent=""}}function f(e,t,s,n){let r;const i=()=>{const a=document.createElement("template");return a.innerHTML=e,s?a.content.firstChild.firstChild:a.content.firstChild},o=t?()=>ee(()=>document.importNode(r||(r=i()),!0)):()=>(r||(r=i())).cloneNode(!0);return o.cloneNode=o,o}function ge(e,t=window.document){const s=t[qs]||(t[qs]=new Set);for(let n=0,r=e.length;n<r;n++){const i=e[n];s.has(i)||(s.add(i),t.addEventListener(i,ai))}}function M(e,t,s){xe(e)||(s==null?e.removeAttribute(t):e.setAttribute(t,s))}function ei(e,t,s,n){xe(e)||(n==null?e.removeAttributeNS(t,s):e.setAttributeNS(t,s,n))}function ti(e,t,s){xe(e)||(s?e.setAttribute(t,""):e.removeAttribute(t))}function $(e,t){xe(e)||(t==null?e.removeAttribute("class"):e.className=t)}function Sn(e,t,s,n){if(n)Array.isArray(s)?(e[`$$${t}`]=s[0],e[`$$${t}Data`]=s[1]):e[`$$${t}`]=s;else if(Array.isArray(s)){const r=s[0];e.addEventListener(t,s[0]=i=>r.call(e,s[1],i))}else e.addEventListener(t,s,typeof s!="function"&&s)}function si(e,t,s={}){const n=Object.keys(t||{}),r=Object.keys(s);let i,o;for(i=0,o=r.length;i<o;i++){const a=r[i];!a||a==="undefined"||t[a]||(Hs(e,a,!1),delete s[a])}for(i=0,o=n.length;i<o;i++){const a=n[i],l=!!t[a];!a||a==="undefined"||s[a]===l||!l||(Hs(e,a,!0),s[a]=l)}return s}function ni(e,t,s){if(!t)return s?M(e,"style"):t;const n=e.style;if(typeof t=="string")return n.cssText=t;typeof s=="string"&&(n.cssText=s=void 0),s||(s={}),t||(t={});let r,i;for(i in s)t[i]==null&&n.removeProperty(i),delete s[i];for(i in t)r=t[i],r!==s[i]&&(n.setProperty(i,r),s[i]=r);return s}function xn(e,t={},s,n){const r={};return n||x(()=>r.children=nt(e,t.children,r.children)),x(()=>typeof t.ref=="function"&&Kt(t.ref,e)),x(()=>ri(e,t,s,!0,r,!0)),r}function Kt(e,t,s){return ee(()=>e(t,s))}function u(e,t,s,n){if(s!==void 0&&!n&&(n=[]),typeof t!="function")return nt(e,t,n,s);x(r=>nt(e,t(),r,s),n)}function ri(e,t,s,n,r={},i=!1){t||(t={});for(const o in r)if(!(o in t)){if(o==="children")continue;r[o]=Vs(e,o,null,r[o],s,i,t)}for(const o in t){if(o==="children")continue;const a=t[o];r[o]=Vs(e,o,a,r[o],s,i,t)}}function ii(e){let t,s;return!xe()||!(t=z.registry.get(s=li()))?e():(z.completed&&z.completed.add(t),z.registry.delete(s),t)}function xe(e){return!!z.context&&!z.done&&(!e||e.isConnected)}function oi(e){return e.toLowerCase().replace(/-([a-z])/g,(t,s)=>s.toUpperCase())}function Hs(e,t,s){const n=t.trim().split(/\s+/);for(let r=0,i=n.length;r<i;r++)e.classList.toggle(n[r],s)}function Vs(e,t,s,n,r,i,o){let a,l,d,c,g;if(t==="style")return ni(e,s,n);if(t==="classList")return si(e,s,n);if(s===n)return n;if(t==="ref")i||s(e);else if(t.slice(0,3)==="on:"){const S=t.slice(3);n&&e.removeEventListener(S,n,typeof n!="function"&&n),s&&e.addEventListener(S,s,typeof s!="function"&&s)}else if(t.slice(0,10)==="oncapture:"){const S=t.slice(10);n&&e.removeEventListener(S,n,!0),s&&e.addEventListener(S,s,!0)}else if(t.slice(0,2)==="on"){const S=t.slice(2).toLowerCase(),j=Yr.has(S);if(!j&&n){const E=Array.isArray(n)?n[0]:n;e.removeEventListener(S,E)}(j||s)&&(Sn(e,S,s,j),j&&ge([S]))}else if(t.slice(0,5)==="attr:")M(e,t.slice(5),s);else if(t.slice(0,5)==="bool:")ti(e,t.slice(5),s);else if((g=t.slice(0,5)==="prop:")||(d=Gr.has(t))||!r&&((c=Jr(t,e.tagName))||(l=Vr.has(t)))||(a=e.nodeName.includes("-")||"is"in o)){if(g)t=t.slice(5),l=!0;else if(xe(e))return s;t==="class"||t==="className"?$(e,s):a&&!l&&!d?e[oi(t)]=s:e[c||t]=s}else{const S=r&&t.indexOf(":")>-1&&Zr[t.split(":")[0]];S?ei(e,S,t,s):M(e,Wr[t]||t,s)}return s}function ai(e){if(z.registry&&z.events&&z.events.find(([l,d])=>d===e))return;let t=e.target;const s=`$$${e.type}`,n=e.target,r=e.currentTarget,i=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),o=()=>{const l=t[s];if(l&&!t.disabled){const d=t[`${s}Data`];if(d!==void 0?l.call(t,d,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&i(t.host),!0},a=()=>{for(;o()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),z.registry&&!z.done&&(z.done=_$HY.done=!0),e.composedPath){const l=e.composedPath();i(l[0]);for(let d=0;d<l.length-2&&(t=l[d],!!o());d++){if(t._$host){t=t._$host,a();break}if(t.parentNode===r)break}}else a();i(n)}function nt(e,t,s,n,r){const i=xe(e);if(i){!s&&(s=[...e.childNodes]);let l=[];for(let d=0;d<s.length;d++){const c=s[d];c.nodeType===8&&c.data.slice(0,2)==="!$"?c.remove():l.push(c)}s=l}for(;typeof s=="function";)s=s();if(t===s)return s;const o=typeof t,a=n!==void 0;if(e=a&&s[0]&&s[0].parentNode||e,o==="string"||o==="number"){if(i||o==="number"&&(t=t.toString(),t===s))return s;if(a){let l=s[0];l&&l.nodeType===3?l.data!==t&&(l.data=t):l=document.createTextNode(t),s=Ce(e,s,n,l)}else s!==""&&typeof s=="string"?s=e.firstChild.data=t:s=e.textContent=t}else if(t==null||o==="boolean"){if(i)return s;s=Ce(e,s,n)}else{if(o==="function")return x(()=>{let l=t();for(;typeof l=="function";)l=l();s=nt(e,l,s,n)}),()=>s;if(Array.isArray(t)){const l=[],d=s&&Array.isArray(s);if(us(l,t,s,r))return x(()=>s=nt(e,l,s,n,!0)),()=>s;if(i){if(!l.length)return s;if(n===void 0)return s=[...e.childNodes];let c=l[0];if(c.parentNode!==e)return s;const g=[c];for(;(c=c.nextSibling)!==n;)g.push(c);return s=g}if(l.length===0){if(s=Ce(e,s,n),a)return s}else d?s.length===0?Gs(e,l,n):Xr(e,s,l):(s&&Ce(e),Gs(e,l));s=l}else if(t.nodeType){if(i&&t.parentNode)return s=a?[t]:t;if(Array.isArray(s)){if(a)return s=Ce(e,s,n,t);Ce(e,s,null,t)}else s==null||s===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);s=t}}return s}function us(e,t,s,n){let r=!1;for(let i=0,o=t.length;i<o;i++){let a=t[i],l=s&&s[e.length],d;if(!(a==null||a===!0||a===!1))if((d=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))r=us(e,a,l)||r;else if(d==="function")if(n){for(;typeof a=="function";)a=a();r=us(e,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||r}else e.push(a),r=!0;else{const c=String(a);l&&l.nodeType===3&&l.data===c?e.push(l):e.push(document.createTextNode(c))}}return r}function Gs(e,t,s=null){for(let n=0,r=t.length;n<r;n++)e.insertBefore(t[n],s)}function Ce(e,t,s,n){if(s===void 0)return e.textContent="";const r=n||document.createTextNode("");if(t.length){let i=!1;for(let o=t.length-1;o>=0;o--){const a=t[o];if(r!==a){const l=a.parentNode===e;!i&&!o?l?e.replaceChild(r,a):e.insertBefore(r,s):l&&a.remove()}else i=!0}}else e.insertBefore(r,s);return[r]}function li(){return z.getNextContextId()}const ci="http://www.w3.org/2000/svg";function ui(e,t=!1,s=void 0){return t?document.createElementNS(ci,e):document.createElement(e,{is:s})}function di(e,t){const s=q(e);return q(()=>{const n=s();switch(typeof n){case"function":return ee(()=>n(t));case"string":const r=Qr.has(n),i=z.context?ii():ui(n,r,ee(()=>t.is));return xn(i,t,r),i}})}function Tn(e){const[,t]=Fr(e,["component"]);return di(()=>e.component,t)}const mi="_alertPopup_uiqbd_1",gi="_widePopup_uiqbd_2",hi="_bigIcon_uiqbd_21",bi="_notRedAnchor_uiqbd_38",fi="_alreadyPlaying_uiqbd_42",vi="_expandVector_uiqbd_52",pi="_nowPlayingPopup_uiqbd_59",_i="_coverArtWrapper_uiqbd_65",yi="_coverArtBackground_uiqbd_68",wi="_coverArt_uiqbd_65",$i="_songDetails_uiqbd_77",ji="_editField_uiqbd_92",Ai="_playDetails_uiqbd_97",ki="_playCount_uiqbd_101",Si="_label_uiqbd_111",xi="_controlButtons_uiqbd_117",Ti="_controlButton_uiqbd_117",Ci="_applyFill_uiqbd_129",Ei="_active_uiqbd_132",Ri="_hover_uiqbd_135",Li="_nonHover_uiqbd_138",Oi="_hiddenDisabled_uiqbd_144",Mi="_bold_uiqbd_148",Pi="_settingsIcon_uiqbd_152",Ii="_regexContainer_uiqbd_162",Di="_entryWrapper_uiqbd_172",zi="_entryLabel_uiqbd_179",Ui="_regexFieldWrapper_uiqbd_183",Ni="_regexFieldInput_uiqbd_187",Bi="_regexFieldItem_uiqbd_191",Fi="_regexSuccess_uiqbd_197",qi="_regexFailure_uiqbd_200",Hi="_editWarning_uiqbd_203",Vi="_regexFooter_uiqbd_211",Gi="_regexFooterButtons_uiqbd_216",Wi="_regexFlagsWrapper_uiqbd_220",Ki="_regexToggleWrapper_uiqbd_229",Ji="_regexToggleInput_uiqbd_237",Yi="_button_uiqbd_267",Qi="_root_uiqbd_287",Zi="_iosLoveButton_uiqbd_346",Xi="_iosSearchLabel_uiqbd_366",eo="_iosReplaceLabel_uiqbd_367",to="_iosPreviewLabel_uiqbd_368",so="_entryWrapperLegend_uiqbd_390",jt={alertPopup:mi,widePopup:gi,bigIcon:hi,notRedAnchor:bi,alreadyPlaying:fi,expandVector:vi,nowPlayingPopup:pi,coverArtWrapper:_i,coverArtBackground:yi,coverArt:wi,songDetails:$i,editField:ji,playDetails:Ai,playCount:ki,label:Si,controlButtons:xi,controlButton:Ti,applyFill:Ci,active:Ei,hover:Ri,nonHover:Li,hiddenDisabled:Oi,bold:Mi,settingsIcon:Pi,regexContainer:Ii,entryWrapper:Di,entryLabel:zi,regexFieldWrapper:Ui,regexFieldInput:Ni,regexFieldItem:Bi,regexSuccess:Fi,regexFailure:qi,editWarning:Hi,regexFooter:Vi,regexFooterButtons:Gi,regexFlagsWrapper:Wi,regexToggleWrapper:Ki,regexToggleInput:Ji,button:Yi,root:Qi,iosLoveButton:Zi,iosSearchLabel:Xi,iosReplaceLabel:eo,iosPreviewLabel:to,entryWrapperLegend:so};function Cn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ot={exports:{}},no=Ot.exports,Ws;function ro(){return Ws||(Ws=1,(function(e,t){(function(s,n){n(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:no,function(s){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)s.exports=globalThis.browser;else{const n="The message port closed before a response was received.",r=i=>{const o={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(o).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class a extends WeakMap{constructor(b,C=void 0){super(C),this.createItem=b}get(b){return this.has(b)||this.set(b,this.createItem(b)),super.get(b)}}const l=y=>y&&typeof y=="object"&&typeof y.then=="function",d=(y,b)=>(...C)=>{i.runtime.lastError?y.reject(new Error(i.runtime.lastError.message)):b.singleCallbackArg||C.length<=1&&b.singleCallbackArg!==!1?y.resolve(C[0]):y.resolve(C)},c=y=>y==1?"argument":"arguments",g=(y,b)=>function(R,...I){if(I.length<b.minArgs)throw new Error(`Expected at least ${b.minArgs} ${c(b.minArgs)} for ${y}(), got ${I.length}`);if(I.length>b.maxArgs)throw new Error(`Expected at most ${b.maxArgs} ${c(b.maxArgs)} for ${y}(), got ${I.length}`);return new Promise((O,w)=>{if(b.fallbackToNoCallback)try{R[y](...I,d({resolve:O,reject:w},b))}catch(_){console.warn(`${y} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,_),R[y](...I),b.fallbackToNoCallback=!1,b.noCallback=!0,O()}else b.noCallback?(R[y](...I),O()):R[y](...I,d({resolve:O,reject:w},b))})},S=(y,b,C)=>new Proxy(b,{apply(R,I,O){return C.call(I,y,...O)}});let j=Function.call.bind(Object.prototype.hasOwnProperty);const E=(y,b={},C={})=>{let R=Object.create(null),I={has(w,_){return _ in y||_ in R},get(w,_,A){if(_ in R)return R[_];if(!(_ in y))return;let k=y[_];if(typeof k=="function")if(typeof b[_]=="function")k=S(y,y[_],b[_]);else if(j(C,_)){let K=g(_,C[_]);k=S(y,y[_],K)}else k=k.bind(y);else if(typeof k=="object"&&k!==null&&(j(b,_)||j(C,_)))k=E(k,b[_],C[_]);else if(j(C,"*"))k=E(k,b[_],C["*"]);else return Object.defineProperty(R,_,{configurable:!0,enumerable:!0,get(){return y[_]},set(K){y[_]=K}}),k;return R[_]=k,k},set(w,_,A,k){return _ in R?R[_]=A:y[_]=A,!0},defineProperty(w,_,A){return Reflect.defineProperty(R,_,A)},deleteProperty(w,_){return Reflect.deleteProperty(R,_)}},O=Object.create(y);return new Proxy(O,I)},T=y=>({addListener(b,C,...R){b.addListener(y.get(C),...R)},hasListener(b,C){return b.hasListener(y.get(C))},removeListener(b,C){b.removeListener(y.get(C))}}),D=new a(y=>typeof y!="function"?y:function(C){const R=E(C,{},{getContent:{minArgs:0,maxArgs:0}});y(R)}),B=new a(y=>typeof y!="function"?y:function(C,R,I){let O=!1,w,_=new Promise(qe=>{w=function(he){O=!0,qe(he)}}),A;try{A=y(C,R,w)}catch(qe){A=Promise.reject(qe)}const k=A!==!0&&l(A);if(A!==!0&&!k&&!O)return!1;const K=qe=>{qe.then(he=>{I(he)},he=>{let ts;he&&(he instanceof Error||typeof he.message=="string")?ts=he.message:ts="An unexpected error occurred",I({__mozWebExtensionPolyfillReject__:!0,message:ts})}).catch(he=>{console.error("Failed to send onMessage rejected reply",he)})};return K(k?A:_),!0}),U=({reject:y,resolve:b},C)=>{i.runtime.lastError?i.runtime.lastError.message===n?b():y(new Error(i.runtime.lastError.message)):C&&C.__mozWebExtensionPolyfillReject__?y(new Error(C.message)):b(C)},N=(y,b,C,...R)=>{if(R.length<b.minArgs)throw new Error(`Expected at least ${b.minArgs} ${c(b.minArgs)} for ${y}(), got ${R.length}`);if(R.length>b.maxArgs)throw new Error(`Expected at most ${b.maxArgs} ${c(b.maxArgs)} for ${y}(), got ${R.length}`);return new Promise((I,O)=>{const w=U.bind(null,{resolve:I,reject:O});R.push(w),C.sendMessage(...R)})},F={devtools:{network:{onRequestFinished:T(D)}},runtime:{onMessage:T(B),onMessageExternal:T(B),sendMessage:N.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:N.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},p={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return o.privacy={network:{"*":p},services:{"*":p},websites:{"*":p}},E(i,F,o)};s.exports=r(chrome)}})})(Ot)),Ot.exports}var io=ro();const J=Cn(io);function En(e){const t=Object.entries(e).reduce((s,[n,r])=>(typeof r=="string"?s[n]=r:typeof r=="number"?s[n]=r.toString():(typeof r>"u"||r===null)&&(s[n]=""),s),{});return new URLSearchParams(t).toString()}function $s(){return J.runtime.getManifest().version}function m(e,t){return J.i18n.getMessage(e,t)}function oo(){return`https://github.com/web-scrobbler/web-scrobbler/releases/tag/v${$s()}`}const ao="_materialIcon_fbfc8_1",Ks={materialIcon:ao},lo="_tripleCheckboxOption_5anix_1",co="_tripleCheckboxWrapper_5anix_9",uo="_tripleCheckboxLabel_5anix_15",mo="_activeBox_5anix_29",go="_unchecked_5anix_33",ho="_checked_5anix_37",bo="_indeterminate_5anix_41",fo="_tripleCheckbox_5anix_1",vo="_deleteListing_5anix_60",po="_buttonContainer_5anix_71",_o="_button_5anix_71",yo="_applyFill_5anix_89",wo="_noRadius_5anix_107",$o="_marginRight_5anix_110",jo="_marginTop_5anix_113",Ao="_centered_5anix_116",ko="_openCollective_5anix_119",So="_small_5anix_122",xo="_shiftLeft_5anix_128",To="_contactList_5anix_132",Co="_contactEntry_5anix_135",Eo="_invertImg_5anix_144",Ro="_desc_5anix_147",Lo="_brandText_5anix_153",Oo="_contactTwitter_5anix_160",Mo="_contactGithub_5anix_163",Po="_optionList_5anix_173",Io="_selectOption_5anix_179",Do="_bigLabel_5anix_179",zo="_editTable_5anix_198",Uo="_saveIcon_5anix_218",No="_savingSaveIcon_5anix_221",Bo="_scrobbleButtonsWrapper_5anix_227",Fo="_scrobbleCacheList_5anix_241",qo="_summarySpan_5anix_244",Ho="_checkboxOption_5anix_249",Vo="_checkboxWrapper_5anix_257",Go="_checkbox_5anix_249",Wo="_summaryCheckbox_5anix_294",Ko="_muted_5anix_310",Jo="_radioButtons_5anix_315",Yo="_radioButton_5anix_315",Qo="_radioLabel_5anix_323",Zo="_connectorOptionsList_5anix_342",Xo="_expandVector_5anix_363",ea="_patternWrapper_5anix_372",ta="_patternInput_5anix_380",sa="_propLabel_5anix_391",na="_propInput_5anix_397",ra="_permissionsPopup_5anix_407",ia="_arrayPropWrapper_5anix_423",oa="_arrayProps_5anix_427",aa="_arrayProp_5anix_423",la="_regexDeleteContent_5anix_436",ca="_regexEditEntry_5anix_447",ua="_regexDeleteFlags_5anix_455",da="_regexDeleteSearchLabel_5anix_460",ma="_regexDeleteReplaceLabel_5anix_463",ga="_regexDeleteTrackLabel_5anix_466",ha="_regexDeleteTrackSearch_5anix_469",ba="_regexDeleteTrackReplace_5anix_472",fa="_regexDeleteArtistLabel_5anix_475",va="_regexDeleteArtistSearch_5anix_478",pa="_regexDeleteArtistReplace_5anix_481",_a="_regexDeleteAlbumLabel_5anix_484",ya="_regexDeleteAlbumSearch_5anix_487",wa="_regexDeleteAlbumReplace_5anix_490",$a="_regexDeleteAlbumArtistLabel_5anix_493",ja="_regexDeleteAlbumArtistSearch_5anix_496",Aa="_regexDeleteAlbumArtistReplace_5anix_499",ka="_scrobble_5anix_227",Sa="_scrobbleCheckbox_5anix_516",xa="_coverArt_5anix_519",Ta="_scrobbleDetails_5anix_524",Ca="_scrobbleMetadata_5anix_533",Ea="_trackName_5anix_540",Ra="_artistName_5anix_544",La="_albumName_5anix_545",Oa="_albumArtistName_5anix_546",Ma="_scrobbleActions_5anix_549",Pa="_scrobbleActionButton_5anix_553",Ia="_selectingScrobble_5anix_576",Da="_scrobbleDate_5anix_596",za="_rangeInput_5anix_617",Ua="_rangeInputLabel_5anix_620",Na="_rangeSelection_5anix_623",Ba="_inputWrapper_5anix_668",Fa="_percent_5anix_684",qa="_rangeNumberInput_5anix_687",h={tripleCheckboxOption:lo,tripleCheckboxWrapper:co,tripleCheckboxLabel:uo,activeBox:mo,unchecked:go,checked:ho,indeterminate:bo,tripleCheckbox:fo,deleteListing:vo,buttonContainer:po,button:_o,applyFill:yo,noRadius:wo,marginRight:$o,marginTop:jo,centered:Ao,openCollective:ko,small:So,shiftLeft:xo,contactList:To,contactEntry:Co,invertImg:Eo,desc:Ro,brandText:Lo,contactTwitter:Oo,contactGithub:Mo,optionList:Po,selectOption:Io,bigLabel:Do,editTable:zo,saveIcon:Uo,savingSaveIcon:No,scrobbleButtonsWrapper:Bo,scrobbleCacheList:Fo,summarySpan:qo,checkboxOption:Ho,checkboxWrapper:Vo,checkbox:Go,summaryCheckbox:Wo,muted:Ko,radioButtons:Jo,radioButton:Yo,radioLabel:Qo,connectorOptionsList:Zo,expandVector:Xo,patternWrapper:ea,patternInput:ta,propLabel:sa,propInput:na,permissionsPopup:ra,arrayPropWrapper:ia,arrayProps:oa,arrayProp:aa,regexDeleteContent:la,regexEditEntry:ca,regexDeleteFlags:ua,regexDeleteSearchLabel:da,regexDeleteReplaceLabel:ma,regexDeleteTrackLabel:ga,regexDeleteTrackSearch:ha,regexDeleteTrackReplace:ba,regexDeleteArtistLabel:fa,regexDeleteArtistSearch:va,regexDeleteArtistReplace:pa,regexDeleteAlbumLabel:_a,regexDeleteAlbumSearch:ya,regexDeleteAlbumReplace:wa,regexDeleteAlbumArtistLabel:$a,regexDeleteAlbumArtistSearch:ja,regexDeleteAlbumArtistReplace:Aa,scrobble:ka,scrobbleCheckbox:Sa,coverArt:xa,scrobbleDetails:Ta,scrobbleMetadata:Ca,trackName:Ea,artistName:Ra,albumName:La,albumArtistName:Oa,scrobbleActions:Ma,scrobbleActionButton:Pa,selectingScrobble:Ia,scrobbleDate:Da,rangeInput:za,rangeInputLabel:Ua,rangeSelection:Na,inputWrapper:Ba,percent:Fa,rangeNumberInput:qa},Ha=f("<title>"),Va=f("<svg aria-hidden=true>"),Ga=f('<svg><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></svg>',!1,!0),Te=f('<svg><path d="M0 0h24v24H0z"fill=none></svg>',!1,!0),Wa=f('<svg><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5zm0-5.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></svg>',!1,!0),Ka=f('<svg><defs id=defs138><mask maskUnits=userSpaceOnUse id=mask-powermask-path-effect3728><path id=mask-powermask-path-effect3728_box d="M 1,1 H 23 V 23 H 1 Z"></path><g id=g3726><rect id=rect3722 width=27.407948 height=1.5774385 x=-12.412281 y=-0.70559257 ry=0 transform=rotate(41.317859)></rect><rect id=rect3724 width=27.407948 height=1.5774385 x=18.354237 y=-0.67120558 ry=0 transform=rotate(41.317859)></svg>',!1,!0),Ja=f('<svg><path d="M 12,2 C 6.48,2 2,6.48 2,12 2,17.52 6.48,22 12,22 17.52,22 22,17.52 22,12 22,6.48 17.52,2 12,2 Z m 0,14.5 C 9.51,16.5 7.5,14.49 7.5,12 7.5,9.51 9.51,7.5 12,7.5 c 2.49,0 4.5,2.01 4.5,4.5 0,2.49 -2.01,4.5 -4.5,4.5 z M 12,11 c -0.55,0 -1,0.45 -1,1 0,0.55 0.45,1 1,1 0.55,0 1,-0.45 1,-1 0,-0.55 -0.45,-1 -1,-1 z"id=path132 mask=url(#mask-powermask-path-effect3728)></svg>',!1,!0),Ya=f("<svg><rect id=rect413 width=27.407948 height=1.5774385 x=3.194612 y=0.87523758 ry=0 transform=rotate(41.317859)></svg>",!1,!0),Qa=f('<svg><path d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"></svg>',!1,!0),Za=f('<svg><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"></svg>',!1,!0),Xa=f('<svg><g><g><path d="M16.5,9c-0.42,0-0.83,0.04-1.24,0.11L1.01,3L1,10l10.06,1.34c-0.42,0.44-0.78,0.93-1.09,1.46L1,14l0.01,7l8.07-3.46 C9.59,21.19,12.71,24,16.5,24c4.14,0,7.5-3.36,7.5-7.5S20.64,9,16.5,9z M3,8.25l0.01-2.22l7.51,3.22L3,8.25z M9.1,15.36L3,17.97 v-2.22l6.17-0.82C9.14,15.07,9.12,15.21,9.1,15.36z M16.5,22c-3.03,0-5.5-2.47-5.5-5.5s2.47-5.5,5.5-5.5s5.5,2.47,5.5,5.5 S19.53,22,16.5,22z"></path><polygon points="18.27,14.03 16.5,15.79 14.73,14.03 14.03,14.73 15.79,16.5 14.03,18.27 14.73,18.97 16.5,17.21 18.27,18.97 18.97,18.27 17.21,16.5 18.97,14.73"></svg>',!1,!0),el=f('<svg><path d="M20.06 18a3.99 3.99 0 0 1-.2-.89c-.67.7-1.48 1.05-2.41 1.05c-.83 0-1.52-.24-2.05-.71c-.53-.45-.8-1.06-.8-1.79c0-.88.33-1.56 1-2.05c.67-.49 1.61-.73 2.83-.73h1.4v-.64c0-.49-.15-.88-.45-1.17c-.3-.29-.75-.43-1.33-.43c-.52 0-.95.12-1.3.36c-.35.25-.52.54-.52.89h-1.46c0-.43.15-.84.45-1.24c.28-.4.71-.71 1.22-.94c.51-.21 1.06-.35 1.69-.35c.98 0 1.74.24 2.29.73s.84 1.16.86 2.02V16c0 .8.1 1.42.3 1.88V18zm-2.4-1.12c.45 0 .88-.11 1.29-.32c.4-.21.7-.49.88-.83v-1.57H18.7c-1.77 0-2.66.47-2.66 1.41c0 .43.15.73.46.96c.3.23.68.35 1.16.35m-12.2-3.17h4.07L7.5 8.29zM6.64 6h1.72l4.71 12h-1.93l-.97-2.57H4.82L3.86 18H1.93z"></svg>',!1,!0),tl=f('<svg><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"></svg>',!1,!0),sl=f('<svg><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></svg>',!1,!0),nl=f('<svg><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h16v12zM4 0h16v2H4zm0 22h16v2H4zm8-10c1.38 0 2.5-1.12 2.5-2.5S13.38 7 12 7 9.5 8.12 9.5 9.5 10.62 12 12 12zm0-3.5c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm5 7.49C17 13.9 13.69 13 12 13s-5 .9-5 2.99V17h10v-1.01zm-8.19-.49c.61-.52 2.03-1 3.19-1 1.17 0 2.59.48 3.2 1H8.81z"></svg>',!1,!0),rl=f('<svg><path d="M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"></svg>',!1,!0),il=f('<svg><path d="M14.12 10.47L12 12.59l-2.13-2.12-1.41 1.41L10.59 14l-2.12 2.12 1.41 1.41L12 15.41l2.12 2.12 1.41-1.41L13.41 14l2.12-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4zM6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9z"></svg>',!1,!0),ol=f('<svg><path d="M19 9h-4V3H9v6H5l7 7 7-7zm-8 2V5h2v6h1.17L12 13.17 9.83 11H11zm-6 7h14v2H5z"></svg>',!1,!0),al=f('<svg><path d="M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"></svg>',!1,!0),ll=f('<svg><path d="M3 10h11v2H3zm0-2h11V6H3zm0 8h7v-2H3zm15.01-3.13.71-.71c.39-.39 1.02-.39 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71-5.3 5.3V21h2.12l5.3-5.3z"></svg>',!1,!0),cl=f('<svg><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></svg>',!1,!0),ul=f('<svg><path d="M24 24H0V0h24v24z"fill=none opacity=.87></svg>',!1,!0),dl=f('<svg><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"></svg>',!1,!0),ml=f('<svg><path d="M10.5 4.5c.28 0 .5.22.5.5v2h6v6h2c.28 0 .5.22.5.5s-.22.5-.5.5h-2v6h-2.12c-.68-1.75-2.39-3-4.38-3s-3.7 1.25-4.38 3H4v-2.12c1.75-.68 3-2.39 3-4.38 0-1.99-1.24-3.7-2.99-4.38L4 7h6V5c0-.28.22-.5.5-.5m0-2C9.12 2.5 8 3.62 8 5H4c-1.1 0-1.99.9-1.99 2v3.8h.29c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-.3c0-1.49 1.21-2.7 2.7-2.7s2.7 1.21 2.7 2.7v.3H17c1.1 0 2-.9 2-2v-4c1.38 0 2.5-1.12 2.5-2.5S20.38 11 19 11V7c0-1.1-.9-2-2-2h-4c0-1.38-1.12-2.5-2.5-2.5z"></svg>',!1,!0),gl=f('<svg><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></svg>',!1,!0),hl=f('<svg><g><path d="M16.5,3c-0.96,0-1.9,0.25-2.73,0.69L12,9h3l-3,10l1-9h-3l1.54-5.39C10.47,3.61,9.01,3,7.5,3C4.42,3,2,5.42,2,8.5 c0,4.13,4.16,7.18,10,12.5c5.47-4.94,10-8.26,10-12.5C22,5.42,19.58,3,16.5,3z M10.24,16.73C6.45,13.34,4,11,4,8.5 C4,6.54,5.54,5,7.5,5c0.59,0,1.19,0.15,1.73,0.42L7.35,12h3.42L10.24,16.73z M15.13,15.53L17.69,7h-2.91l0.61-1.82 C15.75,5.06,16.13,5,16.5,5C18.46,5,20,6.54,20,8.5C20,10.71,17.98,12.93,15.13,15.53z"></svg>',!1,!0),bl=f('<svg><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"></svg>',!1,!0),fl=f('<svg><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM7 11h10v2H7z"></svg>',!1,!0),vl=f('<svg><path d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></svg>',!1,!0),pl=f('<svg><g fill=none><path d="M0 0h24v24H0V0z"></path><path d="M0 0h24v24H0V0z"opacity=.87></svg>',!1,!0),_l=f('<svg><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"></svg>',!1,!0),Rn=f("<svg><g><path d=M0,0h24v24H0V0z fill=none></svg>",!1,!0),yl=f('<svg><g><g><path d="M4,18v-0.65c0-0.34,0.16-0.66,0.41-0.81C6.1,15.53,8.03,15,10,15c0.03,0,0.05,0,0.08,0.01c0.1-0.7,0.3-1.37,0.59-1.98 C10.45,13.01,10.23,13,10,13c-2.42,0-4.68,0.67-6.61,1.82C2.51,15.34,2,16.32,2,17.35V20h9.26c-0.42-0.6-0.75-1.28-0.97-2H4z"></path><path d="M10,12c2.21,0,4-1.79,4-4s-1.79-4-4-4C7.79,4,6,5.79,6,8S7.79,12,10,12z M10,6c1.1,0,2,0.9,2,2s-0.9,2-2,2 c-1.1,0-2-0.9-2-2S8.9,6,10,6z"></path><path d="M20.75,16c0-0.22-0.03-0.42-0.06-0.63l1.14-1.01l-1-1.73l-1.45,0.49c-0.32-0.27-0.68-0.48-1.08-0.63L18,11h-2l-0.3,1.49 c-0.4,0.15-0.76,0.36-1.08,0.63l-1.45-0.49l-1,1.73l1.14,1.01c-0.03,0.21-0.06,0.41-0.06,0.63s0.03,0.42,0.06,0.63l-1.14,1.01 l1,1.73l1.45-0.49c0.32,0.27,0.68,0.48,1.08,0.63L16,21h2l0.3-1.49c0.4-0.15,0.76-0.36,1.08-0.63l1.45,0.49l1-1.73l-1.14-1.01 C20.72,16.42,20.75,16.22,20.75,16z M17,18c-1.1,0-2-0.9-2-2s0.9-2,2-2s2,0.9,2,2S18.1,18,17,18z"></svg>',!1,!0),wl=f('<svg><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"></svg>',!1,!0),$l=f('<svg><path d="M12 3l.01 10.55c-.59-.34-1.27-.55-2-.55C7.79 13 6 14.79 6 17s1.79 4 4.01 4S14 19.21 14 17V7h4V3h-6zm-1.99 16c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></svg>',!1,!0),jl=f('<svg><path d="M4.27 3L3 4.27l9 9v.28c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4v-1.73L19.73 21 21 19.73 4.27 3zM14 7h4V3h-6v5.18l2 2z"></svg>',!1,!0),Al=f('<svg><path d="M14 7h4V3h-6v4.61l2 2zm-2 3.44L4.41 2.86 3 4.27l9 9v.28c-.94-.54-2.1-.75-3.33-.32-1.34.48-2.37 1.67-2.61 3.07-.46 2.74 1.86 5.08 4.59 4.65 1.96-.31 3.35-2.11 3.35-4.1v-1.58L19.73 21l1.41-1.41L12 10.44zM10 19c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></svg>',!1,!0),kl=f('<svg><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></svg>',!1,!0),js=f("<svg><rect fill=none height=24 width=24></svg>",!1,!0),Sl=f('<svg><g><path d="M8.65,5.82C9.36,4.72,10.6,4,12,4c2.21,0,4,1.79,4,4c0,1.4-0.72,2.64-1.82,3.35L8.65,5.82z M20,17.17 c-0.02-1.1-0.63-2.11-1.61-2.62c-0.54-0.28-1.13-0.54-1.77-0.76L20,17.17z M21.19,21.19L2.81,2.81L1.39,4.22l8.89,8.89 c-1.81,0.23-3.39,0.79-4.67,1.45C4.61,15.07,4,16.1,4,17.22V20h13.17l2.61,2.61L21.19,21.19z"></svg>',!1,!0),xl=f('<svg><path d="M20,17.17l-3.37-3.38c0.64,0.22,1.23,0.48,1.77,0.76C19.37,15.06,19.98,16.07,20,17.17z M21.19,21.19l-1.41,1.41L17.17,20H4 v-2.78c0-1.12,0.61-2.15,1.61-2.66c1.29-0.66,2.87-1.22,4.67-1.45L1.39,4.22l1.41-1.41L21.19,21.19z M15.17,18l-3-3 c-0.06,0-0.11,0-0.17,0c-2.37,0-4.29,0.73-5.48,1.34C6.2,16.5,6,16.84,6,17.22V18H15.17z M12,6c1.1,0,2,0.9,2,2 c0,0.86-0.54,1.59-1.3,1.87l1.48,1.48C15.28,10.64,16,9.4,16,8c0-2.21-1.79-4-4-4c-1.4,0-2.64,0.72-3.35,1.82l1.48,1.48 C10.41,6.54,11.14,6,12,6z"></svg>',!1,!0),Tl=f('<svg><path d="M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 10c2.7 0 5.8 1.29 6 2H6c.23-.72 3.31-2 6-2m0-12C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 10c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></svg>',!1,!0),Cl=f('<svg><path d="M18.6,19.5H21v2h-6v-6h2v2.73c1.83-1.47,3-3.71,3-6.23c0-4.07-3.06-7.44-7-7.93V2.05c5.05,0.5,9,4.76,9,9.95 C22,14.99,20.68,17.67,18.6,19.5z M4,12c0-2.52,1.17-4.77,3-6.23V8.5h2v-6H3v2h2.4C3.32,6.33,2,9.01,2,12c0,5.19,3.95,9.45,9,9.95 v-2.02C7.06,19.44,4,16.07,4,12z M16.24,8.11l-5.66,5.66l-2.83-2.83l-1.41,1.41l4.24,4.24l7.07-7.07L16.24,8.11z"></svg>',!1,!0),El=f('<svg><path d="M16 16.92c-.33.05-.66.08-1 .08c-.34 0-.67-.03-1-.08v-3.51l-2.5 2.48c-.5-.39-1-.89-1.39-1.39l2.48-2.5H9.08c-.05-.33-.08-.66-.08-1c0-.34.03-.67.08-1h3.51l-2.48-2.5c.19-.25.39-.5.65-.74c.24-.26.49-.46.74-.65L14 8.59V5.08c.33-.05.66-.08 1-.08c.34 0 .67.03 1 .08v3.51l2.5-2.48c.5.39 1 .89 1.39 1.39L17.41 10h3.51c.05.33.08.66.08 1c0 .34-.03.67-.08 1h-3.51l2.48 2.5c-.19.25-.39.5-.65.74c-.24.26-.49.46-.74.65L16 13.41zM5 19a2 2 0 0 1 2-2a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2"></svg>',!1,!0),Rl=f('<svg><g><path d="M22,6h-5v8.18C16.69,14.07,16.35,14,16,14c-1.66,0-3,1.34-3,3s1.34,3,3,3s3-1.34,3-3V8h3V6z M15,6H3v2h12V6z M15,10H3v2h12 V10z M11,14H3v2h8V14z"></svg>',!1,!0),Ll=f('<svg><g><g><path d="M6,13c0-1.65,0.67-3.15,1.76-4.24L6.34,7.34C4.9,8.79,4,10.79,4,13c0,4.08,3.05,7.44,7,7.93v-2.02 C8.17,18.43,6,15.97,6,13z M20,13c0-4.42-3.58-8-8-8c-0.06,0-0.12,0.01-0.18,0.01l1.09-1.09L11.5,2.5L8,6l3.5,3.5l1.41-1.41 l-1.08-1.08C11.89,7.01,11.95,7,12,7c3.31,0,6,2.69,6,6c0,2.97-2.17,5.43-5,5.91v2.02C16.95,20.44,20,17.08,20,13z"></svg>',!1,!0),Ol=f('<svg><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm2 16H5V5h11.17L19 7.83V19zm-7-7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zM6 6h9v4H6z"></svg>',!1,!0),Ml=f('<svg><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></svg>',!1,!0),Pl=f("<svg><circle cx=15.5 cy=9.5 r=1.5></svg>",!1,!0),Il=f("<svg><circle cx=8.5 cy=9.5 r=1.5></svg>",!1,!0),Dl=f('<svg><path d="M12 14c-2.33 0-4.32 1.45-5.12 3.5h1.67c.69-1.19 1.97-2 3.45-2s2.75.81 3.45 2h1.67c-.8-2.05-2.79-3.5-5.12-3.5zm-.01-12C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></svg>',!1,!0),zl=f('<svg><path d="M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></svg>',!1,!0),Ul=f('<svg><g><g><g><path d="M15,1H9v2h6V1z M11,14h2V8h-2V14z M19.03,7.39l1.42-1.42c-0.43-0.51-0.9-0.99-1.41-1.41l-1.42,1.42 C16.07,4.74,14.12,4,12,4c-4.97,0-9,4.03-9,9s4.02,9,9,9s9-4.03,9-9C21,10.88,20.26,8.93,19.03,7.39z M12,20c-3.87,0-7-3.13-7-7 s3.13-7,7-7s7,3.13,7,7S15.87,20,12,20z"></svg>',!1,!0),Nl=f('<svg><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></svg>',!1,!0),Bl=f('<svg><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zm0-7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></svg>',!1,!0),Fl=f('<svg><path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"></svg>',!1,!0),ql=f('<svg><path d="M9 16h6v-6h4l-7-7-7 7h4v6zm3-10.17L14.17 8H13v6h-2V8H9.83L12 5.83zM5 18h14v2H5z"></svg>',!1,!0),Hl=f('<svg><path d="M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7z"></svg>',!1,!0),Vl=f('<svg><g><g><g><g><path d="M16,13c3.09-2.81,6-5.44,6-7.7C22,3.45,20.55,2,18.7,2c-1.04,0-2.05,0.49-2.7,1.25C15.34,2.49,14.34,2,13.3,2 C11.45,2,10,3.45,10,5.3C10,7.56,12.91,10.19,16,13z M13.3,4c0.44,0,0.89,0.21,1.18,0.55L16,6.34l1.52-1.79 C17.81,4.21,18.26,4,18.7,4C19.44,4,20,4.56,20,5.3c0,1.12-2.04,3.17-4,4.99c-1.96-1.82-4-3.88-4-4.99C12,4.56,12.56,4,13.3,4z"></path><path d="M19,16h-2c0-1.2-0.75-2.28-1.87-2.7L8.97,11H1v11h6v-1.44l7,1.94l8-2.5v-1C22,17.34,20.66,16,19,16z M3,20v-7h2v7H3z M13.97,20.41L7,18.48V13h1.61l5.82,2.17C14.77,15.3,15,15.63,15,16c0,0-1.99-0.05-2.3-0.15l-2.38-0.79l-0.63,1.9l2.38,0.79 c0.51,0.17,1.04,0.26,1.58,0.26H19c0.39,0,0.74,0.23,0.9,0.56L13.97,20.41z"></svg>',!1,!0),Gl=f('<svg><path d="M11.14 4L6.43 16h1.93l.96-2.57h5.35l.97 2.57h1.93L12.86 4M12 6.29l2.03 5.42H9.96M20 14v4H4v-3H2v5h20v-6Z"></svg>',!1,!0);function P(e){return s=>{const n=q(()=>s.class?`${Ks.materialIcon} ${s.class}`:Ks.materialIcon);return(()=>{const r=Va();return xn(r,Br({focusable:"false"},{viewBox:"0 0 24 24",width:"24",height:"24"},s,{get class(){return n()}}),!0,!0),u(r,v(Y,{get when(){return s.title},get children(){const i=Ha();return u(i,()=>s.title),i}}),null),u(r,v(e,{}),null),r})()}}const Wl=P(()=>Ga()),Kg=P(()=>[Te(),Wa()]),Jg=P(()=>[(()=>{const e=Ka(),t=e.firstChild,s=t.firstChild,n=s.nextSibling,r=n.firstChild,i=r.nextSibling;return s.style.setProperty("fill","#ffffff"),s.style.setProperty("fill-opacity","1"),r.style.setProperty("fill-opacity","1"),r.style.setProperty("stroke","none"),i.style.setProperty("fill-opacity","1"),i.style.setProperty("stroke","none"),x(o=>{const a=`${jt.applyFill} ${h.applyFill}`,l=`${jt.applyFill} ${h.applyFill}`;return a!==o._v$&&M(r,"class",o._v$=a),l!==o._v$2&&M(i,"class",o._v$2=l),o},{_v$:void 0,_v$2:void 0}),e})(),(()=>{const e=Ja();return e.style.setProperty("display","inline"),x(()=>M(e,"class",`${jt.applyFill} ${h.applyFill}`)),e})(),(()=>{const e=Ya();return e.style.setProperty("fill-opacity","1"),e.style.setProperty("stroke","none"),x(()=>M(e,"class",`${jt.applyFill} ${h.applyFill}`)),e})()]),Kl=P(()=>Qa()),Yg=P(()=>Za()),Qg=P(()=>Xa()),Jl=P(()=>el()),Ln=P(()=>tl()),Yl=P(()=>sl()),Ql=P(()=>nl()),Fe=P(()=>rl()),Zg=P(()=>il()),On=P(()=>ol()),Zl=P(()=>al()),Xg=P(()=>ll()),e1=P(()=>cl()),Mn=P(()=>[ul(),dl()]),Xl=P(()=>ml()),ec=P(()=>gl()),t1=P(()=>hl()),tc=P(()=>bl()),sc=P(()=>[Te(),fl()]),Pn=P(()=>vl()),nc=P(()=>[pl(),_l()]),rc=P(()=>[Rn(),yl()]),s1=P(()=>[Te(),wl()]),n1=P(()=>$l()),r1=P(()=>[Te(),jl()]),i1=P(()=>Al()),o1=P(()=>[Te(),kl()]),a1=P(()=>[js(),Sl()]),ic=P(()=>[js(),xl()]),oc=P(()=>Tl()),l1=P(()=>[js(),Cl()]),ac=P(()=>El()),lc=P(()=>Rl()),cc=P(()=>[Rn(),Ll()]),uc=P(()=>Ol()),c1=P(()=>[Te(),Ml()]),u1=P(()=>[Pl(),Il(),Dl()]),rt=P(()=>zl()),dc=P(()=>Ul()),mc=P(()=>Nl()),gc=P(()=>[Te(),Bl()]),hc=P(()=>Fl()),In=P(()=>ql()),Dn=P(()=>Hl()),bc=P(()=>Vl()),fc=P(()=>Gl()),d1="Base",vc="Disallowed",pc="Disabled",_c="Error",yc="Ignored",wc="Loading",$c="Playing",jc="Paused",Ac="Scrobbled",m1="Skipped",kc="Unknown",ds="Unsupported",Sc="Loved",xc="Unloved";async function g1(){const e=(await J.storage.sync.get("theme")).theme;if(e){document.body.classList.add(await Un(e));return}zn("theme-system")}async function zn(e){document.body.className="",document.body.classList.add(Un(e)),await J.storage.sync.set({theme:e})}const Tc=()=>window.matchMedia("(prefers-color-scheme: dark)").matches,Cc=()=>window.matchMedia("(forced-colors: active), (prefers-contrast: more), (-ms-high-contrast: active)").matches;function Un(e){if(e==="theme-system"){const t=Tc()?"dark":"light";return`theme-${Cc()?"high-contrast-":""}${t}`}return e}const Nn=["system","dark","light","high-contrast-dark","high-contrast-light"],Js=Nn.map(e=>`theme-${e}`);async function Ec(){return(await J.storage.sync.get("theme")).theme||"theme-system"}async function be(e,t){return J.tabs.sendMessage(e,t)}function Rc(e){return t=>t(e)}function Lc(...e){J.runtime.onMessage.addListener((t,s)=>{let n=!1;for(const r of e){const i=r(o=>{if(t.type===o.type)return n=!0,o.fn(t.payload,s)});if(n)return Promise.resolve(i)}})}async function it(e){return J.runtime.sendMessage(e)}function h1(e){return t=>t(e)}function b1(...e){J.runtime.onMessage.addListener((t,s)=>{let n=!1;for(const r of e){const i=r(o=>{if(t.type===o.type)return n=!0,o.fn(t.payload,s)});if(n)return Promise.resolve(i)}})}const ot=[{label:"YouTube",matches:["*://www.youtube.com/*","*://m.youtube.com/*"],js:"youtube.js",id:"youtube",usesBlocklist:!0},{label:"MySpace",matches:["*://myspace.com/*"],js:"myspace.js",id:"myspace"},{label:"Bandcamp Daily",matches:["*://daily.bandcamp.com/*"],js:"bandcamp-embed.js",id:"bandcamp-embed",allFrames:!0},{label:"Bandcamp",matches:["*://*.bandcamp.com/*","*://bandcamp.com/*"],js:"bandcamp.js",id:"bandcamp"},{label:"BNDCMPR",matches:["*://bndcmpr.co/*"],js:"bndcmpr.js",id:"bndcmpr",allFrames:!0},{label:"Buy Music Club",matches:["*://www.buymusic.club/*"],js:"buymusicclub.js",id:"buymusicclub"},{label:"Pandora",matches:["*://www.pandora.com/*"],js:"pandora.js",id:"pandora"},{label:"Pakartot",matches:["*://www.pakartot.lt/*"],js:"pakartot.js",id:"pakartot"},{label:"Deezer",matches:["*://www.deezer.com/*"],js:"deezer.js",id:"deezer"},{label:"SoundCloud",matches:["*://soundcloud.com/*","*://m.soundcloud.com/*"],js:"soundcloud.js",id:"soundcloud"},{label:"Amazon Music",matches:["*://music.amazon.*/*","*://www.amazon.*/gp/dmusic/cloudplayer/*"],js:"amazon.js",id:"amazon"},{label:"Amazon Echo",matches:["*://alexa.amazon.*/spa/*"],js:"amazon-alexa.js",id:"amazon-alexa"},{label:"Radio Vas3k Club",matches:["https://radio.vas3k.club/*"],js:"vas3kradio.js",id:"vas3kradio"},{label:"VK",matches:["*://vk.ru/*","*://vk.com/*"],js:"vk.js",id:"vk"},{label:"Megalyrics",matches:["*://megalyrics.ru/*"],js:"megalyrics.js",id:"megalyrics"},{label:"iHeartRadio",matches:["*://*.iheart.com/*"],js:"iheart.js",id:"iheart"},{label:"Indie Shuffle",matches:["*://www.indieshuffle.com/*"],js:"indieshuffle.js",id:"indieshuffle"},{label:"Tuba.FM",matches:["*://fm.tuba.pl/*"],js:"tubafm.js",id:"tubafm"},{label:"Spotify",matches:["*://open.spotify.com/*"],js:"spotify.js",id:"spotify",hasNativeScrobbler:!0},{label:"plug.dj",matches:["*://plug.dj/*"],js:"plug.dj.js",id:"plug.dj"},{label:"Dandelion Radio",matches:["*://www.dandelionradio.com/player.htm"],js:"dandelionradio.js",id:"dandelionradio"},{label:"HillyDilly",matches:["*://www.hillydilly.com/*"],js:"hillydilly.js",id:"hillydilly"},{label:"8tracks",matches:["*://8tracks.com/*"],js:"8tracks.js",id:"8tracks"},{label:"SoGreatandPowerful",matches:["*://sogreatandpowerful.com/*"],js:"sogreatandpowerful.js",id:"sogreatandpowerful"},{label:"Radio Cidade",matches:["*://radiocidade.fm/player/*","*://play.radiomania.com.br/*","*://*.melodia.com.br/*","*://jb.fm/player/*"],js:"radiocidade.js",id:"radiocidade"},{label:"Radio Nova",matches:["*://www.nova.fr/*"],js:"nova.js",id:"nova"},{label:"Radioplus",matches:["*://www.radioplus.be/*","*://radioplus.be/*"],js:"radioplus.js",id:"radioplus"},{label:" Premium",matches:["*://rpfm.ru/*"],js:"rpfm.js",id:"rpfm"},{label:"Douban.FM",matches:["*://douban.fm/*","*://fm.douban.fm/*"],js:"douban.fm.js",id:"douban.fm"},{label:"Focus@Will",matches:["*://www.focusatwill.com/*"],js:"focusatwill.js",id:"focusatwill"},{label:"Subphonic (owncloud plugin)",matches:["*://*/*/apps/subphonic/minisub/*"],js:"subphonic.js",id:"subphonic"},{label:"Digitally Imported",matches:["*://www.di.fm/*"],js:"radiotunes.js",id:"di"},{label:"BBC Sounds",matches:["*://*.bbc.co.uk/*"],js:"bbc-sounds.js",id:"bbc-sounds"},{label:"Gaana",matches:["*://gaana.com/*"],js:"gaana.js",id:"gaana"},{label:".",matches:["*://music.yandex.ru/*","*://music.yandex.by/*","*://music.yandex.kz/*","*://music.yandex.ua/*","*://music.yandex.com/*"],js:"yandex-music.js",id:"yandex-music"},{label:"Plex",matches:["*://*32400/web/*","*://plex.tv/web/*","*://*.plex.tv/web/*","*://*.plex.tv/desktop*"],js:"plex.js",id:"plex"},{label:"TuneIn",matches:["*://tunein.com/*"],js:"tunein.js",id:"tunein"},{label:"Mixcloud",matches:["*://mixcloud.com/*","*://*.mixcloud.com/*"],js:"mixcloud.js",id:"mixcloud"},{label:"ReverbNation",matches:["*://www.reverbnation.com/*"],js:"reverbnation.js",id:"reverbnation"},{label:"NRK Radio",matches:["*://radio.nrk.no/*"],js:"nrk-radio.js",id:"nrk-radio"},{label:"Internet Archive",matches:["*://archive.org/details/*"],js:"archive.js",id:"archive"},{label:"Odnoklassniki",matches:["*://odnoklassniki.ru/*","*://ok.ru/*"],js:"odnoklassniki.js",id:"odnoklassniki"},{label:"Overcast",matches:["*://overcast.fm/*"],js:"overcast.js",id:"overcast"},{label:"Online Radio Box",matches:["*://onlineradiobox.com/*","*://p.onlineradiobox.com/*"],js:"onlineradiobox.js",id:"onlineradiobox"},{label:"163 Music",matches:["*://music.163.com/*"],js:"163-music.js",id:"163-music"},{label:"Ambient Sleeping Pill",matches:["*://ambientsleepingpill.com/"],js:"ambientsleepingpill.js",id:"ambientsleepingpill"},{label:"a.m. ambient",matches:["*://amambient.com/"],js:"ambientsleepingpill.js",id:"amambient"},{label:"Tidal",matches:["*://tidal.com/*"],js:"tidal.js",id:"tidal"},{label:"Hype Machine Featured Albums",matches:["*://hypem.com/album/*"],js:"hypem-albums.js",id:"hypem-premieres"},{label:"Hype Machine",matches:["*://hypem.com/*"],js:"hypem.js",id:"hypem"},{label:"Radionomy",matches:["*://www.radionomy.com/*"],js:"radionomy.js",id:"radionomy"},{label:"J1 Radio",matches:["*://www.j1fm.tokyo/player/*","*://www.j1fm.tokyo/michi/player/*"],js:"aiircom.js",id:"j1-radio"},{label:"JazzAndRain",matches:["*://*.jazzandrain.com/*"],js:"jazzandrain.js",id:"jazzandrain"},{label:"RelaxingBeats",matches:["*://*.relaxingbeats.com/*"],js:"jazzandrain.js",id:"relaxingbeats"},{label:"EpicMusicTime",matches:["*://*.epicmusictime.com/*"],js:"jazzandrain.js",id:"epicmusictime"},{label:"AccuJazz",matches:["*://www.accuradio.com/pop_player/accujazz/*"],js:"accujazz.js",id:"accujazz"},{label:"AccuRadio",matches:["*://www.accuradio.com/*"],js:"accuradio.js",id:"accuradio"},{label:"Imusic.am",matches:["*://imusic.am/*"],js:"imusic.am.js",id:"imusic.am"},{label:"Earbits",matches:["*://www.earbits.com/*"],js:"earbits.js",id:"earbits"},{label:"Player.fm",matches:["*://player.fm/*"],js:"player.fm.js",id:"player.fm"},{label:"Sound Test",matches:["*://sndtst.com/*"],js:"sndtst.js",id:"sndtst"},{label:"RadioTunes",matches:["*://www.radiotunes.com/*"],js:"radiotunes.js",id:"radiotunes"},{label:"RockRadio",matches:["*://www.rockradio.com/*"],js:"radiotunes.js",id:"rockradio"},{label:"ClassicalRadio",matches:["*://www.classicalradio.com/*"],js:"radiotunes.js",id:"classicalradio"},{label:"Audacy",matches:["*://www.audacy.com/*"],js:"audacy.js",id:"audacy"},{label:"Audius",matches:["*://audius.co/*"],js:"audius.js",id:"audius"},{label:"GetWorkDoneMusic",matches:["*://*.getworkdonemusic.com/*"],js:"getworkdonemusic.js",id:"getworkdonemusic"},{label:"Jamendo",matches:["*://www.jamendo.com/*"],js:"jamendo.js",id:"jamendo"},{label:"Bandzone.cz",matches:["*://bandzone.cz/*"],js:"bandzone.cz.js",id:"bandzone.cz"},{label:"Music Player for Google Drive",matches:["*://www.driveplayer.com/*"],js:"driveplayer.js",id:"driveplayer"},{label:"Kodi",js:"kodi.js",id:"kodi"},{label:"Superplayer",matches:["*://www.superplayer.fm/*"],js:"superplayer.js",id:"superplayer"},{label:"RMFON",matches:["*://www.rmfon.pl/*"],js:"rmfon.js",id:"rmfon"},{label:"Radio 357",matches:["*://radio357.pl/*"],js:"radio357.js",id:"radio357"},{label:"JazzRadio",matches:["*://www.jazzradio.com/*"],js:"radiotunes.js",id:"jazzradio"},{label:"Zen Radio",matches:["*://www.zenradio.com/*"],js:"radiotunes.js",id:"zenradio"},{label:"SomaFM",matches:["*://somafm.com/player/*","*://somafm.com/player24/*"],js:"somafm.js",id:"somafm"},{label:"Free Music Archive",matches:["*://*.freemusicarchive.org/*"],js:"freemusicarchive.js",id:"freemusicarchive"},{label:"Reddit Music Player",matches:["*://reddit.musicplayer.io/"],js:"redditmusicplayer.js",id:"redditmusicplayer"},{label:" ",matches:["*://www.novoeradio.by/*"],js:"novoeradio.js",id:"novoeradio"},{label:"Radio Paradise",matches:["*://radioparadise.com/*"],js:"radioparadise.js",id:"radioparadise",allFrames:!0},{label:"Beatport",matches:["*://www.beatport.com/*"],js:"beatport.js",id:"beatport"},{label:"Beeline Music",matches:["*://music.beeline.ru/*"],js:"beeline-music.js",id:"beeline-music"},{label:"wavo",matches:["*://wavo.me/*"],js:"wavo.js",id:"wavo"},{label:"FluxFM Berlin",matches:["*://www.fluxfm.de/*"],js:"fluxfm.js",id:"fluxfm"},{label:"Noise FM",matches:["*://noisefm.ru/*","*://en.noisefm.ru/*"],js:"noisefm.js",id:"noisefm",allFrames:!0},{label:"WWOZ",matches:["*://www.wwoz.org/listen/player/*"],js:"wwoz.js",id:"wwoz"},{label:"Sonerezh",matches:["*://sonerezh.*/*","*://*/*sonerezh*"],js:"sonerezh.js",id:"sonerezh"},{label:"Youradio",matches:["*://www.youradio.cz/*"],js:"youradio.js",id:"youradio"},{label:"GPMusic",matches:["*://player.gpmusic.co/*"],js:"gpmusic.js",id:"gpmusic"},{label:"Nightwave Plaza",matches:["*://plaza.one/*"],js:"plaza.js",id:"plaza"},{label:"Retrowave",matches:["*://retrowave.ru/*"],js:"retrowave.js",id:"retrowave"},{label:"Genie",matches:["*://www.genie.co.kr/player/fPlayer*"],js:"genie.js",id:"genie"},{label:"Bugs",matches:["*://music.bugs.co.kr/newPlayer*"],js:"bugs.js",id:"bugs"},{label:"openfm",matches:["*://open.fm/*"],js:"openfm.js",id:"openfm"},{label:"Playmoss",matches:["*://playmoss.com/*"],js:"playmoss.js",id:"playmoss"},{label:"Apidog",matches:["*://apidog.ru/*"],js:"apidog.js",id:"apidog"},{label:"Pinguin Radio",matches:["*://pinguinradio.com/*"],js:"pinguinradio.js",id:"pinguinradio"},{label:"JioSaavn",matches:["*://www.jiosaavn.com/*"],js:"jiosaavn.js",id:"jiosaavn"},{label:"Anghami",matches:["*://*.anghami.com/*"],js:"anghami.js",id:"anghami"},{label:"Mail.ru Music",matches:["*://my.mail.ru/music","*://my.mail.ru/music/*"],js:"mail.ru.js",id:"mail.ru"},{label:"Emby/Jellyfin",matches:["*://*8096/web/*","*://*8920/web/*","*://app.emby.media/*"],js:"emby.js",id:"emby"},{label:"Freegal Music",matches:["*://*.freegalmusic.com/*"],js:"freegalmusic.js",id:"freegalmusic"},{label:"hoopla",matches:["*://www.hoopladigital.com/*"],js:"hoopladigital.js",id:"hoopladigital"},{label:"Amplify 817",matches:["*://amplify817.org/*"],js:"musicat.js",id:"amplify817"},{label:"Capital City Records",matches:["*://capitalcityrecords.ca/*"],js:"musicat.js",id:"capitalcityrecords"},{label:"Electric Lady Bird",matches:["*://atxlibrary.musicat.co/*"],js:"musicat.js",id:"musicat-atxlibrary"},{label:"FlipSide",matches:["*://flipside.apl.org/*"],js:"musicat.js",id:"apl-flipside"},{label:"HUM (Hear Utah Music)",matches:["*://hum.slcpl.org/*"],js:"musicat.js",id:"slcpl-hum"},{label:"KDL Vibes",matches:["*://vibes.kdl.org/*"],js:"musicat.js",id:"kdl-vibes"},{label:"Library Music Project",matches:["*://librarymusicproject.com/*"],js:"musicat.js",id:"librarymusicproject"},{label:"MNspin",matches:["*://hclib.musicat.co/*"],js:"musicat.js",id:"musicat-hclib"},{label:"Nashville BoomBox",matches:["*://boombox.library.nashville.org/*"],js:"musicat.js",id:"nashville-library-boombox"},{label:"QC Beats",matches:["*://qcbeats.org/*"],js:"musicat.js",id:"qcbeats"},{label:"Q-Dance",matches:["*://www.q-dance.com/*"],js:"q-dance.js",id:"q-dance"},{label:"Sawdust City Sounds",matches:["*://sawdustcitysounds.org/*"],js:"musicat.js",id:"sawdustcitysounds"},{label:"Seattle PlayBack",matches:["*://playback.spl.org/*"],js:"musicat.js",id:"spl-playback"},{label:"STACKS",matches:["*://stacks.carnegielibrary.org/*"],js:"musicat.js",id:"carnegielibrary-stacks"},{label:"Tracks Music Library",matches:["*://tracksmusiclibrary.org/*"],js:"musicat.js",id:"tracksmusiclibrary"},{label:"Monstercat",matches:["*://www.monstercat.com/*"],js:"monstercat.js",id:"monstercat"},{label:"Listen.moe",matches:["*://listen.moe/*"],js:"listen.moe.js",id:"listen.moe"},{label:"anime(bits)",matches:["*://radio.animebits.moe/","*://radio.animebits.moe/player/*"],js:"animebits.js",id:"animebits"},{label:"Fair Price Music",matches:["*://www.fairpricemusic.com/*"],js:"fairpricemusic.js",id:"fairpricemusic"},{label:"Radio ULTRA",matches:["*://player.radioultra.ru/*"],js:"radioultra.js",id:"radioultra"},{label:" ",matches:["*://player.nashe.ru/*"],js:"radioultra.js",id:"nashe"},{label:"RockFM",matches:["*://player.rockfm.ru/*"],js:"radioultra.js",id:"rockfm"},{label:"Radio JAZZ",matches:["*://player.radiojazzfm.ru/*"],js:"radioultra.js",id:"radiojazzfm"},{label:"WO Streaming",matches:["*://*player.wostreaming.net/*"],js:"wostreaming.js",id:"wostreaming"},{label:"Listen Live",matches:["*://player.listenlive.co/*"],js:"listenlive.js",id:"listenlive"},{label:"Rayo",matches:["*://hellorayo.co.uk/*/play/*","*://hellorayo.co.uk/*/player/*"],js:"planetradio.js",id:"planetradio"},{label:"Roxx Radio",matches:["*://roxx.gr/radio/*"],js:"roxx.js",id:"roxx"},{label:"ListenOnRepeat",matches:["*://listenonrepeat.com/*"],js:"listenonrepeat.js",id:"listenonrepeat"},{label:"Duckburg Radio",matches:["*://*.radio-mb.com/*"],js:"radio-mb.js",id:"radio-mb"},{label:"Webradio.de",matches:["*://www.webradio.de/*"],js:"radioplayer.js",id:"webradio.de"},{label:"The Breeze",matches:["*://www.thebreeze.com/*/radioplayer/*"],js:"radioplayer.js",id:"thebreeze"},{label:"RadioPlayer",matches:["*://ukradioplayer.*/*","*://radioplayer.*/*","*://*/radioplayer/*","*://*/radio/player/","*://*/*/radio/player/"],js:"radioplayer.js",id:"radioplayer"},{label:"deltaradio",matches:["*://www.deltaradio.de/*"],js:"deltaradio.de.js",id:"deltaradio.de"},{label:"Radio Bob",matches:["*://*.radiobob.de/*"],js:"radiobob.js",id:"radiobob"},{label:"ByteFM",matches:["*://www.byte.fm/*"],js:"byte.fm.js",id:"byte.fm"},{label:"Deutschlandfunk Nova",matches:["*://www.deutschlandfunknova.de/*"],js:"deutschlandfunknova.js",id:"deutschlandfunknova"},{label:"QQ Music",matches:["*://y.qq.com/*"],js:"qq-music.js",id:"qq-music"},{label:"QQ Video",matches:["*://v.qq.com/x/*"],js:"qq-video.js",id:"qq-video"},{label:"Naver",matches:["*://playerui.music.naver.com/*"],js:"naver.js",id:"naver"},{label:"Soribada",matches:["*://www.soribada.com/*"],js:"soribada.js",id:"soribada"},{label:"Flo",matches:["*://www.music-flo.com/*"],js:"music-flo.js",id:"music-flo"},{label:"Discogs",matches:["*://www.discogs.com/*"],js:"youtube-embed.js",id:"youtube-embed",allFrames:!0},{label:"NPR",matches:["*://www.npr.org/*"],js:"npr.js",id:"npr"},{label:"Streamsquid",matches:["*://streamsquid.com/*"],js:"streamsquid.js",id:"streamsquid"},{label:"Streemlion",matches:["*://listen.streemlion.com/*"],js:"streemlion.js",id:"streemlion"},{label:"eMusic",matches:["*://www.emusic.com/*"],js:"emusic.js",id:"emusic"},{label:"LyricsTraining",matches:["*://lyricstraining.com/*"],js:"lyricstraining.js",id:"lyricstraining"},{label:"Music Walker",matches:["*://arkanath.com/MusicWalker/*"],js:"musicwalker.js",id:"musicwalker"},{label:"radioeins",matches:["*://www.radioeins.de/livestream/*"],js:"radioeins.js",id:"radioeins"},{label:"Fritz",matches:["*://www.fritz.de/livestream/*"],js:"fritz.js",id:"fritz"},{label:"Musicoin",matches:["*://musicoin.org/*"],js:"musicoin.js",id:"musicoin"},{label:"181.fm",matches:["*://player.181fm.com/*"],js:"181.fm.js",id:"181.fm"},{label:"Phish.in",matches:["*://phish.in/*"],js:"phish.in.js",id:"phish.in"},{label:"Rainwave",matches:["*://rainwave.cc/*","*://all.rainwave.cc/*","*://game.rainwave.cc/*","*://chiptune.rainwave.cc/*","*://ocr.rainwave.cc/*","*://covers.rainwave.cc/*"],js:"rainwave.js",id:"rainwave"},{label:"Retro Synthwave",matches:["*://www.retro-synthwave.com/*"],js:"retro-synthwave.js",id:"retro-synthwave"},{label:".",matches:["*://radiovolna.net/*"],js:"radiovolna.js",id:"radiovolna"},{label:"Feedbands",matches:["*://feedbands.com/*"],js:"feedbands.js",id:"feedbands"},{label:"Taazi",matches:["*://taazi.com/*"],js:"taazi.js",id:"taazi"},{label:"Patari",matches:["*://patari.pk/*"],js:"patari.js",id:"patari"},{label:"pCloud",matches:["*://my.pcloud.com/*"],js:"pcloud.js",id:"pcloud"},{label:"JetSetRadio Live",matches:["*://jetsetradio.live/*"],js:"jetsetradio.live.js",id:"jetsetradio.live"},{label:"Radio France",matches:["*://www.radiofrance.fr/*"],js:"radiofrance.js",id:"radiofrance"},{label:"RemixRotation",matches:["*://remixrotation.com/*"],js:"remixrotation.js",id:"remixrotation"},{label:"WFMU",matches:["*://wfmu.org/*","*://freeform.wfmu.org/*"],js:"wfmu.js",id:"wfmu"},{label:"SiriusXM",matches:["*://www.siriusxm.com/*","*://www.siriusxm.ca/*","*://*.siriusxm.com/player/*"],js:"siriusxm-player.js",id:"siriusxm-player"},{label:"1ting",matches:["*://www.1ting.com/player/*","*://www.1ting.com/p_*","*://www.1ting.com/album*","*://www.1ting.com/rand.php*","*://www.1ting.com/day/*","*://h5.1ting.com/*"],js:"1ting.js",id:"1ting"},{label:"Douban Artists",matches:["*://music.douban.com/artists/player/*"],js:"douban-artists.js",id:"douban-artists"},{label:"Kugou",matches:["*://www.kugou.com/song/*"],js:"kugou.js",id:"kugou"},{label:"Gimme Radio",matches:["*://gimmeradio.com/*","*://www.gimmeradio.com/*","*://gimmecountry.com/*","*://www.gimmecountry.com/*","*://gimmemetal.com/*","*://www.gimmemetal.com/*"],js:"gimmeradio.js",id:"gimmeradio"},{label:"9sky",matches:["*://www.9sky.com/music*","*://www.9sky.com/mv/detail*"],js:"9sky.js",id:"9sky"},{label:"Vagalume.FM",matches:["*://vagalume.fm/*","*://*.vagalume.com.br/*"],js:"vagalume.js",id:"vagalume"},{label:"Radiooooo",matches:["*://radiooooo.com/*","*://mobile.radiooooo.com/*"],js:"radiooooo.js",id:"radiooooo"},{label:"LetsLoop",matches:["*://letsloop.com/*"],js:"letsloop.js",id:"letsloop"},{label:"Mideast Tunes",matches:["*://mideastunes.com/*","*://map.mideastunes.com/*"],js:"mideastunes.js",id:"mideastunes"},{label:"esk Rozhlas",matches:["*://prehravac.rozhlas.cz/*"],js:"rozhlas.js",id:"rozhlas"},{label:"blocSonic",matches:["*://*.blocsonic.com/*"],js:"blocsonic.js",id:"blocsonic"},{label:"Resonate",matches:["*://stream.resonate.coop/*"],js:"resonate.js",id:"resonate"},{label:"KEXP",matches:["*://*.kexp.org/*"],js:"kexp.js",id:"kexp"},{label:"Hotmixradio.fr",matches:["*://www.hotmixradio.fr/*"],js:"hotmixradio.js",id:"hotmixradio"},{label:"Aphex Twin",matches:["*://aphextwin.warp.net/*"],js:"warp-aphextwin.js",id:"warp-aphextwin"},{label:"Zachary Seguin Music",matches:["*://music.zacharyseguin.ca/*"],js:"musickit.js",id:"zacharyseguin"},{label:"Joox",matches:["*://www.joox.com/*"],js:"joox.js",id:"joox"},{label:"Musish",matches:["*://musi.sh/*"],js:"musickit.js",id:"musish"},{label:"1001tracklists",matches:["*://www.1001tracklists.com/tracklist/*"],js:"1001tracklists.js",id:"1001tracklists"},{label:"YouTube Music",matches:["*://music.youtube.com/*"],js:"youtube-music.js",id:"youtube-music"},{label:"Radiozenders.FM",matches:["*://www.radiozenders.fm/*"],js:"radiozenders.js",id:"radiozenders"},{label:"Invidious",matches:["*://*.invidio.us/*"],js:"invidious.js",id:"invidious"},{label:"Piped",matches:["*://piped.video/*"],js:"piped.js",id:"piped"},{label:"Pretzel",matches:["*://*.pretzel.rocks/*"],js:"pretzel.js",id:"pretzel"},{label:"Primordial Radio",matches:["*://primordialradio.com/*"],js:"primordialradio.js",id:"primordialradio"},{label:"Radio Kyivstar",matches:["*://radio.kyivstar.ua/*"],js:"kyivstar.js",id:"kyivstar"},{label:"Funkwhale",js:"funkwhale.js",id:"funkwhale"},{label:"9128.live",matches:["*://9128.live/*","*://embed.radio.co/player/*"],js:"radioco.js",id:"9128.live",allFrames:!0},{label:"Radio.co",matches:["*://embed.radio.co/player/*"],js:"radioco.js",id:"radioco"},{label:"Super45.fm",matches:["*://super45.fm/"],js:"radioco.js",id:"super45fm",allFrames:!0},{label:"R/a/dio",matches:["*://r-a-d.io/*"],js:"r-a-d.io.js",id:"r-a-d.io"},{label:"Apple Music",matches:["*://*music.apple.com/*"],js:"musickit.js",id:"apple-music"},{label:"Primephonic",matches:["*://play.primephonic.com/*"],js:"primephonic.js",id:"primephonic"},{label:"Watch2Gether",matches:["*://w2g.tv/*"],js:"watch2gether.js",id:"watch2gether"},{label:"Poolsuite",matches:["*://poolsuite.net/*"],js:"poolsuite.js",id:"poolsuite"},{label:"GDS.FM",matches:["*://www.gds.fm/*","*://gds.fm/*"],js:"gds.fm.js",id:"gds"},{label:"Wynk Music",matches:["*://wynk.in/music*"],js:"wynk.js",id:"wynk"},{label:"RadioJavan",matches:["*://play.radiojavan.com/*"],js:"radiojavan.js",id:"radiojavan"},{label:"Audiomack",matches:["*://audiomack.com/*"],js:"audiomack.js",id:"audiomack"},{label:"Global Player",matches:["*://www.globalplayer.com/*"],js:"globalplayer.js",id:"globalplayer"},{label:"The Current",matches:["*://www.thecurrent.org/*"],js:"thecurrent.js",id:"thecurrent"},{label:"pan y rosas discos",matches:["*://www.panyrosasdiscos.net/*"],js:"panyrosasdiscos.js",id:"panyrosasdiscos"},{label:"GRRIF",matches:["*://*.grrif.ch/*"],js:"grrif.js",id:"grrif"},{label:"newgrounds",matches:["*://www.newgrounds.com/audio*"],js:"newgrounds.js",id:"newgrounds"},{label:"Jango",matches:["*://www.jango.com/*"],js:"jango.js",id:"jango"},{label:"PlayIrish",matches:["*://*.playirish.ie/*"],js:"playirish.js",id:"playirish"},{label:"Radio Record",matches:["*://www.radiorecord.ru/*"],js:"radiorecord.js",id:"radiorecord"},{label:"Imago Radio",matches:["*://*.imago.fm/*"],js:"imago.js",id:"imago"},{label:"Provoda.ch",matches:["*://*.provoda.ch/*"],js:"provoda.ch.js",id:"provoda.ch"},{label:"Atomic Music Space",matches:["*://stream.atomicmusic.space/*"],js:"atomicmusic.space.js",id:"atomicmusic.space"},{label:"The-radio.ru",matches:["*://the-radio.ru/*"],js:"the-radio.ru.js",id:"the-radio.ru"},{label:"HQ Radio",matches:["*://hqradio.ru/*"],js:"hqradio.js",id:"hqradio"},{label:"Smooth FM",matches:["*://smoothfm.iol.pt/*"],js:"smoothfm.js",id:"smoothfm"},{label:"Vodafone.fm",matches:["*://vodafone.fm/*"],js:"vodafone.fm.js",id:"vodafonefm"},{label:"Relisten.net",matches:["*://relisten.net/*"],js:"relisten.js",id:"relisten"},{label:"UpBeatRadio",matches:["*://upbeatradio.net/*"],js:"upbeatradio.js",id:"upbeatradio"},{label:"Chillhop",matches:["*://chillhop.com/*"],js:"chillhop.js",id:"chillhop"},{label:"DatPiff",matches:["*://www.datpiff.com/player/*"],js:"datpiff.js",id:"datpiff",allFrames:!0},{label:"Shuffle",matches:["*://shuffle.one/play*"],js:"shuffleone.js",id:"shuffleone"},{label:"JB FM",matches:["*://jb.fm/player/*"],js:"jb.fm.js",id:"jbfm"},{label:"SECTOR Radio",matches:["*://sectorradio.ru/*"],js:"sectorradio.js",id:"sectorradio"},{label:"LiveOne",matches:["*://*.liveone.com/*"],js:"liveone.js",id:"liveone"},{label:"PocketCasts",matches:["*://play.pocketcasts.com/*"],js:"pocketcasts.js",id:"pocketcasts"},{label:"Clyp",matches:["*://clyp.it/*"],js:"clyp.js",id:"clyp"},{label:"RTBF Radio",matches:["*://www.rtbf.be/radio/*"],js:"rtbf.js",id:"rtbf"},{label:"TuneTrack",matches:["*://tunetrack.net/*"],js:"tunetrack.js",id:"tunetrack"},{label:"Musify",matches:["*://*.musify.club/*"],js:"musify.js",id:"musify"},{label:"Radio Rethink",matches:["*://www.radiorethink.com/*"],js:"radiorethink.js",id:"radiorethink"},{label:"SoundClick",matches:["*://www.soundclick.com/*"],js:"soundclick.js",id:"soundclick"},{label:"Napster",matches:["*://app.napster.com/*"],js:"napster.js",id:"napster"},{label:"abc.net.au",matches:["*://www.abc.net.au/*/listen-live/*"],js:"abc.net.au.js",id:"abcnetau"},{label:"JQBX",matches:["*://app.jqbx.fm/*"],js:"jqbx.js",id:"jqbx"},{label:"music.jsososo.com",matches:["*://y.jsososo.com/*","*://music.jsososo.com/*"],js:"jsososo.js",id:"jsososo"},{label:"Supla",matches:["*://*.supla.fi/*"],js:"supla.js",id:"supla"},{label:"swr3",matches:["*://www.swr3.de/*"],js:"swr3.js",id:"swr3"},{label:"Epidemic Sound",matches:["*://*.epidemicsound.com/*"],js:"epidemicsound.js",id:"epidemicsound"},{label:"Rekt Network",matches:["*://rekt.network/*"],js:"rekt.network.js",id:"rektnetwork"},{label:"Nightride FM",matches:["*://nightride.fm/*"],js:"nightride.fm.js",id:"nightridefm"},{label:"Qobuz",matches:["*://*.qobuz.com/*"],js:"qobuz.js",id:"qobuz"},{label:"TruckersFM",matches:["*://*.truckers.fm/*"],js:"truckersfm.js",id:"truckersfm"},{id:"winampify",label:"Winampify",js:"winampify.js",matches:["*://winampify.io/*"]},{label:"detektor.fm",matches:["*://detektor.fm/*"],js:"detektorfm.js",id:"detektorfm"},{label:"iBroadcast",matches:["*://media.ibroadcast.com/*"],js:"ibroadcast.js",id:"ibroadcast"},{label:"Radio7",matches:["*://radio7.lv/*"],js:"radio7.js",id:"radio7lv"},{label:"TOWER RECORDS MUSIC",matches:["*://music.tower.jp/*"],js:"towerrecordsmusic.js",id:"towerrecordsmusic"},{label:"Eggs",matches:["*://eggs.mu/*"],js:"eggs.js",id:"eggs"},{label:"Jamstash",matches:["*://jamstash.com/*"],js:"jamstash.js",id:"jamstash"},{label:"SubFire",matches:["*://p.subfireplayer.net/*"],js:"subfire.js",id:"subfire"},{label:"Idagio",matches:["*://app.idagio.com/*"],js:"idagio.js",id:"idagio"},{label:"Relax FM",matches:["*://relax-fm.ru/*"],js:"relaxfm.js",id:"relaxfm"},{label:"Laut.fm",matches:["*://laut.fm/*"],js:"laut.fm.js",id:"laut.fm"},{label:"Magnatune",matches:["*://magnatune.com/*"],js:"magnatune.js",id:"magnatune"},{label:"Libre.fm",matches:["*://libre.fm/*"],js:"librefm.js",id:"librefm"},{label:"Brain.fm",matches:["*://my.brain.fm/*"],js:"brainfm.js",id:"brainfm"},{label:"bullofheaven.com",matches:["*://bullofheaven.com/*"],js:"bullofheaven.com.js",id:"bullofheavencom"},{label:"All Classical Portland",matches:["*://player.allclassical.org/*"],js:"allclassical.org.js",id:"allclassicalportland"},{label:"Migu Music",matches:["*://music.migu.cn/*"],js:"migu-music.js",id:"migu-music"},{label:"Weibo",matches:["*://weibo.com/*","*://*.weibo.com/*"],js:"weibo.js",id:"weibo"},{label:"Street Voice",matches:["*://streetvoice.cn/*","*://streetvoice.com/*"],js:"streetvoice.js",id:"streetvoice"},{label:"Red Bull",matches:["*://www.redbull.com/*"],js:"redbull.js",id:"redbull"},{label:"Synology",matches:["*://*5000/*","*://*5001/*","*://*/?launchApp=SYNO.SDS.AudioStation.Application*"],js:"synology.js",id:"synology"},{label:"Ragya",matches:["*://www.ragya.com/*"],js:"ragya.js",id:"ragya"},{label:"CodeRadio",matches:["*://coderadio.freecodecamp.org/*"],js:"coderadio.js",id:"coderadio"},{label:"LITT Live",matches:["*://littlive.com/*"],js:"littlive.js",id:"dashradio"},{label:"Niconico",matches:["*://www.nicovideo.jp/*"],js:"nicovideo.js",id:"nicovideo"},{label:"",matches:["*://zvuk.com/*"],js:"zvuk.js",id:"zvuk"},{label:"Navidrome",js:"navidrome.js",id:"navidrome"},{label:"LMS",js:"lms.js",id:"lms"},{label:"deep-cut.fm",matches:["*://deepcut.fm/*","*://turntable.fm/*","*://deep-cut.fm/*","*://deepcuts.fm/*"],js:"deep-cut.fm.js",id:"deepcut.fm"},{label:"Burntable",matches:["*://*.burntable.com/*"],js:"burntable.js",id:"burntable"},{label:"Stingray Music",matches:["*://*.stingray.com/*"],js:"stingray.js",id:"stingray"},{label:"CBC Music",matches:["*://www.cbc.ca/listen/cbc-music-playlists*"],js:"cbcmusic.js",id:"cbcmusic"},{label:"Indie88",matches:["*://indie88.com/lean-stream-player/*","*://cob.leanplayer.com/CINDFM*"],js:"indie88.js",id:"indie88"},{label:"Playlist Randomizer",matches:["*://www.playlist-randomizer.com/*","*://playlist-randomizer.com/*"],js:"playlist-randomizer.js",id:"playlist-randomizer"},{label:"QueUp",matches:["*://www.queup.net/*"],js:"queup.js",id:"queup"},{label:"Live 365",matches:["*://*.live365.com/*"],js:"live365.js",id:"live365"},{label:"Lounge.fm",matches:["*://www.lounge.fm/*"],js:"lounge.fm.js",id:"lounge.fm"},{label:"EulerBeats",matches:["*://eulerbeats.com/*"],js:"eulerbeats.js",id:"eulerbeats"},{label:"FilmMusic.io",matches:["*://*.filmmusic.io/*"],js:"filmmusic.io.js",id:"filmmusic.io"},{label:"X-Team Radio",matches:["*://radio.x-team.com/*"],js:"xteam-radio.js",id:"xteam-radio"},{label:"Calm",matches:["*://*.calm.com/*"],js:"calm.js",id:"calm"},{label:"Keakie",matches:["*://*.keakie.com/*"],js:"keakie.js",id:"keakie"},{label:"KKBOX",matches:["*://*play.kkbox.com/*"],js:"kkbox.js",id:"kkbox"},{label:"Thrill Jockey",matches:["*://thrilljockey.com/products/*"],js:"thrilljockey.js",id:"thrilljockey"},{label:"Radio Horizonte",matches:["*://horizonte.cl/*"],js:"mediastream.js",id:"horizontecl"},{label:"Sonar FM",matches:["*://sonarfm.cl/*"],js:"mediastream.js",id:"sonarfmcl"},{label:"Play FM",matches:["*://playfm.cl/*"],js:"mediastream.js",id:"playfmcl"},{label:"WKM Radio",matches:["*://www.wkmradio.com/*"],js:"mediastream.js",id:"wkmradio"},{label:"Rockaxis",matches:["*://www.rockaxis.com/*"],js:"mediastream.js",id:"rockaxis"},{label:"Rock&Pop Chile",matches:["*://www.rockandpop.cl/*"],js:"rockandpopcl.js",id:"rockandpopcl"},{label:"WYEP",matches:["*://wyep.org/*"],js:"wyep.js",id:"wyep"},{label:"ZENO",matches:["*://*zeno.fm/*"],js:"zeno.js",id:"zeno"},{label:"Naxos Music Library",matches:["*://*.naxosmusiclibrary.com/*"],js:"naxosmusiclibrary.js",id:"naxosmusiclibrary"},{label:"Klassik Radio",matches:["*://*klassikradio.de/*"],js:"klassikradio.de.js",id:"klassikradio"},{label:"Beetle",js:"beetle.js",id:"beetle"},{label:"RefNet",matches:["*://listen.refnet.fm/*"],js:"refnet.js",id:"refnet"},{label:"La Radio du bord de l'eau",matches:["*://*auborddeleau.radio/*"],js:"auborddeleau.radio.js",id:"auborddeleau.radio",allFrames:!0},{label:"Radio Willy",matches:["*://*willy.radio/player/willy/*"],js:"willy.radio.js",id:"willy.radio"},{label:"NIGHT.FM",matches:["*://*night.fm/*"],js:"night.fm.js",id:"night.fm"},{label:"Radio Nowy Swiat",matches:["*://nowyswiat.online/*"],js:"nowyswiat.js",id:"nowyswiat"},{label:"Radiolla",matches:["*://*radiolla.com/*"],js:"radiolla.js",id:"radiolla"},{label:"Oxigenio.fm",matches:["*://*oxigenio.fm/*"],js:"oxigenio.fm.js",id:"oxigenio.fm"},{label:"Intergalactic FM",matches:["*://*intergalactic.fm/*"],js:"intergalacticfm.js",id:"intergalactic.fm"},{label:"Radio Cuca",matches:["*://*radiocuca.es/*"],js:"radiocuca.js",id:"radiocuca"},{label:"Irama Nusantara",matches:["*://*.iramanusantara.org/*"],js:"iramanusantara.js",id:"iramanusantara"},{label:"Yammat FM",matches:["*://*yammat.fm/*"],js:"yammat.fm.js",id:"yammat.fm"},{label:"Husk Recordings",matches:["*://huskrecordings.com/music/*"],js:"huskrecordings.js",id:"huskrecordings"},{label:"nugs.net",matches:["*://play.nugs.net/*"],js:"nugs.js",id:"nugs"},{label:"livephish.com",matches:["*://plus.livephish.com/*"],js:"livephish.js",id:"livephish.com"},{label:"Ishkur's Guide to Electronic Music",matches:["*://music.ishkur.com/*"],js:"ishkur.js",id:"music.ishkur.com"},{label:"Nonoki",matches:["*://nonoki.com/music/*"],js:"nonoki.js",id:"nonoki"},{label:"Beatbump",matches:["*://beatbump.io/*"],js:"beatbump.js",id:"beatbump"},{label:"LINE MUSIC",matches:["*://music.line.me/*"],js:"line-music.js",id:"linemusic"},{label:"KCRW",matches:["*://www.kcrw.com/*"],js:"kcrw.js",id:"kcrw"},{label:"World Fusion Radio",matches:["*://worldfusionradio.com/*"],js:"worldfusionradio.js",id:"worldfusionradio"},{label:"Hardtunes",matches:["*://www.hard-tunes.de/*","*://www.hardtunes.com/*","*://www.hardtunes.fr/*","*://www.hardtunes.it/*","*://www.hardtunes.nl/*"],js:"hardtunes.js",id:"hardtunes"},{label:"KINK",matches:["*://kink.nl/player","*://kink.nl/player/*"],js:"kinknl.js",id:"kinknl"},{label:"The Jazz Groove",matches:["*://jazzgroove.org/*"],js:"jazzgroove.js",id:"jazzgroove"},{label:"XRAY.FM",matches:["*://*.xray.fm/*"],js:"xrayfm.js",id:"xrayfm"},{label:"DKFM Shoegaze Radio",matches:["*://decayfm.com/*"],js:"decayfm.js",id:"decayfm"},{label:"QCIndie",matches:["*://www.qcindie.com/listen-live/*"],js:"qcindie.js",id:"qcindie"},{label:"Colorado Public Radio",matches:["*://www.cpr.org/*"],js:"cpr.js",id:"cpr"},{label:"Indie 102.3",matches:["*://indie.cpr.org/"],js:"cpr-indie.js",id:"cpr-indie"},{label:"WXPN",matches:["*://xpn.org/*"],js:"xpn.js",id:"xpn"},{label:"FRISKY",matches:["*://*.frisky.fm/*"],js:"friskyfm.js",id:"friskyfm"},{label:"GotRadio",matches:["*://player.gotradio.com/*"],js:"gotradio.js",id:"gotradio"},{label:"LightningStream",matches:["*://*.lightningstream.com/Player*","*://*.lightningstream.com/player*"],js:"lightningstream.js",id:"lightningstream"},{label:"Securenet Systems",matches:["*://radio.securenetsystems.net/*","*://stream*.securenetsystems.net/*"],js:"securenetsystems.js",id:"securenetsystems"},{label:"WBRU",matches:["*://www.wbru.com/*"],js:"radioco.js",id:"wbru",allFrames:!0},{label:"uwu radio",matches:["*://radio.uwu.network/*"],js:"uwu-radio.js",id:"uwu-radio"},{label:"MyStreamPlayer",matches:["*://*.mystreamplayer.com/*"],js:"mystreamplayer.js",id:"mystreamplayer"},{label:"BagelRadio",matches:["*://*.bagelradio.com/*"],js:"mystreamplayer.js",id:"bagelradio",allFrames:!0},{label:"Amazing Radio",matches:["*://amazingradio.com/*","*://amazingradio.us/*"],js:"amazingradio.js",id:"amazingradio"},{label:"DR Lyd",matches:["*://www.dr.dk/lyd*"],js:"dr-lyd.js",id:"dr-lyd"},{label:"lulu.fm",matches:["*://*lulu.fm/*"],js:"lulu.fm.js",id:"lulufm"},{label:"ROCK ANTENNE",matches:["*://*rockantenne.*/webradio/*"],js:"rockantenne.js",id:"rockantenne"},{label:"copyparty",matches:["*://127.0.0.1:3923/*","*://a.ocv.me/*"],js:"copyparty.js",id:"copyparty"},{label:"Fungjai",matches:["*://*.fungjai.com/*"],js:"fungjai.js",id:"fungjai"},{label:"Radio Caprice",matches:["*://radcap.ru/*"],js:"radcap.js",id:"radcap"},{label:"TrackerHub",matches:["*://trackerhub.vercel.app/*","*://trackerhub.cx/*"],js:"trackerhub.js",id:"trackerhub"},{label:"Gensokyo Radio",matches:["*://gensokyoradio.net/*"],js:"gensokyoradio.js",id:"gensokyoradio"},{label:"Stationhead",matches:["*://*stationhead.com/*"],js:"stationhead.js",id:"stationhead"},{label:"TECHNOBASE.FM",matches:["*://*technobase.fm/*","*://*housetime.fm/*","*://*hardbase.fm/*","*://*trancebase.fm/*","*://*coretime.fm/*","*://*clubtime.fm/*","*://*teatime.fm/*","*://*replay.fm/*"],js:"technobase.fm.js",id:"technobase.fm"},{label:"Telegram A",matches:["*://web.telegram.org/a/*"],js:"telegram-a.js",id:"telegram-a"},{label:"Telegram K",matches:["*://web.telegram.org/k/*"],js:"telegram-k.js",id:"telegram-k"},{label:"TuneGenieEmbed",matches:["*://b3.tunegenie.com/*"],js:"tunegenie-embed.js",id:"tunegenie-embed",allFrames:!0},{label:"TuneGenie",matches:["*://*.tunegenie.com/*"],js:"tunegenie.js",id:"tunegenie"},{label:"RTL+ Musik",matches:["*://plus.rtl.de/*"],js:"rtl-plus-musik.js",id:"rtl-plus-musik"},{label:"Tomorrowland",matches:["*://www.tomorrowland.com/*"],js:"tomorrowland.js",id:"tomorrowland"},{label:"hearthis.at",matches:["*://hearthis.at/*"],js:"hearthis-at.js",id:"hearthis-at"},{label:"Blend",matches:["*://blend.io/*"],js:"blend.js",id:"blend"},{label:"Radio Italia",matches:["*://www.radioitalia.it/*"],js:"radio-italia.js",id:"radio-italia"},{label:"Lyden av Norge",matches:["*://www.lydenavnorge.no/*"],js:"lyden-av-norge.js",id:"lyden-av-norge"},{label:"audio.com",matches:["*://audio.com/*"],js:"audio.js",id:"audio-com"},{label:"AfroCharts",matches:["*://*.afrocharts.com/*"],js:"afrocharts.js",id:"afrocharts"},{label:"Ed Banger Records",matches:["*://*.edbangerrecords.com/*"],js:"ed-banger-records.js",id:"ed-banger-records"},{label:"Hyperpipe",matches:["*://hyperpipe.surge.sh/*"],js:"hyperpipe.js",id:"hyperpipe"},{label:"Radiofreccia",matches:["*://play.rtl.it/live/*"],js:"radiofreccia.js",id:"radiofreccia"},{label:"khinsider",matches:["*://downloads.khinsider.com/*"],js:"khinsider.js",id:"khinsider"},{label:"WDR",matches:["*://*.wdr.de/radio/*"],js:"wdr.js",id:"wdr"},{label:"radio.de",matches:["*://www.radio.de/*"],js:"radio.de.js",id:"radiode"},{label:"FMSpins",matches:["*://*.fmspins.com/*"],js:"fmspins.js",id:"fmspins"},{label:"vk-save",matches:["*://*.vk-save.com/*"],js:"vk-save.js",id:"vk-save"},{label:"Radio Student",matches:["*://www.radiostudent.hr/*"],js:"radiostudent.js",id:"radiostudent"},{label:"BiliBili",matches:["*://www.bilibili.com/*"],js:"bilibili.js",id:"bilibili",usesBlocklist:!0},{label:"jam.coop",matches:["*://jam.coop/*"],js:"jam.coop.js",id:"jam.coop"},{label:"Zing MP3",matches:["*://zingmp3.vn/*"],js:"zingmp3.js",id:"zingmp3"},{label:"NTS",matches:["*://*nts.live/*"],js:"nts.js",id:"nts"},{label:"earth.fm",matches:["*://earth.fm/*"],js:"earth.fm.js",id:"earthfm"},{label:"apt-get's auditorium",matches:["*://tunes.apt-get.xyz/*"],js:"apt-get-tunes.js",id:"apt-get-tunes"},{label:"AzuraCast",js:"azuracast.js",id:"azuracast"},{label:"scrobblerad.io",matches:["*://scrobblerad.io/*"],js:"scrobbleradio.js",id:"scrobbleradio"},{label:"weareone.fm",matches:["*://weareone.fm/*"],js:"weareone.js",id:"weareone"},{label:"Bollerwagen",matches:["*://radiobollerwagen.de/*"],js:"bollerwagen.js",id:"bollerwagen"},{label:" ",matches:["*://music.mts.ru/*"],js:"mts-music.js",id:"mts-music"},{label:"ChirpRadio",matches:["*://chirpradio.org/*"],js:"chirpradio.js",id:"chirpradio"},{label:"OnlyHit",matches:["*://onlyhit.us/*"],js:"onlyhit.js",id:"onlyhit"},{label:"InstantAudio",matches:["*://instant.audio/*","*://radiosdecuba.com/*","*://radio.ht/*","*://jamaicaradio.net/*","*://emisoras.com.mx/*","*://radiosdepuertorico.com/*","*://radios.com.do/*","*://trinidadradiostations.net/*","*://radios.co.cr/*","*://radios.com.sv/*","*://emisoras.com.gt/*","*://radios.hn/*","*://radios.co.ni/*","*://radios.com.pa/*","*://radioarg.com/*","*://radios.com.bo/*","*://radiosaovivo.net/*","*://emisora.cl/*","*://radios.com.co/*","*://radios.com.ec/*","*://emisoras.com.py/*","*://radios.com.pe/*","*://surinaamseradio.com/*","*://radios.com.uy/*","*://radio.co.ve/*","*://radiosonline.be/*","*://ceskaradiaonline.cz/*","*://radio.co.dk/*","*://radiolisten.de/*","*://raadiod.com/*","*://emisora.org.es/*","*://ecouterradioenligne.com/*","*://radiofona.com.gr/*","*://radios.hr/*","*://ieradio.org/*","*://ascoltareradio.com/*","*://latvijasradio.com/*","*://radios.lu/*","*://radijas.org/*","*://radiohallgatas.hu/*","*://nederlandseradio.nl/*","*://nettradionorge.com/*","*://radios.co.at/*","*://onlineradio.pl/*","*://radioonline.com.pt/*","*://radio.org.ro/*","*://radiosonline.ch/*","*://siradio.si/*","*://radiostanice.rs/*","*://nettiradiot.org/*","*://radio.org.se/*","*://internetradiouk.com/*","*://bg-radio.org/*","*://radio.pp.ru/*","*://radioua.net/*","*://radioalgerie.eu/*","*://radio.co.cm/*","*://radio.cd/*","*://radio.co.ci/*","*://radio.com.gh/*","*://radio.or.ke/*","*://radio.mg/*","*://radio.co.ma/*","*://egyptradio.net/*","*://radio.org.ng/*","*://radio.sn/*","*://radiosa.org/*","*://radiotunisienne.org/*","*://radio.co.ug/*","*://radio-bd.com/*","*://radioonline.kr/*","*://radios.hk/*","*://onlineradios.in/*","*://radioonline.co.id/*","*://radioonline.my/*","*://radionp.com/*","*://jpradio.jp/*","*://radio.net.pk/*","*://radio.org.ph/*","*://radiosingapore.org/*","*://radio.com.lk/*","*://vietnamradio.org/*","*://radios.org.il/*","*://radioth.net/*","*://zhibo.fm/*","*://radios.tw/*","*://radioau.net/*","*://radio.org.nz/*"],js:"instantaudio.js",id:"instantaudio"},{label:"Basspistol Radio",matches:["*://*.basspistol.com/*"],js:"basspistol.js",id:"basspistol"},{label:"RadioFreeFedi",matches:["*://radiofreefedi.net/*"],js:"radiofreefedi.js",id:"radiofreefedi"},{label:"MyTuner",matches:["*://mytuner-radio.com/*"],js:"mytuner.js",id:"mytuner"},{label:"Mirlo",matches:["*://mirlo.space/*"],js:"mirlo.js",id:"mirlo"},{label:"Simulator Radio",matches:["*://*.simulatorradio.com/*"],js:"simulatorradio.js",id:"simulatorradio"},{label:"Echo",matches:["*://echo.sleepyfran.me/*"],js:"echo.js",id:"echo"},{label:"Gizz Tapes",matches:["*://tapes.kglw.net/*"],js:"tapes-kglw.js",id:"tapes-kglw"},{label:"Systrum Sistum Radio",matches:["*://systrum.net/*"],js:"systrum.js",id:"systrum"},{label:"cosine.club",matches:["*://cosine.club/*"],js:"cosine.club.js",id:"cosine.club"},{label:"The Indie Beat Radio",matches:["*://theindiebeat.fm/*"],js:"theindiebeat.js",id:"theindiebeat"},{label:"Musique Approximative",matches:["*://*.musiqueapproximative.net/*"],js:"musiqueapproximative.js",id:"musiqueapproximative"},{label:"Suno AI",matches:["*://suno.com/*"],js:"suno.js",id:"suno"},{label:"[untitled]",matches:["*://untitled.stream/*"],js:"untitled.js",id:"[untitled]"},{label:"DAB Music Player",matches:["*://dab.yeet.su/*","*://dabmusic.xyz/*"],js:"dabmusic.js",id:"dabmusic"},{label:"GBS-FM",matches:["*://gbs.fm/*"],js:"gbs.fm.js",id:"gbs"},{label:"Yumi Co. Radio",matches:["*://yumicoradio.net/*"],js:"yumicoradio.js",id:"yumicoradio"},{label:"Kosmik Dstroyer",matches:["*://kosmik-dstroyer.top/*"],js:"kosmik-dstroyer.js",id:"kosmik-dstroyer"},{label:"LaTeX 4000",matches:["*://nonacademic.net/*"],js:"nonacademic.js",id:"nonacademic"},{label:"gravity.fm",matches:["*://gravity.fm/*"],js:"gravity.fm.js",id:"gravity"},{label:"Archaic Horizon",matches:["*://archaichorizon.com/*","*://www.archaichorizon.com/*"],js:"archaichorizon.js",id:"archaichorizon"},{label:"Aonsoku",matches:["*://aonsoku.vercel.app/*"],js:"aonsoku.js",id:"aonsoku"},{label:"CREAMER NATION",matches:["*://creamernation.men/*"],js:"creamernation.js",id:"creamer-nation"}],Bn="*",Oc="[hidden]",Mc=50;function le(e,t="log"){const s=console[t];if(typeof s!="function")throw new TypeError(`Unknown log type: ${t}`);s(e)}function Ys(e,t){if(e&&t){const s=Bn.repeat(e.length);return t.replace(e,s)}return t}function Fn(e){return e?typeof e=="string"?Bn.repeat(e.length):Array.isArray(e)?`[Array(${e.length})]`:Oc:e===null?"null":e?.toString()??"undefined"}function Se(e,t){return new Promise((s,n)=>{const r=setTimeout(()=>{n(new Error("promise timeout"))},e);t.then(i=>{clearTimeout(r),s(i)},i=>{clearTimeout(r),n(i)})})}function Pc(e){return e.split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function qn(e){return e?`https://www.last.fm/music/${De(e)}`:""}function f1(e,t){return!t||!e?"":`${qn(e)}/${De(t)}`}function v1(e,t){return!t||!e?"":`${qn(e)}/_/${De(t)}`}function p1(e,t,s){return!s||!t||!e?"":`https://www.last.fm/user/${De(e)}/library/music/${De(t)}/_/${De(s)}`}function De(e){return encodeURIComponent(e.replace(/\+/g,"%2B"))}function Ic(){return!!(!self.window||(location.href.startsWith("safari-web-extension")||location.href.startsWith("moz-extension"))&&location.href.endsWith("generated_background_page.html"))}async function Dc(e){const t=await fetch(e,{method:"GET"});return t.ok?t.text():null}function zc(e,t,s){return Math.min(s,Math.max(e,t))}class Uc{events=new Map;on(t,s){const n=this.events.get(t)||[];this.events.set(t,[...n,s])}off(t,s){const n=this.events.get(t)||[];this.events.set(t,n.filter(r=>r!==s))}emit(t,...s){for(const n of this.events.get(t)||[])n(...s)}}const Nc="modulepreload",Bc=function(e){return"/"+e},Qs={},Hn=function(t,s,n){let r=Promise.resolve();if(s&&s.length>0){let l=function(d){return Promise.all(d.map(c=>Promise.resolve(c).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");r=l(s.map(d=>{if(d=Bc(d),d in Qs)return;Qs[d]=!0;const c=d.endsWith(".css"),g=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const S=document.createElement("link");if(S.rel=c?"stylesheet":Nc,c||(S.as="script"),S.crossOrigin="",S.href=d,a&&S.setAttribute("nonce",a),document.head.appendChild(S),c)return new Promise((j,E)=>{S.addEventListener("load",j),S.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})};(async()=>Hn(()=>Promise.resolve().then(()=>Wc),void 0))();const Fc=(async()=>Hn(()=>Promise.resolve().then(()=>ou),void 0))();class qc{queue=[];isActive=!1;shouldPrint=Fc.then(t=>t.getOption(t.DEBUG_LOGGING_ENABLED));push(t,s){this.queue.push({text:t,logType:s}),this.start()}async start(){if(!this.isActive){this.isActive=!0;try{for(let t=0;t<100&&this.queue.length>0;t++){const s=this.queue.shift();if(s&&await this.shouldPrint){const n=console[s.logType];if(typeof n!="function")throw new TypeError(`Unknown log type: ${s.logType}`);const r=`Web Scrobbler: ${s.text?.toString()}`;n(r)}}this.isActive=!1}catch{this.isActive=!1}}}}const Hc=new qc;function te(e,t="log"){Hc.push(e,t)}var L=(e=>(e.RESULT_OK="ok",e.RESULT_IGNORE="ignored",e.ERROR_AUTH="error-auth",e.ERROR_OTHER="error-other",e))(L||{}),ce=(e=>(e.SUCCESSFUL="success",e.IGNORED="ignored",e.ERROR="error",e.DISALLOWED="disallowed",e.INVALID="invalid",e))(ce||{});function Vc(e,t){for(const s of e)if(s[t]===L.RESULT_IGNORE)return"ignored";for(const s of e)if(s[t]!==L.RESULT_OK)return"error";return"success"}const Zs=3e3;class Vn{storage;namespace;requests=[];autoIncrement=0;emitter=new Uc;interval=setInterval(()=>{this.unlock()},Zs);constructor(t,s){this.storage=t,this.namespace=s}unlock(){this.requests=this.requests.slice(1),this.emitter.emit("updateLock",this.requests[0]),clearInterval(this.interval),this.interval=setInterval(()=>{this.unlock()},Zs)}async get(){const t=await this.storage.get();return t&&this.namespace in t?t[this.namespace]:null}async getLocking(){return await new Promise(s=>{const n=this.autoIncrement++;if(this.requests.push(n),this.requests[0]===n){s(!0);return}const r=i=>{i===n&&(s(!0),this.emitter.off("updateLock",r))};this.emitter.on("updateLock",r)}),this.get()}async set(t){const s={[this.namespace]:t};await this.storage.set(s)}async setLocking(t){try{await this.set(t)}catch(s){te(s,"warn")}this.unlock()}async update(t){const s=await this.getLocking(),n=Object.assign(s??{},t);await this.setLocking(n)}async debugLog(t=[]){const s=await this.get(),r=JSON.stringify(s,(i,o)=>t.includes(i)?Fn(o):o,2);location?.protocol==="chrome-extension:"&&te(`storage.${this.namespace} = ${r}`,"info")}async clear(){await this.storage.remove(this.namespace)}}const Q=0,Re=1,Jt="Connectors",Yt="ConnectorsOverrideOptions",Qt="customPatterns",Gn="Notifications",As="BlockedTags",ze="LocalCache",Wn="NativeScrobblerNotification",Zt="Blocklists",we="Options",ks="StateManagement",Ss="DisabledTabs",xs="RegexEdits",Nt="ScrobbleCache",Kn="Core",Gc={[Jt]:Re,[Yt]:Re,[Qt]:Re,[Gn]:Re,[we]:Re,LastFM:Q,LibreFM:Q,ListenBrainz:Q,Maloja:Q,Webhook:Q,Pleroma:Q,[Wn]:Q,[Zt]:Q,[ze]:Q,[xs]:Q,[Nt]:Q,[As]:Q,[Kn]:Q,[ks]:Q,[Ss]:Q};function W(e){switch(Gc[e]){case Re:return Yn(e);case Q:return ht(e);default:throw new Error(`Unknown storage namespace: ${e}`)}}function Jn(e){return ht(e)}function ht(e){const t=J.storage.local;return new Vn(t,e)}function Yn(e){const t=J.storage.sync||J.storage.local;return new Vn(t,e)}const Wc=Object.freeze(Object.defineProperty({__proto__:null,BLOCKED_TAGS:As,BLOCKLISTS:Zt,CONNECTORS_OPTIONS:Jt,CONNECTORS_OVERRIDE_OPTIONS:Yt,CORE:Kn,CUSTOM_PATTERNS:Qt,DISABLED_TABS:Ss,LOCAL_CACHE:ze,NATIVE_SCROBBLER_NOTIFICATION:Wn,NOTIFICATIONS:Gn,OPTIONS:we,REGEX_EDITS:xs,SCROBBLE_CACHE:Nt,STATE_MANAGEMENT:ks,getLocalStorage:ht,getScrobblerStorage:Jn,getStorage:W,getSyncStorage:Yn},Symbol.toStringTag,{value:"Module"}));W(Qt);const me=W(we),Ue=W(Jt),Bt=W(Yt),bt="useNotifications",ft="useUnrecognizedSongNotifications",vt="showInfobox",pt="scrobblePodcasts",_t="autoToggleLove",se="forceRecognize",ie="scrobbleRecognizedTracks",ne="scrobbleEditedTracksOnly",Ts="scrobblePercent",fe="disabledConnectors",Cs="debugLoggingEnabled",Oe="albumGuessingDisabled",Ae="albumGuessingUneditedOnly",ke="albumGuessingAllTracks",Qn={[se]:!1,[pt]:!0,[bt]:!0,[ft]:!1,[ie]:!0,[ne]:!1,[Cs]:!1,[Ts]:Mc,[vt]:!0,[_t]:!0,[Oe]:!1,[Ae]:!0,[ke]:!1,[fe]:{}},Kc={[se]:!1,[ie]:!0,[ne]:!1,[pt]:!0,[bt]:!0,[ft]:!1,[vt]:!0,[_t]:!0},et={YouTube:{scrobbleMusicOnly:!1,scrobbleEntertainmentOnly:!1,scrobbleMusicRecognisedOnly:!1,enableGetTrackInfoFromYtMusic:!1}};async function Jc(){const e={...Qn,...await me.get()};await me.set(e),me.debugLog([fe]);const t={...et,...await Ue.get()};for(const s in et){const n=s;t[n]={...et[n],...t[n]}}await Ue.set(t),Ue.debugLog(),Bt.debugLog()}async function Yc(){const e=await me.get();if(!e)throw new Error("No options data found");for(const t of Object.keys(e[fe])){let s=!1;for(const n of ot)if(n.id===t){s=!0;break}s||(delete e[fe][t],te(`Remove ${t} from storage`))}}async function Qc(e,t){if(Xn(e),t!==void 0){const n=await Zn(t,e);if(n!==void 0)return n}return(await me.get())?.[e]}async function Zc(e,t){Xn(e),await me.update({[e]:t})}async function Xc(e,t){return er(e),tr(e,t),(await Ue.get())?.[e][t]}async function eu(e,t,s){er(e),tr(e,t);const n=await Ue.get();if(!n?.[e])throw new Error(`Connector ${e} not found in storage`);n[e][t]=s,await Ue.set(n)}async function Zn(e,t){return su(t)?(await Bt.get())?.[e]?.[t]:void 0}async function tu(e,t,s){const n=await Bt.get();if(!n)throw new Error("No connectors override data found");n[e]||(n[e]={}),n[e][t]=s,await Bt.set(n)}function Xn(e){if(!(e in Qn))throw new Error(`Unknown option key: ${e}`);return!0}function su(e){return e in Kc}function er(e){if(!(e in et))throw new Error(`Unknown connector: ${e}`);return!0}function tr(e,t){if(!(t in et[e]))throw new Error(`Unknown connector option key: ${t}`);return!0}async function nu(e){const t=await me.get();if(!t)throw new Error("No options data found");return!t[fe][e.id]}async function ru(e,t){const s=await me.get();if(!s)throw new Error("No options data found");t?delete s[fe][e.id]:s[fe][e.id]=!0,await me.set(s)}async function iu(e){const t=await me.get();if(!t)throw new Error("No options data found");if(t[fe]={},!e)for(const s of ot)t[fe][s.id]=!0;await me.set(t)}Jc().then(Yc);const ou=Object.freeze(Object.defineProperty({__proto__:null,ALBUM_GUESSING_ALL_TRACKS:ke,ALBUM_GUESSING_DISABLED:Oe,ALBUM_GUESSING_UNEDITED_ONLY:Ae,AUTO_TOGGLE_LOVE:_t,DEBUG_LOGGING_ENABLED:Cs,DISABLED_CONNECTORS:fe,FORCE_RECOGNIZE:se,SCROBBLE_EDITED_TRACKS_ONLY:ne,SCROBBLE_PERCENT:Ts,SCROBBLE_PODCASTS:pt,SCROBBLE_RECOGNIZED_TRACKS:ie,USE_INFOBOX:vt,USE_NOTIFICATIONS:bt,USE_UNRECOGNIZED_SONG_NOTIFICATIONS:ft,getConnectorOption:Xc,getConnectorOverrideOption:Zn,getOption:Qc,isConnectorEnabled:nu,setAllConnectorsEnabled:iu,setConnectorEnabled:ru,setConnectorOption:eu,setConnectorOverrideOption:tu,setOption:Zc},Symbol.toStringTag,{value:"Module"}));class Xt{getArtist(){return this.processed.artist||this.parsed.artist}getTrack(){return this.processed.track||this.parsed.track}getAlbum(){return this.processed.album||this.parsed.album}getAlbumArtist(){return this.processed.albumArtist||this.parsed.albumArtist}getDuration(){return this.parsed.duration||this.processed.duration}getTrackArt(){return this.parsed.trackArt||this.metadata.trackArtUrl||null}getArtistTrackString(){return this.isEmpty()?null:`${this.getArtist()??"undefined"}  ${this.getTrack()??"undefined"}`}getUniqueId(){return this.parsed.uniqueID}getOriginUrl(){return this.parsed.originUrl}isEmpty(){return!(this.getArtist()&&this.getTrack())}isValid(){return this.flags.isValid||this.flags.isCorrectedByUser}equals(t){if(!t||!(t instanceof Xt))return!1;const s=this.getUniqueId(),n=t.getUniqueId();return s||n?s===n:this.getArtist()===t.getArtist()&&this.getTrack()===t.getTrack()&&this.getAlbum()===t.getAlbum()}toString(){return JSON.stringify(this,null,2)}getCloneableData(){return{parsed:this.parsed,noRegex:this.noRegex,processed:this.processed,metadata:this.metadata,flags:this.flags,connector:this.connector}}setLoveStatus(t,s=!1){if(s){this.metadata.userloved=t;return}t?this.metadata.userloved===void 0&&(this.metadata.userloved=!0):this.metadata.userloved=!1}static get USER_FIELDS(){return["artist","track","album","albumArtist"]}static get BASE_FIELDS(){return["artist","track","album","albumArtist"]}static get PROCESSED_FIELDS(){return["track","album","artist","albumArtist","duration"]}}class Es extends Xt{parsed;processed;noRegex;flags;metadata;connector;constructor(t,s){super(),this.parsed=Object.assign({track:null,artist:null,albumArtist:null,album:null,duration:null},t),this.processed={track:null,artist:null,albumArtist:null,album:null,duration:null},this.noRegex={track:null,artist:null,albumArtist:null,album:null,duration:null},this.flags={},this.metadata={},this.connector=s,this.initSongData()}resetInfo(){this.initProcessedData()}resetData(){this.initFlags(),this.initMetadata()}initSongData(){this.initFlags(),this.initMetadata(),this.initProcessedData()}initFlags(){this.flags={isScrobbled:!1,isCorrectedByUser:!1,isRegexEditedByUser:{track:!1,artist:!1,album:!1,albumArtist:!1},isAlbumFetched:!1,isValid:!1,isMarkedAsPlaying:!1,isSkipped:!1,isReplaying:!1,hasBlockedTag:!1,isLovedInService:null,finishedProcessing:!1}}initMetadata(){this.metadata={userloved:void 0,startTimestamp:Math.floor(Date.now()/1e3),label:this.connector.label}}initProcessedData(){for(const t of Es.PROCESSED_FIELDS)this.processed[t]=null,this.noRegex[t]=null}}var Mt={exports:{}},au=Mt.exports,Xs;function lu(){return Xs||(Xs=1,(function(e){(function(t){function s(p,y){var b=(p&65535)+(y&65535),C=(p>>16)+(y>>16)+(b>>16);return C<<16|b&65535}function n(p,y){return p<<y|p>>>32-y}function r(p,y,b,C,R,I){return s(n(s(s(y,p),s(C,I)),R),b)}function i(p,y,b,C,R,I,O){return r(y&b|~y&C,p,y,R,I,O)}function o(p,y,b,C,R,I,O){return r(y&C|b&~C,p,y,R,I,O)}function a(p,y,b,C,R,I,O){return r(y^b^C,p,y,R,I,O)}function l(p,y,b,C,R,I,O){return r(b^(y|~C),p,y,R,I,O)}function d(p,y){p[y>>5]|=128<<y%32,p[(y+64>>>9<<4)+14]=y;var b,C,R,I,O,w=1732584193,_=-271733879,A=-1732584194,k=271733878;for(b=0;b<p.length;b+=16)C=w,R=_,I=A,O=k,w=i(w,_,A,k,p[b],7,-680876936),k=i(k,w,_,A,p[b+1],12,-389564586),A=i(A,k,w,_,p[b+2],17,606105819),_=i(_,A,k,w,p[b+3],22,-1044525330),w=i(w,_,A,k,p[b+4],7,-176418897),k=i(k,w,_,A,p[b+5],12,1200080426),A=i(A,k,w,_,p[b+6],17,-1473231341),_=i(_,A,k,w,p[b+7],22,-45705983),w=i(w,_,A,k,p[b+8],7,1770035416),k=i(k,w,_,A,p[b+9],12,-1958414417),A=i(A,k,w,_,p[b+10],17,-42063),_=i(_,A,k,w,p[b+11],22,-1990404162),w=i(w,_,A,k,p[b+12],7,1804603682),k=i(k,w,_,A,p[b+13],12,-40341101),A=i(A,k,w,_,p[b+14],17,-1502002290),_=i(_,A,k,w,p[b+15],22,1236535329),w=o(w,_,A,k,p[b+1],5,-165796510),k=o(k,w,_,A,p[b+6],9,-1069501632),A=o(A,k,w,_,p[b+11],14,643717713),_=o(_,A,k,w,p[b],20,-373897302),w=o(w,_,A,k,p[b+5],5,-701558691),k=o(k,w,_,A,p[b+10],9,38016083),A=o(A,k,w,_,p[b+15],14,-660478335),_=o(_,A,k,w,p[b+4],20,-405537848),w=o(w,_,A,k,p[b+9],5,568446438),k=o(k,w,_,A,p[b+14],9,-1019803690),A=o(A,k,w,_,p[b+3],14,-187363961),_=o(_,A,k,w,p[b+8],20,1163531501),w=o(w,_,A,k,p[b+13],5,-1444681467),k=o(k,w,_,A,p[b+2],9,-51403784),A=o(A,k,w,_,p[b+7],14,1735328473),_=o(_,A,k,w,p[b+12],20,-1926607734),w=a(w,_,A,k,p[b+5],4,-378558),k=a(k,w,_,A,p[b+8],11,-2022574463),A=a(A,k,w,_,p[b+11],16,1839030562),_=a(_,A,k,w,p[b+14],23,-35309556),w=a(w,_,A,k,p[b+1],4,-1530992060),k=a(k,w,_,A,p[b+4],11,1272893353),A=a(A,k,w,_,p[b+7],16,-155497632),_=a(_,A,k,w,p[b+10],23,-1094730640),w=a(w,_,A,k,p[b+13],4,681279174),k=a(k,w,_,A,p[b],11,-358537222),A=a(A,k,w,_,p[b+3],16,-722521979),_=a(_,A,k,w,p[b+6],23,76029189),w=a(w,_,A,k,p[b+9],4,-640364487),k=a(k,w,_,A,p[b+12],11,-421815835),A=a(A,k,w,_,p[b+15],16,530742520),_=a(_,A,k,w,p[b+2],23,-995338651),w=l(w,_,A,k,p[b],6,-198630844),k=l(k,w,_,A,p[b+7],10,1126891415),A=l(A,k,w,_,p[b+14],15,-1416354905),_=l(_,A,k,w,p[b+5],21,-57434055),w=l(w,_,A,k,p[b+12],6,1700485571),k=l(k,w,_,A,p[b+3],10,-1894986606),A=l(A,k,w,_,p[b+10],15,-1051523),_=l(_,A,k,w,p[b+1],21,-2054922799),w=l(w,_,A,k,p[b+8],6,1873313359),k=l(k,w,_,A,p[b+15],10,-30611744),A=l(A,k,w,_,p[b+6],15,-1560198380),_=l(_,A,k,w,p[b+13],21,1309151649),w=l(w,_,A,k,p[b+4],6,-145523070),k=l(k,w,_,A,p[b+11],10,-1120210379),A=l(A,k,w,_,p[b+2],15,718787259),_=l(_,A,k,w,p[b+9],21,-343485551),w=s(w,C),_=s(_,R),A=s(A,I),k=s(k,O);return[w,_,A,k]}function c(p){var y,b="",C=p.length*32;for(y=0;y<C;y+=8)b+=String.fromCharCode(p[y>>5]>>>y%32&255);return b}function g(p){var y,b=[];for(b[(p.length>>2)-1]=void 0,y=0;y<b.length;y+=1)b[y]=0;var C=p.length*8;for(y=0;y<C;y+=8)b[y>>5]|=(p.charCodeAt(y/8)&255)<<y%32;return b}function S(p){return c(d(g(p),p.length*8))}function j(p,y){var b,C=g(p),R=[],I=[],O;for(R[15]=I[15]=void 0,C.length>16&&(C=d(C,p.length*8)),b=0;b<16;b+=1)R[b]=C[b]^909522486,I[b]=C[b]^1549556828;return O=d(R.concat(g(y)),512+y.length*8),c(d(I.concat(O),640))}function E(p){var y="0123456789abcdef",b="",C,R;for(R=0;R<p.length;R+=1)C=p.charCodeAt(R),b+=y.charAt(C>>>4&15)+y.charAt(C&15);return b}function T(p){return unescape(encodeURIComponent(p))}function D(p){return S(T(p))}function B(p){return E(D(p))}function U(p,y){return j(T(p),T(y))}function N(p,y){return E(U(p,y))}function F(p,y,b){return y?b?U(y,p):N(y,p):b?D(p):B(p)}e.exports?e.exports=F:t.md5=F})(au)})(Mt)),Mt.exports}var cu=lu();const sr=Cn(cu);class nr{storageRef;constructor(){this.storageRef=null}_init(t){this.storageRef=t}async clear(){if(this.storageRef)return await this.storageRef.clear()}async getData(){return this.storageRef?await this.storageRef.get():(le("Storage reference is not initialized","warn"),null)}async saveData(t){if(!this.storageRef){le("Storage reference is not initialized","warn");return}return await this.storageRef.set(t)}async updateData(t){if(!this.storageRef){le("Storage reference is not initialized","warn");return}return await this.storageRef.update(t)}}class ue extends nr{async loadSongInfo(t){let s=ue.getSongId(t);const n=await this.getSongInfoStorage();if((!n||!(s in n))&&(s=ue.makeSongId(t,["artist","track","album"])),(!n||!(s in n))&&(s=ue.makeSongId(t,["artist","track"])),n&&s in n){const r=n[s];return ue.applyLoadedInfo(t,r),!0}return!1}async saveSongInfo(t,s){const n=ue.getSongId(t),r=await this.getSongInfoStorage();if(r===null){await this.saveSongInfoToStorage({[n]:s});return}r[n]={...r[n],...s},await this.saveSongInfoToStorage(r)}async removeSongInfo(t){if(t===null)throw new Error("Song is null");const s=ue.getSongId(t);await this.removeSongInfoById(s)}async removeSongInfoById(t){const s=await this.getSongInfoStorage();s!==null&&(delete s[t],await this.saveSongInfoToStorage(s))}static applyLoadedInfo(t,s){t.processed={...t.processed,...s}}static getSongId(t){const s=t.getUniqueId();return s||ue.makeSongId(t,Es.BASE_FIELDS)}static makeSongId(t,s){let n="";for(const r of s)t.parsed[r]&&(n+=t.parsed[r]);if(n)return sr(n);throw new Error("Empty song")}}class uu extends ue{songInfoStorage=W(ze);init(){this._init(ht(ze))}async clear(){return await this.songInfoStorage.clear()}async getSongInfoStorage(){return this.songInfoStorage.get()}async saveSongInfoToStorage(t){return await this.songInfoStorage.set(t)}getStorage(){return W(ze)}}const du=new uu;function mu(e){for(const t of["isRegexDisabled","isCaseInsensitive","isGlobal"])if(t===e)return!0;return!1}const ms=e=>({isGlobal:e.isGlobal,isCaseInsensitive:e.isCaseInsensitive,isRegexDisabled:e.isRegexDisabled}),rr=e=>e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");function ir(e){let t="";return e.isGlobal&&(t+="g"),e.isCaseInsensitive&&(t+="i"),t}function _1(e){const t={};for(const[s,n]of Object.entries(e))!mu(s)||!n||(t[s]=!0);return t}function gu(e,t){for(const[s,n]of Object.entries(e)){const r=s;if(n!==null&&t.flags.isRegexEditedByUser[r])return!0}return!1}function y1(e,t){if(gu(e.replace,t))return!1;const s=ms(e);for(const[n,r]of Object.entries(e.search)){const o=Qe(t,n);if(!or(r,o,s))return!1}return!0}function or(e,t,s){if(e===null)return!0;const n=s.isRegexDisabled?rr(e):e;try{return new RegExp(s.isGlobal?n:`^${n}$`,ir(s)).test(t)}catch{return!1}}function hu(e,t,s,n){if(e===null||t===null)return s;const r=n.isRegexDisabled?rr(e):e;try{const i=new RegExp(n.isGlobal?r:`^${r}$`,ir(n));return s.replace(i,t)}catch{return s}}function bu(e,t){const s=ms(e);for(const n of Object.keys(t)){const r=n;if(!or(e.search[r],t[r],s))return t}for(const n of Object.keys(t)){const r=n;t[r]=hu(e.search[r],e.replace[r],t[r],ms(e))}return t}function fu(e){return{track:Qe(e,"track"),artist:Qe(e,"artist"),album:Qe(e,"album"),albumArtist:Qe(e,"albumArtist")}}function w1(e){return{track:At(e,"track"),artist:At(e,"artist"),album:At(e,"album"),albumArtist:At(e,"albumArtist")}}function $1(e,t){const s=bu(e,fu(t));for(const[n,r]of Object.entries(s)){const i=n;e.search[i]&&typeof e.replace[i]=="string"&&(t.flags.isRegexEditedByUser[i]=!0,t.processed[i]=r)}}function Ye(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Qe(e,t){return e[`get${Ye(t)}`]()??""}function At(e,t){return(e?.noRegex[t]||e?.parsed[t])??""}class vu extends nr{MAX_SCROBBLE_CACHE_SIZE=1e3;async replaceScrobble(t,s){const n=await this.getScrobbleCacheStorageLocking();if(n){for(let r=0;r<n.length;r++)n[r].id===t&&(n[r]={...s,id:t});await this.saveScrobbleCacheToStorageLocking(n)}}async pushScrobble(t){const s=await this.getScrobbleCacheStorageLocking();if(s===null)return await this.saveScrobbleCacheToStorageLocking([{...t,id:1}]),1;const n=(s.at(-1)?.id??0)+1;return s.push({...t,id:n}),await this.saveScrobbleCacheToStorageLocking(s.slice(-this.MAX_SCROBBLE_CACHE_SIZE)),n}async deleteScrobbles(t){const s=await this.getScrobbleCacheStorageLocking();if(!s)return;const n=new Map;for(const r of t)n.set(r,!0);await this.saveScrobbleCacheToStorageLocking(s.filter(r=>n.get(r.id)!==!0))}}class pu extends vu{scrobbleCacheStorage=this.getStorage();init(){this._init(ht(Nt))}async getScrobbleCacheStorage(){return this.scrobbleCacheStorage.get()}async getScrobbleCacheStorageLocking(){return this.scrobbleCacheStorage.getLocking()}async saveScrobbleCacheToStorage(t){return await this.scrobbleCacheStorage.set(t)}async saveScrobbleCacheToStorageLocking(t){return await this.scrobbleCacheStorage.setLocking(t)}getStorage(){return W(Nt)}}const at=new pu,ar={[vc]:!0,[$c]:!0,[jc]:!0,[Ac]:!0,[wc]:!0,[kc]:!0,[yc]:!0,[_c]:!0,[Sc]:!0,[xc]:!0};W(Ss);class lr extends Xt{parsed;processed;noRegex;flags;metadata;connector;controllerTabId;constructor(t,s){super(),this.parsed=t.parsed,this.processed=t.processed,this.noRegex=t.noRegex,this.flags=t.flags,this.metadata=t.metadata,this.connector=t.connector,this.controllerTabId=s}resetData(){be(this.controllerTabId,{type:"resetData",payload:void 0})}resetInfo(){be(this.controllerTabId,{type:"resetInfo",payload:void 0})}}const _u=W(ks),yu=W(Zt);async function wu(e){return be(e,{type:"getChannelDetails",payload:void 0})}async function $u(e,t){const s=(await yu.get())?.[t.id];return!s||!s[e]?null:s[e]}async function ju(e,t){const s=ku(e);let n=t;n||(n=await Su());const r=await Au(n);return s&&!ar[r.mode]?s:r}async function Au(e){try{if(!await J.tabs.get(e))throw new Error("Tab not found");const s=await be(e,{type:"getConnectorDetails",payload:void 0});return{tabId:e,mode:s.mode,permanentMode:s.permanentMode,song:s.song}}catch{return{tabId:e,mode:ds,permanentMode:ds,song:null}}}function ku(e){for(const t of e)if(ar[t.mode])return t;return null}async function Su(){const e={active:!0,lastFocusedWindow:!0},[t]=await J.tabs.query(e);return t?.id??-1}async function xu(){const e=await _u.get()??Tu;return ju(e.activeTabs)}const Tu={activeTabs:[]};function Cu(e){be(e,{type:"setConnectorState",payload:!1})}function Eu(e){be(e,{type:"setConnectorState",payload:!0})}function Ru(e){be(e,{type:"addToBlocklist",payload:void 0})}function Lu(e){be(e,{type:"removeFromBlocklist",payload:void 0})}function Ou(e){be(e,{type:"disableConnectorUntilTabIsClosed",payload:void 0})}const Mu=f("<h1>"),He=f("<p>"),en=f("<h2>");function Pu(){return[(()=>{const e=Mu();return u(e,()=>m("optionsAbout")),e})(),(()=>{const e=He();return u(e,()=>m("aboutExtensionDesc")),e})(),(()=>{const e=He();return x(()=>e.innerHTML=m("aboutChangelog",oo())),e})(),(()=>{const e=en();return u(e,()=>m("versionTitle")),e})(),(()=>{const e=He();return x(()=>e.innerHTML=m("versionText",$s())),e})(),(()=>{const e=en();return u(e,()=>m("contributorsTitle")),e})(),(()=>{const e=He();return x(()=>e.innerHTML=m("contributorsText")),e})(),(()=>{const e=He();return x(()=>e.innerHTML=m("contributorsContribute")),e})()]}const Iu=f("<h1>"),tn=f("<p>"),Du=f('<a href=https://opencollective.com/web-scrobbler/donate target=_blank rel="noopener noreferrer"><span>');function zu(){return[(()=>{const e=Iu();return u(e,()=>m("showSomeLoveTitle")),e})(),(()=>{const e=tn();return u(e,()=>m("showSomeLoveText1")),e})(),(()=>{const e=tn();return u(e,()=>m("showSomeLoveText2")),e})(),(()=>{const e=Du(),t=e.firstChild;return u(e,v(bc,{}),t),u(t,()=>m("donationButtonLabel")),x(()=>$(e,`${h.button} ${h.openCollective}`)),e})()]}const Uu=f("<h1>"),$e=f("<h2>"),oe=f("<p>"),Nu=f("<ol><li></li><li></li><li></li><li>");function Bu(){return[(()=>{const e=Uu();return u(e,()=>m("faqTitle")),e})(),(()=>{const e=$e();return u(e,()=>m("faqQuestion1")),e})(),(()=>{const e=oe();return u(e,()=>m("faqAnswer1a")),e})(),(()=>{const e=oe();return u(e,()=>m("faqAnswer1b")),e})(),(()=>{const e=$e();return u(e,()=>m("faqQuestion2")),e})(),(()=>{const e=oe();return u(e,()=>m("faqAnswer2a")),e})(),(()=>{const e=oe();return u(e,()=>m("faqAnswer2b")),e})(),(()=>{const e=$e();return u(e,()=>m("faqQuestion3")),e})(),(()=>{const e=oe();return u(e,()=>m("faqAnswer3a")),e})(),(()=>{const e=oe();return u(e,()=>m("faqAnswer3b")),e})(),(()=>{const e=$e();return u(e,()=>m("faqQuestion4")),e})(),(()=>{const e=oe();return u(e,()=>m("faqAnswer4a")),e})(),(()=>{const e=oe();return u(e,()=>m("faqAnswer4b")),e})(),(()=>{const e=Nu(),t=e.firstChild,s=t.nextSibling,n=s.nextSibling,r=n.nextSibling;return u(t,()=>m("faqAnswer4b1")),u(s,()=>m("faqAnswer4b2")),u(n,()=>m("faqAnswer4b3")),u(r,()=>m("faqAnswer4b4")),e})(),(()=>{const e=oe();return x(()=>e.innerHTML=m("faqAnswer4c")),e})(),(()=>{const e=$e();return u(e,()=>m("faqQuestion5")),e})(),(()=>{const e=oe();return x(()=>e.innerHTML=m("faqAnswer5")),e})(),(()=>{const e=$e();return u(e,()=>m("faqQuestion6")),e})(),(()=>{const e=oe();return u(e,()=>m("faqAnswer6")),e})(),(()=>{const e=$e();return u(e,()=>m("faqQuestion7")),e})(),(()=>{const e=oe();return u(e,()=>m("faqAnswer7")),e})()]}const Fu="data:image/svg+xml,%3csvg%20width='98'%20height='96'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M48.854%200C21.839%200%200%2022%200%2049.217c0%2021.756%2013.993%2040.172%2033.405%2046.69%202.427.49%203.316-1.059%203.316-2.362%200-1.141-.08-5.052-.08-9.127-13.59%202.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015%204.934.326%207.523%205.052%207.523%205.052%204.367%207.496%2011.404%205.378%2014.235%204.074.404-3.178%201.699-5.378%203.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283%200-5.378%201.94-9.778%205.014-13.2-.485-1.222-2.184-6.275.486-13.038%200%200%204.125-1.304%2013.426%205.052a46.97%2046.97%200%200%201%2012.214-1.63c4.125%200%208.33.571%2012.213%201.63%209.302-6.356%2013.427-5.052%2013.427-5.052%202.67%206.763.97%2011.816.485%2013.038%203.155%203.422%205.015%207.822%205.015%2013.2%200%2018.905-11.404%2023.06-22.324%2024.283%201.78%201.548%203.316%204.481%203.316%209.126%200%206.6-.08%2011.897-.08%2013.526%200%201.304.89%202.853%203.316%202.364%2019.412-6.52%2033.405-24.935%2033.405-46.691C97.707%2022%2075.788%200%2048.854%200z'%20fill='%2324292f'/%3e%3c/svg%3e",qu="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2024.2.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Logo'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%20248%20204'%20width='248'%20height='204'%20style='enable-background:new%200%200%20248%20204;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%231D9BF0;}%20%3c/style%3e%3cg%20id='Logo_1_'%3e%3cpath%20id='white_background'%20class='st0'%20d='M221.95,51.29c0.15,2.17,0.15,4.34,0.15,6.53c0,66.73-50.8,143.69-143.69,143.69v-0.04%20C50.97,201.51,24.1,193.65,1,178.83c3.99,0.48,8,0.72,12.02,0.73c22.74,0.02,44.83-7.61,62.72-21.66%20c-21.61-0.41-40.56-14.5-47.18-35.07c7.57,1.46,15.37,1.16,22.8-0.87C27.8,117.2,10.85,96.5,10.85,72.46c0-0.22,0-0.43,0-0.64%20c7.02,3.91,14.88,6.08,22.92,6.32C11.58,63.31,4.74,33.79,18.14,10.71c25.64,31.55,63.47,50.73,104.08,52.76%20c-4.07-17.54,1.49-35.92,14.61-48.25c20.34-19.12,52.33-18.14,71.45,2.19c11.31-2.23,22.15-6.38,32.07-12.26%20c-3.77,11.69-11.66,21.62-22.2,27.93c10.01-1.18,19.79-3.86,29-7.95C240.37,35.29,231.83,44.14,221.95,51.29z'/%3e%3c/g%3e%3c/svg%3e",Hu=f("<h1>"),Vu=f('<ul><a href=https://github.com/web-scrobbler/web-scrobbler/issues target=_blank rel="noopener noreferrer"><li><img alt=""width=32 height=32><img alt=GitHub width=78 height=32><span></span></li></a><a href=https://twitter.com/web_scrobbler target=_blank rel="noopener noreferrer"><li><img alt=""width=32 height=32><span>Twitter</span><span></span></li></a><a target=_blank rel="noopener noreferrer"><li><span>Privacy</span><span>');function Gu(){return[(()=>{const e=Hu();return u(e,()=>m("contactTitle")),e})(),(()=>{const e=Vu(),t=e.firstChild,s=t.firstChild,n=s.firstChild,r=n.nextSibling,i=r.nextSibling,o=t.nextSibling,a=o.firstChild,l=a.firstChild,d=l.nextSibling,c=d.nextSibling,g=o.nextSibling,S=g.firstChild,j=S.firstChild,E=j.nextSibling;return M(n,"src",Fu),u(i,()=>m("contactGitHubDesc")),M(l,"src",qu),u(c,()=>m("contactTwitterDesc")),u(S,v(nc,{}),j),u(E,()=>m("contactPrivacyPolicyDesc")),x(T=>{const D=`${h.contactList} ${h.optionList}`,B=`${h.contactEntry} ${h.contactGithub}`,U=h.invertImg,N=h.invertImg,F=J.runtime.getURL("img/GitHub_Logo.png"),p=h.desc,y=`${h.contactEntry} ${h.contactTwitter}`,b=h.brandText,C=h.desc,R=m("contactPrivacyPolicyUrl"),I=`${h.contactEntry} ${h.contactPrivacy}`,O=h.brandText,w=h.desc;return D!==T._v$&&$(e,T._v$=D),B!==T._v$2&&$(s,T._v$2=B),U!==T._v$3&&$(n,T._v$3=U),N!==T._v$4&&$(r,T._v$4=N),F!==T._v$5&&M(r,"src",T._v$5=F),p!==T._v$6&&$(i,T._v$6=p),y!==T._v$7&&$(a,T._v$7=y),b!==T._v$8&&$(d,T._v$8=b),C!==T._v$9&&$(c,T._v$9=C),R!==T._v$10&&M(g,"href",T._v$10=R),I!==T._v$11&&$(S,T._v$11=I),O!==T._v$12&&$(j,T._v$12=O),w!==T._v$13&&$(E,T._v$13=w),T},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0,_v$11:void 0,_v$12:void 0,_v$13:void 0}),e})()]}const Wu=f("<div><label><input type=checkbox><span><span>"),Ku=f("<div><span><label><input type=checkbox><span><span>"),Ju=f("<div><button>"),Yu=f("<div role=radiogroup>"),Qu=f("<div><input type=radio><label>"),cr=f("<li>"),Zu=f("<li role=group><div><span></span><div><input type=number></div><span></span></div><input type=range>"),Xu=f("<div><span><div role=radiogroup><label><input type=radio value=unchecked></label><label><input type=radio value=indeterminate></label><label><input type=radio value=checked>");function Rs(e){return(()=>{const t=Wu(),s=t.firstChild,n=s.firstChild,r=n.nextSibling,i=r.firstChild;return u(s,()=>e.label,n),n.$$input=o=>{e.onInput(o)},x(o=>{const a=h.checkboxOption,l=e.title,d=h.bigLabel,c=h.checkboxWrapper,g=h.checkbox;return a!==o._v$&&$(t,o._v$=a),l!==o._v$2&&M(s,"title",o._v$2=l),d!==o._v$3&&$(s,o._v$3=d),c!==o._v$4&&$(r,o._v$4=c),g!==o._v$5&&$(i,o._v$5=g),o},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),x(()=>n.checked=e.isChecked()),t})()}function sn(e,t,s){e.preventDefault();const n=document.getElementById(t);n.checked=!n.checked,s({...e,currentTarget:n})}function ed(e){return(()=>{const t=Ku(),s=t.firstChild,n=s.firstChild,r=n.firstChild,i=r.nextSibling,o=i.firstChild;return u(s,()=>e.label,n),n.$$keyup=a=>{a.key===" "&&sn(a,e.id,e.onInput)},n.$$click=a=>{sn(a,e.id,e.onInput)},r.$$input=a=>{e.onInput(a)},x(a=>{const l=`${h.checkboxOption} ${h.summaryCheckbox}`,d=e.title,c=h.summarySpan,g=m("menuEnableConnector",e.label),S=e.id,j=h.checkboxWrapper,E=h.checkbox;return l!==a._v$6&&$(t,a._v$6=l),d!==a._v$7&&M(s,"title",a._v$7=d),c!==a._v$8&&$(s,a._v$8=c),g!==a._v$9&&M(n,"title",a._v$9=g),S!==a._v$10&&M(r,"id",a._v$10=S),j!==a._v$11&&$(i,a._v$11=j),E!==a._v$12&&$(o,a._v$12=E),a},{_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0,_v$11:void 0,_v$12:void 0}),x(()=>r.checked=e.isChecked()),t})()}function Ls(e){return(()=>{const t=Yu();return u(t,v(re,{get each(){return e.buttons},children:s=>(()=>{const n=Qu(),r=n.firstChild,i=r.nextSibling;return Sn(r,"change",e.onChange),u(i,()=>s.label),x(o=>{const a=h.radioButton,l=`${e.name}-${s.value}`,d=e.name,c=`${e.name}-${s.value}`,g=e.name,S=s.title,j=h.radioLabel;return a!==o._v$17&&$(n,o._v$17=a),l!==o._v$18&&M(r,"id",o._v$18=l),d!==o._v$19&&M(r,"name",o._v$19=d),c!==o._v$20&&M(i,"for",o._v$20=c),g!==o._v$21&&M(i,"data-name",o._v$21=g),S!==o._v$22&&M(i,"title",o._v$22=S),j!==o._v$23&&$(i,o._v$23=j),o},{_v$17:void 0,_v$18:void 0,_v$19:void 0,_v$20:void 0,_v$21:void 0,_v$22:void 0,_v$23:void 0}),x(()=>r.value=s.value),x(()=>r.checked=e.value()===s.value),n})()}),null),u(t,v(Y,{get when(){return e.reset},get children(){const s=Ju(),n=s.firstChild;return n.$$click=r=>{e.reset?.(r)},u(n,v(cc,{}),null),u(n,()=>m("buttonReset"),null),x(r=>{const i=h.radioButton,o=`${h.button} ${h.shiftLeft}`;return i!==r._v$13&&$(s,r._v$13=i),o!==r._v$14&&$(n,r._v$14=o),r},{_v$13:void 0,_v$14:void 0}),s}}),null),x(s=>{const n=`${h.radioButtons} ${h.optionList}`,r=e.labelledby;return n!==s._v$15&&$(t,s._v$15=n),r!==s._v$16&&M(t,"aria-labelledby",s._v$16=r),s},{_v$15:void 0,_v$16:void 0}),t})()}function kt(e){return(()=>{const t=cr();return u(t,v(Rs,{get title(){return m(e.i18ntitle)},get label(){return m(e.i18nlabel)},isChecked:()=>e.options()?.[e.connector]?.[e.key],onInput:s=>{const n=e.connector,r=e.key,i=e.connectorOptions;e.setOptions.mutate(o=>{if(!o)return o;const a={...o,[n]:{...o[n],[r]:s.currentTarget.checked}};return i.set(a),a})}})),t})()}function Le(e){return(()=>{const t=cr();return u(t,v(Rs,{get title(){return m(e.i18ntitle)},get label(){return m(e.i18nlabel)},isChecked:()=>e.options()?.[e.key],onInput:s=>{const n=e.key,r=e.globalOptions;e.setOptions.mutate(i=>{if(!i)return i;const o={...i,[n]:s.currentTarget.checked};return r.set(o),o})}})),t})()}function td(e){return(()=>{const t=Zu(),s=t.firstChild,n=s.firstChild,r=n.nextSibling,i=r.firstChild,o=r.nextSibling,a=s.nextSibling;return u(n,()=>m(e.prefixi18n)),i.addEventListener("change",l=>{const d=e.key,c=e.globalOptions,g=e.min,S=e.max;e.setOptions.mutate(j=>{if(!j)return j;const E={...j,[d]:zc(g,parseInt(l.currentTarget.value),S)};return c.set(E),E})}),u(o,()=>m(e.suffixi18n)),a.addEventListener("change",l=>{const d=e.key,c=e.globalOptions;e.setOptions.mutate(g=>{if(!g)return g;const S={...g,[d]:parseInt(l.currentTarget.value)};return c.set(S),S})}),a.$$input=l=>{const d=e.key;e.setOptions.mutate(c=>c&&{...c,[d]:parseInt(l.currentTarget.value)})},x(l=>{const d=h.rangeInput,c=`${m(e.prefixi18n)} ${e.options()?.[e.key]}% ${m(e.suffixi18n)}`,g=h.rangeInputLabel,S=`${h.inputWrapper} ${h[e.numberType]}`,j=e.min,E=e.max,T=h.rangeNumberInput,D=`${m(e.prefixi18n)} ${e.options()?.[e.key]}% ${m(e.suffixi18n)}`,B=h.rangeInputLabel,U=e.min,N=e.max,F=h.rangeSelection,p=`${m(e.prefixi18n)} ${e.options()?.[e.key]}% ${m(e.suffixi18n)}`;return d!==l._v$24&&$(t,l._v$24=d),c!==l._v$25&&M(t,"aria-label",l._v$25=c),g!==l._v$26&&$(n,l._v$26=g),S!==l._v$27&&$(r,l._v$27=S),j!==l._v$28&&M(i,"min",l._v$28=j),E!==l._v$29&&M(i,"max",l._v$29=E),T!==l._v$30&&$(i,l._v$30=T),D!==l._v$31&&M(i,"title",l._v$31=D),B!==l._v$32&&$(o,l._v$32=B),U!==l._v$33&&M(a,"min",l._v$33=U),N!==l._v$34&&M(a,"max",l._v$34=N),F!==l._v$35&&$(a,l._v$35=F),p!==l._v$36&&M(a,"title",l._v$36=p),l},{_v$24:void 0,_v$25:void 0,_v$26:void 0,_v$27:void 0,_v$28:void 0,_v$29:void 0,_v$30:void 0,_v$31:void 0,_v$32:void 0,_v$33:void 0,_v$34:void 0,_v$35:void 0,_v$36:void 0}),x(()=>i.value=e.options()?.[e.key]),x(()=>a.value=e.options()?.[e.key]),t})()}function sd(e){return(()=>{const t=Xu(),s=t.firstChild,n=s.firstChild,r=n.firstChild,i=r.firstChild,o=r.nextSibling,a=o.firstChild,l=o.nextSibling,d=l.firstChild;return u(s,()=>e.label,n),i.$$input=()=>e.onInput(0),u(r,v(Yl,{}),null),a.$$input=()=>e.onInput(2),u(o,v(sc,{}),null),d.$$input=()=>e.onInput(1),u(l,v(Ln,{}),null),x(c=>{const g=h.tripleCheckboxOption,S=e.title,j=h.tripleCheckboxWrapper,E=e.label,T=`${h.tripleCheckboxLabel} ${h.unchecked}${e.state()===0?` ${h.activeBox}`:""}`,D=m("optionsDisabled"),B=h.tripleCheckbox,U=`${e.id}-${e.label}`,N=`${h.tripleCheckboxLabel} ${h.indeterminate}${e.state()===2?` ${h.activeBox}`:""}`,F=m("optionsIndeterminate"),p=h.tripleCheckbox,y=`${e.id}-${e.label}`,b=`${h.tripleCheckboxLabel} ${h.checked}${e.state()===1?` ${h.activeBox}`:""}`,C=m("optionsEnabled"),R=h.tripleCheckbox,I=`${e.id}-${e.label}`;return g!==c._v$37&&$(t,c._v$37=g),S!==c._v$38&&M(s,"title",c._v$38=S),j!==c._v$39&&$(n,c._v$39=j),E!==c._v$40&&M(n,"aria-label",c._v$40=E),T!==c._v$41&&$(r,c._v$41=T),D!==c._v$42&&M(r,"title",c._v$42=D),B!==c._v$43&&$(i,c._v$43=B),U!==c._v$44&&M(i,"name",c._v$44=U),N!==c._v$45&&$(o,c._v$45=N),F!==c._v$46&&M(o,"title",c._v$46=F),p!==c._v$47&&$(a,c._v$47=p),y!==c._v$48&&M(a,"name",c._v$48=y),b!==c._v$49&&$(l,c._v$49=b),C!==c._v$50&&M(l,"title",c._v$50=C),R!==c._v$51&&$(d,c._v$51=R),I!==c._v$52&&M(d,"name",c._v$52=I),c},{_v$37:void 0,_v$38:void 0,_v$39:void 0,_v$40:void 0,_v$41:void 0,_v$42:void 0,_v$43:void 0,_v$44:void 0,_v$45:void 0,_v$46:void 0,_v$47:void 0,_v$48:void 0,_v$49:void 0,_v$50:void 0,_v$51:void 0,_v$52:void 0}),x(()=>i.checked=e.state()===0),x(()=>a.checked=e.state()===2),x(()=>d.checked=e.state()===1),t})()}function Ve(e){return v(sd,{get title(){return e.title},get label(){return e.label},get id(){return e.connector.id},state:()=>{const t=e.overrideOptions()?.[e.connector.id];return!t||!(e.option in t)?2:t[e.option]?1:0},onInput:t=>{const s=e.connector,n=e.option,r=e.connectorOverrideOptions;e.setOverrideOptions.mutate(i=>{const o={...i??{}};return t===2?delete o[s.id][n]:o[s.id]={...o[s.id],[n]:t===1},r.set(o),o})}})}ge(["input","click","keyup"]);const nd=f("<h2>"),rd=f("<ul>"),id=f("<div><label><select>"),od=f("<option>"),Ge=W(we);function ad(e){return[(()=>{const t=nd();return u(t,()=>m("optionsGeneral")),t})(),(()=>{const t=rd();return u(t,v(ud,{}),null),u(t,v(Y,{get when(){return J.notifications},get children(){return[v(Le,{get options(){return e.options},get setOptions(){return e.setOptions},globalOptions:Ge,i18ntitle:"optionUseNotificationsTitle",i18nlabel:"optionUseNotifications",key:bt}),v(Le,{get options(){return e.options},get setOptions(){return e.setOptions},globalOptions:Ge,i18ntitle:"optionUnrecognizedNotificationsTitle",i18nlabel:"optionUnrecognizedNotifications",key:ft})]}}),null),u(t,v(Le,{get options(){return e.options},get setOptions(){return e.setOptions},globalOptions:Ge,i18ntitle:"optionUseInfoboxTitle",i18nlabel:"optionUseInfobox",key:vt}),null),u(t,v(Le,{get options(){return e.options},get setOptions(){return e.setOptions},globalOptions:Ge,i18ntitle:"optionScrobblePodcastsTitle",i18nlabel:"optionScrobblePodcasts",key:pt}),null),u(t,v(Le,{get options(){return e.options},get setOptions(){return e.setOptions},globalOptions:Ge,i18ntitle:"optionAutoToggleLoveTitle",i18nlabel:"optionAutoToggleLove",key:_t}),null),x(()=>$(t,h.optionList)),t})()]}const[ld,cd]=X(Ec);function ud(){return(()=>{const e=id(),t=e.firstChild,s=t.firstChild;return u(t,()=>m("optionTheme"),s),s.addEventListener("change",n=>{const i=n.currentTarget.value;if(!Js.includes(i)){le(`value ${n.currentTarget.value} not in themelist ${Js.join(",")}`,"error");return}cd.mutate(()=>i),zn(i)}),u(s,v(re,{each:Nn,children:n=>(()=>{const r=od();return r.value=`theme-${n}`,u(r,()=>m(`optionTheme${Pc(n)}`)),r})()})),x(n=>{const r=h.selectOption,i=m("optionThemeTitle"),o=h.bigLabel;return r!==n._v$&&$(e,n._v$=r),i!==n._v$2&&M(t,"title",n._v$2=i),o!==n._v$3&&$(t,n._v$3=o),n},{_v$:void 0,_v$2:void 0,_v$3:void 0}),x(()=>s.value=ld()),e})()}const dd=f("<h2>YouTube"),md=f("<ul><li>"),Me=W(Jt),[St,xt]=X(Me.get.bind(Me));function gd(){return[dd(),(()=>{const e=md(),t=e.firstChild;return u(e,v(kt,{options:St,setOptions:xt,connectorOptions:Me,i18ntitle:"optionYtMusicRecognisedOnlyTitle",i18nlabel:"optionYtMusicRecognisedOnly",connector:"YouTube",key:"scrobbleMusicRecognisedOnly"}),t),u(e,v(kt,{options:St,setOptions:xt,connectorOptions:Me,i18ntitle:"optionYtGetTrackInfoFromYtMusicTitle",i18nlabel:"optionYtGetTrackInfoFromYtMusic",connector:"YouTube",key:"enableGetTrackInfoFromYtMusic"}),t),u(e,v(kt,{options:St,setOptions:xt,connectorOptions:Me,i18ntitle:"optionYtMusicOnlyTitle",i18nlabel:"optionYtMusicOnly",connector:"YouTube",key:"scrobbleMusicOnly"}),t),u(e,v(kt,{options:St,setOptions:xt,connectorOptions:Me,i18ntitle:"optionYtEntertainmentOnlyTitle",i18nlabel:"optionYtEntertainmentOnly",connector:"YouTube",key:"scrobbleEntertainmentOnly"}),t),u(t,()=>m("optionYtDesc")),x(s=>{const n=h.optionList,r=h.muted;return n!==s._v$&&$(e,s._v$=n),r!==s._v$2&&$(t,s._v$2=r),s},{_v$:void 0,_v$2:void 0}),e})()]}const hd=f("<h2 id=header-scrobble-behavior>"),bd=W(we);function fd(e){return[(()=>{const t=hd();return u(t,()=>m("optionsScrobbleBehavior")),t})(),v(Ls,{get buttons(){return[{label:m("optionForceRecognize"),title:m("optionForceRecognizeTitle"),value:se},{label:m("optionScrobbleRecognizedTracks"),title:m("optionScrobbleRecognizedTracksTitle"),value:ie},{label:m("optionScrobbleEditedTracksOnly"),title:m("optionScrobbleEditedTracksOnlyTitle"),value:ne}]},name:"scrobbleBehavior",value:()=>e.options()?.[se]?se:e.options()?.[ne]?ne:ie,onChange:t=>{const s=t.currentTarget.value;e.setOptions.mutate(n=>{if(!n)return n;const r={...n,[se]:s===se,[ne]:s===ne,[ie]:s===ie};return bd.set(r),r})},labelledby:"header-scrobble-behavior"})]}const vd=f("<h1>"),nn=W(we),[rn,on]=X(nn.get.bind(nn));function pd(){return[(()=>{const e=vd();return u(e,()=>m("optionsOptions")),e})(),v(ad,{options:rn,setOptions:on}),v(gd,{}),v(fd,{options:rn,setOptions:on})]}class yt{storage;userApiUrl=null;userToken=null;arrayProperties=null;constructor(){this.storage=this.initStorage(),this.initUserProps(),Lc(Rc({type:"updateScrobblerProperties",fn:()=>{this.initUserProps()}}))}async getUserProperties(){const t=await this.storage.get();return!t||!("properties"in t)||!t.properties?{}:t.properties}async applyUserProperties(t){this.applyProps(t,this.getUserDefinedProperties());let s=await this.storage.get();if(s||(s={}),!s){le("No data in storage","error");return}if((!("properties"in s)||s.properties===void 0)&&(s.properties={}),!("properties"in s)||s.properties===void 0){le("No properties in storage","error");return}for(const n in t){const r=t[n];r?s.properties[n]=r:n in s.properties&&delete s.properties[n]}await this.storage.set(s)}getUserDefinedProperties(){return[]}getUserDefinedArrayProperties(){return[]}async getArrayProperties(){const t=await this.storage.get();return!t||!("arrayProperties"in t)||!t.arrayProperties?[]:t.arrayProperties}async addUserArrayProperties(t){let s=await this.storage.get();if((!s||!("arrayProperties"in s)||!s.arrayProperties)&&(s={arrayProperties:[]}),!s||!("arrayProperties"in s)||!s.arrayProperties){le("No data in storage","error");return}s.arrayProperties.push(t),this.applyArrayProps(s.arrayProperties,this.getUserDefinedArrayProperties()),await this.storage.set(s)}async applyUserArrayProperties(t){let s=await this.storage.get();if((!s||!("arrayProperties"in s)||!s.arrayProperties)&&(s={arrayProperties:[]}),!s||!("arrayProperties"in s)||!s.arrayProperties){le("No data in storage","error");return}s.arrayProperties=t,this.applyArrayProps(s.arrayProperties,this.getUserDefinedArrayProperties()),await this.storage.set(s)}async signOut(){const t=await this.storage.get();if(!t){le("No data in storage","error");return}"sessionID"in t&&delete t.sessionID,"sessionName"in t&&delete t.sessionName,"arrayProperties"in t&&delete t.arrayProperties,await this.storage.set(t)}async getProfileUrl(){const{sessionName:t}=await this.getSession();return`${this.getBaseProfileUrl()}${t??"undefined"}`}canLoveSong(){return!1}canLoadSongInfo(){return!1}applyFilter(t){return t}get REQUEST_TIMEOUT(){return 15e3}debugLog(t,s="log"){const n=`${this.getLabel()}: ${t}`;le(n,s)}initStorage(){const t=["token","sessionID","sessionName"];t.push(...this.getUserDefinedProperties());const s=Jn(this.getStorageName());return s.debugLog(t),s}async initUserProps(){const t=await this.storage.get();if(t&&"properties"in t)for(const s in t.properties)s==="userApiUrl"&&"userApiUrl"in t.properties&&(this.userApiUrl=t.properties.userApiUrl),s==="userToken"&&"userToken"in t.properties&&(this.userToken=t.properties.userToken);t&&"arrayProperties"in t&&(this.arrayProperties=t.arrayProperties??[])}applyProps(t,s){for(const n in t){if(!s.includes(n))throw new Error(`Unknown property: ${n}`);const r=t[n];if(r===void 0)throw new Error(`Property is not set: ${n}`);r&&n in this?this[n]=t[n]:n in this&&delete this[n]}}applyArrayProps(t,s){if(!t)throw new Error("No props passed to applyArrayProps()");if(t.length===0){this.arrayProperties=[];return}for(const n of t)for(const[r,i]of Object.entries(n)){if(!s.includes(r))throw new Error(`Unknown property: ${r}`);if(i===void 0)throw new Error(`Property is not set: ${r}`)}this.arrayProperties=t}}class ur extends yt{isLocalOnly=!1;async getAuthUrl(){const t={method:"auth.gettoken"};let s=null,n=await this.storage?.get();try{s=(await this.sendRequest({method:"GET"},t,!1)).token}catch{throw this.debugLog("Error acquiring a token","warn"),new Error("Error acquiring a token")}return n||(n={token:s}),n.token=s,"sessionID"in n&&delete n.sessionID,"sessionName"in n&&delete n.sessionName,await this.storage.set(n),`${this.getBaseAuthUrl()}?api_key=${this.getApiKey()}&token=${s||""}`}async getSession(){const t=await this.storage.get();if(!t)throw new Error(L.ERROR_AUTH);if(!("token"in t)){if(!("sessionID"in t))throw new Error(L.ERROR_AUTH);return{sessionID:t.sessionID??"undefined",sessionName:t.sessionName}}const s=t.token||null;if(s!==null)try{const n=await this.tradeTokenForSession(s);return delete t.token,t.sessionID=n.sessionID,t.sessionName=n.sessionName,await this.storage.set(t),n}catch{throw this.debugLog("Failed to trade token for session","warn"),await this.signOut(),new Error(L.ERROR_AUTH)}return{sessionID:t.sessionID,sessionName:t.sessionName}}async isReadyForGrantAccess(){const t=await this.storage.get();return!t||!("token"in t)?!1:!!t.token}async sendNowPlaying(t){const{sessionID:s}=await this.getSession(),n={method:"track.updatenowplaying",track:t.getTrack(),artist:t.getArtist(),sk:s};t.getAlbum()&&(n.album=t.getAlbum()),t.getAlbumArtist()&&(n.albumArtist=t.getAlbumArtist()),t.getDuration()&&(n.duration=`${t.getDuration()??""}`);const r=await this.sendRequest({method:"POST"},n);return this.processResponse(r)}async sendPaused(){return Promise.resolve(L.RESULT_OK)}async sendResumedPlaying(){return Promise.resolve(L.RESULT_OK)}async scrobble(t){const{sessionID:s}=await this.getSession(),n={method:"track.scrobble",sk:s};for(const[o,a]of t.slice(0,50).entries())n[`timestamp[${o}]`]=a.metadata.startTimestamp.toString(),n[`track[${o}]`]=a.getTrack(),n[`artist[${o}]`]=a.getArtist(),a.getAlbum()&&(n[`album[${o}]`]=a.getAlbum()),a.getAlbumArtist()&&(n[`albumArtist[${o}]`]=a.getAlbumArtist());const r=await this.sendRequest({method:"POST"},n),i=this.processResponse(r);if(i===L.RESULT_OK){const o=r.scrobbles;if(o){const a=o["@attr"].ignored;if(Number(a)===0)return new Array(Math.min(t.length,50)).fill(L.RESULT_OK);if(!Array.isArray(o.scrobble))return new Array(Math.min(t.length,50)).fill(L.RESULT_IGNORE);const l={};for(const[c,g]of t.entries())l[g.metadata.startTimestamp.toString()]=c;const d=new Array(Math.min(t.length,50));for(const c of o.scrobble)d[l[c.timestamp]]=c.ignoredMessage.code==="0"?L.RESULT_OK:L.RESULT_IGNORE}else return new Array(Math.min(t.length,50)).fill(L.ERROR_OTHER)}return new Array(Math.min(t.length,50)).fill(i)}async toggleLove(t,s){const{sessionID:n}=await this.getSession(),r={method:s?"track.love":"track.unlove",track:t.getTrack(),artist:t.getArtist(),sk:n},i=await this.sendRequest({method:"POST"},r);return this.processResponse(i)}canLoveSong(){return!0}async sendRequest(t,s,n=!0){const r=this.makeRequestUrl(s,n),i=fetch(r,t),o=this.REQUEST_TIMEOUT;let a=null,l=null;try{a=await Se(o,i),l=await a.json()}catch{throw new Error(L.ERROR_OTHER)}const d=JSON.stringify(l,null,2),c=_d(l,d);if(!a.ok)throw this.debugLog(`${s.method} response:
${c}`,"error"),new Error(L.ERROR_OTHER);return this.debugLog(`${s.method} response:
${c}`),l}async tradeTokenForSession(t){const s={method:"auth.getsession",token:t},n=await this.sendRequest({method:"GET"},s);if(this.processResponse(n)!==L.RESULT_OK)throw new Error(L.ERROR_AUTH);const i=n.session.name;return{sessionID:n.session.key,sessionName:i}}makeRequestUrl(t,s){t.api_key=this.getApiKey(),t.format="json",s&&(t.api_sig=this.generateSign(t));const n=En(t);return`${this.getApiUrl()}?${n}`}generateSign(t){const s=Object.keys(t).sort();let n="";for(const r of s)["format","callback"].includes(r)||(n+=`${r}${t[r]||""}`);return sr(n+this.getApiSecret())}processResponse(t){return t.error?L.ERROR_OTHER:L.RESULT_OK}}function _d(e,t){let s=t;const n=[e.token],r=e.session;r&&(n.push(r.name),n.push(r.key));for(const i of n)typeof i=="string"?s=Ys(i,s):typeof i=="number"&&(s=Ys(i.toString(),s));return s}class yd extends ur{getApiUrl(){return"https://ws.audioscrobbler.com/2.0/"}getApiKey(){return"d9bb1870d3269646f740544d9def2c95"}getApiSecret(){return"2160733a567d4a1a69a73fad54c564b2"}getBaseAuthUrl(){return"https://www.last.fm/api/auth/"}getBaseProfileUrl(){return"https://last.fm/user/"}getId(){return"lastfm"}getLabel(){return"Last.fm"}getStatusUrl(){return"http://status.last.fm/"}getStorageName(){return"LastFM"}async getSongInfo(t){const s={track:t.getTrack(),artist:t.getArtist(),method:"track.getinfo"};try{const{sessionName:o}=await this.getSession();s.username=o}catch{}t.getAlbum()&&(s.album=t.getAlbum());const n=await this.sendRequest({method:"GET"},s,!1);if(this.processResponse(n)!==L.RESULT_OK)throw new Error("Unable to load song info");const i=this.parseSongInfo(n);return this.canLoveSong()&&i&&be(t.controllerTabId,{type:"updateLove",payload:{isLoved:i.userloved||!1}}),i}canLoadSongInfo(){return!0}parseSongInfo(t){const s={},n=t.track,r=t.track.album,i=t.track.artist,o=n.userloved;if(o?s.userloved=o==="1":s.userloved=void 0,s.artist=i.name,s.artistUrl=i.url,s.track=n.name,s.trackUrl=n.url,s.duration=parseInt(n.duration)/1e3||null,r&&(s.album=r.title,s.albumUrl=r.url,s.albumMbId=r.mbid,Array.isArray(r.image))){const a=r.image.reduce((d,c)=>(d[c.size]=c["#text"],d),{}),l=["extralarge","large","medium"];for(const d of l){const c=a[d];if(c){s.trackArtUrl=c;break}}}return s.userPlayCount=parseInt(n.userplaycount)||0,s}applyFilter(t){if(t.getAlbumArtist()){const s=t.getAlbumArtist()||"";t.parsed.albumArtist=s.includes("Various Artists")?"Various Artists":s}return t}}class wd extends ur{getApiUrl(){return"https://libre.fm/2.0/"}getApiKey(){return"r8i1y91hz71tcx7vyrp9hk1alhqp1898"}getApiSecret(){return"8187db5vg234yq6tm7o62q8mtl1niala"}getBaseAuthUrl(){return"https://www.libre.fm/api/auth/"}getBaseProfileUrl(){return"https://libre.fm/user/"}getLabel(){return"Libre.fm"}getStatusUrl(){return""}getStorageName(){return"LibreFM"}async getSongInfo(){return Promise.resolve({})}sendRequest(t,s,n){return t.method?.toLowerCase()==="post"&&(t.headers={"Content-Type":"application/x-www-form-urlencoded"},t.body=En(s)),super.sendRequest(t,s,n)}}const $d="https://listenbrainz.org/settings/",gs="https://api.listenbrainz.org/1",jd=`${gs}/submit-listens`;class Ad extends yt{isLocalOnly=!1;async getSongInfo(){return Promise.resolve({})}async getAuthUrl(){const t=await this.storage.get();let s;return t&&"properties"in t&&(s=t.properties),s?await this.storage.set({isAuthStarted:!0,properties:s}):await this.storage.set({isAuthStarted:!0}),"https://listenbrainz.org/login/musicbrainz?next=%2Fsettings%2F"}getBaseProfileUrl(){return"https://listenbrainz.org/user/"}getLabel(){return"ListenBrainz"}async getProfileUrl(){return this.userToken?"":await super.getProfileUrl()}getStatusUrl(){return this.userToken?"":"https://listenbrainz.org/current-status"}getStorageName(){return"ListenBrainz"}getUserDefinedProperties(){return["userApiUrl","userToken"]}async signOut(){(this.userApiUrl||this.userToken)&&await this.applyUserProperties({userApiUrl:null,userToken:null}),await super.signOut()}async getSession(){if(this.userToken)return{sessionID:this.userToken};const t=await this.storage.get();if(!t)throw this.debugLog("no data","error"),await this.signOut(),new Error(L.ERROR_AUTH);if("isAuthStarted"in t&&t.isAuthStarted)try{const s=await this.requestSession();return t.sessionID=s.sessionID,t.sessionName=s.sessionName,delete t.isAuthStarted,await this.storage.set(t),s}catch{throw this.debugLog("Failed to get session","warn"),await this.signOut(),new Error(L.ERROR_AUTH)}else if(!("sessionID"in t)||!t.sessionID)throw new Error(L.ERROR_AUTH);return{sessionID:t.sessionID,sessionName:t.sessionName}}async isReadyForGrantAccess(){if(this.userToken)return!1;const t=await this.storage.get();return!t||!("isAuthStarted"in t)?!1:t.isAuthStarted??!1}async sendNowPlaying(t){const{sessionID:s}=await this.getSession(),r={listen_type:"playing_now",payload:[{track_metadata:this.makeTrackMetadata(t)}]};return this.sendScrobbleRequest(r,s)}async sendPaused(){return Promise.resolve(L.RESULT_OK)}async sendResumedPlaying(){return Promise.resolve(L.RESULT_OK)}async scrobble(t,s){const{sessionID:n}=await this.getSession(),r={listen_type:s?"single":"import",payload:t.slice(0,50).map(o=>({listened_at:o.metadata.startTimestamp,track_metadata:this.makeTrackMetadata(o)}))},i=await this.sendScrobbleRequest(r,n);return new Array(Math.min(t.length,50)).fill(i)}async toggleLove(t,s){const n=t.getTrack(),r=t.getArtist();if(typeof n!="string"||typeof r!="string")throw new Error(`Invalid track ${JSON.stringify({artist:r,track:n})}`);const i=new URLSearchParams({recording_name:n,artist_name:r});let o={};try{o=await this.listenBrainzApi("GET",`${gs}/metadata/lookup?${i.toString()}`,null,null)}catch{}if(this.debugLog(`lookup result: ${JSON.stringify(o,null,2)}`),!o.recording_mbid)return this.debugLog(`Could not lookup metadata for song: ${t.toString()}`),{};const{sessionID:a}=await this.getSession(),l={recording_mbid:o.recording_mbid,score:s?1:0},d=await this.listenBrainzApi("POST",`${gs}/feedback/recording-feedback`,l,a);return this.processResult(d)}canLoveSong(){return!0}async listenBrainzApi(t,s,n,r){const i={method:t,headers:{"Content-Type":"application/json; charset=UTF-8"}};n&&(i.body=JSON.stringify(n)),r&&i.headers&&(i.headers.Authorization=`Token ${r}`);const o=fetch(s,i),a=this.REQUEST_TIMEOUT;let l=null,d=null;try{d=await Se(a,o),l=await d.json()}catch{throw this.debugLog("Error while sending request","error"),new Error(L.ERROR_OTHER)}switch(d.status){case 400:throw this.debugLog("Invalid JSON sent","error"),new Error(L.ERROR_AUTH);case 401:throw this.debugLog("Invalid Authorization sent","error"),new Error(L.ERROR_AUTH)}return this.debugLog(JSON.stringify(l,null,2)),l}async sendScrobbleRequest(t,s){const n=await this.listenBrainzApi("POST",this.userApiUrl||jd,t,s);return this.processResult(n)}async requestSession(){let t=null;try{t=await this.fetchSession($d)}catch{this.debugLog("request session timeout","warn")}if(t){const s=Fn(t.sessionID);return this.debugLog(`Session ID: ${s}`),t}throw new Error(L.ERROR_AUTH)}async fetchSession(t){this.debugLog(`Use ${t}`);const s=Ic()?Dc(t):it({type:"sendListenBrainzRequest",payload:{url:t}}),n=this.REQUEST_TIMEOUT,r=await Se(n,s);if(r!==null){let i=null;const o=r.match(/<script id="global-react-props" type="application\/json">(.*?)<\/script>/)?.[1];o&&(i=JSON.parse(o));const a=i?.current_user.name,l=i?.current_user.auth_token;if(l&&a)return{sessionID:l,sessionName:a}}return null}processResult(t){return t.status!=="ok"?L.ERROR_OTHER:L.RESULT_OK}makeTrackMetadata(t){const s={artist_name:t.getArtist()??"",track_name:t.getTrack()??"",additional_info:{submission_client:"Web Scrobbler",submission_client_version:$s(),music_service_name:t.metadata.label}},n=t.getAlbum();n&&(s.release_name=n);const r=t.getOriginUrl();r&&(s.additional_info.origin_url=r);const i=t.getAlbumArtist();i&&(s.additional_info.release_artist_name=i),r&&t.metadata.label==="Spotify"&&(s.additional_info.spotify_id=r);const o=t.getDuration();return o&&(s.additional_info.duration=o),s}}class kd extends yt{isLocalOnly=!0;getStorageName(){return"Maloja"}getLabel(){return"Maloja"}getStatusUrl(){return""}getUserDefinedProperties(){return["userApiUrl","userToken"]}async getProfileUrl(){return Promise.resolve("")}async getAuthUrl(){return Promise.resolve("")}getBaseProfileUrl(){return""}getSongInfo(){return Promise.resolve({})}toggleLove(){return Promise.resolve(L.ERROR_OTHER)}async getSession(){if(!this.userToken)throw new Error(L.ERROR_AUTH);return Promise.resolve({sessionID:this.userToken})}isReadyForGrantAccess(){return Promise.resolve(!1)}sendNowPlaying(){return Promise.resolve(L.RESULT_OK)}async sendPaused(){return Promise.resolve(L.RESULT_OK)}async sendResumedPlaying(){return Promise.resolve(L.RESULT_OK)}async scrobble(t){const s=[];for(const n of t.slice(0,50)){const r=this.makeTrackMetadata(n);s.push(this.sendRequest(r,this.userToken))}return Promise.all(s)}async sendRequest(t,s){t.key=s;const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},r=fetch(this.userApiUrl,n),i=this.REQUEST_TIMEOUT;let o=null;try{if(o=await Se(i,r),o.status!==200)return L.ERROR_OTHER}catch{return this.debugLog("Error while sending request","error"),L.ERROR_OTHER}return L.RESULT_OK}makeTrackMetadata(t){const s={artist:t.getArtist()??"",title:t.getTrack()??"",time:t.metadata.startTimestamp},n=t.getAlbum();n&&(s.album=n);const r=t.getAlbumArtist();return r&&(s.albumartists=[r]),s}}class Sd extends yt{isLocalOnly=!0;getBaseProfileUrl(){return""}getLabel(){return"Webhook"}getStatusUrl(){return""}getStorageName(){return"Webhook"}getSession(){return!this.arrayProperties||this.arrayProperties.length===0?Promise.reject(new Error("")):Promise.resolve({sessionID:"webhook"})}getAuthUrl(){return Promise.resolve("")}isReadyForGrantAccess(){return Promise.resolve(!1)}async getProfileUrl(){return Promise.resolve("")}getUserDefinedArrayProperties(){return["applicationName","userApiUrl"]}async getSongInfo(){return Promise.resolve({})}async sendRequest(t){if(!this.arrayProperties||this.arrayProperties.length===0)return L.ERROR_AUTH;this.debugLog(`Webhook - sendRequest: ${JSON.stringify(t,null,2)}`);const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},n=[];for(const i of this.arrayProperties)n.push(fetch(i.userApiUrl,s));const r=this.REQUEST_TIMEOUT;try{const i=await Se(r,Promise.all(n));for(const o of i)if(o.status!==200)return this.debugLog(`Error in ${o.url}.`,"error"),L.ERROR_OTHER}catch{return this.debugLog("Error while sending request","error"),L.ERROR_OTHER}return L.RESULT_OK}async sendNowPlaying(t){return this.sendRequest({eventName:"nowplaying",time:Date.now(),data:{song:t}})}async sendPaused(t){return this.sendRequest({eventName:"paused",time:Date.now(),data:{song:t}})}async sendResumedPlaying(t){return this.sendRequest({eventName:"resumedplaying",time:Date.now(),data:{song:t}})}async scrobble(t,s){const n=await this.sendRequest({eventName:"scrobble",time:Date.now(),data:{song:t[0],songs:t,currentlyPlaying:s}});return new Array(t.length).fill(n)}toggleLove(t,s){return this.sendRequest({eventName:"loved",time:Date.now(),data:{song:t,isLoved:s}})}}class xd extends yt{isLocalOnly=!0;getStorageName(){return"Pleroma"}getLabel(){return"Pleroma"}getStatusUrl(){return""}getUserDefinedProperties(){return["userApiUrl","userToken"]}async getProfileUrl(){return Promise.resolve("")}async getAuthUrl(){return Promise.resolve("")}getBaseProfileUrl(){return""}getSongInfo(){return Promise.resolve({})}toggleLove(){return Promise.resolve(L.ERROR_OTHER)}async getSession(){if(!this.userToken)throw new Error(L.ERROR_AUTH);const t={method:"GET",headers:{Authorization:`Bearer ${this.userToken}`}},s=`https://${this.userApiUrl}/api/v1/accounts/verify_credentials`,n=fetch(s,t),r=this.REQUEST_TIMEOUT;let i=null;try{if(i=await Se(r,n),i.status!==200)throw new Error(L.ERROR_AUTH);const o=await i.json(),a=o?o.fqn:"";return{sessionID:this.userToken,sessionName:a}}catch{throw this.debugLog("Error while sending request","error"),new Error(L.ERROR_AUTH)}}isReadyForGrantAccess(){return Promise.resolve(!1)}sendNowPlaying(){return Promise.resolve(L.RESULT_OK)}async sendResumedPlaying(){return Promise.resolve(L.RESULT_OK)}async sendPaused(){return Promise.resolve(L.RESULT_OK)}async scrobble(t){const s=[];for(const n of t.slice(0,50)){const r=this.makeTrackMetadata(n);s.push(this.sendRequest(r,this.userToken))}return Promise.all(s)}async sendRequest(t,s){const n={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(t)},r=`https://${this.userApiUrl}/api/v1/pleroma/scrobble`,i=fetch(r,n),o=this.REQUEST_TIMEOUT;let a=null;try{if(a=await Se(o,i),a.status!==200)return L.ERROR_OTHER}catch{return this.debugLog("Error while sending request","error"),L.ERROR_OTHER}return L.RESULT_OK}makeTrackMetadata(t){const s={artist:t.getArtist()??"",title:t.getTrack()??"",length:t.getDuration(),url:t.parsed.originUrl??""},n=t.getAlbum();return n&&(s.album=n),s}}const We=[new yd,new wd,new Ad,new kd,new Sd,new xd];function an(e,t){return t.some(s=>s.getLabel()===e.getLabel())}class Td{boundScrobblers=[];async bindAllScrobblers(){for(const t of We)try{await t.getSession(),this.bindScrobbler(t)}catch{te(`Unable to bind ${t.getLabel()}`,"warn")}return this.boundScrobblers}bindScrobbler(t){an(t,this.boundScrobblers)||(this.boundScrobblers.push(t),te(`Bind ${t.getLabel()} scrobbler`))}unbindScrobbler(t){if(an(t,this.boundScrobblers)){const s=this.boundScrobblers.indexOf(t);this.boundScrobblers.splice(s,1),te(`Unbind ${t.getLabel()} scrobbler`)}else te(`${t.getLabel()} is not bound`,"error")}getSongInfo(t){const s=We.filter(n=>n.canLoadSongInfo());return te(`Send "get info" request: ${s.length}`),Promise.all(s.map(async n=>{try{return await n.getSongInfo(t)}catch{return te(`Unable to get song info from ${n.getLabel()}`,"warn"),null}}))}sendNowPlaying(t){return te(`Send "now playing" request: ${this.boundScrobblers.length}`),Promise.all(this.boundScrobblers.map(async s=>{try{return await s.sendNowPlaying(s.applyFilter(t))}catch(n){return this.processErrorResult(s,n)}}))}sendPaused(t){const s=this.boundScrobblers.filter(n=>typeof n.sendPaused=="function");return s.length===0?Promise.resolve([L.RESULT_OK]):(te(`Send "paused" request: ${s.length}`),Promise.all(s.map(async n=>{try{return await n.sendPaused(n.applyFilter(t))}catch(r){return this.processErrorResult(n,r)}})))}sendResumedPlaying(t){const s=this.boundScrobblers.filter(n=>typeof n.sendResumedPlaying=="function");return s.length===0?Promise.resolve([L.RESULT_OK]):(te(`Send "paused" request: ${s.length}`),Promise.all(s.map(async n=>{try{return await n.sendResumedPlaying(n.applyFilter(t))}catch(r){return this.processErrorResult(n,r)}})))}async scrobble(t,s){te(`Send "scrobble" request: ${this.boundScrobblers.length}`);const n=await Promise.all(this.boundScrobblers.map(async r=>{try{return await r.scrobble(t.map(r.applyFilter),s)}catch(i){return this.processScrobbleErrorResult(r,i)}}));for(let r=0;r<n[0].length;r++)await at.pushScrobble({song:t[r].getCloneableData(),status:Vc(n,r)});return n}async toggleLove(t,s){const n=We.filter(i=>i.canLoveSong());return te(`Send "${s?"love":"unlove"}" request: ${n.length}`),Promise.all(n.map(async i=>{try{return await i.toggleLove(t,s)}catch(o){return this.processErrorResult(i,o)}}))}getRegisteredScrobblers(){return We}getScrobblerByLabel(t){for(const s of We)if(s.getLabel()===t)return s;return null}async processErrorResult(t,s){const n=s===L.ERROR_OTHER,r=s===L.ERROR_AUTH;if(!(n||r))throw new Error(`Invalid result: ${s}`);return r&&(await t.isReadyForGrantAccess()||this.unbindScrobbler(t)),s}async processScrobbleErrorResult(t,s){const n=s[0]===L.ERROR_OTHER,r=s[0]===L.ERROR_AUTH;if(!(n||r))throw new Error(`Invalid result: ${s[0]}`);return r&&(await t.isReadyForGrantAccess()||this.unbindScrobbler(t)),s}}const Cd=new Td,Ed=f("<h1>"),hs=f("<p>"),Rd=f('<div><a target=_blank rel="noopener noreferrer"></a><button>'),Os=f("<button>"),Ld=f("<div role=group><h2>"),Od=f("<button><div></div>Save"),dr=f("<h3>"),mr=f("<label><input>"),Md=f("<div>"),Pd=f("<div><button>"),Id=f("<span>"),gr={ListenBrainz:{userApiUrl:{type:"text",title:"accountsUserApiUrl",placeholder:"accountsUserApiUrlPlaceholder"},userToken:{type:"password",title:"accountsUserToken",placeholder:"accountsUserTokenPlaceholder"}},Maloja:{userApiUrl:{type:"text",title:"accountsUserApiUrl",placeholder:"accountsUserApiUrlPlaceholder"},userToken:{type:"password",title:"accountsUserToken",placeholder:"accountsUserTokenPlaceholder"}},Pleroma:{userApiUrl:{type:"text",title:"instanceDomain",placeholder:"instanceDomainPlaceholder"},userToken:{type:"password",title:"accountsUserToken",placeholder:"accountsUserTokenPlaceholder"}}},hr={Webhook:{applicationName:{type:"text",title:"accountsApplicationName",placeholder:"accountsApplicationNamePlaceholder"},userApiUrl:{type:"text",title:"accountsUserApiUrl",placeholder:"accountsUserApiUrlPlaceholder"}}};function Dd(){return[(()=>{const e=Ed();return u(e,()=>m("optionsAccounts")),e})(),v(Ee,{label:"Last.fm"}),v(Ee,{label:"Libre.fm"}),v(Ee,{label:"ListenBrainz"}),v(Ee,{label:"Maloja"}),v(Ee,{label:"Webhook"}),v(Ee,{label:"Pleroma"})]}function Ee(e){const t=q(()=>Cd.getScrobblerByLabel(e.label)),[s,n]=X(()=>{const g=t();if(g)return g.getSession()}),[r,i]=X(()=>{const g=t();if(g)return g.getProfileUrl()}),[o,a]=V(!1),l=async()=>{try{await t()?.isReadyForGrantAccess()&&(await t()?.getSession(),n.refetch(),i.refetch())}catch(g){le(`${t()?.getLabel()}: Error while fetching session`,"warn"),le(g,"warn")}},d=()=>{l()};window.addEventListener("focus",d),Gt(()=>window.removeEventListener("focus",d));const c=q(()=>t()?.getLabel());return(()=>{const g=Ld(),S=g.firstChild;return u(S,c),u(g,v(Fs,{get fallback(){return v(Y,{get when(){return!o()},get children(){return v(zd,{get scrobbler(){return t()}})}})},get children(){return[v($t,{get when(){return t()?.isLocalOnly},get children(){return v(Y,{get when(){return Lt(()=>!s.error)()&&s()},get children(){const j=hs();return u(j,()=>m("accountsSignedInAs",s()?.sessionName||"anonymous")),j}})}}),v($t,{get when(){return Lt(()=>!s.error)()&&s()},get children(){return[(()=>{const j=hs();return u(j,()=>m("accountsSignedInAs",s()?.sessionName||"anonymous")),j})(),(()=>{const j=Rd(),E=j.firstChild,T=E.nextSibling;return u(E,()=>m("accountsProfile")),T.$$click=()=>void(async()=>{await t()?.signOut(),n.refetch(),i.refetch()})(),u(T,()=>m("accountsSignOut")),x(D=>{const B=h.buttonContainer,U=h.button,N=r.error?"#":r(),F=h.button;return B!==D._v$&&$(j,D._v$=B),U!==D._v$2&&$(E,D._v$2=U),N!==D._v$3&&M(E,"href",D._v$3=N),F!==D._v$4&&$(T,D._v$4=F),D},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),j})()]}})]}}),null),u(g,v(Fs,{get children(){return[v($t,{get when(){return Lt(()=>!o()&&!t()?.isLocalOnly)()&&(br(t()?.getLabel())||fr(t()?.getLabel()))},get children(){const j=Os();return j.$$click=()=>a(!0),u(j,()=>m("accountsUseLocalInstance")),x(()=>$(j,`${h.button} ${h.marginTop}`)),j}}),v($t,{get when(){return o()||t()?.isLocalOnly},get children(){return[v(Nd,{get scrobbler(){return t()}}),v(Bd,{get scrobbler(){return t()}})]}})]}}),null),x(()=>M(g,"aria-label",c())),g})()}function zd(e){return[(()=>{const t=hs();return u(t,()=>m("accountsNotSignedIn")),t})(),(()=>{const t=Os();return t.$$click=()=>void(async()=>{const s=await e.scrobbler?.getAuthUrl();if(!s)return new Error("No auth URL");await J.tabs.create({url:s})})(),u(t,()=>m("accountsSignIn")),x(()=>$(t,h.button)),t})()]}function Ud(){const[e,t]=V("base"),s={base:uc,saving:Kl,saved:Ln};return(()=>{const n=Od(),r=n.firstChild;return n.$$click=()=>{e()!=="saving"&&(t("saving"),setTimeout(()=>{t("saved")},850))},u(r,v(Tn,{get component(){return s[e()]}})),x(i=>{const o=h.button,a=`${h[`${e()}SaveIcon`]} ${h.saveIcon}`;return o!==i._v$5&&$(n,i._v$5=o),a!==i._v$6&&$(r,i._v$6=a),i},{_v$5:void 0,_v$6:void 0}),n})()}function Nd(e){const[t,s]=X(()=>{if(e.scrobbler)return e.scrobbler.getUserProperties()}),n=q(()=>{const r=e.scrobbler?.getLabel();if(br(r))return r});return v(Y,{get when(){return n()},children:r=>[(()=>{const i=dr();return u(i,()=>m("accountsScrobblerProps")),i})(),v(re,{get each(){return Object.entries(gr[r()])},children:([i,{type:o,title:a,placeholder:l}])=>{const d=i;return(()=>{const c=mr(),g=c.firstChild;return u(c,()=>m(a),g),g.$$input=S=>{const j=e.scrobbler;s.mutate(E=>{let T=E;return T||(T={}),T[d]=S.currentTarget.value,j?.applyUserProperties(T).then(()=>{it({type:"updateScrobblerProperties",payload:void 0})}),T})},M(g,"type",o),x(S=>{const j=h.propLabel,E=h.propInput,T=m(l);return j!==S._v$7&&$(c,S._v$7=j),E!==S._v$8&&$(g,S._v$8=E),T!==S._v$9&&M(g,"placeholder",S._v$9=T),S},{_v$7:void 0,_v$8:void 0,_v$9:void 0}),x(()=>g.value=t()?.[d]||""),c})()}}),v(Ud,{})]})}function Bd(e){const[t,s]=X(()=>{if(e.scrobbler)return e.scrobbler.getArrayProperties()}),n=q(()=>{const i=e.scrobbler?.getLabel();if(fr(i))return i}),r={applicationName:"",userApiUrl:""};return v(Y,{get when(){return n()},children:i=>[(()=>{const o=dr();return u(o,()=>m("accountsScrobblerProps")),o})(),(()=>{const o=Md();return u(o,v(re,{get each(){return t()},children:(a,l)=>(()=>{const d=Pd(),c=d.firstChild;return c.$$click=()=>{const g=e.scrobbler,S=l();s.mutate(j=>{let E=j;return E||(E=[]),E.length<=S||(E=[...E.slice(0,S),...E.slice(S+1)],g?.applyUserArrayProperties(E).then(()=>{it({type:"updateScrobblerProperties",payload:void 0})})),E})},u(c,v(Fe,{})),u(d,v(re,{get each(){return Object.values(a)},children:g=>(()=>{const S=Id();return u(S,g),x(()=>$(S,h.arrayProp)),S})()}),null),x(g=>{const S=h.arrayProps,j=`${h.button} ${h.small} ${h.marginRight}`;return S!==g._v$10&&$(d,g._v$10=S),j!==g._v$11&&$(c,g._v$11=j),g},{_v$10:void 0,_v$11:void 0}),d})()})),x(()=>$(o,h.arrayPropWrapper)),o})(),v(re,{get each(){return Object.entries(hr[i()])},children:([o,{type:a,title:l,placeholder:d}])=>{const c=o;return(()=>{const g=mr(),S=g.firstChild;return u(g,()=>m(l),S),S.$$input=j=>{r[c]=j.currentTarget.value},M(S,"type",a),x(j=>{const E=h.propLabel,T=h.propInput,D=m(d);return E!==j._v$12&&$(g,j._v$12=E),T!==j._v$13&&$(S,j._v$13=T),D!==j._v$14&&M(S,"placeholder",j._v$14=D),j},{_v$12:void 0,_v$13:void 0,_v$14:void 0}),g})()}}),(()=>{const o=Os();return o.$$click=()=>{const a=e.scrobbler;s.mutate(l=>{let d=l;return d||(d=[]),a?.addUserArrayProperties(r).then(()=>{it({type:"updateScrobblerProperties",payload:void 0})}),[...d,r]})},u(o,()=>m("accountsAddWebhook")),x(()=>$(o,h.button)),o})()]})}function br(e){return e?e in gr:!1}function fr(e){return e?e in hr:!1}ge(["click","input"]);const es=f("<button>"),vr=f("<button><input type=file accept=.json>");function Ms(e){return(()=>{const t=es();return t.$$click=s=>{s.stopImmediatePropagation(),e.setActiveModal(e.type),e.modal?.showModal()},u(t,v(Dn,{}),null),u(t,()=>m("optionsViewEdited"),null),x(()=>$(t,`${h.button} ${h.shiftLeft}`)),t})()}function Fd(e){return(()=>{const t=es();return t.$$click=s=>{s.stopImmediatePropagation(),e.setActiveModal(e.type),e.modal?.showModal()},u(t,v(Dn,{}),null),u(t,()=>m("optionsViewEdited"),null),x(()=>$(t,`${h.button} ${h.shiftLeft}`)),t})()}function Ps(e){return(()=>{const t=es();return t.$$click=()=>void Vd(e.editWrapper,e.filename),u(t,v(In,{}),null),u(t,()=>m("optionsExportEdited"),null),x(()=>$(t,`${h.button} ${h.shiftLeft}`)),t})()}function qd(e){return(()=>{const t=es();return t.$$click=()=>void Hd(e.blocklistWrapper,e.connector,e.filename),u(t,v(In,{}),null),u(t,()=>m("optionsExportEdited"),null),x(()=>$(t,`${h.button} ${h.shiftLeft}`)),t})()}async function Hd(e,t,s){const n=await e.get();if(!n||!n[t.id])return;const r=`data:text/json;charset=UTF-8,${encodeURIComponent(JSON.stringify(n[t.id]))}`,i=document.createElement("a");i.download=s,i.href=r,i.click()}async function Vd(e,t){const s=await e.get();if(!s)return;const n=`data:text/json;charset=UTF-8,${encodeURIComponent(JSON.stringify(s))}`,r=document.createElement("a");r.download=t,r.href=n,r.click()}function Gd(e){const[t,s]=V();return(()=>{const n=vr(),r=n.firstChild;return n.$$click=()=>t()?.click(),u(n,v(On,{}),r),u(n,()=>m("optionsImportEdited"),r),r.addEventListener("change",i=>Kd(i,e.blocklistWrapper,e.connector,e.mutate)),Kt(s,r),r.hidden=!0,x(()=>$(n,`${h.button} ${h.shiftLeft}`)),n})()}function Is(e){const[t,s]=V();return(()=>{const n=vr(),r=n.firstChild;return n.$$click=()=>t()?.click(),u(n,v(On,{}),r),u(n,()=>m("optionsImportEdited"),r),r.addEventListener("change",i=>Wd(i,e.editWrapper)),Kt(s,r),r.hidden=!0,x(()=>$(n,`${h.button} ${h.shiftLeft}`)),n})()}function Wd(e,t){const s=e.currentTarget.files?.[0];if(!s)return;const n=new FileReader;n.addEventListener("load",r=>void(async i=>{const o=JSON.parse(i.target?.result),a=await t.get();if(a instanceof Array&&o instanceof Array){const l=[...a??[],...o];t.set(l)}else if(ln(a)&&ln(o)){const l={...a||{},...o};t.set(l)}else if(cn(a)&&cn(o)){const l={...a};for(const[d,c]of Object.entries(o)){if(!(d in l)){l[d]=c;continue}l[d].albums={...l[d].albums,...o[d].albums},l[d].tracks={...l[d].tracks,...o[d].tracks},(l[d].disabled||o[d].disabled)&&(l[d].disabled=!0)}t.set(l)}})(r)),n.readAsText(s)}function ln(e){if(e===null||e instanceof Array)return!1;const t=Object.keys(e);return t.length===0||"artist"in e[t[0]]}function cn(e){if(e===null||e instanceof Array)return!1;const t=Object.keys(e);return t.length===0||"albums"in e[t[0]]}function Kd(e,t,s,n){const r=e.currentTarget.files?.[0];if(!r)return;const i=new FileReader;i.addEventListener("load",o=>void(async a=>{const l=JSON.parse(a.target?.result);let d=await t.get();d||(d={}),d[s.id]||(d[s.id]={}),d[s.id]={...d[s.id],...l},t.set(d),n(d)})(o)),i.readAsText(r)}ge(["click"]);const Jd=f("<h3>"),Yd=f("<p>"),Qd=f("<div role=group>"),Zd=f("<h1>"),Xd=f("<ul>"),em=f("<li><button></button><span>"),lt=W(Zt),[un,{mutate:pr}]=X(lt.get.bind(lt)),[rs,tm]=V();function sm(e){return ps(()=>{tm(e.connector)}),[(()=>{const t=Jd();return u(t,()=>m("optionsBlockedSources")),t})(),(()=>{const t=Yd();return u(t,()=>m("optionsBlockedSourcesDesc")),t})(),(()=>{const t=Qd();return u(t,v(Fd,{get setActiveModal(){return e.setActiveModal},get modal(){return e.modal},type:"blocklist"}),null),u(t,v(qd,{blocklistWrapper:lt,get connector(){return e.connector},get filename(){return`${e.connector.id}-blocklist.json`}}),null),u(t,v(Gd,{blocklistWrapper:lt,get connector(){return e.connector},mutate:pr}),null),x(s=>{const n=h.buttonContainer,r=m("optionsBlockedSources");return n!==s._v$&&$(t,s._v$=n),r!==s._v$2&&M(t,"aria-label",s._v$2=r),s},{_v$:void 0,_v$2:void 0}),t})()]}function j1(){return[(()=>{const e=Zd();return u(e,()=>m("optionsBlockedSourcesPopupTitle",Object.keys(un()?.[rs()?.id??""]??{}).length.toString())),e})(),(()=>{const e=Xd();return u(e,v(re,{get each(){return Object.entries(un()?.[rs()?.id??""]??{})},children:([t,s])=>v(nm,{channelId:t,channelLabel:s,get connector(){return rs()},mutate:pr})})),x(()=>$(e,h.optionList)),e})()]}function nm(e){return(()=>{const t=em(),s=t.firstChild,n=s.nextSibling;return s.$$click=r=>{r.stopPropagation();const i=e.channelId,o=e.connector;e.mutate(a=>!a||!o||!a[o.id]?a:(delete a[o.id][i],lt.set(a),{...a}))},u(s,v(Fe,{})),u(n,()=>e.channelLabel),x(r=>{const i=h.deleteListing,o=`${h.button} ${h.small} ${h.marginRight}`,a=m("optionsDelete",e.channelLabel);return i!==r._v$3&&$(t,r._v$3=i),o!==r._v$4&&$(s,r._v$4=o),a!==r._v$5&&M(s,"title",r._v$5=a),r},{_v$3:void 0,_v$4:void 0,_v$5:void 0}),t})()}ge(["click"]);const rm=f("<h1>"),bs=f("<p>"),im=f("<ul><li>"),om=f("<li><details><summary>"),am=f("<div role=group><h3></h3><h3></h3><h3></h3><p>"),lm=f("<button type=button>"),cm=f("<div><input type=text><button type=button>"),ct=W(we),ve=W(Yt),tt=W(Qt),[_r,fs]=X(ct.get.bind(ct)),[ye,je]=X(ve.get.bind(ve)),[um,is]=X(tt.get.bind(tt));function dm(e){return[(()=>{const t=rm();return u(t,()=>m("optionsSupportedWebsites")),t})(),(()=>{const t=bs();return u(t,()=>m("optionsEnableDisableHint")),t})(),(()=>{const t=bs();return x(()=>t.innerHTML=m("optionsCustomPatternsHint")),t})(),(()=>{const t=im(),s=t.firstChild;return u(s,v(rt,{}),null),u(s,v(Rs,{get title(){return m("optionsToggle")},get label(){return m("optionsToggle")},isChecked:()=>Object.keys(_r()?.disabledConnectors??{}).length<ot.length,onInput:n=>{if(n.currentTarget.checked)fs.mutate(r=>{if(!r)return r;const i={...r,disabledConnectors:{}};return ct.set(i),i});else{const r=Object.fromEntries(ot.map(i=>[i.id,!0]));fs.mutate(i=>{if(!i)return i;const o={...i,disabledConnectors:r};return ct.set(o),o})}}}),null),u(t,v(mm,{get setActiveModal(){return e.setActiveModal},get modal(){return e.modal}}),null),x(()=>$(t,`${h.connectorOptionsList} ${h.optionList}`)),t})()]}function mm(e){return v(kn,{get fallback(){return(()=>{const t=bs();return u(t,()=>m("optionsLoadingConnectorOptions")),t})()},get children(){return v(re,{each:ot,children:t=>v(gm,{get setActiveModal(){return e.setActiveModal},get modal(){return e.modal},connector:t})})}})}function gm(e){const[t,s]=V(),[n,r]=V(!1);return ps(()=>{t()?.addEventListener("toggle",()=>{r(i=>!i)})}),(()=>{const i=om(),o=i.firstChild,a=o.firstChild;return Kt(s,o),u(a,v(Mn,{get class(){return h.expandVector}}),null),u(a,v(ed,{get title(){return e.connector.label},get label(){return e.connector.label},get id(){return e.connector.id},isChecked:()=>!(_r()?.disabledConnectors?.[e.connector.id]??!1),onInput:l=>{const d=e.connector;fs.mutate(c=>{if(!c)return c;const g={...c};return l.currentTarget.checked?delete g.disabledConnectors[d.id]:g.disabledConnectors={...g.disabledConnectors,[d.id]:!0},ct.set(g),g})}}),null),u(o,v(hm,{get setActiveModal(){return e.setActiveModal},get modal(){return e.modal},get connector(){return e.connector},active:n}),null),i})()}function hm(e){return v(Y,{get when(){return e.active()},get children(){const t=am(),s=t.firstChild,n=s.nextSibling,r=n.nextSibling,i=r.nextSibling;return u(s,()=>m("optionsGeneral")),u(t,v(Y,{get when(){return J.notifications},get children(){return[v(Ve,{get title(){return m("optionUseNotificationsTitle")},get label(){return m("optionUseNotifications")},get connector(){return e.connector},option:bt,overrideOptions:ye,setOverrideOptions:je,connectorOverrideOptions:ve}),v(Ve,{get title(){return m("optionUnrecognizedNotificationsTitle")},get label(){return m("optionUnrecognizedNotifications")},get connector(){return e.connector},option:ft,overrideOptions:ye,setOverrideOptions:je,connectorOverrideOptions:ve})]}}),n),u(t,v(Ve,{get title(){return m("optionUseInfoboxTitle")},get label(){return m("optionUseInfobox")},get connector(){return e.connector},option:vt,overrideOptions:ye,setOverrideOptions:je,connectorOverrideOptions:ve}),n),u(t,v(Ve,{get title(){return m("optionScrobblePodcastsTitle")},get label(){return m("optionScrobblePodcasts")},get connector(){return e.connector},option:pt,overrideOptions:ye,setOverrideOptions:je,connectorOverrideOptions:ve}),n),u(t,v(Ve,{get title(){return m("optionAutoToggleLoveTitle")},get label(){return m("optionAutoToggleLove")},get connector(){return e.connector},option:_t,overrideOptions:ye,setOverrideOptions:je,connectorOverrideOptions:ve}),n),u(n,()=>m("optionsScrobbleBehavior")),u(t,v(Ls,{get labelledby(){return`${e.connector.id}-scrobble-behavior`},get buttons(){return[{label:m("optionForceRecognize"),title:m("optionForceRecognizeTitle"),value:se},{label:m("optionScrobbleRecognizedTracks"),title:m("optionScrobbleRecognizedTracksTitle"),value:ie},{label:m("optionScrobbleEditedTracksOnly"),title:m("optionScrobbleEditedTracksOnlyTitle"),value:ne}]},get name(){return`${e.connector.id}-scrobbleBehavior`},value:()=>ye()?.[e.connector.id]?.[se]?se:ye()?.[e.connector.id]?.[ne]?ne:ye()?.[e.connector.id]?.[ie]?ie:"",onChange:o=>{const a=o.currentTarget.value,l=e.connector;je.mutate(d=>{const c={...d??{}};return c[l.id]={...c[l.id]??{},[se]:a===se,[ne]:a===ne,[ie]:a===ie},ve.set(c),c})},reset:()=>{const o=e.connector;je.mutate(a=>{const l={...a??{}};return delete l[o.id][se],delete l[o.id][ne],delete l[o.id][ie],ve.set(l),l})}}),r),u(r,()=>m("customPatterns")),u(i,()=>m("customPatternsHint")),u(t,v(bm,{get connector(){return e.connector}}),null),u(t,v(Y,{get when(){return e.connector.usesBlocklist},get children(){return v(sm,{get setActiveModal(){return e.setActiveModal},get modal(){return e.modal},get connector(){return e.connector}})}}),null),x(o=>{const a=e.connector.label,l=`${e.connector.id}-scrobble-behavior`;return a!==o._v$&&M(t,"aria-label",o._v$=a),l!==o._v$2&&M(n,"id",o._v$2=l),o},{_v$:void 0,_v$2:void 0}),t}})}function bm(e){return[v(re,{get each(){return um()?.[e.connector.id]??[]},children:(t,s)=>(()=>{const n=cm(),r=n.firstChild,i=r.nextSibling;return r.$$input=o=>{const a=e.connector,l=s();is.mutate(d=>{let c=d;return c||(c={}),c[a.id]=[...c[a.id]??[]],c[a.id][l]=o.currentTarget.value,tt.set(c),c})},r.value=t,i.$$click=()=>{const o=e.connector,a=s();is.mutate(l=>{const d={...l??{}};return d[o.id]=[...d[o.id]??[]],d[o.id].splice(a,1),tt.set(d),d})},u(i,v(Fe,{})),x(o=>{const a=h.patternWrapper,l=h.patternInput,d=`${h.button} ${h.small} ${h.noRadius}`;return a!==o._v$3&&$(n,o._v$3=a),l!==o._v$4&&$(r,o._v$4=l),d!==o._v$5&&$(i,o._v$5=d),o},{_v$3:void 0,_v$4:void 0,_v$5:void 0}),n})()}),(()=>{const t=lm();return t.$$click=()=>{const s=e.connector;is.mutate(n=>{const r={...n??{}};return r[s.id]=[...r[s.id]??[]],r[s.id].push(""),tt.set(r),r})},u(t,v(Wl,{}),null),u(t,()=>m("customPatternsAdd"),null),x(()=>$(t,`${h.button} ${h.shiftLeft}`)),t})()]}ge(["click","input"]);const fm=f("<h2>"),vm=f("<p>"),pm=f("<div role=group>"),_m=f("<h1>"),ym=f("<ul>"),wm=f("<li><button></button><span>"),ut=W(ze);function $m(e){return[(()=>{const t=fm();return u(t,()=>m("optionsEditedTracks")),t})(),(()=>{const t=vm();return u(t,()=>m("optionsEditedTracksDesc")),t})(),(()=>{const t=pm();return u(t,v(Ms,{get setActiveModal(){return e.setActiveModal},get modal(){return e.modal},type:"savedEdits"}),null),u(t,v(Ps,{editWrapper:ut,filename:"local-cache.json"}),null),u(t,v(Is,{editWrapper:ut}),null),x(s=>{const n=h.buttonContainer,r=m("optionsEditedTracks");return n!==s._v$&&$(t,s._v$=n),r!==s._v$2&&M(t,"aria-label",s._v$2=r),s},{_v$:void 0,_v$2:void 0}),t})()]}function A1(){const[e,{mutate:t}]=X(ut.get.bind(ut));return[(()=>{const s=_m();return u(s,()=>m("optionsEditedTracksPopupTitle",Object.keys(e()??{}).length.toString())),s})(),(()=>{const s=ym();return u(s,v(re,{get each(){return Object.entries(e()??{})},children:([n,r])=>v(jm,{key:n,track:r,mutate:t})})),x(()=>$(s,h.optionList)),s})()]}function jm(e){const t=q(()=>`${e.track.artist} - ${e.track.track}`);return(()=>{const s=wm(),n=s.firstChild,r=n.nextSibling;return n.$$click=i=>{i.stopPropagation();const o=e.key;e.mutate(a=>a&&(delete a[o],ut.set(a),{...a}))},u(n,v(Fe,{})),u(r,t),x(i=>{const o=h.deleteListing,a=`${h.button} ${h.small} ${h.marginRight}`,l=m("optionsDelete",t());return o!==i._v$3&&$(s,i._v$3=o),a!==i._v$4&&$(n,i._v$4=a),l!==i._v$5&&M(n,"title",i._v$5=l),i},{_v$3:void 0,_v$4:void 0,_v$5:void 0}),s})()}ge(["click"]);const Am=f("<h2>"),km=f("<p>"),Sm=f("<div role=group>"),xm=f("<h1>"),Tm=f("<ul>"),Cm=f("<li><button></button><div><span></span><span>"),Em=f("<div>"),os=f("<span>"),dt=W(xs);function Rm(e){return[(()=>{const t=Am();return u(t,()=>m("optionsRegexEdits")),t})(),(()=>{const t=km();return u(t,()=>m("optionsRegexEditsDesc")),t})(),(()=>{const t=Sm();return u(t,v(Ms,{get setActiveModal(){return e.setActiveModal},get modal(){return e.modal},type:"regexEdits"}),null),u(t,v(Ps,{editWrapper:dt,filename:"regex-edits.json"}),null),u(t,v(Is,{editWrapper:dt}),null),x(s=>{const n=h.buttonContainer,r=m("optionsRegexEdits");return n!==s._v$&&$(t,s._v$=n),r!==s._v$2&&M(t,"aria-label",s._v$2=r),s},{_v$:void 0,_v$2:void 0}),t})()]}function k1(){const[e,{mutate:t}]=X(dt.get.bind(dt));return[(()=>{const s=xm();return u(s,()=>m("optionsRegexEditsPopupTitle",(e()??[]).length.toString())),s})(),(()=>{const s=Tm();return u(s,v(re,{get each(){return[...(e()??[]).entries()]},children:([n,r])=>v(Lm,{index:n,edit:r,mutate:t})})),x(()=>$(s,h.optionList)),s})()]}function Lm(e){const t=q(()=>`${e.edit.search.track}  ${e.edit.replace.track};${e.edit.search.artist}  ${e.edit.replace.artist};${e.edit.search.album}  ${e.edit.replace.album};${e.edit.search.albumArtist}  ${e.edit.replace.albumArtist}`);return(()=>{const s=Cm(),n=s.firstChild,r=n.nextSibling,i=r.firstChild,o=i.nextSibling;return n.$$click=a=>{a.stopPropagation();const l=e.index;e.mutate(d=>{if(!d)return d;const c=d.filter((g,S)=>S!==l);return dt.set(c),c})},u(n,v(Fe,{})),u(i,()=>m("infoSearchLabel")),u(o,()=>m("infoReplaceLabel")),u(r,v(Tt,{get edit(){return e.edit},type:"track"}),null),u(r,v(Tt,{get edit(){return e.edit},type:"artist"}),null),u(r,v(Tt,{get edit(){return e.edit},type:"album"}),null),u(r,v(Tt,{get edit(){return e.edit},type:"albumArtist"}),null),u(r,v(Om,{get edit(){return e.edit}}),null),x(a=>{const l=h.deleteListing,d=`${h.button} ${h.small} ${h.marginRight}`,c=t(),g=h.regexDeleteContent,S=h.regexDeleteSearchLabel,j=h.regexDeleteReplaceLabel;return l!==a._v$3&&$(s,a._v$3=l),d!==a._v$4&&$(n,a._v$4=d),c!==a._v$5&&M(n,"title",a._v$5=c),g!==a._v$6&&$(r,a._v$6=g),S!==a._v$7&&$(i,a._v$7=S),j!==a._v$8&&$(o,a._v$8=j),a},{_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0}),s})()}function Om(e){return(()=>{const t=Em();return u(t,v(Y,{get when(){return!e.edit.isRegexDisabled},get children(){return v(ac,{get title(){return m("infoUseRegex")},get class(){return h.regexEditEntry}})}}),null),u(t,v(Y,{get when(){return!e.edit.isCaseInsensitive},get children(){return v(Jl,{get title(){return m("infoMatchCase")},get class(){return h.regexEditEntry}})}}),null),u(t,v(Y,{get when(){return!e.edit.isGlobal},get children(){return v(fc,{get title(){return m("infoMatchWholeTag")},get class(){return h.regexEditEntry}})}}),null),x(()=>$(t,h.regexDeleteFlags)),t})()}function Tt(e){return[(()=>{const t=os();return u(t,()=>m(`info${Ye(e.type)}Label`)),x(()=>$(t,`${h[`regexDelete${Ye(e.type)}Label`]} ${h.regexEditEntry}`)),t})(),(()=>{const t=os();return u(t,()=>e.edit.search[e.type]),x(()=>$(t,`${h[`regexDelete${Ye(e.type)}Search`]} ${h.regexEditEntry}`)),t})(),(()=>{const t=os();return u(t,()=>e.edit.replace[e.type]),x(()=>$(t,`${h[`regexDelete${Ye(e.type)}Replace`]} ${h.regexEditEntry}`)),t})()]}ge(["click"]);const Mm=f("<h2>"),Pm=f("<p>"),Im=f("<div>"),Dm=f("<h1>"),zm=f("<ul>"),Um=f("<span>: "),dn=f("<span>: <!> - "),Nm=f("<li><button>"),mt=W(As);function Bm(e){return[(()=>{const t=Mm();return u(t,()=>m("optionsBlockedTags")),t})(),(()=>{const t=Pm();return u(t,()=>m("optionsBlockedTagsDesc")),t})(),(()=>{const t=Im();return u(t,v(Ms,{get setActiveModal(){return e.setActiveModal},get modal(){return e.modal},type:"blockedTags"}),null),u(t,v(Ps,{editWrapper:mt,filename:"blocked-tags.json"}),null),u(t,v(Is,{editWrapper:mt}),null),x(()=>$(t,h.buttonContainer)),t})()]}function S1(){const[e,{mutate:t}]=X(mt.get.bind(mt)),s=q(()=>{const n=e(),r=[];if(!n)return r;for(const[i,o]of Object.entries(n)){o.disabled&&r.push({type:"artist",artist:i});for(const a of Object.keys(o.albums))r.push({type:"album",artist:i,album:a});for(const a of Object.keys(o.tracks))r.push({type:"track",artist:i,track:a})}return r});return[(()=>{const n=Dm();return u(n,()=>m("optionsBlockedTagsPopupTitle",s().length.toString())),n})(),(()=>{const n=zm();return u(n,v(re,{get each(){return s()},children:r=>v(qm,{tag:r,mutate:t})})),x(()=>$(n,h.optionList)),n})()]}function Fm(e){switch(e.type){case"artist":return(()=>{const t=Um(),s=t.firstChild;return u(t,()=>m("infoArtistLabel"),s),u(t,()=>e.artist,null),t})();case"album":return(()=>{const t=dn(),s=t.firstChild,n=s.nextSibling;return n.nextSibling,u(t,()=>m("infoAlbumLabel"),s),u(t,()=>e.artist,n),u(t,()=>e.album,null),t})();case"track":return(()=>{const t=dn(),s=t.firstChild,n=s.nextSibling;return n.nextSibling,u(t,()=>m("infoTrackLabel"),s),u(t,()=>e.artist,n),u(t,()=>e.track,null),t})()}}function qm(e){return(()=>{const t=Nm(),s=t.firstChild;return s.$$click=n=>{n.stopPropagation();const r=e.tag;e.mutate(i=>i&&(r.type==="artist"?delete i[r.artist].disabled:r.type==="album"?delete i[r.artist].albums[r.album]:delete i[r.artist].tracks[r.track],mt.set(i),{...i}))},u(s,v(Fe,{})),u(t,v(Tn,{component:()=>Fm(e.tag)}),null),x(n=>{const r=h.deleteListing,i=`${h.button} ${h.small} ${h.marginRight}`;return r!==n._v$&&$(t,n._v$=r),i!==n._v$2&&$(s,n._v$2=i),n},{_v$:void 0,_v$2:void 0}),t})()}ge(["click"]);const Hm=f("<h1>");function Vm(e){return[(()=>{const t=Hm();return u(t,()=>m("optionsEdits")),t})(),v($m,{get setActiveModal(){return e.setActiveModal},get modal(){return e.modal}}),v(Rm,{get setActiveModal(){return e.setActiveModal},get modal(){return e.modal}}),v(Bm,{get setActiveModal(){return e.setActiveModal},get modal(){return e.modal}})]}const yr=f("<h1>"),Ds=f("<button>"),Gm=f("<div><button></button><button>"),wr=f("<div>"),Wm=f("<table><tbody><tr><td><label for=scrobble-cache-edit-track></label></td><td><input type=text id=scrobble-cache-edit-track></td></tr><tr><td><label for=scrobble-cache-edit-artist></label></td><td><input type=text id=scrobble-cache-edit-artist></td></tr><tr><td><label for=scrobble-cache-edit-album></label></td><td><input type=text id=scrobble-cache-edit-album></td></tr><tr><td><label for=scrobble-cache-edit-album-artist></label></td><td><input type=text id=scrobble-cache-edit-album-artist>"),Km=f("<input id=should-edit-multiple type=checkbox>"),Jm=f("<label for=should-edit-multiple>"),Ym=f("<details><summary><span>"),Qm=f("<label>"),Zm=f("<input type=checkbox>"),Xm=f("<img>"),eg=f("<div><div><span></span><span></span><span></span><span>"),tg=f("<span>"),sg=f("<div><button>"),[Ft,zs]=X(at.getScrobbleCacheStorage.bind(at)),[Ze,ng]=V(),[rg,ig]=V(),[qt,as]=V(!1),[Ct,Pe]=V([]),[og,mn]=V(!1);function ag(e){return[(()=>{const t=yr();return u(t,()=>m("optionsScrobbleCache")),t})(),(()=>{const t=Gm(),s=t.firstChild,n=s.nextSibling;return s.$$click=()=>{const r=document.querySelectorAll(`.${h.scrobbleCheckbox}`);Ct().length?(r.forEach(i=>{i.checked=!1}),Pe([])):(as(!0),r.forEach(i=>{i.checked=!0}),Pe((Ft()??[]).filter(i=>i.status!==ce.SUCCESSFUL)))},u(s,(()=>{const r=Lt(()=>!!Ct().length);return()=>r()?m("optionsScrobbleCacheUnselectAll"):m("optionsScrobbleCacheSelectAll")})()),n.$$click=()=>as(r=>{const i=!r;return i||(document.querySelectorAll(`.${h.scrobbleCheckbox}`).forEach(o=>{o.checked=!1}),Pe([])),i}),u(n,()=>m("optionsScrobbleCacheSelectScrobbles")),u(t,v(Y,{get when(){return qt()},get children(){const r=Ds();return r.$$click=()=>{mn(!0),jr(Ct()).then(()=>{zs.refetch(),Pe([]),as(!1),mn(!1)})},u(r,()=>m("optionsScrobbleCacheScrobbleSelected")),x(i=>{const o=h.button,a=og()||Ct().length===0;return o!==i._v$&&$(r,i._v$=o),a!==i._v$2&&(r.disabled=i._v$2=a),i},{_v$:void 0,_v$2:void 0}),r}}),null),x(r=>{const i=h.scrobbleButtonsWrapper,o=h.button,a=h.button;return i!==r._v$3&&$(t,r._v$3=i),o!==r._v$4&&$(s,r._v$4=o),a!==r._v$5&&$(n,r._v$5=a),r},{_v$3:void 0,_v$4:void 0,_v$5:void 0}),t})(),(()=>{const t=wr();return u(t,v(kn,{get fallback(){return m("optionsScrobbleCacheLoading")},get children(){return[v(Ke,{title:"optionsScrobbleCacheUnrecognized",get type(){return ce.INVALID},get setActiveModal(){return e.setActiveModal},get modal(){return e.modal}}),v(Ke,{title:"optionsScrobbleCacheDisallowed",get type(){return ce.DISALLOWED},get setActiveModal(){return e.setActiveModal},get modal(){return e.modal}}),v(Ke,{title:"optionsScrobbleCacheIgnored",get type(){return ce.IGNORED},get setActiveModal(){return e.setActiveModal},get modal(){return e.modal}}),v(Ke,{title:"optionsScrobbleCacheError",get type(){return ce.ERROR},get setActiveModal(){return e.setActiveModal},get modal(){return e.modal}}),v(Ke,{title:"optionsScrobbleCacheSuccess",get type(){return ce.SUCCESSFUL},get setActiveModal(){return e.setActiveModal},get modal(){return e.modal}})]}})),x(()=>$(t,h.scrobbleCacheList)),t})()]}function x1(){const[e,t]=V(Ze()?.getTrack()??""),[s,n]=V(Ze()?.getArtist()??""),[r,i]=V(Ze()?.getAlbum()??""),[o,a]=V(Ze()?.getAlbumArtist()??""),[l,d]=V(!1);return[(()=>{const c=yr();return u(c,()=>m("infoEditTitle")),c})(),(()=>{const c=Wm(),g=c.firstChild,S=g.firstChild,j=S.firstChild,E=j.firstChild,T=j.nextSibling,D=T.firstChild,B=S.nextSibling,U=B.firstChild,N=U.firstChild,F=U.nextSibling,p=F.firstChild,y=B.nextSibling,b=y.firstChild,C=b.firstChild,R=b.nextSibling,I=R.firstChild,O=y.nextSibling,w=O.firstChild,_=w.firstChild,A=w.nextSibling,k=A.firstChild;return u(E,()=>m("infoTrackPlaceholder")),D.$$keydown=K=>{Et(K,s(),e(),r(),o(),d)},D.$$input=K=>t(K.currentTarget.value),u(N,()=>m("infoArtistPlaceholder")),p.$$keydown=K=>{Et(K,s(),e(),r(),o(),d)},p.$$input=K=>n(K.currentTarget.value),u(C,()=>m("infoAlbumPlaceholder")),I.$$keydown=K=>{Et(K,s(),e(),r(),o(),d)},I.$$input=K=>i(K.currentTarget.value),u(_,()=>m("infoAlbumArtistPlaceholder")),k.$$keydown=K=>{Et(K,s(),e(),r(),o(),d)},k.$$input=K=>a(K.currentTarget.value),x(()=>$(c,h.editTable)),x(()=>D.value=e()),x(()=>p.value=s()),x(()=>I.value=r()),x(()=>k.value=o()),c})(),(()=>{const c=Km();return c.checked=!0,c})(),(()=>{const c=Jm();return u(c,()=>m("optionsScrobbleCacheEditAll")),c})(),(()=>{const c=Ds();return c.$$click=g=>{$r(g,s(),e(),r(),o(),d)},u(c,()=>m("buttonScrobble")),x(g=>{const S=!e()||!s()||l(),j=h.button;return S!==g._v$6&&(c.disabled=g._v$6=S),j!==g._v$7&&$(c,g._v$7=j),g},{_v$6:void 0,_v$7:void 0}),c})()]}function lg(e,t){const s=(e-Date.now())/1e3;let n=s/31536e3;const r=new Intl.RelativeTimeFormat(Intl.DateTimeFormat().resolvedOptions().locale,{style:t?"short":"long"});return Math.abs(n)>1?r.format(Math.floor(n),"year"):(n=s/2629744,Math.abs(n)>1?r.format(Math.floor(n),"month"):(n=s/604800,Math.abs(n)>1?r.format(Math.floor(n),"week"):(n=s/86400,Math.abs(n)>1?r.format(Math.floor(n),"day"):(n=s/3600,Math.abs(n)>1?r.format(Math.floor(n),"hour"):(n=s/60,Math.abs(n)>1?r.format(Math.floor(n),"minute"):r.format(Math.floor(s),"second"))))))}function Ke(e){const t=q(()=>Ft()?.slice().reverse().filter(s=>s.status===e.type));return v(Y,{get when(){return t()?.length},get children(){const s=Ym(),n=s.firstChild,r=n.firstChild;return u(n,v(Mn,{get class(){return h.expandVector}}),r),u(r,()=>m(e.title)),u(s,v(re,{get each(){return t()},children:i=>v(cg,{scrobble:i,get type(){return e.type},get title(){return e.title},get setActiveModal(){return e.setActiveModal},get modal(){return e.modal}})}),null),x(()=>$(r,h.summarySpan)),s}})}function cg(e){return v(Y,{get when(){return e.type===ce.SUCCESSFUL},get fallback(){return(()=>{const t=Qm();return t.$$click=s=>{qt()||s.preventDefault()},u(t,v(gn,{get scrobble(){return e.scrobble},get type(){return e.type},get title(){return e.title},get setActiveModal(){return e.setActiveModal},get modal(){return e.modal}})),x(()=>$(t,`${h.scrobble}${qt()?` ${h.selectingScrobble}`:""}`)),t})()},get children(){const t=wr();return u(t,v(gn,{get scrobble(){return e.scrobble},get type(){return e.type},get title(){return e.title},get setActiveModal(){return e.setActiveModal},get modal(){return e.modal}})),x(()=>$(t,h.scrobble)),t}})}function gn(e){const t=q(()=>new lr(e.scrobble.song,-1)),s=q(()=>new Date(t().metadata.startTimestamp*1e3).toLocaleString()),[n,r]=V(window.innerWidth<600),i=()=>{r(window.innerWidth<600)},o=q(()=>lg(t().metadata.startTimestamp*1e3,n()));return _s(()=>{window.addEventListener("resize",i)}),Gt(()=>{window.removeEventListener("resize",i)}),[v(Y,{get when(){return e.scrobble.status!==ce.SUCCESSFUL},get children(){const a=Zm();return a.addEventListener("change",l=>{l.currentTarget.checked?Pe(d=>[...d,e.scrobble]):Pe(d=>d.filter(c=>c.id!==e.scrobble.id))}),x(l=>{const d=h.scrobbleCheckbox,c=e.type===ce.SUCCESSFUL||!qt();return d!==l._v$8&&$(a,l._v$8=d),c!==l._v$9&&(a.hidden=l._v$9=c),l},{_v$8:void 0,_v$9:void 0}),a}}),(()=>{const a=Xm();return x(l=>{const d=h.coverArt,c=t().getTrackArt()??J.runtime.getURL("img/cover_art_default.png");return d!==l._v$10&&$(a,l._v$10=d),c!==l._v$11&&M(a,"src",l._v$11=c),l},{_v$10:void 0,_v$11:void 0}),a})(),(()=>{const a=eg(),l=a.firstChild,d=l.firstChild,c=d.nextSibling,g=c.nextSibling,S=g.nextSibling;return u(d,()=>t().getTrack()),u(c,()=>t().getArtist()),u(g,()=>t().getAlbum()),u(S,()=>t().getAlbumArtist()),u(a,v(ug,{get song(){return t()},get id(){return e.scrobble.id},get status(){return e.scrobble.status},get setActiveModal(){return e.setActiveModal},get modal(){return e.modal}}),null),x(j=>{const E=h.scrobbleDetails,T=h.scrobbleMetadata,D=h.trackName,B=h.artistName,U=h.albumName,N=h.albumArtistName;return E!==j._v$12&&$(a,j._v$12=E),T!==j._v$13&&$(l,j._v$13=T),D!==j._v$14&&$(d,j._v$14=D),B!==j._v$15&&$(c,j._v$15=B),U!==j._v$16&&$(g,j._v$16=U),N!==j._v$17&&$(S,j._v$17=N),j},{_v$12:void 0,_v$13:void 0,_v$14:void 0,_v$15:void 0,_v$16:void 0,_v$17:void 0}),a})(),(()=>{const a=tg();return u(a,o),x(l=>{const d=h.scrobbleDate,c=s();return d!==l._v$18&&$(a,l._v$18=d),c!==l._v$19&&M(a,"title",l._v$19=c),l},{_v$18:void 0,_v$19:void 0}),a})()]}function ug(e){return(()=>{const t=sg(),s=t.firstChild;return u(t,v(Y,{get when(){return e.status!==ce.SUCCESSFUL},get children(){const n=Ds();return n.$$click=r=>{r.stopImmediatePropagation(),ng(e.song),ig(e.id),e.setActiveModal("cacheEdit"),e.modal?.showModal()},u(n,()=>m("infoEditTitleShort")),x(()=>$(n,h.scrobbleActionButton)),n}}),s),s.$$click=()=>{at.deleteScrobbles([e.id]).then(()=>{zs.refetch()})},u(s,()=>m("buttonRemove")),x(n=>{const r=h.scrobbleActions,i=h.scrobbleActionButton;return r!==n._v$20&&$(t,n._v$20=r),i!==n._v$21&&$(s,n._v$21=i),n},{_v$20:void 0,_v$21:void 0}),t})()}function Et(e,t,s,n,r,i){e.key==="Enter"&&!e.isComposing&&t&&s&&$r(e,t,s,n,r,i)}function $r(e,t,s,n,r,i){i(!0);const o=document.getElementById("should-edit-multiple").checked;dg(Ze(),t,s,n,r,o).then(()=>{i(!1),zs.refetch(),e.target.closest("dialog")?.close()})}async function dg(e,t,s,n,r,i){if(!t||!s||!e)return;const o=rg()??-1;i&&du.saveSongInfo(e,{artist:t,track:s,album:n||null,albumArtist:r||null});const a=ue.getSongId(e),d=(i?Ft()?.filter(c=>c.status!==ce.SUCCESSFUL&&ue.getSongId(new lr(c.song,-1))===a):Ft()?.filter(c=>c.id===o))?.map(c=>(c.song.processed.track=s,c.song.processed.artist=t,c.song.processed.album=n,c.song.processed.albumArtist=r,c));await jr(d??[])}async function jr(e){const t=e.slice(0,50);await at.deleteScrobbles(t.map(s=>s.id));try{await it({type:"scrobble",payload:{songs:t.map(s=>s.song),currentlyPlaying:!1}})}catch(s){te(s,"error")}}ge(["click","input","keydown"]);const mg=f("<h1>"),gg=f("<ul><li>"),hg=f("<h2 id=header-album-guessing>"),gt=W(we),[Ht,vs]=X(gt.get.bind(gt));function bg(){return[(()=>{const e=mg();return u(e,()=>m("optionsAdvanced")),e})(),(()=>{const e=gg(),t=e.firstChild;return u(e,v(Le,{options:Ht,setOptions:vs,globalOptions:gt,i18ntitle:"optionDebugLoggingEnabledTitle",i18nlabel:"optionDebugLoggingEnabled",key:Cs}),t),u(e,v(td,{options:Ht,setOptions:vs,globalOptions:gt,numberType:"percent",prefixi18n:"optionScrobblePercent",suffixi18n:"optionScrobblePercentSuffix",min:10,max:100,key:Ts}),t),u(t,()=>m("optionPercentDesc")),x(s=>{const n=h.optionList,r=h.muted;return n!==s._v$&&$(e,s._v$=n),r!==s._v$2&&$(t,s._v$2=r),s},{_v$:void 0,_v$2:void 0}),e})(),v(fg,{})]}function fg(){return[(()=>{const e=hg();return u(e,()=>m("optionsAlbumGuessing")),e})(),v(Ls,{get buttons(){return[{label:m("optionAlbumGuessingDisabled"),title:m("optionAlbumGuessingDisabledTitle"),value:Oe},{label:m("optionAlbumGuessingUneditedOnly"),title:m("optionAlbumGuessingUneditedOnlyTitle"),value:Ae},{label:m("optionAlbumGuessingAllTracks"),title:m("optionAlbumGuessingAllTracksTitle"),value:ke}]},name:"albumGuessing",value:()=>Ht()?.[ke]?ke:Ht()?.[Ae]?Ae:Oe,onChange:e=>{const t=e.currentTarget.value;vs.mutate(s=>{if(!s)return s;const n={...s,[ke]:t===ke,[Ae]:t===Ae,[Oe]:t===Oe};return gt.set(n),n})},labelledby:"header-album-guessing"})]}const vg={namei18n:"optionsAccounts",icon:rc,element:Dd},pg={namei18n:"optionsOptions",icon:rt,element:pd},_g={namei18n:"optionsScrobbleCache",icon:lc,element:ag},yg={namei18n:"optionsEdits",icon:Zl,element:Vm},wg={namei18n:"optionsConnectors",icon:Xl,element:dm},$g={namei18n:"optionsAdvanced",icon:hc,element:bg},jg={namei18n:"optionsOptions",icon:rt,group:[pg,_g,yg,wg,$g]},Ag={namei18n:"contactTitle",icon:Ql,element:Gu},kg={namei18n:"faqTitle",icon:tc,element:Bu},Sg={namei18n:"optionsAbout",icon:Pn,element:Pu},xg={namei18n:"optionsAbout",icon:Pn,group:[Ag,kg,Sg]},Tg={namei18n:"showSomeLoveTitle",icon:ec,element:zu},T1=[vg,jg,xg,Tg];async function Cg(){const e=await xu();if(e.mode===ds)return[];const t=[];e.mode===pc?t.push({namei18n:"menuEnableConnector",icon:gc,action:()=>{Eu(e.tabId)}}):t.push({namei18n:"menuDisableConnector",icon:mc,action:()=>{Cu(e.tabId)}},{namei18n:"menuDisableUntilTabClosed",icon:dc,action:()=>{Ou(e.tabId)}});const s=await wu(e.tabId);return!s||!s.channelInfo?.id||!s.connector||(await $u(s.channelInfo.id,s.connector)?t.push({namei18n:"menuEnableChannel",i18nSubstitution:s.channelInfo.label,icon:oc,action:()=>{Lu(e.tabId)}}):t.push({namei18n:"menuDisableChannel",i18nSubstitution:s.channelInfo.label,icon:ic,action:()=>{Ru(e.tabId)}})),t}async function C1(){const e={namei18n:"optionsOptions",icon:rt,group:[{namei18n:"optionsOptions",icon:rt,action:()=>{J.tabs.create({url:J.runtime.getURL("src/ui/options/index.html")})}}]},t=await Cg();return e.group.push(...t),e}function Eg(e,t){"group"in e||("element"in e?t(e):e.action())}function Rg(e){return!("group"in e)}const Lg="_contextMenu_1bkio_1",Og="_contextMenuItem_1bkio_6",Mg="_activeDialogButton_1bkio_13",Pg="_contextMenuDialog_1bkio_34",Ig="_leftDialog_1bkio_82",Dg="_rightDialog_1bkio_87",zg="_mountedAnimation_1bkio_97",ae={contextMenu:Lg,contextMenuItem:Og,activeDialogButton:Mg,contextMenuDialog:Pg,leftDialog:Ig,rightDialog:Dg,mountedAnimation:zg},Ug=f("<div>"),Ng=f("<button><label>"),Bg=f("<dialog>");function hn(e){if(!(e.target instanceof Element))return;const t=e.target.closest(`.${ae.contextMenuItem}`),s=t?.nextElementSibling;let n=!0;s instanceof HTMLDialogElement&&(n=s.open),document.querySelectorAll("dialog").forEach(o=>{o.close()}),document.querySelectorAll(`.${ae.activeDialogButton}`).forEach(o=>{o.classList.remove(ae.activeDialogButton)}),!(!(s instanceof HTMLDialogElement)||n)&&(s.show(),t?.classList.add(ae.activeDialogButton))}function E1(e){return _s(()=>(window.addEventListener("click",hn),()=>window.removeEventListener("click",hn))),(()=>{const t=Ug();return u(t,v(Ar,{get items(){return e.items},get setActiveSetting(){return e.setActiveSetting}})),x(()=>$(t,ae.contextMenu)),t})()}function Ar(e){return v(re,{get each(){return e.items},children:(t,s)=>v(Fg,{index:s,get length(){return e.items.length},item:t,get setActiveSetting(){return e.setActiveSetting}})})}function Fg(e){const[t,s]=V(!1),n=q(()=>e.length===1?ae.centerDialog:e.index()===0?ae.leftDialog:e.index()===e.length-1?ae.rightDialog:ae.centerDialog);return _s(()=>{setTimeout(()=>{s(!0)},1e3)}),[(()=>{const r=Ng(),i=r.firstChild;return r.$$click=()=>{e.setActiveSetting&&"element"in e.item&&Eg(e.item,e.setActiveSetting),"action"in e.item&&e.item.action()},u(r,v(e.item.icon,{}),i),u(i,()=>m(e.item.namei18n,e.item.i18nSubstitution)),x(()=>$(r,ae.contextMenuItem)),r})(),v(Y,{get when(){return!Rg(e.item)},get children(){const r=Bg();return u(r,v(Ar,{get items(){return e.item.group},get setActiveSetting(){return e.setActiveSetting}})),x(()=>$(r,`${ae.contextMenuDialog} ${n()} ${t()&&`${ae.mountedAnimation}`}`)),r}})]}ge(["click"]);export{Pt as $,X as A,As as B,nr as C,ps as D,Mn as E,re as F,Kt as G,r1 as H,s1 as I,o1 as J,Jg as K,Kg as L,n1 as M,C1 as N,Ln as O,a1 as P,E1 as Q,xs as R,Y as S,_1 as T,be as U,ac as V,Jl as W,fc as X,At as Y,bu as Z,w1 as _,$ as a,Ye as a0,$t as a1,or as a2,Yl as a3,Fs as a4,Zg as a5,Fe as a6,lr as a7,Gt as a8,l1 as a9,ds as aA,Tn as aB,pc as aC,_c as aD,yc as aE,vc as aF,d1 as aG,h1 as aH,Eg as aI,Rg as aJ,wg as aK,vg as aL,Tg as aM,T1 as aN,S1 as aO,x1 as aP,j1 as aQ,k1 as aR,A1 as aS,Xg as aa,du as ab,Zl as ac,$c as ad,cc as ae,Yg as af,v1 as ag,qn as ah,f1 as ai,ec as aj,Cd as ak,p1 as al,t1 as am,Ac as an,m1 as ao,c1 as ap,Qg as aq,Wg as ar,g1 as as,xu as at,b1 as au,jc as av,wc as aw,kc as ax,Sc as ay,xc as az,V as b,x as c,ge as d,m as e,v as f,J as g,u1 as h,u as i,jt as j,y1 as k,$1 as l,ht as m,W as n,_s as o,i1 as p,Lt as q,rt as r,M as s,f as t,h as u,e1 as v,qg as w,xr as x,Hg as y,q as z};
